[{"title":"IDEA开发工具入门","url":"/p/5708.html","content":"<h2 id=\"导学\"><a href=\"#导学\" class=\"headerlink\" title=\"导学\"></a>导学</h2><p>◇IntelliJ IDEA开发工具<br>![image.png](IntelliJ IDEA开发工具入门/1627031307362-df459f62-a437-412b-98d4-032af338ced4.png)<br>◇JDBC<br>![image.png](IntelliJ IDEA开发工具入门/1627031379177-38c40c23-926b-4f28-b27e-d9b05895bdf0.png)</p>\n<p>◇数据库连接池与DBUtils<br>![image.png](IntelliJ IDEA开发工具入门/1627031423402-2d5357f4-8868-460e-bdf3-e131bba797d5.png)</p>\n<h2 id=\"IDEA开发工具入门\"><a href=\"#IDEA开发工具入门\" class=\"headerlink\" title=\"IDEA开发工具入门\"></a>IDEA开发工具入门</h2><h3 id=\"IntelliJ-IDEA\"><a href=\"#IntelliJ-IDEA\" class=\"headerlink\" title=\"IntelliJ IDEA\"></a>IntelliJ IDEA</h3><p>◇IDEA全称IntelliJ IDEA ,是Java编程公认的最好的IDE<br>◇IDEA提供了大量的智能工具，例如语法提示，代码分析，格式化等<br>◇IDEA最核心的特色是它的快捷键，利用快捷键可以极大提高开发效率</p>\n<h3 id=\"IDEA的特点\"><a href=\"#IDEA的特点\" class=\"headerlink\" title=\"IDEA的特点\"></a>IDEA的特点</h3><p>◇沉浸式开发体验<br>◇超强的快捷键体系<br>◇智能的代码助手<br>◇全栈开发环境<br>◇丰富的模板支持</p>\n<h2 id=\"IDEA快捷键\"><a href=\"#IDEA快捷键\" class=\"headerlink\" title=\"IDEA快捷键\"></a>IDEA快捷键</h2><h3 id=\"IDEA窗口快捷键\"><a href=\"#IDEA窗口快捷键\" class=\"headerlink\" title=\"IDEA窗口快捷键\"></a>IDEA窗口快捷键</h3><p>◇Find Action即模糊查询所有的功能<br>![image.png](IntelliJ IDEA开发工具入门/1627034483641-291f75af-d7ad-48a5-a4d5-fd4466b7a384.png)</p>\n<h3 id=\"代码快捷键\"><a href=\"#代码快捷键\" class=\"headerlink\" title=\"代码快捷键\"></a>代码快捷键</h3><p>![image.png](IntelliJ IDEA开发工具入门/1627035810111-7868b20d-b5b8-44c3-b520-f7fe08cb09e9.png)<br>![image.png](IntelliJ IDEA开发工具入门/1627035825273-6cfd6292-c04a-4cfa-ac9a-38797269ca46.png)</p>\n<h3 id=\"代码快速定位\"><a href=\"#代码快速定位\" class=\"headerlink\" title=\"代码快速定位\"></a>代码快速定位</h3><p>![image.png](IntelliJ IDEA开发工具入门/1627045126097-c1703455-f245-4358-b636-0bebf19ac62e.png)</p>\n<h3 id=\"Live-Template\"><a href=\"#Live-Template\" class=\"headerlink\" title=\"Live Template\"></a>Live Template</h3><p>◇也可以自定义，自定义方法为：settings-&gt;Editor-&gt;Live Template-&gt;’+’ 2-&gt;’+’1;<br>​</p>\n<p>![image.png](IntelliJ IDEA开发工具入门/1627045672656-22d16bcf-8e69-4516-9915-68c68efec231.png)</p>\n<h3 id=\"运行与打包\"><a href=\"#运行与打包\" class=\"headerlink\" title=\"运行与打包\"></a>运行与打包</h3><p>◇打包方法：File-&gt;Project Structure-&gt;Artifacts-&gt;’+’ -&gt;JAR-&gt;empty-&gt;Create Manifest(定义入口类)-&gt;默认选中-&gt;OK-&gt;选择入口类-&gt;将右侧的compile output双击添加到左侧(即将编译后的类打入JAR包)-&gt;OK-&gt;.MF文件创建成功-&gt;Build-&gt;Build Artifacts -&gt;Action:Bulid-&gt;生成jar包<br>在生成的jar包上右键选中Open in File path( Show in explore在文件管理器中打开)-&gt;在地址栏中删掉地址然后直接输入cmd进入命令行(会自动定位到目录地址)-&gt;键入java -jar 文件名.jar<br>![image.png](IntelliJ IDEA开发工具入门/1627046432804-188ee97a-c21c-4cd5-b9b4-fa4f47c59270.png)</p>\n<h3 id=\"其他快捷键\"><a href=\"#其他快捷键\" class=\"headerlink\" title=\"其他快捷键\"></a>其他快捷键</h3><p>◇查看方法返回类型：Ctrl+q<br>◇查看方法的具体实现：Ctrl+Alt<br>◇方法或类注释：在一个方法或类的开头，输入/**，然后按回车,自动根据参数和返回值生成注释模板</p>\n<h2 id=\"IDEA开发Web应用\"><a href=\"#IDEA开发Web应用\" class=\"headerlink\" title=\"IDEA开发Web应用\"></a>IDEA开发Web应用</h2><p>◇NewProjece-&gt; Java Enterprise -&gt;服务器选择Tomcat -&gt;勾选WebApplication 3.1-&gt;勾选create web.xml-&gt;Next-&gt;输入工程名称-&gt;finish;<br>◇如何更改URL的上下文路径: 点击Tomcat下拉框-&gt;Edit Configurations -&gt;Deployment-&gt;Application context-&gt;修改-&gt;OK<br>◇热部署(即修改项目后在浏览器能直接查看，只支持在DeBug模式下)：点击Tomcat下拉框-&gt;Edit Configurations -&gt;Server-&gt;On frame deactivation-&gt;Update classes and resources-&gt;OK<br>◇打包Web项目：File-&gt;Project Structure-&gt;Artifacts-&gt;’+’Web Application:Archive-&gt;Empty-&gt;双击compile output添加到左侧war包中-&gt;双击Web facet resource将静态资源放入左侧-&gt;OK-&gt;Build-&gt;Build Artifact -&gt;选择打包文件-&gt;Build -&gt;复制.war文件将其放到Tomcat实际运行环境的webapps目录下-&gt;在Tomcat/bin目录中双击startup.bat文件启动Tomcat-&gt;浏览器输入路径即可<br>![image.png](IntelliJ IDEA开发工具入门/1627096260390-f697c0eb-8644-4516-bc22-fa9ba432d2e0.png)</p>\n","categories":["Java数据库","Java数据库开发基础"],"tags":["开发"]},{"title":"JDBC入门","url":"/p/8791.html","content":"<h2 id=\"课程介绍\"><a href=\"#课程介绍\" class=\"headerlink\" title=\"课程介绍\"></a>课程介绍</h2><p>◇JDBC快速入门<br>◇精讲JDBC开发细节<br>◇连接池与JDBC进阶使用  </p>\n<h2 id=\"主要知识点\"><a href=\"#主要知识点\" class=\"headerlink\" title=\"主要知识点\"></a>主要知识点</h2><p>◇JDBC使用步骤<br>◇数据库查询方法<br>◇数据库写入方法<br>◇SQL注入攻击的应对<br>◇连接池的使用<br>◇Apache Commons DBUtils  </p>\n<h2 id=\"什么是JDBC\"><a href=\"#什么是JDBC\" class=\"headerlink\" title=\"什么是JDBC\"></a>什么是JDBC</h2><p>◇Java数据库连接-Java DataBase Connectivity<br>◇JDBC可让Java通过程序操作关系型数据库<br>◇JDBC基于驱动程序实现与数据库的连接与操作  </p>\n<h2 id=\"什么是驱动程序\"><a href=\"#什么是驱动程序\" class=\"headerlink\" title=\"什么是驱动程序\"></a>什么是驱动程序</h2><p><img src=\"/p/8791/1627277427089-85c466be-a249-4635-97bc-01d3aadddf7e.png\" class=\"lazyload\" data-srcset=\"/p/8791/1627277427089-85c466be-a249-4635-97bc-01d3aadddf7e.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br> ◇JDBC驱动程序<br><img src=\"/p/8791/1627277734522-eff71526-c749-4218-918b-9c681fa21208.png\" class=\"lazyload\" data-srcset=\"/p/8791/1627277734522-eff71526-c749-4218-918b-9c681fa21208.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h2 id=\"JDBC的优点\"><a href=\"#JDBC的优点\" class=\"headerlink\" title=\"JDBC的优点\"></a>JDBC的优点</h2><p>◇统一的API,提供一致的开发过程<br>◇易于学习,容易上手,代码结构稳定<br>◇功能强大,执行效率高,可处理海量数据  </p>\n<h2 id=\"JDBC开发简要流程\"><a href=\"#JDBC开发简要流程\" class=\"headerlink\" title=\"JDBC开发简要流程\"></a>JDBC开发简要流程</h2><p><strong>0.Navicat创建数据库</strong>：字符集采用utf8mb4</p>\n<h3 id=\"1-加载并注册JDBC驱动\"><a href=\"#1-加载并注册JDBC驱动\" class=\"headerlink\" title=\"1. 加载并注册JDBC驱动\"></a>1. 加载并注册JDBC驱动</h3><p>◇将MySQL驱动的jar包复制到工程的lib目录-&gt;File-&gt;Project Structure-&gt;Modules(模块)-&gt;Dependencies(依赖)-&gt;’+’-&gt;1-&gt;选择lib目录下的jar包，OK-&gt;勾选Export-&gt;OK</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);</span><br></pre></td></tr></table></figure>\n<h3 id=\"2-创建数据库连接\"><a href=\"#2-创建数据库连接\" class=\"headerlink\" title=\"2. 创建数据库连接\"></a>2. 创建数据库连接</h3><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">&quot;jdbc:mysql://localhost:3306/gamest?useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=Asia/Shanghai&quot;,</span><br><span class=\"line\">               &quot;root&quot;,&quot;www.LCG.com&quot;</span><br></pre></td></tr></table></figure>\n<h3 id=\"3-创建Statement对象\"><a href=\"#3-创建Statement对象\" class=\"headerlink\" title=\"3. 创建Statement对象\"></a>3. 创建Statement对象</h3><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">Statement stmt <span class=\"operator\">=</span> conn.createStatement();</span><br><span class=\"line\">        ResultSet rs <span class=\"operator\">=</span> stmt.executeQuery(&quot;select * from employee&quot;);</span><br></pre></td></tr></table></figure>\n<h3 id=\"4-遍历查询结果\"><a href=\"#4-遍历查询结果\" class=\"headerlink\" title=\"4. 遍历查询结果\"></a>4. 遍历查询结果</h3><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">while (rs.next()) &#123;</span><br><span class=\"line\">         <span class=\"type\">Integer</span> eno <span class=\"operator\">=</span> rs.getInt(<span class=\"number\">1</span>);<span class=\"operator\">/</span><span class=\"operator\">/</span>获取当前行第一列的数据（数据为<span class=\"type\">int</span>型）,按位置</span><br><span class=\"line\">         String ename <span class=\"operator\">=</span> rs.getString(&quot;ename&quot;);<span class=\"operator\">/</span><span class=\"operator\">/</span>获取ename列的数据（数据为String型），按名称</span><br><span class=\"line\">         <span class=\"type\">Float</span> salary <span class=\"operator\">=</span> rs.getFloat(&quot;salary&quot;);</span><br><span class=\"line\">         String dname <span class=\"operator\">=</span> rs.getString(&quot;dname&quot;);</span><br><span class=\"line\">         System.out.println(dname <span class=\"operator\">+</span> &quot;-&quot; <span class=\"operator\">+</span> eno <span class=\"operator\">+</span> &quot;-&quot; <span class=\"operator\">+</span> ename <span class=\"operator\">+</span> &quot;-&quot; <span class=\"operator\">+</span> salary);</span><br></pre></td></tr></table></figure>\n<h3 id=\"5-关闭连接-释放资源\"><a href=\"#5-关闭连接-释放资源\" class=\"headerlink\" title=\"5. 关闭连接,释放资源\"></a>5. 关闭连接,释放资源</h3><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">if (conn<span class=\"operator\">!=</span><span class=\"keyword\">null</span><span class=\"operator\">&amp;&amp;</span>conn.isClosed()<span class=\"operator\">=</span><span class=\"operator\">=</span><span class=\"literal\">false</span>)&#123;<span class=\"operator\">/</span><span class=\"operator\">/</span>防止空指针异常</span><br><span class=\"line\">         <span class=\"operator\">/</span><span class=\"operator\">/</span><span class=\"number\">5.</span> 关闭连接,释放资源</span><br><span class=\"line\">         conn.close();<span class=\"operator\">/</span><span class=\"operator\">/</span>如果conn为空，则会出现空指针异常，如执行<span class=\"number\">1.</span>就报错后，conn为空&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"JDBC开发详细流程\"><a href=\"#JDBC开发详细流程\" class=\"headerlink\" title=\"JDBC开发详细流程\"></a>JDBC开发详细流程</h2><h3 id=\"如何获取JDBC驱动Jar\"><a href=\"#如何获取JDBC驱动Jar\" class=\"headerlink\" title=\"如何获取JDBC驱动Jar\"></a>如何获取JDBC驱动Jar</h3><p>◇<a href=\"https://www.mysql.com/cn/products/connector/\">Mysql官网下载</a>MySQL Connectors -&gt;JDBC Driver for MySQL-&gt;由于是跨平台的，选择任意版本即可Ubuntu Linux-&gt;直接下载</p>\n<h3 id=\"创建数据库连接代码\"><a href=\"#创建数据库连接代码\" class=\"headerlink\" title=\"创建数据库连接代码\"></a>创建数据库连接代码</h3><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">String dbDriver <span class=\"operator\">=</span> &quot;com.mysql.cj.jdbc.Driver&quot;; <span class=\"operator\">/</span><span class=\"operator\">/</span>JDBC驱动类</span><br><span class=\"line\">String dbURL <span class=\"operator\">=</span> &quot;jdbc:mysql://localhost:3306/gamest&quot; ; <span class=\"operator\">/</span><span class=\"operator\">/</span>连接字</span><br><span class=\"line\">符串</span><br><span class=\"line\">String dbUsername <span class=\"operator\">=</span> &quot;root&quot;; <span class=\"operator\">/</span><span class=\"operator\">/</span>数据库用户名</span><br><span class=\"line\">String dbPassword <span class=\"operator\">=</span> &quot;123456&quot;; <span class=\"operator\">/</span><span class=\"operator\">/</span>数据库密码</span><br><span class=\"line\"><span class=\"operator\">/</span><span class=\"operator\">/</span><span class=\"number\">1.</span>加载并初始化JDBC驱动</span><br><span class=\"line\">Class.forName(dbDriver);</span><br><span class=\"line\"><span class=\"operator\">/</span><span class=\"operator\">/</span><span class=\"number\">2.</span>创建数据库连接</span><br><span class=\"line\">Connection connection <span class=\"operator\">=</span> DriverManager.getConnection(dbURL, dbUsername, dbPassword);</span><br></pre></td></tr></table></figure>\n<h3 id=\"Class-forName的作用\"><a href=\"#Class-forName的作用\" class=\"headerlink\" title=\"Class.forName的作用\"></a>Class.forName的作用</h3><p>◇Class.forName用于加载指定的JDBC驱动类<br>◇Class.forName本质是通知JDBC注册这个驱动类<br>◇驱动由数据库厂商自行开发,连接字符串也不同  </p>\n<h3 id=\"数据库与连接字符串\"><a href=\"#数据库与连接字符串\" class=\"headerlink\" title=\"数据库与连接字符串\"></a>数据库与连接字符串</h3><p><img src=\"/p/8791/1627288444741-e2147775-ca39-4693-88c7-0f545847efb5.png\" class=\"lazyload\" data-srcset=\"/p/8791/1627288444741-e2147775-ca39-4693-88c7-0f545847efb5.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"DriverManager\"><a href=\"#DriverManager\" class=\"headerlink\" title=\"DriverManager\"></a>DriverManager</h3><p>◇DriverManager用于注册/管理JDBC驱动程序<br>◇DriverManager.getConnection(连接字符串,用户名,密码)<br>◇返回值Connection对象,对应数据库的物理网络连接  </p>\n<h3 id=\"Connection对象\"><a href=\"#Connection对象\" class=\"headerlink\" title=\"Connection对象\"></a>Connection对象</h3><p>◇Connection对象用于JDBC与数据库的网络通信对象<br>◇java.sql.Connection是一个接口，具体由驱动厂商实现<br>◇所有数据库的操作都建立在Connection基础上<br><img src=\"/p/8791/1627311314818-03c42582-5f5a-4798-8a3a-8062442ab49f.png\" class=\"lazyload\" data-srcset=\"/p/8791/1627311314818-03c42582-5f5a-4798-8a3a-8062442ab49f.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"MySQL连接字符串\"><a href=\"#MySQL连接字符串\" class=\"headerlink\" title=\"MySQL连接字符串\"></a>MySQL连接字符串</h3><p>◇格式: jdbc:mysql://[主机ip][:端口]/数据库名?参数列表<br>◇主机ip与端口是可选设置,默认值为127.0.0.1与3306<br>◇参数列表采用url编码,格式:参数1=值1&amp;参数2=值2&amp;…  </p>\n<h3 id=\"MySQL连接字符串常用参数\"><a href=\"#MySQL连接字符串常用参数\" class=\"headerlink\" title=\"MySQL连接字符串常用参数\"></a>MySQL连接字符串常用参数</h3><p><img src=\"/p/8791/1627311449343-e094739a-3298-4553-8e3e-ad1ee903c721.png\" class=\"lazyload\" data-srcset=\"/p/8791/1627311449343-e094739a-3298-4553-8e3e-ad1ee903c721.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"连接数据库的常见问题\"><a href=\"#连接数据库的常见问题\" class=\"headerlink\" title=\"连接数据库的常见问题\"></a>连接数据库的常见问题</h3><p>◇ClassNotFoundException - 类未找到异常<br>◇Connection refuse - 数据库连接被拒绝异常<br>◇Access denied for user - 用户名与密码错误异常  </p>\n<h2 id=\"数据库查询操作\"><a href=\"#数据库查询操作\" class=\"headerlink\" title=\"数据库查询操作\"></a>数据库查询操作</h2><p>◇部分代码</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"operator\">/</span><span class=\"operator\">/</span><span class=\"number\">4.</span> 遍历查询结果</span><br><span class=\"line\">            <span class=\"comment\">/*rs.next()返回布尔值，代表是否存在下一条记录，若有，返回true</span></span><br><span class=\"line\"><span class=\"comment\">            同时提取下一条记录；如果没有，返回false，循环就会停止*/</span></span><br><span class=\"line\">         while (rs.next())&#123;</span><br><span class=\"line\">           <span class=\"type\">Integer</span> eno <span class=\"operator\">=</span> rs.getInt(<span class=\"number\">1</span>);<span class=\"operator\">/</span><span class=\"operator\">/</span>JDBC中字段索引从<span class=\"number\">1</span>开始</span><br><span class=\"line\">           String ename <span class=\"operator\">=</span> rs.getString(&quot;ename&quot;);<span class=\"operator\">/</span><span class=\"operator\">/</span>获取ename列的数据（数据为String型），按名称</span><br><span class=\"line\">           <span class=\"type\">Float</span> salary <span class=\"operator\">=</span> rs.getFloat(&quot;salary&quot;);</span><br><span class=\"line\">           String dname <span class=\"operator\">=</span> rs.getString(&quot;dname&quot;);</span><br><span class=\"line\">           System.out.println(dname <span class=\"operator\">+</span> &quot;-&quot; <span class=\"operator\">+</span> eno <span class=\"operator\">+</span> &quot;-&quot; <span class=\"operator\">+</span> ename <span class=\"operator\">+</span> &quot;-&quot; <span class=\"operator\">+</span> salary);</span><br><span class=\"line\">           &#125;</span><br><span class=\"line\">         <span class=\"operator\">/</span><span class=\"operator\">/</span><span class=\"number\">5.</span>关闭连接，释放资源</span><br><span class=\"line\">            try &#123;</span><br><span class=\"line\">                if(rs<span class=\"operator\">!=</span><span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">                    rs.close();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125; catch (<span class=\"keyword\">SQLException</span> e) &#123;</span><br><span class=\"line\">                e.printStackTrace();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            try &#123;</span><br><span class=\"line\">                if(stmt<span class=\"operator\">!=</span><span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">                    stmt.close();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125; catch (<span class=\"keyword\">SQLException</span> e) &#123;</span><br><span class=\"line\">                e.printStackTrace();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            try &#123;</span><br><span class=\"line\">                if(conn<span class=\"operator\">!=</span><span class=\"keyword\">null</span><span class=\"operator\">&amp;&amp;</span><span class=\"operator\">!</span>conn.isClosed())&#123;<span class=\"operator\">/</span><span class=\"operator\">/</span>不为空并且没有关闭</span><br><span class=\"line\">                    conn.close();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125; catch (<span class=\"keyword\">SQLException</span> e) &#123;</span><br><span class=\"line\">                e.printStackTrace();</span><br><span class=\"line\">            &#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"Statement对象\"><a href=\"#Statement对象\" class=\"headerlink\" title=\"Statement对象\"></a>Statement对象</h3><p>◇Statement是用于执行SQL的工具<br>◇查询方法: ResultSet executeQuery(String sql)<br>◇注意: sql参数必须是SELECT 查询SQL语句 </p>\n<h3 id=\"ResultSet对象\"><a href=\"#ResultSet对象\" class=\"headerlink\" title=\"ResultSet对象\"></a>ResultSet对象</h3><p>◇ResultSet结果集对象,保存查询结果<br>◇ResultSet采用迭代方式逐行获取每一行表数据<br>◇每一次迭代,使用ResultSet对象的getXXX()方法获取列数据  </p>\n<h2 id=\"SQL注入攻击\"><a href=\"#SQL注入攻击\" class=\"headerlink\" title=\"SQL注入攻击\"></a>SQL注入攻击</h2><p>◇SQL注入攻击是指利用SQL漏洞越权获取数据的黑客行为<br>◇SQL注入攻击根源是未对原始SQL中的敏感字符做特殊处理<br>◇解决方法:放弃Statement改用PreparedStatement处理SQL  </p>\n<h3 id=\"PreparedStatement\"><a href=\"#PreparedStatement\" class=\"headerlink\" title=\"PreparedStatement\"></a>PreparedStatement</h3><p>◇PreparedStatement 预编译Statement是Statement接口的子接口<br>◇PreparedStatement对SQL进行参数化,预防SQL注入攻击<br>◇PreparedStatement比Statement执行效率更高<br>◇原始代码  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"operator\">/</span><span class=\"operator\">/</span> 存在<span class=\"keyword\">SQL</span>注入风险</span><br><span class=\"line\"><span class=\"operator\">/</span><span class=\"operator\">/</span> pdname值为<span class=\"string\">&#x27; or 1=1 or 1=&#x27;</span>时,所有筛选条件均失效</span><br><span class=\"line\"><span class=\"operator\">/</span><span class=\"operator\">/</span> <span class=\"keyword\">SQL</span>: <span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> employee <span class=\"keyword\">where</span> pdname<span class=\"operator\">=</span><span class=\"string\">&#x27;&#x27;</span> <span class=\"keyword\">or</span> <span class=\"number\">1</span><span class=\"operator\">=</span><span class=\"number\">1</span> <span class=\"keyword\">or</span> <span class=\"number\">1</span><span class=\"operator\">=</span><span class=\"string\">&#x27;&#x27;</span> ;单引号没有处理</span><br><span class=\"line\">String <span class=\"keyword\">sql</span> <span class=\"operator\">=</span> &quot;select * from employee where dname=&#x27;&quot; <span class=\"operator\">+</span> pdname <span class=\"operator\">+</span> &quot;&#x27;&quot; ;</span><br><span class=\"line\">Statement stmt <span class=\"operator\">=</span> conn.createStatement();</span><br><span class=\"line\">ResultSet rs <span class=\"operator\">=</span> stmt.executeQuery(<span class=\"keyword\">sql</span>);</span><br><span class=\"line\">while(rs.next())&#123;</span><br><span class=\"line\">....</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> ◇PreparedStatement  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"operator\">/</span><span class=\"operator\">/</span> 利用PreparedStatement预防<span class=\"keyword\">SQL</span>注入风险</span><br><span class=\"line\"><span class=\"operator\">/</span><span class=\"operator\">/</span> 当dname值为<span class=\"string\">&#x27; or 1=1 or 1=&#x27;</span>时 , 查询不到任何结果</span><br><span class=\"line\"><span class=\"operator\">/</span><span class=\"operator\">/</span> <span class=\"keyword\">SQL</span>: <span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> employee <span class=\"keyword\">where</span> dname<span class=\"operator\">=</span><span class=\"string\">&#x27;\\&#x27;</span> <span class=\"keyword\">or</span> <span class=\"number\">1</span><span class=\"operator\">=</span><span class=\"number\">1</span> <span class=\"keyword\">or</span> <span class=\"number\">1</span><span class=\"operator\">=</span>\\<span class=\"string\">&#x27;&#x27;</span> ;单引号被处理</span><br><span class=\"line\">String <span class=\"keyword\">sql</span> <span class=\"operator\">=</span> &quot;select * from employee where dname=?&quot;;</span><br><span class=\"line\">PreparedStatement pstmt <span class=\"operator\">=</span> conn.prepareStatement(<span class=\"keyword\">sql</span>);</span><br><span class=\"line\">pstmt.setString(<span class=\"number\">1</span>,dname); <span class=\"operator\">/</span><span class=\"operator\">/</span>设置<span class=\"keyword\">SQL</span>参数,参数从<span class=\"number\">1</span>开始</span><br><span class=\"line\">ResultSet rs <span class=\"operator\">=</span> pstmt.executeQuery();</span><br><span class=\"line\">while(rs.next())&#123;</span><br><span class=\"line\">....</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>◇示例代码</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.lcg.jdbc.hrapp.command;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Scanner;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * PreparedStatement对象使用方法</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PstmtQueryCommand</span> <span class=\"keyword\">implements</span> <span class=\"title\">Command</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">execute</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.print(<span class=\"string\">&quot;请输入部门名称：&quot;</span>);</span><br><span class=\"line\">        Scanner in = <span class=\"keyword\">new</span> Scanner(System.in);</span><br><span class=\"line\">        String pdname = in.nextLine();</span><br><span class=\"line\">        Connection conn = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"comment\">//Statement stmt = null;</span></span><br><span class=\"line\">        PreparedStatement pstmt = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        ResultSet rs = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">//1. 加载并注册JDBC驱动</span></span><br><span class=\"line\">            Class.forName(<span class=\"string\">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class=\"line\">            <span class=\"comment\">//2. 创建数据库连接</span></span><br><span class=\"line\">            conn = DriverManager.getConnection(<span class=\"string\">&quot;jdbc:mysql://localhost:3306/imooc?useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=Asia/Shanghai&amp;allowPublicKeyRetrieval=true&quot;</span>, <span class=\"string\">&quot;root&quot;</span>, <span class=\"string\">&quot;root&quot;</span>);</span><br><span class=\"line\">            <span class=\"comment\">//3. 创建PreparedStatement对象</span></span><br><span class=\"line\">            String sql = <span class=\"string\">&quot;select * from employee where dname=? and eno &gt; ?&quot;</span>;</span><br><span class=\"line\">            pstmt = conn.prepareStatement(sql);</span><br><span class=\"line\">            pstmt.setString(<span class=\"number\">1</span>, pdname); <span class=\"comment\">//注意:参数索引从1开始</span></span><br><span class=\"line\">            pstmt.setInt(<span class=\"number\">2</span>, <span class=\"number\">3500</span>);<span class=\"comment\">//2,即第二个参数</span></span><br><span class=\"line\">            <span class=\"comment\">//结果集</span></span><br><span class=\"line\">            rs = pstmt.executeQuery();</span><br><span class=\"line\">            <span class=\"comment\">//4. 遍历查询结果</span></span><br><span class=\"line\">            <span class=\"comment\">//rs.next()返回布尔值，代表是否存在下一条记录</span></span><br><span class=\"line\">            <span class=\"comment\">//如果有，返回true,同时结果集提取下一条记录</span></span><br><span class=\"line\">            <span class=\"comment\">//如果没有，返回false，循环就会停止</span></span><br><span class=\"line\">            <span class=\"keyword\">while</span> (rs.next()) &#123;</span><br><span class=\"line\">                Integer eno = rs.getInt(<span class=\"number\">1</span>);<span class=\"comment\">//JDBC中字段索引从1开始，而非0</span></span><br><span class=\"line\">                String ename = rs.getString(<span class=\"string\">&quot;ename&quot;</span>);</span><br><span class=\"line\">                Float salary = rs.getFloat(<span class=\"string\">&quot;salary&quot;</span>);</span><br><span class=\"line\">                String dname = rs.getString(<span class=\"string\">&quot;dname&quot;</span>);</span><br><span class=\"line\">                System.out.println(dname + <span class=\"string\">&quot;-&quot;</span> + eno + <span class=\"string\">&quot;-&quot;</span> + ename + <span class=\"string\">&quot;-&quot;</span> + salary);</span><br><span class=\"line\"></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (ClassNotFoundException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (SQLException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">//5. 关闭连接,释放资源</span></span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (rs != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                    rs.close();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (SQLException e) &#123;</span><br><span class=\"line\">                e.printStackTrace();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (pstmt != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                    pstmt.close();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (SQLException e) &#123;</span><br><span class=\"line\">                e.printStackTrace();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (conn != <span class=\"keyword\">null</span> &amp;&amp; !conn.isClosed()) &#123;</span><br><span class=\"line\">                    conn.close();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (SQLException e) &#123;</span><br><span class=\"line\">                e.printStackTrace();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"错误的使用方式\"><a href=\"#错误的使用方式\" class=\"headerlink\" title=\"错误的使用方式\"></a>错误的使用方式</h3><p>◇select * from employee where ?=’abc’<br>◇select * from employee where salary = ?+100<br>◇select ? from employee where ename = ?  </p>\n<h2 id=\"JDBC实现写数据\"><a href=\"#JDBC实现写数据\" class=\"headerlink\" title=\"JDBC实现写数据\"></a>JDBC实现写数据</h2><h3 id=\"封装DbUtils工具类\"><a href=\"#封装DbUtils工具类\" class=\"headerlink\" title=\"封装DbUtils工具类\"></a>封装DbUtils工具类</h3><p>◇工具类代码</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">public class DbUtils &#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 在一个方法或类的开头，输入/**，然后按回车,自动根据参数和返回值生成注释模板</span></span><br><span class=\"line\"><span class=\"comment\">     * 创建新的数据库连接</span></span><br><span class=\"line\"><span class=\"comment\">     * @return 新的Connection对象</span></span><br><span class=\"line\"><span class=\"comment\">     * @throws SQLException</span></span><br><span class=\"line\"><span class=\"comment\">     * @throws ClassNotFoundException</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    public <span class=\"keyword\">static</span> Connection getConnection() throws <span class=\"keyword\">SQLException</span>, ClassNotFoundException &#123;</span><br><span class=\"line\">        <span class=\"operator\">/</span><span class=\"operator\">/</span><span class=\"number\">1.</span> 加载并注册JDBC驱动</span><br><span class=\"line\">        Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);</span><br><span class=\"line\">        <span class=\"operator\">/</span><span class=\"operator\">/</span><span class=\"number\">2.</span> 创建数据库连接</span><br><span class=\"line\">        Connection conn <span class=\"operator\">=</span> DriverManager.getConnection(</span><br><span class=\"line\">                &quot;jdbc:mysql://localhost:3306/gamest?useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=Asia/Shanghai&quot;,</span><br><span class=\"line\">                &quot;root&quot;, &quot;www.LCG.com&quot;</span><br><span class=\"line\">        );</span><br><span class=\"line\">        <span class=\"keyword\">return</span> conn;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 关闭连接，释放资源</span></span><br><span class=\"line\"><span class=\"comment\">     * @param rs 结果集对象</span></span><br><span class=\"line\"><span class=\"comment\">     * @param pstmt Statement对象</span></span><br><span class=\"line\"><span class=\"comment\">     * @param conn Connection对象</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    public <span class=\"keyword\">static</span> void closeConnection(ResultSet rs, PreparedStatement pstmt,Connection conn)&#123;</span><br><span class=\"line\">        try &#123;</span><br><span class=\"line\">            if(rs<span class=\"operator\">!=</span><span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">                rs.close();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; catch (<span class=\"keyword\">SQLException</span> e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        try &#123;</span><br><span class=\"line\">            if(pstmt<span class=\"operator\">!=</span><span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">                pstmt.close();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; catch (<span class=\"keyword\">SQLException</span> e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        try &#123;</span><br><span class=\"line\">            if(conn<span class=\"operator\">!=</span><span class=\"keyword\">null</span><span class=\"operator\">&amp;&amp;</span><span class=\"operator\">!</span>conn.isClosed())&#123;</span><br><span class=\"line\">                conn.close();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; catch (<span class=\"keyword\">SQLException</span> e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"JDBC执行INSERT语句\"><a href=\"#JDBC执行INSERT语句\" class=\"headerlink\" title=\"JDBC执行INSERT语句\"></a>JDBC执行INSERT语句</h3><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">String <span class=\"keyword\">sql</span><span class=\"operator\">=</span> &quot;insert into employee(eno,ename) values(?,?)&quot;;</span><br><span class=\"line\">PreparedStatement pstmt <span class=\"operator\">=</span> conn.prepareStatement(<span class=\"keyword\">sql</span>);</span><br><span class=\"line\">pstmt.setInt(<span class=\"number\">1</span>,<span class=\"number\">10</span>);</span><br><span class=\"line\">pstmt.setString(<span class=\"number\">2</span>,&quot;张三&quot;);</span><br><span class=\"line\"><span class=\"operator\">/</span><span class=\"operator\">/</span>executeUpdate方法返回记录数</span><br><span class=\"line\"><span class=\"type\">int</span> cnt <span class=\"operator\">=</span> pstmt.executeUpdate(); <span class=\"operator\">/</span><span class=\"operator\">/</span>cnt<span class=\"operator\">=</span><span class=\"number\">1</span>,表示<span class=\"keyword\">sql</span>语句所影响的数据库的行数</span><br><span class=\"line\">System.out.println(&quot;数据新增成功&quot;);</span><br></pre></td></tr></table></figure>\n<p>◇新增员工数据</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">public class InsertCommand implements Command&#123;</span><br><span class=\"line\">    <span class=\"variable\">@Override</span></span><br><span class=\"line\">    public void <span class=\"keyword\">execute</span>()&#123;</span><br><span class=\"line\">        Scanner <span class=\"keyword\">in</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> Scanner(System.in);</span><br><span class=\"line\">        System.out.println(&quot;请输入员工编号&quot;);</span><br><span class=\"line\">        <span class=\"type\">int</span> eno <span class=\"operator\">=</span> in.nextInt();</span><br><span class=\"line\">        System.out.println(&quot;请输入员姓名&quot;);</span><br><span class=\"line\">        String ename <span class=\"operator\">=</span> in.next();</span><br><span class=\"line\">        System.out.println(&quot;请输入员工薪资&quot;);</span><br><span class=\"line\">        <span class=\"type\">float</span> salary <span class=\"operator\">=</span> in.nextFloat();</span><br><span class=\"line\">        System.out.println(&quot;请输入隶属部门&quot;);</span><br><span class=\"line\">        String dname <span class=\"operator\">=</span> in.next();</span><br><span class=\"line\">        Connection conn <span class=\"operator\">=</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        PreparedStatement pstmt <span class=\"operator\">=</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        try &#123;</span><br><span class=\"line\">            conn <span class=\"operator\">=</span> DbUtils.getConnection();</span><br><span class=\"line\">            String <span class=\"keyword\">sql</span> <span class=\"operator\">=</span> &quot;insert into employee(eno,ename,salary,dname) values(?,?,?,?)&quot;;</span><br><span class=\"line\">            pstmt <span class=\"operator\">=</span> conn.prepareStatement(<span class=\"keyword\">sql</span>);</span><br><span class=\"line\">            pstmt.setInt(<span class=\"number\">1</span>, eno);</span><br><span class=\"line\">            pstmt.setString(<span class=\"number\">2</span>, ename);</span><br><span class=\"line\">            pstmt.setFloat(<span class=\"number\">3</span>, salary);</span><br><span class=\"line\">            pstmt.setString(<span class=\"number\">4</span>, dname);</span><br><span class=\"line\">            <span class=\"type\">int</span> cnt <span class=\"operator\">=</span> pstmt.executeUpdate();<span class=\"operator\">/</span><span class=\"operator\">/</span>所有写操作都使用executeUpdate</span><br><span class=\"line\">            System.out.println(&quot;cnt:&quot;<span class=\"operator\">+</span>cnt);</span><br><span class=\"line\">            System.out.println(ename<span class=\"operator\">+</span>&quot;员工入职手续办理成功&quot;);</span><br><span class=\"line\">        &#125; catch (<span class=\"keyword\">SQLException</span> e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;finally &#123;</span><br><span class=\"line\">            DbUtils.closeConnection(<span class=\"keyword\">null</span>,pstmt,conn);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"JDBC执行UPDATE语句\"><a href=\"#JDBC执行UPDATE语句\" class=\"headerlink\" title=\"JDBC执行UPDATE语句\"></a>JDBC执行UPDATE语句</h3><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">String <span class=\"keyword\">sql</span><span class=\"operator\">=</span> &quot;update employee set salary=salary + 1000 where dname=?&quot;;</span><br><span class=\"line\">PreparedStatement pstmt <span class=\"operator\">=</span> conn.prepareStatement(<span class=\"keyword\">sql</span>);</span><br><span class=\"line\">pstmt.setString(<span class=\"number\">1</span>,&quot;研发部&quot;);</span><br><span class=\"line\"><span class=\"operator\">/</span><span class=\"operator\">/</span>executeUpdate方法返回记录数</span><br><span class=\"line\"><span class=\"type\">int</span> cnt <span class=\"operator\">=</span> pstmt.executeUpdate();</span><br><span class=\"line\">System.out.println(&quot;研发部&quot; <span class=\"operator\">+</span> cnt <span class=\"operator\">+</span> &quot;名员工提薪1000元&quot;);</span><br></pre></td></tr></table></figure>\n<h3 id=\"JDBC执行DELETE语句\"><a href=\"#JDBC执行DELETE语句\" class=\"headerlink\" title=\"JDBC执行DELETE语句\"></a>JDBC执行DELETE语句</h3><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">String <span class=\"keyword\">sql</span><span class=\"operator\">=</span> &quot;delete from employee where eno = ?&quot;;</span><br><span class=\"line\">PreparedStatement pstmt <span class=\"operator\">=</span> conn.prepareStatement(<span class=\"keyword\">sql</span>);</span><br><span class=\"line\">pstmt.setInt(<span class=\"number\">1</span>, <span class=\"number\">3395</span>);</span><br><span class=\"line\"><span class=\"operator\">/</span><span class=\"operator\">/</span>executeUpdate方法返回记录数</span><br><span class=\"line\"><span class=\"type\">int</span> cnt <span class=\"operator\">=</span> pstmt.executeUpdate();</span><br><span class=\"line\">System.out.println(cnt<span class=\"operator\">+</span>&quot;名员工数据已被删除&quot;);</span><br></pre></td></tr></table></figure>\n<h2 id=\"JDBC中的事务管理\"><a href=\"#JDBC中的事务管理\" class=\"headerlink\" title=\"JDBC中的事务管理\"></a>JDBC中的事务管理</h2><h3 id=\"什么是事务\"><a href=\"#什么是事务\" class=\"headerlink\" title=\"什么是事务\"></a>什么是事务</h3><p>◇事务是以一种可靠的、一致的方式，访问和操作数据库的程序单元<br>◇说人话：要么把事情做完，要么什么都不做，不要做一半<br>◇事务依赖于数据库实现,MySQL通过事务区作为数据缓冲地带  </p>\n<h3 id=\"事务的提交操作\"><a href=\"#事务的提交操作\" class=\"headerlink\" title=\"事务的提交操作\"></a>事务的提交操作</h3><p><img src=\"/p/8791/1627462586528-28cc5fc3-1e3f-465e-9968-8e89b86516eb.png\" class=\"lazyload\" data-srcset=\"/p/8791/1627462586528-28cc5fc3-1e3f-465e-9968-8e89b86516eb.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"事务的回滚操作\"><a href=\"#事务的回滚操作\" class=\"headerlink\" title=\"事务的回滚操作\"></a>事务的回滚操作</h3><p><img src=\"/p/8791/1627462637835-0f24ab7b-4905-4827-9f32-f494780da680.png\" class=\"lazyload\" data-srcset=\"/p/8791/1627462637835-0f24ab7b-4905-4827-9f32-f494780da680.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"JDBC两种事务模式\"><a href=\"#JDBC两种事务模式\" class=\"headerlink\" title=\"JDBC两种事务模式\"></a>JDBC两种事务模式</h3><p>◇JDBC允许两种事务模式<br>◇自动提交事务模式<br>◇手动提交事务模式  </p>\n<h4 id=\"自动提交事务模式\"><a href=\"#自动提交事务模式\" class=\"headerlink\" title=\"自动提交事务模式\"></a>自动提交事务模式</h4><p>◇自动提交模式是指每执行一次写操作SQL,自动提交事务<br>◇自动提交开启方法: conn.setAutoCommit(true)<br>◇自动事务是JDBC默认行为,此模式无法保证多数据一致性  </p>\n<h4 id=\"手动提交事务模式\"><a href=\"#手动提交事务模式\" class=\"headerlink\" title=\"手动提交事务模式\"></a>手动提交事务模式</h4><p>◇手动提交模式是指显式调用commit()与rollback()方法管理事务<br>◇手动提交开启方法: conn.setAutoCommit(false)<br>◇手动提交事务可保证多数据一致性,但必须手动调用提交/回滚方法  </p>\n<h3 id=\"实现批量增加员工\"><a href=\"#实现批量增加员工\" class=\"headerlink\" title=\"实现批量增加员工\"></a>实现批量增加员工</h3><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * JDBC中的事务机制</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">public class TransactionSample &#123;</span><br><span class=\"line\">    public <span class=\"keyword\">static</span> void main(String[] args) &#123;</span><br><span class=\"line\">        Connection conn <span class=\"operator\">=</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        PreparedStatement pstmt <span class=\"operator\">=</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        try &#123;</span><br><span class=\"line\">            conn <span class=\"operator\">=</span> DbUtils.getConnection();</span><br><span class=\"line\">            <span class=\"operator\">/</span><span class=\"operator\">/</span>JDBC默认使用自动提交模式</span><br><span class=\"line\">            conn.setAutoCommit(<span class=\"literal\">false</span>);<span class=\"operator\">/</span><span class=\"operator\">/</span>设置手动提交</span><br><span class=\"line\">            String <span class=\"keyword\">sql</span> <span class=\"operator\">=</span> &quot;insert into employee(eno,ename,salary,dname) values(?,?,?,?)&quot;;</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i<span class=\"operator\">=</span><span class=\"number\">100</span>;i<span class=\"operator\">&lt;</span><span class=\"number\">200</span>;i<span class=\"operator\">+</span><span class=\"operator\">+</span>)&#123;</span><br><span class=\"line\"><span class=\"comment\">/*                if(i==105)&#123;</span></span><br><span class=\"line\"><span class=\"comment\">                    throw new RuntimeException(&quot;插入失败&quot;);//模拟抛出异常</span></span><br><span class=\"line\"><span class=\"comment\">                &#125;*/</span></span><br><span class=\"line\">                pstmt <span class=\"operator\">=</span> conn.prepareStatement(<span class=\"keyword\">sql</span>);</span><br><span class=\"line\">                pstmt.setInt(<span class=\"number\">1</span>,i);</span><br><span class=\"line\">                pstmt.setString(<span class=\"number\">2</span>, &quot;员工&quot; <span class=\"operator\">+</span> i);</span><br><span class=\"line\">                pstmt.setFloat(<span class=\"number\">3</span>, <span class=\"number\">5000</span>);</span><br><span class=\"line\">                pstmt.setString(<span class=\"number\">4</span>, &quot;市场部&quot;);</span><br><span class=\"line\">                pstmt.executeUpdate();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            conn.commit();<span class=\"operator\">/</span><span class=\"operator\">/</span>当<span class=\"keyword\">for</span>循环全部完成后，才开始进行提交</span><br><span class=\"line\">        &#125; catch (Exception e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">            try &#123;</span><br><span class=\"line\">                if (conn<span class=\"operator\">!=</span><span class=\"keyword\">null</span><span class=\"operator\">&amp;&amp;</span><span class=\"operator\">!</span>conn.isClosed()) &#123;</span><br><span class=\"line\">                    conn.rollback();<span class=\"operator\">/</span><span class=\"operator\">/</span>发生异常回滚</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125; catch (<span class=\"keyword\">SQLException</span> e1) &#123;</span><br><span class=\"line\">                e1.printStackTrace();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; finally &#123;</span><br><span class=\"line\">            DbUtils.closeConnection(<span class=\"keyword\">null</span>,pstmt,conn);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"基于实体类实现分页数据封装\"><a href=\"#基于实体类实现分页数据封装\" class=\"headerlink\" title=\"基于实体类实现分页数据封装\"></a>基于实体类实现分页数据封装</h2><p>◇实体类代码</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 员工实体类</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">public class Employee &#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 需符合javabean的要求</span></span><br><span class=\"line\"><span class=\"comment\">     * 1.具备默认构造函数</span></span><br><span class=\"line\"><span class=\"comment\">     * 2.属性私有</span></span><br><span class=\"line\"><span class=\"comment\">     * 3.存在getter与setter</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    public Employee()&#123;&#125;</span><br><span class=\"line\">    private <span class=\"type\">Integer</span> eno;</span><br><span class=\"line\">    private String ename;</span><br><span class=\"line\">    private <span class=\"type\">Float</span> salary;</span><br><span class=\"line\">    private String dname;</span><br><span class=\"line\"></span><br><span class=\"line\">    public <span class=\"type\">Integer</span> getEno() &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> eno;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setEno(<span class=\"type\">Integer</span> eno) &#123;</span><br><span class=\"line\">        this.eno <span class=\"operator\">=</span> eno;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public String getEname() &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ename;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setEname(String ename) &#123;</span><br><span class=\"line\">        this.ename <span class=\"operator\">=</span> ename;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public <span class=\"type\">Float</span> getSalary() &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> salary;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setSalary(<span class=\"type\">Float</span> salary) &#123;</span><br><span class=\"line\">        this.salary <span class=\"operator\">=</span> salary;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public String getDname() &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> dname;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setDname(String dname) &#123;</span><br><span class=\"line\">        this.dname <span class=\"operator\">=</span> dname;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>◇分页命令代码</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 分页查询员工数据</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">public class PaginationCommand implements Command &#123;</span><br><span class=\"line\">    <span class=\"variable\">@Override</span></span><br><span class=\"line\">    public void <span class=\"keyword\">execute</span>()&#123;</span><br><span class=\"line\">        Scanner <span class=\"keyword\">in</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> Scanner(System.in);</span><br><span class=\"line\">        System.out.println(&quot;请输入页号：&quot;);</span><br><span class=\"line\">        <span class=\"type\">int</span> page <span class=\"operator\">=</span> in.nextInt();</span><br><span class=\"line\">        Connection conn <span class=\"operator\">=</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        PreparedStatement pstmt <span class=\"operator\">=</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        ResultSet rs <span class=\"operator\">=</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        List<span class=\"operator\">&lt;</span>Employee<span class=\"operator\">&gt;</span> list <span class=\"operator\">=</span> <span class=\"keyword\">new</span> ArrayList();<span class=\"operator\">/</span><span class=\"operator\">/</span>存储查询结果</span><br><span class=\"line\">        try &#123;</span><br><span class=\"line\">            conn <span class=\"operator\">=</span> DbUtils.getConnection();</span><br><span class=\"line\">            String <span class=\"keyword\">sql</span> <span class=\"operator\">=</span> &quot;select * from employee limit ?,10&quot;;<span class=\"operator\">/</span><span class=\"operator\">/</span><span class=\"number\">10</span>代表从？开始往后取<span class=\"number\">10</span>条记录</span><br><span class=\"line\">            pstmt <span class=\"operator\">=</span> conn.prepareStatement(<span class=\"keyword\">sql</span>);</span><br><span class=\"line\">            pstmt.setInt(<span class=\"number\">1</span>,(page<span class=\"number\">-1</span>)<span class=\"operator\">*</span><span class=\"number\">10</span>);<span class=\"operator\">/</span><span class=\"operator\">/</span>分页公式</span><br><span class=\"line\">            rs <span class=\"operator\">=</span> pstmt.executeQuery();</span><br><span class=\"line\">            while (rs.next())&#123;</span><br><span class=\"line\">                <span class=\"type\">Integer</span> eno <span class=\"operator\">=</span> rs.getInt(&quot;eno&quot;);</span><br><span class=\"line\">                String ename <span class=\"operator\">=</span> rs.getString(&quot;ename&quot;);</span><br><span class=\"line\">                <span class=\"type\">Float</span> salary <span class=\"operator\">=</span> rs.getFloat(&quot;salary&quot;);</span><br><span class=\"line\">                String dname <span class=\"operator\">=</span> rs.getString(&quot;dname&quot;);</span><br><span class=\"line\">                Employee emp <span class=\"operator\">=</span> <span class=\"keyword\">new</span> Employee();</span><br><span class=\"line\">                emp.setEno(eno);</span><br><span class=\"line\">                emp.setEname(ename);</span><br><span class=\"line\">                emp.setSalary(salary);</span><br><span class=\"line\">                emp.setDname(dname);</span><br><span class=\"line\">                list.add(emp);<span class=\"operator\">/</span><span class=\"operator\">/</span>将emp实体加到list集合中</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            System.out.println(list.size());</span><br><span class=\"line\">        &#125; catch (<span class=\"keyword\">SQLException</span> e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;finally &#123;</span><br><span class=\"line\">            DbUtils.closeConnection(rs, pstmt, conn);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"JDBC中Date日期对象的处理\"><a href=\"#JDBC中Date日期对象的处理\" class=\"headerlink\" title=\"JDBC中Date日期对象的处理\"></a>JDBC中Date日期对象的处理</h2><p>◇实体类中添加日期</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">private <span class=\"type\">Date</span> hiredate;</span><br><span class=\"line\">public <span class=\"type\">Date</span> getHiredate() &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> hiredate;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">public void setHiredata(<span class=\"type\">Date</span> hiredate) &#123;</span><br><span class=\"line\">        this.hiredate <span class=\"operator\">=</span> hiredate;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<p>◇分页命令添加日期</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"operator\">/</span><span class=\"operator\">/</span>JDBC获取日期使用java.sql.Date,其继承自java.util.Date</span><br><span class=\"line\"><span class=\"operator\">/</span><span class=\"operator\">/</span>所以两者互相兼容</span><br><span class=\"line\"><span class=\"type\">Date</span> hiredata <span class=\"operator\">=</span> rs.getDate(&quot;hiredate&quot;);</span><br><span class=\"line\"> emp.setHiredate(hiredate);</span><br></pre></td></tr></table></figure>\n<p>◇向数据库中写入日期时需要使用java.sql.Date</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">System.out.println(&quot;请输入入职日期&quot;);</span><br><span class=\"line\">        String strHiredate <span class=\"operator\">=</span> in.next();</span><br><span class=\"line\">        <span class=\"operator\">/</span><span class=\"operator\">/</span>String 到java.sql.Date分为两步</span><br><span class=\"line\">        <span class=\"operator\">/</span><span class=\"operator\">/</span><span class=\"number\">1.</span>将String转为java.util.Date</span><br><span class=\"line\">        SimpleDateFormat sdf <span class=\"operator\">=</span> <span class=\"keyword\">new</span> SimpleDateFormat(&quot;yyyy-MM-dd&quot;);</span><br><span class=\"line\">        java.util.Date udHiredate <span class=\"operator\">=</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        try &#123;</span><br><span class=\"line\">             udHiredate <span class=\"operator\">=</span> sdf.parse(strHiredate);</span><br><span class=\"line\">        &#125; catch (ParseException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"operator\">/</span><span class=\"operator\">/</span><span class=\"number\">2.</span>将util转为<span class=\"keyword\">sql</span></span><br><span class=\"line\">        long <span class=\"type\">time</span> <span class=\"operator\">=</span> udHiredate.getTime();<span class=\"operator\">/</span><span class=\"operator\">/</span>获取<span class=\"number\">1970</span>年到现在的毫秒数</span><br><span class=\"line\">        java.sql.Date sdHiredate <span class=\"operator\">=</span> <span class=\"keyword\">new</span> java.sql.Date(<span class=\"type\">time</span>);</span><br><span class=\"line\">        </span><br><span class=\"line\">pstmt.setDate(<span class=\"number\">5</span>,sdHiredate);<span class=\"operator\">/</span><span class=\"operator\">/</span>java.sql.Date</span><br></pre></td></tr></table></figure>\n<h2 id=\"JDBC数据批处理\"><a href=\"#JDBC数据批处理\" class=\"headerlink\" title=\"JDBC数据批处理\"></a>JDBC数据批处理</h2><p>◇批处理部分代码</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">pstmt <span class=\"operator\">=</span> conn.prepareStatement(<span class=\"keyword\">sql</span>);</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i<span class=\"operator\">=</span><span class=\"number\">100000</span>;i<span class=\"operator\">&lt;</span><span class=\"number\">200000</span>;i<span class=\"operator\">+</span><span class=\"operator\">+</span>)&#123;</span><br><span class=\"line\">                pstmt.setInt(<span class=\"number\">1</span>,i);</span><br><span class=\"line\">                pstmt.setString(<span class=\"number\">2</span>, &quot;员工&quot; <span class=\"operator\">+</span> i);</span><br><span class=\"line\">                pstmt.setFloat(<span class=\"number\">3</span>, <span class=\"number\">5000</span>f);</span><br><span class=\"line\">                pstmt.setString(<span class=\"number\">4</span>, &quot;市场部&quot;);</span><br><span class=\"line\">                pstmt.addBatch();<span class=\"operator\">/</span><span class=\"operator\">/</span>将参数加入批处理任务</span><br><span class=\"line\">                <span class=\"operator\">/</span><span class=\"operator\">/</span>pstmt.executeUpdate();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            pstmt.executeBatch();<span class=\"operator\">/</span><span class=\"operator\">/</span>执行批处理任务</span><br><span class=\"line\">            conn.commit();<span class=\"operator\">/</span><span class=\"operator\">/</span>当<span class=\"keyword\">for</span>循环全部完成后，才开始进行提交</span><br></pre></td></tr></table></figure>\n<p>◇批处理效率高的原因：在标准方法中，创建了十万个prepareStatement对象，每一个对象都是新增一条数据；而在批处理方法中，是用一个对象新增十万条数据；</p>\n<h2 id=\"连接池与JDBC进阶使用\"><a href=\"#连接池与JDBC进阶使用\" class=\"headerlink\" title=\"连接池与JDBC进阶使用\"></a>连接池与JDBC进阶使用</h2><p>◇连接池是创建和管理一个连接的缓冲池的技术，这些连接准备好被任何需要它们的线程使用</p>\n<h3 id=\"阿里巴巴Druid连接池\"><a href=\"#阿里巴巴Druid连接池\" class=\"headerlink\" title=\"阿里巴巴Druid连接池\"></a>阿里巴巴Druid连接池</h3><p>◇Druid是阿里巴巴开源连接池组件,是最好的连接池之一<br>◇Druid对数据库连接进行有效管理与重用,最大化程序执行效率<br>◇连接池负责创建管理连接,程序只负责取用与归还<br><img src=\"/p/8791/1627542621734-d1f41e8f-ec79-4286-910d-86feb455549d.png\" class=\"lazyload\" data-srcset=\"/p/8791/1627542621734-d1f41e8f-ec79-4286-910d-86feb455549d.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"Druid连接池配置与使用\"><a href=\"#Druid连接池配置与使用\" class=\"headerlink\" title=\"Druid连接池配置与使用\"></a>Druid连接池配置与使用</h3><p>◇配置.properties文件</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//不需要引号和分号,将初始尺寸和最大尺寸设为一致可便于维护</span></span><br><span class=\"line\">driverClassName=</span><br><span class=\"line\">url=</span><br><span class=\"line\">username=</span><br><span class=\"line\">password=</span><br><span class=\"line\">initialSize=<span class=\"number\">10</span>  <span class=\"comment\">//初始尺寸:连接池默认创建10个数据库连接</span></span><br><span class=\"line\">maxActive=<span class=\"number\">20</span> <span class=\"comment\">//最大尺寸:数据库不够用时，创建的最大连接数，还不够用则需等待</span></span><br></pre></td></tr></table></figure>\n<p>◇使用连接池</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Druid连接池配置与使用</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DruidSample</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//1.加载属性文件</span></span><br><span class=\"line\">        Properties properties = <span class=\"keyword\">new</span> Properties();</span><br><span class=\"line\">        <span class=\"comment\">//作用：获取当前类(DruidSample)路径下对应文件的路径，因为配置文件会随着代码运行而发布到运行文件夹中</span></span><br><span class=\"line\">        String propertyFile = DruidSample.class.getResource(<span class=\"string\">&quot;/druid-cofig.properties&quot;</span>).getPath();</span><br><span class=\"line\">        <span class=\"comment\">//在上面获取的路径中getPath方法会进行URL编码:空格-&gt;%20</span></span><br><span class=\"line\">        <span class=\"comment\">// 如：原始路径：c:\\java code 转换后的路径：c:\\java%20code;</span></span><br><span class=\"line\">        <span class=\"comment\">// 使用URLDecoder().decode()方法进行容错，将%20还原为空格</span></span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            propertyFile = <span class=\"keyword\">new</span> URLDecoder().decode(propertyFile, <span class=\"string\">&quot;UTF-8&quot;</span>);</span><br><span class=\"line\">            properties.load(<span class=\"keyword\">new</span> FileInputStream(propertyFile));<span class=\"comment\">//加载,load参数为文件流</span></span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        Connection conn = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        PreparedStatement psmt = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        ResultSet rs = <span class=\"keyword\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">//2.获取DataSource数据源对象</span></span><br><span class=\"line\">            DataSource dataSource = DruidDataSourceFactory.createDataSource(properties);<span class=\"comment\">//DataSource选择sql</span></span><br><span class=\"line\">            <span class=\"comment\">//3.创建数据库连接</span></span><br><span class=\"line\">            conn = dataSource.getConnection();</span><br><span class=\"line\">            psmt = conn.prepareStatement(<span class=\"string\">&quot;select * from employee limit 0,10&quot;</span>);</span><br><span class=\"line\">            rs = psmt.executeQuery();</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (rs.next()) &#123;</span><br><span class=\"line\">                Integer eno = rs.getInt(<span class=\"number\">1</span>);<span class=\"comment\">//获取当前行第一列的数据（数据为int型）,按位置</span></span><br><span class=\"line\">                String ename = rs.getString(<span class=\"string\">&quot;ename&quot;</span>);<span class=\"comment\">//获取ename列的数据（数据为String型），按名称</span></span><br><span class=\"line\">                Float salary = rs.getFloat(<span class=\"string\">&quot;salary&quot;</span>);</span><br><span class=\"line\">                String dname = rs.getString(<span class=\"string\">&quot;dname&quot;</span>);</span><br><span class=\"line\">                System.out.println(dname + <span class=\"string\">&quot;-&quot;</span> + eno + <span class=\"string\">&quot;-&quot;</span> + ename + <span class=\"string\">&quot;-&quot;</span> + salary);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;<span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">             * 不使用连接池：conn.close()关闭连接</span></span><br><span class=\"line\"><span class=\"comment\">             * 使用连接池：conn.close()将连接回收至连接池</span></span><br><span class=\"line\"><span class=\"comment\">             */</span></span><br><span class=\"line\">            DbUtils.closeConnection(rs,psmt,conn);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"扩展知识-C3P0连接池\"><a href=\"#扩展知识-C3P0连接池\" class=\"headerlink\" title=\"扩展知识:C3P0连接池\"></a>扩展知识:C3P0连接池</h3><p>◇配置文件，使用xml且文件名必须为：c3p0-config.xml</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span> ?&gt;</span><br><span class=\"line\">&lt;c3p0-config&gt;</span><br><span class=\"line\">    &lt;<span class=\"keyword\">default</span>-config&gt;</span><br><span class=\"line\">        &lt;property name=<span class=\"string\">&quot;driveClass&quot;</span>&gt;com.mysql.cj.jdbc.Driver&lt;/property&gt;</span><br><span class=\"line\">        &lt;property name=<span class=\"string\">&quot;jdbcUrl&quot;</span>&gt;jdbc:mysql:<span class=\"comment\">//localhost:3306/gamest?useSSL=false&amp;amp;useUnicode=true&amp;amp;characterEncoding=UTF-8&amp;amp;serverTimezone=Asia/Shanghai&lt;/property&gt;</span></span><br><span class=\"line\">        &lt;property name=<span class=\"string\">&quot;user&quot;</span>&gt;root&lt;/property&gt;</span><br><span class=\"line\">        &lt;property name=<span class=\"string\">&quot;password&quot;</span>&gt;www.LCG.com&lt;/property&gt;</span><br><span class=\"line\">        &lt;property name=<span class=\"string\">&quot;initialPoolSize&quot;</span>&gt;<span class=\"number\">10</span>&lt;/property&gt;</span><br><span class=\"line\">        &lt;property name=<span class=\"string\">&quot;maxPoolSize&quot;</span>&gt;<span class=\"number\">20</span>&lt;/property&gt;</span><br><span class=\"line\">    &lt;/<span class=\"keyword\">default</span>-config&gt;</span><br><span class=\"line\">&lt;/c3p0-config&gt;</span><br></pre></td></tr></table></figure>\n<p>◇使用</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C3P0Sample</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//1.加载配置文件</span></span><br><span class=\"line\">        <span class=\"comment\">//2.创建DataSource</span></span><br><span class=\"line\">        DataSource dataSource = <span class=\"keyword\">new</span> ComboPooledDataSource();</span><br><span class=\"line\">        <span class=\"comment\">//3.得到数据库连接</span></span><br><span class=\"line\">        Connection conn = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        PreparedStatement psmt = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        ResultSet rs = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        .....</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"Apache-Commons-DBUtils\"><a href=\"#Apache-Commons-DBUtils\" class=\"headerlink\" title=\"Apache Commons DBUtils\"></a>Apache Commons DBUtils</h3><p>◇commons-dbutils是Apache提供的开源JDBC工具类库<br>◇它是对JDBC的简单封装,学习成本极低<br>◇使用commons-dbutils可以极大简化JDBC编码工作量  </p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Apache DBUtils + Druid联合使用</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DbUtilsSample</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">query</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        Properties properties = <span class=\"keyword\">new</span> Properties();</span><br><span class=\"line\">        String propertyFile = </span><br><span class=\"line\">            DruidSample.class.getResource(<span class=\"string\">&quot;/druid-config.properties&quot;</span>).getPath();</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            propertyFile = <span class=\"keyword\">new</span> URLDecoder().decode(propertyFile, <span class=\"string\">&quot;UTF-8&quot;</span>);</span><br><span class=\"line\">            properties.load(<span class=\"keyword\">new</span> FileInputStream(propertyFile));</span><br><span class=\"line\">            DataSource dataSource = DruidDataSourceFactory.createDataSource(properties);</span><br><span class=\"line\">            <span class=\"comment\">//利用Apache DbUtils大幅简化了数据的提取过程</span></span><br><span class=\"line\">            <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">             * BeanListHandler将结果集包装成list对象</span></span><br><span class=\"line\"><span class=\"comment\">             * Object[]&#123;1&#125;用来传递参数，这里表示？=1</span></span><br><span class=\"line\"><span class=\"comment\">             */</span></span><br><span class=\"line\">            QueryRunner qr = <span class=\"keyword\">new</span> QueryRunner(dataSource);</span><br><span class=\"line\">            List&lt;Employee&gt; list =  qr.query(<span class=\"string\">&quot;select * from employee limit ?,10&quot;</span>,</span><br><span class=\"line\">                    <span class=\"keyword\">new</span> BeanListHandler&lt;&gt;(Employee.class),</span><br><span class=\"line\">                    <span class=\"keyword\">new</span> Object[]&#123;<span class=\"number\">1</span>&#125;);</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (Employee emp : list) &#123;</span><br><span class=\"line\">                System.out.println(emp.getEname()+<span class=\"string\">&quot;--&quot;</span>+emp.getSalary());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;<span class=\"comment\">//自动关闭数据库连接</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">update</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        Properties properties = <span class=\"keyword\">new</span> Properties();</span><br><span class=\"line\">        String propertyFile = </span><br><span class=\"line\">            DruidSample.class.getResource(<span class=\"string\">&quot;/druid-config.properties&quot;</span>).getPath();</span><br><span class=\"line\">        Connection conn = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            propertyFile = <span class=\"keyword\">new</span> URLDecoder().decode(propertyFile, <span class=\"string\">&quot;UTF-8&quot;</span>);</span><br><span class=\"line\">            properties.load(<span class=\"keyword\">new</span> FileInputStream(propertyFile));</span><br><span class=\"line\">            DataSource dataSource = DruidDataSourceFactory.createDataSource(properties);</span><br><span class=\"line\">            conn = dataSource.getConnection();<span class=\"comment\">//创建连接</span></span><br><span class=\"line\">            conn.setAutoCommit(<span class=\"keyword\">false</span>);<span class=\"comment\">//关闭自动提交</span></span><br><span class=\"line\">            String sql1 = <span class=\"string\">&quot;update employee set salary=salary+10000 where eno=?&quot;</span>;</span><br><span class=\"line\">            String sql2 = <span class=\"string\">&quot;update employee set salary=salary-1000 where eno=?&quot;</span>;</span><br><span class=\"line\">            QueryRunner qr = <span class=\"keyword\">new</span> QueryRunner();</span><br><span class=\"line\">            qr.update(conn,sql1,<span class=\"keyword\">new</span> Object[]&#123;<span class=\"number\">1</span>&#125;);</span><br><span class=\"line\">            qr.update(conn, sql2, <span class=\"keyword\">new</span> Object[]&#123;<span class=\"number\">100</span>&#125;);</span><br><span class=\"line\">            conn.commit();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (conn!=<span class=\"keyword\">null</span>&amp;&amp;!conn.isClosed())&#123;</span><br><span class=\"line\">                    conn.rollback();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (SQLException e1) &#123;</span><br><span class=\"line\">                e1.printStackTrace();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;<span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(conn!=<span class=\"keyword\">null</span>&amp;&amp;!conn.isClosed())&#123;</span><br><span class=\"line\">                    conn.close();<span class=\"comment\">//对数据库连接进行回收，前面手动创建了连接</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (SQLException e) &#123;</span><br><span class=\"line\">                e.printStackTrace();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        query();</span><br><span class=\"line\">        <span class=\"comment\">//update();</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n","categories":["Java数据库","Java数据库开发基础"],"tags":["数据库"]},{"title":"Freemaker","url":"/p/f1c8.html","content":"<h2 id=\"模板引擎与Freemaker项目实战\"><a href=\"#模板引擎与Freemaker项目实战\" class=\"headerlink\" title=\"模板引擎与Freemaker项目实战\"></a>模板引擎与Freemaker项目实战</h2><h3 id=\"什么是模板引擎\"><a href=\"#什么是模板引擎\" class=\"headerlink\" title=\"什么是模板引擎\"></a>什么是模板引擎</h3><p>◇模板引擎的目标是”数据+模板=结果”<br>◇模板引擎将数据与展现有效”解耦”<br><img src=\"/p/f1c8/1622635068478-fdaeec0b-c160-499a-8c7b-0d9f899fea1b.png\" class=\"lazyload\" data-srcset=\"/p/f1c8/1622635068478-fdaeec0b-c160-499a-8c7b-0d9f899fea1b.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"1-1.png\"></p>\n<h3 id=\"主流模板引擎\"><a href=\"#主流模板引擎\" class=\"headerlink\" title=\"主流模板引擎\"></a>主流模板引擎</h3><p>◇Java Servlet Page<br>◇Fremarker<br>◇Beetl</p>\n<h3 id=\"Fremarker\"><a href=\"#Fremarker\" class=\"headerlink\" title=\"Fremarker\"></a>Fremarker</h3><p>◇Fremarker是免费开源的模板引擎技术<br>◇Fremarker脚本为Fremarker Template Language<br>◇Fremarker提供了大量内建函数来简化开发</p>\n<h3 id=\"JSP与Fremarker\"><a href=\"#JSP与Fremarker\" class=\"headerlink\" title=\"JSP与Fremarker\"></a>JSP与Fremarker</h3><p><img src=\"/p/f1c8/1622635426423-771b8d0d-39ec-4488-904c-ccfe7bddde90.png\" class=\"lazyload\" data-srcset=\"/p/f1c8/1622635426423-771b8d0d-39ec-4488-904c-ccfe7bddde90.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"Fremarker快速上手\"><a href=\"#Fremarker快速上手\" class=\"headerlink\" title=\"Fremarker快速上手\"></a>Fremarker快速上手</h3><p>代码演示<br>ftl：${site}-${url}</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FreemarkerSample1</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span></span><br><span class=\"line\"><span class=\"function\">\t\t<span class=\"keyword\">throws</span> TemplateNotFoundException, MalformedTemplateNameException, </span></span><br><span class=\"line\"><span class=\"function\">\t\tParseException, IOException, TemplateException </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// TODO Auto-generated method stub</span></span><br><span class=\"line\">       <span class=\"comment\">//1.加载模板</span></span><br><span class=\"line\">\t\t<span class=\"comment\">//1.1创建核心配置对象</span></span><br><span class=\"line\">\t\tConfiguration config = <span class=\"keyword\">new</span> Configuration(Configuration.VERSION_2_3_31);</span><br><span class=\"line\">\t\t<span class=\"comment\">//1.2设置加载的目录</span></span><br><span class=\"line\">\t\tconfig.setClassForTemplateLoading(FreemarkerSample1.class, <span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\">\t\t<span class=\"comment\">//1.3得到模板对象</span></span><br><span class=\"line\">\t\tTemplate t = config.getTemplate(<span class=\"string\">&quot;sample1.ftl&quot;</span>);</span><br><span class=\"line\">\t   <span class=\"comment\">//2.创建数据</span></span><br><span class=\"line\">\t\tMap&lt;String,Object&gt; data = <span class=\"keyword\">new</span> HashMap&lt;String,Object&gt;();</span><br><span class=\"line\">\t\tdata.put(<span class=\"string\">&quot;site&quot;</span>, <span class=\"string\">&quot;百度&quot;</span>);</span><br><span class=\"line\">\t\tdata.put(<span class=\"string\">&quot;url&quot;</span>, <span class=\"string\">&quot;http://www.baidu.com&quot;</span>);</span><br><span class=\"line\">\t   <span class=\"comment\">//3.产生输出</span></span><br><span class=\"line\">\t\t<span class=\"comment\">//转换类将System.out输出字节流转换为字符输出流</span></span><br><span class=\"line\">\t\tt.process(data, <span class=\"keyword\">new</span> OutputStreamWriter(System.out));</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"FTL取值\"><a href=\"#FTL取值\" class=\"headerlink\" title=\"FTL取值\"></a>FTL取值</h3><p>◇${属性名}             取值，可对属性进行计算<br>◇${属性名!默认值}  使用默认值    eg：${author!”不存在的属性”}<br>◇${属性名?string}   格式化输出<br>eg：${date?string(“yyyy年MM月dd日HH:mm:ss”)}</p>\n<h3 id=\"分支判断\"><a href=\"#分支判断\" class=\"headerlink\" title=\"分支判断\"></a>分支判断</h3><p>◇if分支判断<br>◇switch分支判断</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;#<span class=\"keyword\">if</span> computer.state==<span class=\"number\">1</span>&gt;</span><br><span class=\"line\">状态:正在使用</span><br><span class=\"line\">&lt;#elseif computer.state==<span class=\"number\">2</span>&gt;</span><br><span class=\"line\">状态:闲置</span><br><span class=\"line\">&lt;#elseif computer.state==<span class=\"number\">3</span>&gt;</span><br><span class=\"line\">状态:已作废</span><br><span class=\"line\">&lt;/#<span class=\"keyword\">if</span>&gt; &lt;#-- 闭合 --&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;#<span class=\"keyword\">switch</span> computer.state&gt;</span><br><span class=\"line\">    &lt;#<span class=\"keyword\">case</span> <span class=\"number\">1</span>&gt;</span><br><span class=\"line\">    状态:正在使用</span><br><span class=\"line\">    &lt;#<span class=\"keyword\">break</span>&gt;</span><br><span class=\"line\">    &lt;#<span class=\"keyword\">case</span> <span class=\"number\">2</span>&gt;</span><br><span class=\"line\">    状态:闲置</span><br><span class=\"line\">    &lt;#<span class=\"keyword\">break</span>&gt;</span><br><span class=\"line\">    &lt;#<span class=\"keyword\">case</span> <span class=\"number\">3</span>&gt;</span><br><span class=\"line\">    状态:已作废</span><br><span class=\"line\">    &lt;#<span class=\"keyword\">break</span>&gt;</span><br><span class=\"line\">    &lt;#<span class=\"keyword\">default</span>&gt;</span><br><span class=\"line\">     状态:无效状态</span><br><span class=\"line\">     &lt;/#<span class=\"keyword\">switch</span>&gt;</span><br></pre></td></tr></table></figure>\n<h3 id=\"list迭代列表\"><a href=\"#list迭代列表\" class=\"headerlink\" title=\"list迭代列表\"></a>list迭代列表</h3><p>  –格式</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;#--student被迭代的集合；stu迭代变量 --&gt;</span><br><span class=\"line\">&lt;#list student as stu&gt;</span><br><span class=\"line\">&lt;li&gt;$&#123;stu_index&#125;-$&#123;stu.name&#125;&lt;/li&gt;</span><br><span class=\"line\">&lt;/#list&gt;</span><br></pre></td></tr></table></figure>\n<p> –代码演示</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;#list computers as c&gt;</span><br><span class=\"line\">序号:$&#123;c_index + <span class=\"number\">1</span>&#125; &lt;#-- 迭代变量_index保存了循环的索引,从<span class=\"number\">0</span>开始 --&gt;</span><br><span class=\"line\">SN:$&#123;c.sn&#125;</span><br><span class=\"line\">型号:$&#123;c.model&#125;</span><br><span class=\"line\">&lt;#<span class=\"keyword\">switch</span> c.state&gt;</span><br><span class=\"line\">&lt;#<span class=\"keyword\">case</span> <span class=\"number\">1</span>&gt;</span><br><span class=\"line\">状态:使用中</span><br><span class=\"line\">&lt;#<span class=\"keyword\">break</span>&gt;</span><br><span class=\"line\">&lt;#<span class=\"keyword\">case</span> <span class=\"number\">2</span>&gt;</span><br><span class=\"line\">状态:闲置</span><br><span class=\"line\">&lt;#<span class=\"keyword\">break</span>&gt;</span><br><span class=\"line\">&lt;#<span class=\"keyword\">case</span> <span class=\"number\">3</span>&gt;</span><br><span class=\"line\">状态:已作废</span><br><span class=\"line\">&lt;#<span class=\"keyword\">break</span>&gt;</span><br><span class=\"line\">&lt;/#<span class=\"keyword\">switch</span>&gt;</span><br><span class=\"line\">&lt;#<span class=\"keyword\">if</span> c.user??&gt;</span><br><span class=\"line\">用户:$&#123;c.user&#125;</span><br><span class=\"line\">&lt;/#<span class=\"keyword\">if</span>&gt;</span><br><span class=\"line\">采购日期:$&#123;c.dop?string(<span class=\"string\">&quot;yyyy-MM-dd&quot;</span>)&#125;</span><br><span class=\"line\">采购价格:$&#123;c.price?string(<span class=\"string\">&quot;0.00&quot;</span>)&#125;</span><br><span class=\"line\">-------------------------------------------</span><br><span class=\"line\">&lt;/#list&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">==========================================</span><br><span class=\"line\">&lt;#list computer_map?keys as k &gt;</span><br><span class=\"line\">$&#123;k&#125;-$&#123;computer_map[k].model&#125;</span><br><span class=\"line\">$&#123;computer_map[k].price?string(<span class=\"string\">&quot;0.00&quot;</span>)&#125;</span><br><span class=\"line\">&lt;/#list&gt;</span><br></pre></td></tr></table></figure>\n<h3 id=\"list迭代Map\"><a href=\"#list迭代Map\" class=\"headerlink\" title=\"list迭代Map\"></a>list迭代Map</h3><p> –格式</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;#list map?keys as key&gt;</span><br><span class=\"line\">  $&#123;key&#125;:$&#123;map[key]&#125;</span><br><span class=\"line\">&lt;/#list&gt;</span><br></pre></td></tr></table></figure>\n<h3 id=\"内建函数\"><a href=\"#内建函数\" class=\"headerlink\" title=\"内建函数\"></a>内建函数</h3><p><img src=\"/p/f1c8/1622680841881-8fd3d58b-e388-45eb-9faf-2c3bb42399ee.png\" class=\"lazyload\" data-srcset=\"/p/f1c8/1622680841881-8fd3d58b-e388-45eb-9faf-2c3bb42399ee.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br> 代码示例：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">$&#123;name?cap_first&#125;</span><br><span class=\"line\">$&#123;brand?upper_case&#125;</span><br><span class=\"line\">$&#123;brand?length&#125;</span><br><span class=\"line\">$&#123;words?replace(<span class=\"string\">&quot;blood&quot;</span> , <span class=\"string\">&quot;*****&quot;</span>)&#125;</span><br><span class=\"line\">$&#123;words?index_of(<span class=\"string\">&quot;blood&quot;</span>)&#125;</span><br><span class=\"line\">&lt;#-- 利用?string实现三目运算符的操作 --&gt;</span><br><span class=\"line\">$&#123;(words?index_of(<span class=\"string\">&quot;blood&quot;</span>) != -<span class=\"number\">1</span>)?string(<span class=\"string\">&quot;包含敏感词汇&quot;</span>,<span class=\"string\">&quot;不包含敏感词汇&quot;</span>)&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$&#123;n?round&#125;</span><br><span class=\"line\">$&#123;n?floor&#125;</span><br><span class=\"line\">$&#123;n?ceiling&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">公司共有$&#123;computers?size&#125;台电脑</span><br><span class=\"line\">第一台:$&#123;computers?first.model&#125;</span><br><span class=\"line\">最后一台:$&#123;computers?last.model&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;#-- 集合排序 ?reverse代表反转，将默认的升序排列改为降序 --&gt;</span><br><span class=\"line\">&lt;#list computers?sort_by(<span class=\"string\">&quot;price&quot;</span>)?reverse as c&gt;</span><br><span class=\"line\">\t$&#123;c.sn&#125;-$&#123;c.price&#125;</span><br><span class=\"line\">&lt;/#list&gt;</span><br></pre></td></tr></table></figure>\n<p>◇<a href=\"http://freemarker.foofun.cn/\">Freemarker参考手册</a></p>\n<h2 id=\"Freemarker与Servlet整合\"><a href=\"#Freemarker与Servlet整合\" class=\"headerlink\" title=\"Freemarker与Servlet整合\"></a>Freemarker与Servlet整合</h2><h3 id=\"代码演示\"><a href=\"#代码演示\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h3><p> –xml配置FreemarkerServlet</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 配置freemarker类，和配置servlet一样 </span></span><br><span class=\"line\"><span class=\"comment\">  在配置class上可以按住Ctrl若路径出现蓝色下划线则说明路径正确</span></span><br><span class=\"line\"><span class=\"comment\">  通过设置初始化参数来说明FreemarkerServlet加载哪个目录</span></span><br><span class=\"line\"><span class=\"comment\">  --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>freemarker<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>freemarker.ext.servlet.FreemarkerServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">init-param</span>&gt;</span></span><br><span class=\"line\">             <span class=\"tag\">&lt;<span class=\"name\">param-name</span>&gt;</span>TemplatePath<span class=\"tag\">&lt;/<span class=\"name\">param-name</span>&gt;</span></span><br><span class=\"line\">             <span class=\"tag\">&lt;<span class=\"name\">param-value</span>&gt;</span>/WEB-INF/ftl<span class=\"tag\">&lt;/<span class=\"name\">param-value</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">init-param</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>freemarker<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>*.ftl<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>–Employee类提供员工类信息</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Employee</span> </span>&#123;</span><br><span class=\"line\">     <span class=\"keyword\">private</span> Integer empno;</span><br><span class=\"line\">     <span class=\"keyword\">private</span> String ename;</span><br><span class=\"line\">     <span class=\"keyword\">private</span> String department;</span><br><span class=\"line\">     <span class=\"keyword\">private</span> String job;</span><br><span class=\"line\">     <span class=\"keyword\">private</span> Float salary; </span><br><span class=\"line\">    \t <span class=\"comment\">/*省略构造函数*/</span></span><br><span class=\"line\">     &#125;</span><br></pre></td></tr></table></figure>\n<p>–ListServlet为界面准备数据</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doGet</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> </span></span><br><span class=\"line\"><span class=\"function\">\t\t\t<span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">\t\tList list = <span class=\"keyword\">new</span> ArrayList();</span><br><span class=\"line\">\t\tlist.add(<span class=\"keyword\">new</span> Employee(<span class=\"number\">2020</span>,<span class=\"string\">&quot;关浩&quot;</span>,<span class=\"string\">&quot;市场部&quot;</span>,<span class=\"string\">&quot;客户代表&quot;</span>,<span class=\"number\">6000f</span>));</span><br><span class=\"line\">\t\tlist.add(<span class=\"keyword\">new</span> Employee(<span class=\"number\">2021</span>,<span class=\"string\">&quot;右磊&quot;</span>,<span class=\"string\">&quot;研发部&quot;</span>,<span class=\"string\">&quot;运维工程师&quot;</span>,<span class=\"number\">6500f</span>));</span><br><span class=\"line\">        list.add(<span class=\"keyword\">new</span> Employee(<span class=\"number\">2022</span>,<span class=\"string\">&quot;方传输&quot;</span>,<span class=\"string\">&quot;运输部&quot;</span>,<span class=\"string\">&quot;交通工程师&quot;</span>,<span class=\"number\">8500f</span>));</span><br><span class=\"line\">\t\tlist.add(<span class=\"keyword\">new</span> Employee(<span class=\"number\">2023</span>,<span class=\"string\">&quot;才刚&quot;</span>,<span class=\"string\">&quot;董事会&quot;</span>,<span class=\"string\">&quot;CEO&quot;</span>,<span class=\"number\">120000f</span>));</span><br><span class=\"line\">\t\trequest.setAttribute(<span class=\"string\">&quot;employee_list&quot;</span>, list);</span><br><span class=\"line\">\t\t<span class=\"comment\">//请求转发到ftl文件上</span></span><br><span class=\"line\">\t\trequest.getRequestDispatcher(<span class=\"string\">&quot;/employee.ftl&quot;</span>).forward(request, response);</span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure>\n<p>–ftl显示页面</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;#-- 遍历集合，将数据填到每一行 --&gt;</span><br><span class=\"line\">                &lt;#list employee_list as emp&gt;</span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>$&#123;emp_index+1&#125;<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>$&#123;emp.empno?string(&quot;0&quot;)&#125;<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>$&#123;emp.ename&#125;<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>$&#123;emp.department&#125;<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>$&#123;emp.job&#125;<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;color: red;font-weight: bold&quot;</span>&gt;</span></span><br><span class=\"line\">                      ￥$&#123;emp.salary?string(&quot;0.00&quot;)&#125;<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span>               </span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">                &lt;/#list&gt;      </span><br></pre></td></tr></table></figure>\n<h3 id=\"效果图\"><a href=\"#效果图\" class=\"headerlink\" title=\"效果图\"></a>效果图</h3><p><img src=\"/p/f1c8/1622685702485-b430b8b9-980b-4c28-9c51-d927d87f91d7.png\" class=\"lazyload\" data-srcset=\"/p/f1c8/1622685702485-b430b8b9-980b-4c28-9c51-d927d87f91d7.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n","categories":["JavaWeb"],"tags":["Freemaker"]},{"title":"JQuery与Ajax入门","url":"/p/b52a.html","content":"<h2 id=\"JQuery\"><a href=\"#JQuery\" class=\"headerlink\" title=\"JQuery\"></a>JQuery</h2><h3 id=\"JavaScript库\"><a href=\"#JavaScript库\" class=\"headerlink\" title=\"JavaScript库\"></a>JavaScript库</h3><p>◇为了简化JavaScript开发，第三发厂商开发了JavaScript库<br>◇主流JavaScript库有：JQuery, Vue.js, AngularJS, React…</p>\n<h3 id=\"jQuery介绍\"><a href=\"#jQuery介绍\" class=\"headerlink\" title=\"jQuery介绍\"></a>jQuery介绍</h3><p>◇jQuery是一个轻量级的JS库，使用简单<br>◇jQuery的核心是选择器，用于获取页面元素<br>◇jQuery提供了大量高效方法，开发速度大幅提升</p>\n<h3 id=\"jQuery选择器实验室\"><a href=\"#jQuery选择器实验室\" class=\"headerlink\" title=\"jQuery选择器实验室\"></a>jQuery选择器实验室</h3><figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span> &gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;Content-Type&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;text/html; charset=utf-8&quot;</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>jQuery实验室<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"css\"></span></span><br><span class=\"line\"><span class=\"css\"><span class=\"selector-class\">.myclass</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">font-style</span>: italic;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">color</span>: darkblue;</span></span><br><span class=\"line\"><span class=\"css\">&#125;</span></span><br><span class=\"line\"><span class=\"css\"><span class=\"comment\">/* 高亮css类 */</span></span></span><br><span class=\"line\"><span class=\"css\"><span class=\"selector-class\">.highlight</span> &#123;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">color</span>: red;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">font-size</span>: <span class=\"number\">30px</span>;</span></span><br><span class=\"line\"><span class=\"css\">\t<span class=\"attribute\">background</span>: lightblue;</span></span><br><span class=\"line\"><span class=\"css\">&#125;</span></span><br><span class=\"line\"><span class=\"css\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;section&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">h2</span>&gt;</span>jQuery选择器实验室<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;height: 24px&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;txtSelector&quot;</span> /&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;btnSelect&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;height: 30px&quot;</span>&gt;</span>选择<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">hr</span> /&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;welcome&quot;</span>&gt;</span>欢迎来到选择器实验室<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>搜索引擎：<span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;http://www.baidu.com&quot;</span>&gt;</span>百度<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span> <span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span> <span class=\"tag\">&lt;<span class=\"name\">a</span></span></span><br><span class=\"line\"><span class=\"tag\">\t\t\t\t\t\t<span class=\"attr\">style</span>=<span class=\"string\">&quot;color: darkgreen&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;http://www.so.com&quot;</span>&gt;</span>360<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>电子邮箱：<span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;http://mail.163.com&quot;</span>&gt;</span>网易邮箱<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span> <span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span> <span class=\"tag\">&lt;<span class=\"name\">a</span></span></span><br><span class=\"line\"><span class=\"tag\">\t\t\t\t\t\t<span class=\"attr\">style</span>=<span class=\"string\">&quot;color: darkgreen&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;http://mail.qq.com&quot;</span>&gt;</span>QQ邮箱<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>中国名校：<span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;http://www.tsinghua.edu.cn&quot;</span>&gt;</span>清华大学<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span> <span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;color: darkgreen&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;https://www.pku.edu.cn/&quot;</span>&gt;</span>北京大学<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;myclass &quot;</span>&gt;</span>我是拥有myclass类的span标签<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;myclass&quot;</span>&gt;</span>我是拥有myclass的p标签<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;info&quot;</span> <span class=\"attr\">action</span>=<span class=\"string\">&quot;#&quot;</span> <span class=\"attr\">method</span>=<span class=\"string\">&quot;get&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t用户名：<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;uname&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;admin&quot;</span> /&gt;</span> 密码：<span class=\"tag\">&lt;<span class=\"name\">input</span></span></span><br><span class=\"line\"><span class=\"tag\">\t\t\t\t\t\t<span class=\"attr\">type</span>=<span class=\"string\">&quot;password&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;upsd&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;123456&quot;</span> /&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t婚姻状况： <span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;marital_status&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;1&quot;</span>&gt;</span>未婚<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;2&quot;</span>&gt;</span>已婚<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;3&quot;</span>&gt;</span>离异<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;4&quot;</span>&gt;</span>丧偶<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;left clear-left&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;提交&quot;</span> /&gt;</span> <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;reset&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;重置&quot;</span> /&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;js/jquery-3.6.0.min.js&quot;</span> &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"javascript\"></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">/*</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"javascript\">\t\t\tid选择器使用&quot;#id值&quot;进行选择</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"javascript\">\t\t\tcss选择器使用&quot;.css类名&quot;进行选择</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"javascript\">\t\t\t$(&quot;.myclass&quot;).addClass(&quot;highlight&quot;);</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"javascript\">\t\t*/</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">//单击事件</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;btnSelect&quot;</span>).onclick = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"keyword\">var</span> selector = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;txtSelector&quot;</span>).value;<span class=\"comment\">//获取文本框的值</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"comment\">//jquery的选择器方法</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"comment\">//()里是选择器表达式 </span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t$(<span class=\"string\">&quot;*&quot;</span>).removeClass(<span class=\"string\">&quot;highlight&quot;</span>);<span class=\"comment\">//清除高亮类</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t$(selector).addClass(<span class=\"string\">&quot;highlight&quot;</span>);<span class=\"comment\">//selector本身是字符串，故不用加&quot;&quot;</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t&#125;</span></span><br><span class=\"line\"><span class=\"javascript\">\t</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"Web页面开发的两个要素\"><a href=\"#Web页面开发的两个要素\" class=\"headerlink\" title=\"Web页面开发的两个要素\"></a>Web页面开发的两个要素</h3><p>◇在使用HTML开发页面时，有两个基本点：<br>  *选择HTML页面上在哪些元素<br>  *在这些元素上做哪些动作</p>\n<h3 id=\"jQuery选择器\"><a href=\"#jQuery选择器\" class=\"headerlink\" title=\"jQuery选择器\"></a>jQuery选择器</h3><p>◇jQuery选择器用于选中需要操作的页面元素<br>◇语法1：jQuery(选择器表达式)<br>◇语法2：$(选择器表达式)</p>\n<h3 id=\"基本选择器\"><a href=\"#基本选择器\" class=\"headerlink\" title=\"基本选择器\"></a>基本选择器</h3><p>◇基本选择器是jQuery最基础也是最常用的选择器表达式<br><img src=\"/p/b52a/1622000697052-bd3743b2-5284-4538-8aec-3addb144eca8.png\" class=\"lazyload\" data-srcset=\"/p/b52a/1622000697052-bd3743b2-5284-4538-8aec-3addb144eca8.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>–代码演示</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\">$(&quot;#marital_status&quot;).addClass(&quot;highlight&quot;);</span><br><span class=\"line\">$(&quot;.myclass&quot;).addClass(&quot;highlight&quot;);</span><br><span class=\"line\">$(&quot;a&quot;).addClass(&quot;highlight&quot;);</span><br><span class=\"line\">$(&quot;.myclass,a,#marital_status&quot;).addClass(&quot;highlight&quot;);</span><br></pre></td></tr></table></figure>\n<h3 id=\"层叠选择器\"><a href=\"#层叠选择器\" class=\"headerlink\" title=\"层叠选择器\"></a>层叠选择器</h3><p>◇层叠选择器是根据元素的位置关系来获取元素的选择器表达式<br><img src=\"/p/b52a/1622001501455-7caa1401-306c-41d3-9717-de2a8f36711b.png\" class=\"lazyload\" data-srcset=\"/p/b52a/1622001501455-7caa1401-306c-41d3-9717-de2a8f36711b.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>◇后代选择器：选择所有后代<br>◇子选择器：只选择直接后代<br>◇兄弟选择器：选择prev之后的同级</p>\n<h3 id=\"属性选择器\"><a href=\"#属性选择器\" class=\"headerlink\" title=\"属性选择器\"></a>属性选择器</h3><p>◇属性选择器是根据元素的属性值来选择元素的选择器表达式<br><img src=\"/p/b52a/1622011699656-4fdc2371-67ce-4af1-9a96-bad348a64a3b.png\" class=\"lazyload\" data-srcset=\"/p/b52a/1622011699656-4fdc2371-67ce-4af1-9a96-bad348a64a3b.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>eg：$(“a[href=’<a href=\"http://www.baidu.com&/#39;]&quot;\">http://www.baidu.com&#39;]&quot;</a>)</p>\n<h3 id=\"位置选择器与表单选择器（了解即可）\"><a href=\"#位置选择器与表单选择器（了解即可）\" class=\"headerlink\" title=\"位置选择器与表单选择器（了解即可）\"></a>位置选择器与表单选择器（了解即可）</h3><p>◇位置选择器是通过位置获取指定的元素，例如”获取第3个元素”<br><img src=\"/p/b52a/1622013491362-933571db-7fd4-4eed-ab07-4ee7bd1dd5f0.png\" class=\"lazyload\" data-srcset=\"/p/b52a/1622013491362-933571db-7fd4-4eed-ab07-4ee7bd1dd5f0.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>eg：$(“.myclass:first”)<br>◇表单选择器是获取表单元素的简化形式，例如：获取所有文本框<br><img src=\"/p/b52a/1622013766935-41de19ac-12ec-4c40-83ba-95c7b835f512.png\" class=\"lazyload\" data-srcset=\"/p/b52a/1622013766935-41de19ac-12ec-4c40-83ba-95c7b835f512.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"操作元素属性\"><a href=\"#操作元素属性\" class=\"headerlink\" title=\"操作元素属性\"></a>操作元素属性</h3><p>◇attr(name|properties|key) - 获取或设置元素属性<br>◇removeAttr(name) - 移除元素属性<br>代码示例：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;js/jquery-3.6.0.min.js&quot;</span> &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"javascript\"></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"keyword\">var</span> href_attr =  $(<span class=\"string\">&quot;a[href*=&#x27;163&#x27;]&quot;</span>).attr(<span class=\"string\">&quot;href&quot;</span>);<span class=\"comment\">//获取href属性</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\talert(href_attr);</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t$(<span class=\"string\">&quot;a[href*=&#x27;163&#x27;]&quot;</span>).attr(<span class=\"string\">&quot;href&quot;</span> , <span class=\"string\">&quot;http://www.163.com&quot;</span>);<span class=\"comment\">//传递两个参数，则为设置属性</span></span></span><br><span class=\"line\"><span class=\"javascript\">  </span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"keyword\">var</span> attr = $(<span class=\"string\">&quot;a&quot;</span>).attr(<span class=\"string\">&quot;href&quot;</span>);<span class=\"comment\">//获取当前网页的所有超链接</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\talert(attr);</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t$(<span class=\"string\">&quot;a&quot;</span>).removeAttr(<span class=\"string\">&quot;href&quot;</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">\t</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>◇var attr = $(“a”).attr(“href”);如果选中多个属性，在用attr获取多个属性值的时候，默认返回第一个href属性值，而设置则会把所有超链接都设置。总之，在获取属性值时，只会返回第一个符合要求的属性值；而设置属性值时，将所有属性值设置。</p>\n<h3 id=\"操作元素的CSS样式\"><a href=\"#操作元素的CSS样式\" class=\"headerlink\" title=\"操作元素的CSS样式\"></a>操作元素的CSS样式</h3><p>◇css() -获取或设置匹配元素的样式属性<br>◇addClass() -为每个匹配的元素添加指定的类名<br>◇removeClass() - 从所有匹配的元素中删除全部或者指定的类<br>代码示例：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;js/jquery-3.6.0.min.js&quot;</span> &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"javascript\"></span></span><br><span class=\"line\"><span class=\"javascript\">     $(<span class=\"string\">&quot;a&quot;</span>).css(<span class=\"string\">&quot;color&quot;</span>,<span class=\"string\">&quot;red&quot;</span>);<span class=\"comment\">//将当前页面所有超链接改成红色</span></span></span><br><span class=\"line\"><span class=\"javascript\">     <span class=\"comment\">//一次性设置多个属性值</span></span></span><br><span class=\"line\"><span class=\"javascript\">     $(<span class=\"string\">&quot;a&quot;</span>).css(&#123;<span class=\"string\">&quot;color&quot;</span>:<span class=\"string\">&quot;red&quot;</span>,<span class=\"string\">&quot;font-weight&quot;</span>:<span class=\"string\">&quot;bold&quot;</span>,<span class=\"string\">&quot;font-style&quot;</span>:<span class=\"string\">&quot;italic&quot;</span>&#125;);</span></span><br><span class=\"line\"><span class=\"javascript\">     <span class=\"keyword\">var</span> color = $(<span class=\"string\">&quot;a&quot;</span>).css(<span class=\"string\">&quot;color&quot;</span>);<span class=\"comment\">//获取匹配元素(第一个)属性值</span></span></span><br><span class=\"line\"><span class=\"javascript\">     $(<span class=\"string\">&quot;li&quot;</span>).addClass(<span class=\"string\">&quot;highlight&quot;</span>);<span class=\"comment\">//添加类，多个类用空格分开</span></span></span><br><span class=\"line\"><span class=\"javascript\">    </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"设置元素内容\"><a href=\"#设置元素内容\" class=\"headerlink\" title=\"设置元素内容\"></a>设置元素内容</h3><p>◇val() -获取或设置输入项的值<br>◇text() -获取或设置元素的纯文本<br>◇html() -获取或设置元素内部的HTML<br>代码示例：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;js/jquery-3.6.0.min.js&quot;</span> &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> &gt;</span><span class=\"javascript\"></span></span><br><span class=\"line\"><span class=\"javascript\">       <span class=\"comment\">//设置文本框的数据</span></span></span><br><span class=\"line\"><span class=\"javascript\">       $(<span class=\"string\">&quot;input[name=&#x27;uname&#x27;]&quot;</span>).val(<span class=\"string\">&quot;adminstrator&quot;</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">       <span class=\"comment\">//获取文本框的数据</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">var</span> n =  $(<span class=\"string\">&quot;input[name=&#x27;uname&#x27;]&quot;</span>).val();</span></span><br><span class=\"line\"><span class=\"javascript\">       <span class=\"comment\">/*text与html方法最大的区别在于对于文本中的html标签是否</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"javascript\">                  进行转义*/</span>    </span></span><br><span class=\"line\"><span class=\"javascript\">      $(<span class=\"string\">&quot;span.myclass&quot;</span>).text(<span class=\"string\">&quot;男儿何不带吴钩&quot;</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">      $(<span class=\"string\">&quot;p.myclass&quot;</span>).html(<span class=\"string\">&quot;&lt;b&gt;收取关山五十州&lt;/b&gt;&quot;</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">//获取属性</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">var</span> m = $(<span class=\"string\">&quot;p.myclass&quot;</span>).html();</span></span><br><span class=\"line\"><span class=\"javascript\">    </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"jQuery事件处理方法\"><a href=\"#jQuery事件处理方法\" class=\"headerlink\" title=\"jQuery事件处理方法\"></a>jQuery事件处理方法</h3><p>◇on(“click”, function) - 为选中的页面元素绑定单击事件<br>◇click(function) - 是绑定事件的简写形式<br>◇处理方法中提供了event参数包含了事件的相关信息<br><img src=\"/p/b52a/1622034100363-a2668116-3ab1-415e-a75a-f86d316721e8.png\" class=\"lazyload\" data-srcset=\"/p/b52a/1622034100363-a2668116-3ab1-415e-a75a-f86d316721e8.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>代码示例：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;js/jquery-3.6.0.min.js&quot;</span> &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">script</span> &gt;</span><span class=\"javascript\"></span></span><br><span class=\"line\"><span class=\"javascript\">     $(<span class=\"string\">&quot;p.myclass&quot;</span>).on(<span class=\"string\">&quot;click&quot;</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">   \t  <span class=\"comment\">//$(this)是指当前事件产生的对象</span></span></span><br><span class=\"line\"><span class=\"javascript\">   \t  $(<span class=\"built_in\">this</span>).css(<span class=\"string\">&quot;background-color&quot;</span>,<span class=\"string\">&quot;yellow&quot;</span>);    \t  </span></span><br><span class=\"line\"><span class=\"javascript\">     &#125;)</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">//简化方法</span></span></span><br><span class=\"line\"><span class=\"javascript\">     $(<span class=\"string\">&quot;span.myclass&quot;</span>).click(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">   \t  $(<span class=\"built_in\">this</span>).css(<span class=\"string\">&quot;background-color&quot;</span>,<span class=\"string\">&quot;pink&quot;</span>); </span></span><br><span class=\"line\"><span class=\"javascript\">     &#125;)</span></span><br><span class=\"line\"><span class=\"javascript\">     <span class=\"comment\">//键盘事件,输入空格显示红色警告</span></span></span><br><span class=\"line\"><span class=\"javascript\">     $(<span class=\"string\">&quot;input[name=&#x27;uname&#x27;]&quot;</span>).keypress(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">   \t  <span class=\"keyword\">if</span>(event.key==<span class=\"string\">&quot; &quot;</span>)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">   \t\t $(<span class=\"built_in\">this</span>).css(<span class=\"string\">&quot;color&quot;</span>,<span class=\"string\">&quot;red&quot;</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">   \t  &#125;</span></span><br><span class=\"line\"><span class=\"javascript\">     &#125;)</span></span><br><span class=\"line\"><span class=\"javascript\">   </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"Ajax\"><a href=\"#Ajax\" class=\"headerlink\" title=\"Ajax\"></a>Ajax</h2><h3 id=\"Ajax介绍\"><a href=\"#Ajax介绍\" class=\"headerlink\" title=\"Ajax介绍\"></a>Ajax介绍</h3><p>◇Asynchronous JavaScript And XML(异步的JavaScript和XML)<br>◇Ajax可以在不刷新页面的前提下，进行页面局部更新<br>◇Ajax不是新的技术，Ajax并不是W3C的标准</p>\n<h3 id=\"Ajax的使用流程\"><a href=\"#Ajax的使用流程\" class=\"headerlink\" title=\"Ajax的使用流程\"></a>Ajax的使用流程</h3><p>◇创建XmlHttpRequest对象<br>   -XmlHttpRequest用于在后台与服务器交换数据，是AJAX的核心<br>   -XmlHttpRequest并不是W3C的标准，不同浏览器创建方式不同<br>   -通用创建代码：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\">var xmlhttp;</span><br><span class=\"line\">    \t if(window.XMLHttpRequest)&#123;</span><br><span class=\"line\">    \t\t xmlhttp = new XMLHttpRequest();//火狐，谷歌等新版本浏览器</span><br><span class=\"line\">    \t &#125;else&#123;</span><br><span class=\"line\">    \t\t //IE5,IE6等老版本浏览器代码</span><br><span class=\"line\">    \t\t xmlhttp = new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);</span><br><span class=\"line\">    \t &#125;</span><br><span class=\"line\">  </span><br></pre></td></tr></table></figure>\n<p>◇发送Ajax请求<br>   -xmlhttp.open()用于创建请求<br>   -xmlhttp.send()用于发送请求<br>   -代码：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\">//发送Ajax请求</span><br><span class=\"line\">         xmlhttp.open(&quot;GET&quot;, &quot;/ajax/content&quot;, &quot;ture&quot;);//true表示此请求为异步方式</span><br><span class=\"line\">         xmlhttp.send();</span><br></pre></td></tr></table></figure>\n<p>◇处理服务器响应<br>  -xmlhttp.onreadystatechange()事件用于监听AJAX的执行过程<br>  -xmlhttp.readyState属性说明XMLHttpRequest当前状态<br>  <img src=\"/p/b52a/1622037904791-2080ff74-3e5e-4938-917e-213d58d852c9.png\" class=\"lazyload\" data-srcset=\"/p/b52a/1622037904791-2080ff74-3e5e-4938-917e-213d58d852c9.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>  -xmlhttp.status属性服务器响应状态码， 200：成功 ；404：未找到 …<br>  -代码示例：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\">//处理服务器响应</span><br><span class=\"line\">xmlhttp.onreadystatechange = function()&#123;</span><br><span class=\"line\">\tif(xmlhttp.readyState == 4&amp;&amp; xmlhttp.status == 200)&#123;</span><br><span class=\"line\">\t\tvar t = xmlhttp.responseText;</span><br><span class=\"line\">\t\talert(t);</span><br><span class=\"line\">\t\t//处理服务器响应文本</span><br><span class=\"line\">\t\tdocument.getElementById(&quot;divContent&quot;).innerHTML = t;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"利用Ajax实现新闻列表\"><a href=\"#利用Ajax实现新闻列表\" class=\"headerlink\" title=\"利用Ajax实现新闻列表\"></a>利用Ajax实现新闻列表</h3><p> 开发模式：<br>  ①创建新闻类，设置新闻的格式框架</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.lcg.ajax;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">News</span> </span>&#123;</span><br><span class=\"line\">     <span class=\"keyword\">private</span> String title;</span><br><span class=\"line\">     <span class=\"keyword\">private</span> String date;</span><br><span class=\"line\">     <span class=\"keyword\">private</span> String source;</span><br><span class=\"line\">     <span class=\"keyword\">private</span> String content;</span><br><span class=\"line\">     </span><br><span class=\"line\">     <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">News</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    \t </span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">News</span><span class=\"params\">(String title, String date, String source, String content)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">super</span>();</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.title = title;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.date = date;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.source = source;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.content = content;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getTitle</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> title;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setTitle</span><span class=\"params\">(String title)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.title = title;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getDate</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> date;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setDate</span><span class=\"params\">(String date)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.date = date;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getSource</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> source;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setSource</span><span class=\"params\">(String source)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.source = source;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getContent</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> content;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setContent</span><span class=\"params\">(String content)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.content = content;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">     </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>②创建Servlet，初始化新闻数据，并将数据<a href=\"https://blog.csdn.net/xlgen157387/article/details/79840134\">序列化</a></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.lcg.ajax;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.ArrayList;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.annotation.WebServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.alibaba.fastjson.JSON;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Servlet implementation class NewsListServlet</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@WebServlet(&quot;/newslist&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">NewsListServlet</span> <span class=\"keyword\">extends</span> <span class=\"title\">HttpServlet</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">long</span> serialVersionUID = <span class=\"number\">1L</span>;</span><br><span class=\"line\">       </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@see</span> HttpServlet#HttpServlet()</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">NewsListServlet</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>();</span><br><span class=\"line\">        <span class=\"comment\">// TODO Auto-generated constructor stub</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@see</span> HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class=\"line\"><span class=\"comment\">\t */</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doGet</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> </span></span><br><span class=\"line\"><span class=\"function\">        <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">\t\tList list = <span class=\"keyword\">new</span> ArrayList();</span><br><span class=\"line\">\t\tlist.add(<span class=\"keyword\">new</span> News(<span class=\"string\">&quot;TIOBE:2018年5月份全球编程语言排行榜&quot;</span>,<span class=\"string\">&quot;2018-5-1&quot;</span>,<span class=\"string\">&quot;TIBOE&quot;</span>,<span class=\"string\">&quot;...&quot;</span>));</span><br><span class=\"line\">\t\tlist.add(<span class=\"keyword\">new</span> News(<span class=\"string\">&quot;TIOBE:2018年6月份全球编程语言排行榜&quot;</span>,<span class=\"string\">&quot;2018-6-1&quot;</span>,<span class=\"string\">&quot;TIBOE&quot;</span>,<span class=\"string\">&quot;...&quot;</span>));</span><br><span class=\"line\">\t\tlist.add(<span class=\"keyword\">new</span> News(<span class=\"string\">&quot;TIOBE:2018年7月份全球编程语言排行榜&quot;</span>,<span class=\"string\">&quot;2018-7-1&quot;</span>,<span class=\"string\">&quot;TIBOE&quot;</span>,<span class=\"string\">&quot;...&quot;</span>));</span><br><span class=\"line\">\t\tlist.add(<span class=\"keyword\">new</span> News(<span class=\"string\">&quot;TIOBE:2018年8月份全球编程语言排行榜&quot;</span>,<span class=\"string\">&quot;2018-8-1&quot;</span>,<span class=\"string\">&quot;TIBOE&quot;</span>,<span class=\"string\">&quot;...&quot;</span>));</span><br><span class=\"line\">\t\t<span class=\"comment\">//转换为json对象</span></span><br><span class=\"line\">        String json = JSON.toJSONString(list);<span class=\"comment\">//fastjson为java提供的json对象</span></span><br><span class=\"line\">\t\tSystem.out.print(json);</span><br><span class=\"line\">\t\tresponse.setContentType(<span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">//list集合在早期采用转换为xml传输，现在使用json来序列化，</span></span><br><span class=\"line\">\t\tresponse.getWriter().println(json);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>③实现页面，将json转为html输出</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Insert title here<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;container&quot;</span>&gt;</span></span><br><span class=\"line\">      </span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"javascript\"></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">//1.创建XMLHttpRequest</span></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">var</span> xmlhttp;</span></span><br><span class=\"line\"><span class=\"javascript\">    \t <span class=\"keyword\">if</span>(<span class=\"built_in\">window</span>.XMLHttpRequest)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">    \t\t xmlhttp = <span class=\"keyword\">new</span> XMLHttpRequest();<span class=\"comment\">//火狐，谷歌等新版本浏览器</span></span></span><br><span class=\"line\"><span class=\"javascript\">    \t &#125;<span class=\"keyword\">else</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">    \t\t <span class=\"comment\">//IE5,IE6等老版本浏览器代码</span></span></span><br><span class=\"line\"><span class=\"javascript\">    \t\t xmlhttp = <span class=\"keyword\">new</span> ActiveXObject(<span class=\"string\">&quot;Microsoft.XMLHTTP&quot;</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">    \t &#125;</span></span><br><span class=\"line\"><span class=\"javascript\">     </span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"comment\">//2.发送Ajax请求</span></span></span><br><span class=\"line\"><span class=\"javascript\">       xmlhttp.open(<span class=\"string\">&quot;GET&quot;</span>, <span class=\"string\">&quot;/ajax/newslist&quot;</span>, <span class=\"string\">&quot;ture&quot;</span>);<span class=\"comment\">//true表示此请求为异步方式</span></span></span><br><span class=\"line\"><span class=\"javascript\">         xmlhttp.send();</span></span><br><span class=\"line\"><span class=\"javascript\">       </span></span><br><span class=\"line\"><span class=\"javascript\">       <span class=\"comment\">//3.处理服务器响应</span></span></span><br><span class=\"line\"><span class=\"javascript\">        xmlhttp.onreadystatechange = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        \t<span class=\"keyword\">if</span>(xmlhttp.readyState == <span class=\"number\">4</span>&amp;&amp; xmlhttp.status == <span class=\"number\">200</span>)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        \t\t<span class=\"keyword\">var</span> text = xmlhttp.responseText;</span></span><br><span class=\"line\"><span class=\"javascript\">        \t\t<span class=\"built_in\">console</span>.log(text);</span></span><br><span class=\"line\"><span class=\"javascript\">        \t\t<span class=\"keyword\">var</span> json = <span class=\"built_in\">JSON</span>.parse(text);<span class=\"comment\">//JavaScript内置的JSON对象</span></span></span><br><span class=\"line\"><span class=\"javascript\">        \t\t<span class=\"built_in\">console</span>.log(json);</span></span><br><span class=\"line\"><span class=\"javascript\">        \t\t<span class=\"keyword\">var</span> html =<span class=\"string\">&quot; &quot;</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">        \t\t<span class=\"comment\">//循环输出新闻</span></span></span><br><span class=\"line\"><span class=\"javascript\">        \t\t<span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>;i&lt;json.length;i++)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        \t\t\t<span class=\"keyword\">var</span> news = json[i];</span></span><br><span class=\"line\"><span class=\"javascript\">        \t\t\thtml=html+<span class=\"string\">&quot;&lt;h1&gt;&quot;</span>+news.title+<span class=\"string\">&quot;&lt;/h1&gt;&quot;</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">        \t\t\thtml=html+<span class=\"string\">&quot;&lt;h2&gt;&quot;</span>+news.date+<span class=\"string\">&quot;&amp;nbsp;&quot;</span>+news.source+<span class=\"string\">&quot;&lt;/h2&gt;&quot;</span>;<span class=\"comment\">//&amp;nbsp表示空格</span></span></span><br><span class=\"line\"><span class=\"javascript\">        \t\t\thtml=html+<span class=\"string\">&quot;&lt;hr/&gt;&quot;</span>;<span class=\"comment\">//分割</span></span></span><br><span class=\"line\"><span class=\"javascript\">        \t\t&#125;</span></span><br><span class=\"line\"><span class=\"javascript\">        \t\t<span class=\"comment\">//处理服务器响应文本,实现动态加载</span></span></span><br><span class=\"line\"><span class=\"javascript\">        \t\t<span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;container&quot;</span>).innerHTML=html;</span></span><br><span class=\"line\"><span class=\"javascript\">        \t&#125;</span></span><br><span class=\"line\"><span class=\"javascript\">        &#125;</span></span><br><span class=\"line\"><span class=\"javascript\">   </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"同步与异步的区别\"><a href=\"#同步与异步的区别\" class=\"headerlink\" title=\"同步与异步的区别\"></a>同步与异步的区别</h3><p>◇同步：只有前面的执行完成后，后面的才能执行，代码处于阻塞状态；<br>◇异步：在网络发送过程中，不进行代码的阻塞；</p>\n<h2 id=\"Ajax函数\"><a href=\"#Ajax函数\" class=\"headerlink\" title=\"Ajax函数\"></a>Ajax函数</h2><h3 id=\"jQuery对Ajax的支持\"><a href=\"#jQuery对Ajax的支持\" class=\"headerlink\" title=\"jQuery对Ajax的支持\"></a>jQuery对Ajax的支持</h3><p>◇jQuery对Ajax进行封装，提供了$.ajax()方法<br>◇语法：$.ajax(options)<br><img src=\"/p/b52a/1638068967671-df8f5e0b-0ec4-4195-80c6-90fb17a455c9.png\" class=\"lazyload\" data-srcset=\"/p/b52a/1638068967671-df8f5e0b-0ec4-4195-80c6-90fb17a455c9.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<ul>\n<li>jsonp：解决数据跨域传输问题<h3 id=\"函数使用方法\"><a href=\"#函数使用方法\" class=\"headerlink\" title=\"函数使用方法\"></a>函数使用方法</h3>–Servlet<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@SuppressWarnings(&quot;null&quot;)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doGet</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span></span></span><br><span class=\"line\"><span class=\"function\">\t\t<span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">// 获取传递参数?t=pypl|tiobe</span></span><br><span class=\"line\">\tString type = request.getParameter(<span class=\"string\">&quot;t&quot;</span>);</span><br><span class=\"line\">\tList list = <span class=\"keyword\">new</span> ArrayList();</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (type != <span class=\"keyword\">null</span> &amp;&amp; type.equals(<span class=\"string\">&quot;pypl&quot;</span>)) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tlist.add(<span class=\"keyword\">new</span> News(<span class=\"string\">&quot;PYPL:2018年4月份全球编程语言排行榜&quot;</span>, <span class=\"string\">&quot;2018-5-1&quot;</span>, <span class=\"string\">&quot;PYPL&quot;</span>, <span class=\"string\">&quot;...&quot;</span>));</span><br><span class=\"line\">\t\tlist.add(<span class=\"keyword\">new</span> News(<span class=\"string\">&quot;PYPL:2018年5月份全球编程语言排行榜&quot;</span>, <span class=\"string\">&quot;2018-6-1&quot;</span>, <span class=\"string\">&quot;PYPL&quot;</span>, <span class=\"string\">&quot;...&quot;</span>));</span><br><span class=\"line\">\t\tlist.add(<span class=\"keyword\">new</span> News(<span class=\"string\">&quot;PYPL:2018年6月份全球编程语言排行榜&quot;</span>, <span class=\"string\">&quot;2018-7-1&quot;</span>, <span class=\"string\">&quot;PYPL&quot;</span>, <span class=\"string\">&quot;...&quot;</span>));</span><br><span class=\"line\">\t\tlist.add(<span class=\"keyword\">new</span> News(<span class=\"string\">&quot;PYPL:2018年7月份全球编程语言排行榜&quot;</span>, <span class=\"string\">&quot;2018-8-1&quot;</span>, <span class=\"string\">&quot;PYPL&quot;</span>, <span class=\"string\">&quot;...&quot;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">\t&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (type != <span class=\"keyword\">null</span> &amp;&amp; type.equals(<span class=\"string\">&quot;tiobe&quot;</span>)) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tlist.add(<span class=\"keyword\">new</span> News(<span class=\"string\">&quot;TIOBE:2018年4月份全球编程语言排行榜&quot;</span>, <span class=\"string\">&quot;2018-5-1&quot;</span>, <span class=\"string\">&quot;TIBOE&quot;</span>, <span class=\"string\">&quot;...&quot;</span>));</span><br><span class=\"line\">\t\tlist.add(<span class=\"keyword\">new</span> News(<span class=\"string\">&quot;TIOBE:2018年5月份全球编程语言排行榜&quot;</span>, <span class=\"string\">&quot;2018-6-1&quot;</span>, <span class=\"string\">&quot;TIBOE&quot;</span>, <span class=\"string\">&quot;...&quot;</span>));</span><br><span class=\"line\">\t\tlist.add(<span class=\"keyword\">new</span> News(<span class=\"string\">&quot;TIOBE:2018年6月份全球编程语言排行榜&quot;</span>, <span class=\"string\">&quot;2018-7-1&quot;</span>, <span class=\"string\">&quot;TIBOE&quot;</span>, <span class=\"string\">&quot;...&quot;</span>));</span><br><span class=\"line\">\t\tlist.add(<span class=\"keyword\">new</span> News(<span class=\"string\">&quot;TIOBE:2018年7月份全球编程语言排行榜&quot;</span>, <span class=\"string\">&quot;2018-8-1&quot;</span>, <span class=\"string\">&quot;TIBOE&quot;</span>, <span class=\"string\">&quot;...&quot;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tString json = JSON.toJSONString(list);<span class=\"comment\">// fastjson为java提供的json对象</span></span><br><span class=\"line\">\tSystem.out.print(json);</span><br><span class=\"line\">\tresponse.setContentType(<span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class=\"line\">\tresponse.getWriter().println(json);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li>-jquery_news.html<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Insert title here<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;js/jquery-3.3.1.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"javascript\"></span></span><br><span class=\"line\"><span class=\"javascript\">  <span class=\"comment\">//jQuery对Ajax的支持</span></span></span><br><span class=\"line\"><span class=\"javascript\">$(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t$.ajax(&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"string\">&quot;url&quot;</span> : <span class=\"string\">&quot;/ajax/newslist&quot;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"string\">&quot;type&quot;</span> : <span class=\"string\">&quot;get&quot;</span> ,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"string\">&quot;data&quot;</span> : &#123;<span class=\"string\">&quot;t&quot;</span>:<span class=\"string\">&quot;pypl&quot;</span>, <span class=\"string\">&quot;abc&quot;</span>:<span class=\"string\">&quot;123&quot;</span>, <span class=\"string\">&quot;uu&quot;</span>:<span class=\"string\">&quot;777&quot;</span>&#125;,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">//&quot;data&quot;:&quot;t=pypl&amp;abc=123&amp;uu=777&quot;,多个参数时可用json格式写，但最终还是转换为这种形式</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"string\">&quot;dataType&quot;</span> : <span class=\"string\">&quot;json&quot;</span> ,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"string\">&quot;success&quot;</span> : <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">json</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"built_in\">console</span>.log(json);</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i = <span class=\"number\">0</span> ; i &lt; json.length ; i++)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t$(<span class=\"string\">&quot;#container&quot;</span>).append(<span class=\"string\">&quot;&lt;h1&gt;&quot;</span> + json[i].title + <span class=\"string\">&quot;&lt;/h1&gt;&quot;</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t&#125;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t&#125;,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"comment\">//xmlhttp对象，errorText错误文本</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"string\">&quot;error&quot;</span>:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">xmlhttp,errorText</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"built_in\">console</span>.log(xmlhttp);</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"built_in\">console</span>.log(errorText);</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"comment\">//根据错误状态码显示错误信息</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"keyword\">if</span>(xmlhttp.status==<span class=\"string\">&quot;405&quot;</span>)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\talert(<span class=\"string\">&quot;无效的请求方式&quot;</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t&#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(xmlhttp.status==<span class=\"string\">&quot;404&quot;</span>)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\talert(<span class=\"string\">&quot;未找到URL资源&quot;</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t&#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(xmlhttp.status==<span class=\"string\">&quot;500&quot;</span>)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\talert(<span class=\"string\">&quot;服务器内部错误，请联系管理员&quot;</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t&#125;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t&#125;\t</span></span><br><span class=\"line\"><span class=\"javascript\">\t&#125;)</span></span><br><span class=\"line\"><span class=\"javascript\">&#125;)</span></span><br><span class=\"line\"><span class=\"javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;container&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"实现二级联动菜单\"><a href=\"#实现二级联动菜单\" class=\"headerlink\" title=\"实现二级联动菜单\"></a>实现二级联动菜单</h3>①类实现<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.lcg.ajax;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Channel</span> </span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">private</span> String code;</span><br><span class=\"line\">   <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Channel</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Channel</span><span class=\"params\">(String code, String name)</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">super</span>();</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.code = code;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getCode</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> code;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setCode</span><span class=\"params\">(String code)</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.code = code;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> name;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setName</span><span class=\"params\">(String name)</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">   </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n②数据初始化<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@see</span> HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class=\"line\"><span class=\"comment\">\t */</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doGet</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span></span></span><br><span class=\"line\"><span class=\"function\">\t\t\t<span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">\t\tString level = request.getParameter(<span class=\"string\">&quot;level&quot;</span>);<span class=\"comment\">//根据level判断查询哪一频道</span></span><br><span class=\"line\">\t\tString parent = request.getParameter(<span class=\"string\">&quot;parent&quot;</span>);</span><br><span class=\"line\">\t\tList chlist = <span class=\"keyword\">new</span> ArrayList();</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(level.equals(<span class=\"string\">&quot;1&quot;</span>)) &#123;</span><br><span class=\"line\">\t\t\tchlist.add(<span class=\"keyword\">new</span> Channel(<span class=\"string\">&quot;ai&quot;</span>,<span class=\"string\">&quot;前沿/区块链/人工智能&quot;</span>));</span><br><span class=\"line\">\t\t\tchlist.add(<span class=\"keyword\">new</span> Channel(<span class=\"string\">&quot;web&quot;</span>,<span class=\"string\">&quot;前端/小程序/JS&quot;</span>));\t\t\t</span><br><span class=\"line\">\t\t&#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(level.equals(<span class=\"string\">&quot;2&quot;</span>)) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span>(parent.equals(<span class=\"string\">&quot;ai&quot;</span>)) &#123;</span><br><span class=\"line\">\t\t\t\tchlist.add(<span class=\"keyword\">new</span> Channel(<span class=\"string\">&quot;micro&quot;</span> , <span class=\"string\">&quot;微服务&quot;</span>));</span><br><span class=\"line\">\t\t\t\tchlist.add(<span class=\"keyword\">new</span> Channel(<span class=\"string\">&quot;blockchain&quot;</span> , <span class=\"string\">&quot;区块链&quot;</span>));</span><br><span class=\"line\">\t\t\t\tchlist.add(<span class=\"keyword\">new</span> Channel(<span class=\"string\">&quot;other&quot;</span> , <span class=\"string\">&quot;...&quot;</span>));</span><br><span class=\"line\">\t\t\t&#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(parent.equals(<span class=\"string\">&quot;web&quot;</span>))&#123;</span><br><span class=\"line\">\t\t\t\tchlist.add(<span class=\"keyword\">new</span> Channel(<span class=\"string\">&quot;html&quot;</span> , <span class=\"string\">&quot;HTML&quot;</span>));</span><br><span class=\"line\">\t\t\t\tchlist.add(<span class=\"keyword\">new</span> Channel(<span class=\"string\">&quot;css&quot;</span> , <span class=\"string\">&quot;CSS&quot;</span>));</span><br><span class=\"line\">\t\t\t\tchlist.add(<span class=\"keyword\">new</span> Channel(<span class=\"string\">&quot;other&quot;</span> , <span class=\"string\">&quot;...&quot;</span>));</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">        <span class=\"comment\">//JSON序列化</span></span><br><span class=\"line\">\t\tString json = JSON.toJSONString(chlist);</span><br><span class=\"line\">\t\tresponse.setContentType(<span class=\"string\">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class=\"line\">\t\tresponse.getWriter().println(json);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n③页面显示<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Insert title here<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;js/jquery-3.6.0.min.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"javascript\"></span></span><br><span class=\"line\"><span class=\"javascript\"> <span class=\"comment\">//页面就绪函数</span></span></span><br><span class=\"line\"><span class=\"javascript\">  $(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t  $.ajax(&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t  <span class=\"string\">&quot;url&quot;</span>:<span class=\"string\">&quot;/ajax/channel&quot;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t  <span class=\"string\">&quot;data&quot;</span>:&#123;<span class=\"string\">&quot;level&quot;</span>:<span class=\"string\">&quot;1&quot;</span>&#125;,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t  <span class=\"string\">&quot;type&quot;</span>:<span class=\"string\">&quot;get&quot;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t  <span class=\"string\">&quot;dataType&quot;</span>:<span class=\"string\">&quot;json&quot;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t  <span class=\"string\">&quot;success&quot;</span>:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">json</span>)</span>&#123;\t\t\t  </span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t  <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i=<span class=\"number\">0</span>;i&lt;json.length;i++)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t  <span class=\"keyword\">var</span> ch = json[i];</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t  $(<span class=\"string\">&quot;#lv1&quot;</span>).append(<span class=\"string\">&quot;&lt;option value=&#x27;&quot;</span>+ch.code+<span class=\"string\">&quot;&#x27;&gt;&quot;</span>+ch.name+<span class=\"string\">&quot;&lt;/option&gt;&quot;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t  &#125;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t  &#125;</span></span><br><span class=\"line\"><span class=\"javascript\">\t  &#125;)</span></span><br><span class=\"line\"><span class=\"javascript\">  &#125;)</span></span><br><span class=\"line\"><span class=\"javascript\">  <span class=\"comment\">//页面就绪函数，联动二级频道的数据</span></span></span><br><span class=\"line\"><span class=\"javascript\">  $(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t  $(<span class=\"string\">&quot;#lv1&quot;</span>).on(<span class=\"string\">&quot;change&quot;</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t <span class=\"keyword\">var</span> parent = $(<span class=\"built_in\">this</span>).val();</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t $.ajax(&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t <span class=\"string\">&quot;url&quot;</span>:<span class=\"string\">&quot;/ajax/channel&quot;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t  <span class=\"string\">&quot;data&quot;</span>:&#123;<span class=\"string\">&quot;level&quot;</span>:<span class=\"string\">&quot;2&quot;</span>, <span class=\"string\">&quot;parent&quot;</span>:parent&#125;,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t  <span class=\"string\">&quot;type&quot;</span>:<span class=\"string\">&quot;get&quot;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t  <span class=\"string\">&quot;dataType&quot;</span>:<span class=\"string\">&quot;json&quot;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t  <span class=\"string\">&quot;success&quot;</span>:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">json</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t  <span class=\"comment\">//清除lv2下的原始option选项</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t  $(<span class=\"string\">&quot;#lv2&gt;option&quot;</span>).remove();</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t  <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i=<span class=\"number\">0</span>;i&lt;json.length;i++)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t  <span class=\"keyword\">var</span> ch = json[i];</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t  $(<span class=\"string\">&quot;#lv2&quot;</span>).append(<span class=\"string\">&quot;&lt;option value=&#x27;&quot;</span>+ch.code+<span class=\"string\">&quot;&#x27;&gt;&quot;</span>+ch.name+<span class=\"string\">&quot;&lt;/option&gt;&quot;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t  &#125;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t&#125;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t &#125;)</span></span><br><span class=\"line\"><span class=\"javascript\">\t  &#125;)</span></span><br><span class=\"line\"><span class=\"javascript\">  &#125;)</span></span><br><span class=\"line\"><span class=\"javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- 一级栏目 --&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;lv1&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;width:200px;height:30px&quot;</span>&gt;</span></span><br><span class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">selected</span>=<span class=\"string\">&quot;selected&quot;</span>&gt;</span>请选择<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\">     <span class=\"comment\">&lt;!-- 二级栏目 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;lv2&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;width:200px;height:30px&quot;</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n","categories":["JavaWeb"],"tags":["Ajax"]},{"title":"JSON入门","url":"/p/2e67.html","content":"<h2 id=\"导学\"><a href=\"#导学\" class=\"headerlink\" title=\"导学\"></a>导学</h2><p>◇JSON入门<br><img src=\"/p/2e67/json1.png\" class=\"lazyload\" data-srcset=\"/p/2e67/json1.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\"><br>◇jQuery与Ajax<br><img src=\"/p/2e67/1621691727620-f229e1ef-0355-4ca4-b1f8-a78a190a3aab.png\" class=\"lazyload\" data-srcset=\"/p/2e67/1621691727620-f229e1ef-0355-4ca4-b1f8-a78a190a3aab.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>◇正则表达式<br><img src=\"/p/2e67/1621691774734-85ef74a4-f19e-4d97-be1d-c0f93391b2fd.png\" class=\"lazyload\" data-srcset=\"/p/2e67/1621691774734-85ef74a4-f19e-4d97-be1d-c0f93391b2fd.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>◇过滤器<br><img src=\"/p/2e67/1621691814986-c7ba612d-cb16-405a-bac5-19710f119e1d.png\" class=\"lazyload\" data-srcset=\"/p/2e67/1621691814986-c7ba612d-cb16-405a-bac5-19710f119e1d.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h2 id=\"JSON语法规则\"><a href=\"#JSON语法规则\" class=\"headerlink\" title=\"JSON语法规则\"></a>JSON语法规则</h2><h3 id=\"JSON介绍\"><a href=\"#JSON介绍\" class=\"headerlink\" title=\"JSON介绍\"></a>JSON介绍</h3><p>◇JavaScript Object Notation(JavaScript对象表示法)<br>◇JSON是轻量级的文本数据交换格式<br>◇JSON独立于语言，具有自我描述性，更易理解<br>◇示例代码：</p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;sites&quot;</span>:[</span><br><span class=\"line\">        &#123;<span class=\"attr\">&quot;name&quot;</span>:<span class=\"string\">&quot;张珊&quot;</span>,<span class=\"attr\">&quot;age&quot;</span>:<span class=\"string\">&quot;22&quot;</span>&#125;,</span><br><span class=\"line\">        &#123;<span class=\"attr\">&quot;name&quot;</span>:<span class=\"string\">&quot;李肆&quot;</span>,<span class=\"attr\">&quot;age&quot;</span>:<span class=\"string\">&quot;21&quot;</span>&#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"JSON语法规则-1\"><a href=\"#JSON语法规则-1\" class=\"headerlink\" title=\"JSON语法规则\"></a>JSON语法规则</h3><p>◇数据由键(key)/值(value)描述，由逗号分隔；键和值均用””包裹。<br>◇大括号代表一个完整的对象，拥有多个键/值对<br>◇中括号保存数组，多个对象之间使用逗号分隔，最后一个不用</p>\n<h3 id=\"代码演示\"><a href=\"#代码演示\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h3><p> –在JavaScript中</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Insert title here<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"javascript\"></span></span><br><span class=\"line\"><span class=\"javascript\">   <span class=\"keyword\">var</span> json = [</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"string\">&quot;empno&quot;</span>: <span class=\"string\">&quot;2023&quot;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"string\">&quot;ename&quot;</span>: <span class=\"string\">&quot;李才刚&quot;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"string\">&quot;job&quot;</span>: <span class=\"string\">&quot;首席执行官&quot;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"string\">&quot;hiredate&quot;</span>: <span class=\"string\">&quot;2025-06-18&quot;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"string\">&quot;salary&quot;</span>: <span class=\"string\">&quot;500000&quot;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"string\">&quot;dname&quot;</span>: <span class=\"string\">&quot;董事会&quot;</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t&#125;,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"string\">&quot;empno&quot;</span>: <span class=\"string\">&quot;2021&quot;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"string\">&quot;ename&quot;</span>: <span class=\"string\">&quot;石磊&quot;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"string\">&quot;job&quot;</span>: <span class=\"string\">&quot;客服经理&quot;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"string\">&quot;hiredate&quot;</span>: <span class=\"string\">&quot;2028-01-26&quot;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"string\">&quot;salary&quot;</span>: <span class=\"string\">&quot;8000&quot;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"string\">&quot;dname&quot;</span>: <span class=\"string\">&quot;市场部&quot;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"string\">&quot;customers&quot;</span>: [</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"string\">&quot;cname&quot;</span>: <span class=\"string\">&quot;吴浩&quot;</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t&#125;,</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t\t<span class=\"string\">&quot;cname&quot;</span>: <span class=\"string\">&quot;方传书&quot;</span></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t&#125;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t]</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t&#125;</span></span><br><span class=\"line\"><span class=\"javascript\">\t];</span></span><br><span class=\"line\"><span class=\"javascript\">   <span class=\"comment\">//在浏览器控制台中对json内容进行输出</span></span></span><br><span class=\"line\"><span class=\"javascript\">   <span class=\"built_in\">console</span>.log(json);</span></span><br><span class=\"line\"><span class=\"javascript\">  <span class=\"comment\">//在浏览器页面进行输出</span></span></span><br><span class=\"line\"><span class=\"javascript\">   <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i = <span class=\"number\">0</span> ; i &lt; json.length ; i++)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"keyword\">var</span> emp = json[i];</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">document</span>.write(<span class=\"string\">&quot;&lt;h1&gt;&quot;</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">document</span>.write(emp.empno);</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">document</span>.write(<span class=\"string\">&quot;,&quot;</span> + emp.ename);</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">document</span>.write(<span class=\"string\">&quot;,&quot;</span> + emp.job);</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">document</span>.write(<span class=\"string\">&quot;,&quot;</span> + emp.hiredate);</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">document</span>.write(<span class=\"string\">&quot;,&quot;</span> + emp.salary);</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">document</span>.write(<span class=\"string\">&quot;,&quot;</span> + emp.dname);</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"built_in\">document</span>.write(<span class=\"string\">&quot;&lt;/h1&gt;&quot;</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t<span class=\"keyword\">if</span>(emp.customers != <span class=\"literal\">null</span>)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"built_in\">document</span>.write(<span class=\"string\">&quot;&lt;h2&gt;---&quot;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> j = <span class=\"number\">0</span> ; j &lt; emp.customers.length ; j++)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"keyword\">var</span> customer = emp.customers[j];</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t\t<span class=\"built_in\">document</span>.write(customer.cname + <span class=\"string\">&quot;,&quot;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t&#125;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t\t<span class=\"built_in\">document</span>.write(<span class=\"string\">&quot;&lt;/h2&gt;&quot;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t&#125;</span></span><br><span class=\"line\"><span class=\"javascript\">\t&#125;</span></span><br><span class=\"line\"><span class=\"javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"JSON与字符串互相转换-在js中\"><a href=\"#JSON与字符串互相转换-在js中\" class=\"headerlink\" title=\"JSON与字符串互相转换(在js中)\"></a>JSON与字符串互相转换(在js中)</h3><p>◇JSON.parse()方法将字符串转换为JSON对象<br>◇JSON.stringify()方法将JSON对象转换为字符串<br>eg：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"javascript\"></span></span><br><span class=\"line\"><span class=\"javascript\">   <span class=\"keyword\">var</span> str = <span class=\"string\">&quot;&#123;\\&quot;class_name\\&quot;:\\&quot;五年级三班\\&quot;&#125;&quot;</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">   <span class=\"keyword\">var</span> json=<span class=\"built_in\">JSON</span>.parse(str);</span></span><br><span class=\"line\"><span class=\"javascript\">   <span class=\"built_in\">console</span>.log(str);</span></span><br><span class=\"line\"><span class=\"javascript\">   <span class=\"built_in\">console</span>.log(json);</span></span><br><span class=\"line\"><span class=\"javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>◇原始的字符串和json对象打印显示在浏览器控制台中；第一行是原始的字符串；下面就是json对象(Object);json对象中包含一个class_name的属性，值为”五年级三班”<br><img src=\"/p/2e67/1639015024279-78c32a91-bc3c-4150-a564-5cf8566858af.png\" class=\"lazyload\" data-srcset=\"/p/2e67/1639015024279-78c32a91-bc3c-4150-a564-5cf8566858af.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"javascript\"></span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">var</span> json=&#123;<span class=\"string\">&quot;class_name&quot;</span>:<span class=\"string\">&quot;五年级三班&quot;</span>&#125;;</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">var</span> str = <span class=\"built_in\">JSON</span>.stringify(json);</span></span><br><span class=\"line\"><span class=\"javascript\">    </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>–初始化json的另一种方法</p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">var json =&#123;&#125;;<span class=\"comment\">//先定义</span></span><br><span class=\"line\">json.class_name=<span class=\"string\">&quot;五年级三班&quot;</span>;</span><br><span class=\"line\">json.teacher=<span class=\"string\">&quot;王老师&quot;</span>;</span><br></pre></td></tr></table></figure>\n<h2 id=\"JSON与Java交互\"><a href=\"#JSON与Java交互\" class=\"headerlink\" title=\"JSON与Java交互\"></a>JSON与Java交互</h2><h3 id=\"FastJson工具包\"><a href=\"#FastJson工具包\" class=\"headerlink\" title=\"FastJson工具包\"></a>FastJson工具包</h3><p>◇Java的JSON工具包还有FastJson、Jackson、Gson、Json-lib…<br>◇FastJson是阿里著名的JSON序列化与反序列工具包<br>◇FastJson国内拥有大量使用者，拥有API简单，效率高等优点</p>\n<h3 id=\"FastJson序列化与JSON注解\"><a href=\"#FastJson序列化与JSON注解\" class=\"headerlink\" title=\"FastJson序列化与JSON注解\"></a>FastJson序列化与JSON注解</h3><p> –单个</p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">@JSONField(format=<span class=\"string\">&quot;yyyy-MM-dd&quot;</span>)<span class=\"comment\">//注解，格式化输出日期</span></span><br><span class=\"line\">private Date hdate;</span><br><span class=\"line\">@JSONField(serialize=<span class=\"literal\">false</span>)<span class=\"comment\">//不对下面的dname成员序列化</span></span><br><span class=\"line\">private String dname;</span><br><span class=\"line\">String json = JSON.toJSONString(employee);</span><br><span class=\"line\">Employee emp = JSON.parseObject(json,Employee.class);<span class=\"comment\">//将JSON反序列化</span></span><br></pre></td></tr></table></figure>\n<p>–多个</p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">package com.lcg.json;</span><br><span class=\"line\"></span><br><span class=\"line\">import java.util.ArrayList;</span><br><span class=\"line\">import java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\">import com.alibaba.fastjson.JSON;</span><br><span class=\"line\"></span><br><span class=\"line\">public class FastJsonSample2 &#123;</span><br><span class=\"line\">      public static void main(String[] args) &#123;</span><br><span class=\"line\">    \t  List emplist = new ArrayList();</span><br><span class=\"line\">    \t  <span class=\"comment\">//模拟100个员工</span></span><br><span class=\"line\">    \t  for(int i =1;i&lt;=100;i++) &#123;</span><br><span class=\"line\">    \t\t  Employee employee = new Employee();</span><br><span class=\"line\">    \t\t  employee.setEmpno(2020+i);</span><br><span class=\"line\">    \t\t  employee.setEname(<span class=\"attr\">&quot;员工&quot;</span>+i);</span><br><span class=\"line\">    \t\t  emplist.add(employee);</span><br><span class=\"line\">    \t  &#125;</span><br><span class=\"line\">    \t  String json = JSON.toJSONString(emplist);</span><br><span class=\"line\">    \t  <span class=\"comment\">//将转换后的字符解析成链表</span></span><br><span class=\"line\">    \t  List&lt;Employee&gt; emps = JSON.parseArray(json,Employee.class);</span><br><span class=\"line\">    \t  for(Employee e:emps) &#123;</span><br><span class=\"line\">    \t\t  System.out.println(e.getEmpno()+<span class=\"attr\">&quot;:&quot;</span>+e.getEname());</span><br><span class=\"line\">    \t  &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n","categories":["JavaWeb"],"tags":["JSON"]},{"title":"JSP入门","url":"/p/121d.html","content":"<h2 id=\"基础简介\"><a href=\"#基础简介\" class=\"headerlink\" title=\"基础简介\"></a>基础简介</h2><h3 id=\"Servlet开发的痛点\"><a href=\"#Servlet开发的痛点\" class=\"headerlink\" title=\"Servlet开发的痛点\"></a>Servlet开发的痛点</h3><p><img src=\"/p/121d/1.png\" class=\"lazyload\" data-srcset=\"/p/121d/1.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\"><br>◇简单的页面却工作量太大，繁琐；<br>◇静态HTML与动态Java代码混合在一起，难以维护；<br>◇Servlet利用out.println()语句输出，开发效率低下；<br>◇Eclipse很难在开发过程中发现错误，调试困难；</p>\n<h3 id=\"JSP介绍\"><a href=\"#JSP介绍\" class=\"headerlink\" title=\"JSP介绍\"></a>JSP介绍</h3><p>◇JSP全称是(Java Servlet Pages),java服务器页面<br>◇JSP是J2EE的功能模块，由Web服务器执行<br>◇JSP的作用就是降低动态网页开发难度</p>\n<h3 id=\"JSP特点\"><a href=\"#JSP特点\" class=\"headerlink\" title=\"JSP特点\"></a>JSP特点</h3><p>◇JSP可将Java代码与HTML分离，降低开发难度<br>◇JSP的本质就是Servlet</p>\n<h3 id=\"JSP运行要求\"><a href=\"#JSP运行要求\" class=\"headerlink\" title=\"JSP运行要求\"></a>JSP运行要求</h3><p>◇可正常运行的Tomcat<br>◇所有JSP页面扩展名必须是.jsp<br>◇JSP页面应放在Web应用程序目录下</p>\n<h3 id=\"JSP代码示例\"><a href=\"#JSP代码示例\" class=\"headerlink\" title=\"JSP代码示例\"></a>JSP代码示例</h3><p>◇案例描述；公司薪资制度：<br>新入职员工：基本工资1500元<br>工作5年内员工：每年工资上浮基本工资的10%<br>工作5-10年员工：每年工资上浮基本工资的20%<br>工作10年以上员工：每年工资上浮基本工资的25%<br>要求列出工资试算表；<br> ◇在WebContent目录下创建一个salaty.jsp文件，在一个jsp文件中用&lt;% %&gt;嵌入java代码实现开发效率，输出员工各个工龄的工资；</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">&lt;meta charset=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span><br><span class=\"line\">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">\t&lt;table&gt;</span><br><span class=\"line\">\t\t&lt;tr&gt;</span><br><span class=\"line\">\t\t\t&lt;th&gt;year&lt;/th&gt;</span><br><span class=\"line\">\t\t\t&lt;th&gt;salary&lt;/th&gt;</span><br><span class=\"line\">\t\t&lt;/tr&gt;</span><br><span class=\"line\">\t\t&lt;%</span><br><span class=\"line\">\t\t  <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;i&lt;=<span class=\"number\">50</span>;i++)&#123; <span class=\"comment\">//五十年</span></span><br><span class=\"line\">\t\t\t  out.println(<span class=\"string\">&quot;&lt;tr&gt;&quot;</span>);<span class=\"comment\">//每一行</span></span><br><span class=\"line\">\t\t\t  out.println(<span class=\"string\">&quot;&lt;td&gt;&quot;</span>+i+<span class=\"string\">&quot;&lt;/td&gt;&quot;</span>);<span class=\"comment\">//第一列:年份</span></span><br><span class=\"line\">\t\t\t  <span class=\"keyword\">int</span> sal=<span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\t  <span class=\"keyword\">if</span>(i&lt;=<span class=\"number\">5</span>)&#123;</span><br><span class=\"line\">\t\t\t\t  sal=<span class=\"number\">1500</span>+i*<span class=\"number\">150</span>;</span><br><span class=\"line\">\t\t\t  &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(i&gt;<span class=\"number\">5</span>&amp;&amp;i&lt;=<span class=\"number\">10</span>)&#123;</span><br><span class=\"line\">\t\t\t\t  sal=<span class=\"number\">1500</span>+<span class=\"number\">150</span>*<span class=\"number\">5</span>+<span class=\"number\">300</span>*(i-<span class=\"number\">5</span>);</span><br><span class=\"line\">\t\t\t  &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(i&gt;<span class=\"number\">10</span>)&#123;</span><br><span class=\"line\">\t\t\t\t  sal=<span class=\"number\">1500</span>+<span class=\"number\">150</span>*<span class=\"number\">5</span>+<span class=\"number\">300</span>*<span class=\"number\">5</span>+<span class=\"number\">375</span>*(i-<span class=\"number\">10</span>);</span><br><span class=\"line\">\t\t\t  &#125;</span><br><span class=\"line\">\t\t\t  out.println(<span class=\"string\">&quot;&lt;td&gt;&quot;</span>+sal+<span class=\"string\">&quot;&lt;/td&gt;&quot;</span>);<span class=\"comment\">//第二列:工资</span></span><br><span class=\"line\">\t\t\t  out.println(<span class=\"string\">&quot;&lt;/tr&gt;&quot;</span>);</span><br><span class=\"line\">\t\t  &#125;</span><br><span class=\"line\">\t\t%&gt;</span><br><span class=\"line\">\t&lt;/table&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<h2 id=\"JSP的执行过程\"><a href=\"#JSP的执行过程\" class=\"headerlink\" title=\"JSP的执行过程\"></a>JSP的执行过程</h2><p>◇浏览器访问JSP首先将请求发送给Tomcat，Tomcat在应用目录中找到对应的jsp，然后将jsp转换为标准的Servlet源代码，编译成字节码；<br><img src=\"/p/121d/2.png\" class=\"lazyload\" data-srcset=\"/p/121d/2.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\"></p>\n<h2 id=\"JSP的转译过程\"><a href=\"#JSP的转译过程\" class=\"headerlink\" title=\"JSP的转译过程\"></a>JSP的转译过程</h2><p><img src=\"/p/121d/3.png\" class=\"lazyload\" data-srcset=\"/p/121d/3.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\"><br>◇&lt;%=a%&gt;即把a打印输出；<br>◇在apache-tomcat-8.5.34\\work\\Catalina\\localhost\\项目名\\org\\jsp中可以查看转译后的salary_jsp.java</p>\n<h2 id=\"JSP的基本语法\"><a href=\"#JSP的基本语法\" class=\"headerlink\" title=\"JSP的基本语法\"></a>JSP的基本语法</h2><p>◇JSP语法按功能分为以下四种<br>①JSP代码块      ②JSP声明构造块<br>③JSP输出指令  ④JSP处理指令</p>\n<h3 id=\"JSP代码块\"><a href=\"#JSP代码块\" class=\"headerlink\" title=\"JSP代码块\"></a>JSP代码块</h3><p>◇JSP代码块用于JSP中嵌入Java代码<br>◇JSP代码块语法：&lt;%java代码块%&gt;</p>\n<h3 id=\"JSP声明构造块\"><a href=\"#JSP声明构造块\" class=\"headerlink\" title=\"JSP声明构造块\"></a>JSP声明构造块</h3><p>◇JSP声明构造用于声明变量或方法<br>◇JSP声明构造块语法：&lt;%! 声明语句 %&gt;<br>◇eg：声明方法，&lt;%! public int add(int a,int b){return a+b;} %&gt;</p>\n<h3 id=\"JSP输出指令\"><a href=\"#JSP输出指令\" class=\"headerlink\" title=\"JSP输出指令\"></a>JSP输出指令</h3><p>◇JSP输出指令用于在JSP页面中显示java代码执行结果<br>◇JSP输出指令语法：&lt;%= java代码 %&gt;<br>eg: &lt;%=”<b>“+name+”</b>“%&gt;  %=即out.println的简化形式</p>\n<h3 id=\"JSP处理指令\"><a href=\"#JSP处理指令\" class=\"headerlink\" title=\"JSP处理指令\"></a>JSP处理指令</h3><p>◇JSP处理指令用于提供JSP执行过程中的辅助信息<br>◇JSP处理指令语法：&lt;%@ jsp指令 %&gt;<br>◇eg: &lt;%@ page import=”java.util.*” %&gt;</p>\n<h3 id=\"jsp常用处理指令\"><a href=\"#jsp常用处理指令\" class=\"headerlink\" title=\"jsp常用处理指令\"></a>jsp常用处理指令</h3><figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;%@ page %&gt; <span class=\"comment\">//定义当前JSP页面的全局设置</span></span><br><span class=\"line\">&lt;%@ include %&gt;<span class=\"comment\">//将其他JSP页面与当前JSP页面合并</span></span><br><span class=\"line\">&lt;%@ taglib %&gt;<span class=\"comment\">//引入JSP标签库</span></span><br></pre></td></tr></table></figure>\n<p>JSP中注释的区别<br>◇&lt;%– 注释–%&gt;  JSP注释，被注释语句不做任何处理<br>◇// , /<em>..</em>/            用于注释&lt;%%&gt;java代码，被注释代码不执行<br>◇<!-- html -->            HTML注释，被注释的语句不会被浏览器解释</p>\n<h2 id=\"综合训练\"><a href=\"#综合训练\" class=\"headerlink\" title=\"综合训练\"></a>综合训练</h2><h3 id=\"质数算法\"><a href=\"#质数算法\" class=\"headerlink\" title=\"质数算法\"></a>质数算法</h3><p>◇列出1000以内的质数(除1外，只能被1和自身整除的自然数)<br>◇要求：使用List保存所有有效的质数，将结果打印到页面，格式为”</p><h1>X是质数</h1>“<br>◇综合运用JSP语法；<p></p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;%@page <span class=\"keyword\">import</span>=<span class=\"string\">&quot;java.util.*&quot;</span>  contentType=<span class=\"string\">&quot;text/html;charset=utf-8&quot;</span>%&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">  &lt;%!</span><br><span class=\"line\">    boolean isPrime(<span class=\"keyword\">int</span> num) &#123;</span><br><span class=\"line\">\t\tboolean flag = <span class=\"literal\">true</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> j = <span class=\"number\">2</span>; j &lt; num; j++) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (num % j == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">\t\t\t\tflag = <span class=\"literal\">false</span>;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> flag;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">   %&gt;</span><br><span class=\"line\">   </span><br><span class=\"line\">&lt;%</span><br><span class=\"line\">   \tList&lt;Integer&gt; primes = <span class=\"keyword\">new</span> ArrayList();</span><br><span class=\"line\">   \t<span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">2</span>; i &lt;= <span class=\"number\">1000</span>; i++) &#123;</span><br><span class=\"line\">   \t\tboolean flag = isPrime(i);</span><br><span class=\"line\">   \t\t<span class=\"keyword\">if</span> (flag) &#123;</span><br><span class=\"line\">   \t\t\t<span class=\"comment\">/* out.println(&quot;&lt;h1&gt;&quot; + i + &quot;&lt;/h1&gt;&quot;); */</span></span><br><span class=\"line\">   \t\t\tprimes.add(i);</span><br><span class=\"line\">   \t\t&#125;</span><br><span class=\"line\">   \t&#125;</span><br><span class=\"line\">%&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;%</span><br><span class=\"line\">     <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> p : primes)&#123;</span><br><span class=\"line\">    \t <span class=\"comment\">//out.println(&quot;&lt;h1 style=&#x27;color:pink&#x27;&gt;&quot; + p + &quot;是质数&lt;/h1&gt;&quot;);</span></span><br><span class=\"line\">%&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">      &lt;h1 style=<span class=\"string\">&#x27;color:blue&#x27;</span>&gt;&lt;%=p %&gt;是质数 &lt;/h1&gt;</span><br><span class=\"line\">&lt;% </span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">%&gt;</span><br></pre></td></tr></table></figure>\n<p> contentType=”text/html;charset=utf-8”%&gt; 设置字体能显示中文；</p>\n<h3 id=\"JSP页面重用\"><a href=\"#JSP页面重用\" class=\"headerlink\" title=\"JSP页面重用\"></a>JSP页面重用</h3><p>◇利用JSP指令进行引用</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;%@page contentType=<span class=\"string\">&quot;text/html;charset=utf-8&quot;</span> %&gt;</span><br><span class=\"line\">&lt;%@include file=<span class=\"string\">&quot;header.jsp&quot;</span> %&gt;<span class=\"comment\">//引用页头</span></span><br><span class=\"line\">&lt;% </span><br><span class=\"line\">  out.println(<span class=\"string\">&quot;&lt;h1&gt;新闻标题&lt;/h1&gt;&quot;</span>);</span><br><span class=\"line\">  out.println(<span class=\"string\">&quot;&lt;p&gt;新闻正文&lt;/p&gt;&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">%&gt;</span><br><span class=\"line\">&lt;%@include file=<span class=\"string\">&quot;footer.jsp&quot;</span> %&gt;引用页脚</span><br></pre></td></tr></table></figure>\n\n","categories":["JavaWeb"],"tags":["JSP"]},{"title":"JSTL与EL表达式","url":"/p/5d7.html","content":"<h2 id=\"初识EL表达式\"><a href=\"#初识EL表达式\" class=\"headerlink\" title=\"初识EL表达式\"></a>初识EL表达式</h2><h3 id=\"EL表达式\"><a href=\"#EL表达式\" class=\"headerlink\" title=\"EL表达式\"></a>EL表达式</h3><p>◇EL(<strong>E</strong>xpression <strong>L</strong>anguage)表达式语言，用于简化JSP的输出<br>◇EL表达式的基本语法：${表达式}<br>eg：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\">JSP：<span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>学生姓名：&lt;%=student.name%&gt; <span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">EL：<span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>学生姓名：$&#123;student:name&#125;<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n<p>◇代码演示<br> –学生信息类</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.gamest.el;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Student</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String mobile;</span><br><span class=\"line\"> \t<span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> name;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setName</span><span class=\"params\">(String name)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getMobile</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> mobile;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setMobile</span><span class=\"params\">(String mobile)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.mobile = mobile;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">   </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>  –Servlet初始化</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doGet</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> </span></span><br><span class=\"line\"><span class=\"function\">    <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">\t\t  Student stu = <span class=\"keyword\">new</span> Student();</span><br><span class=\"line\">\t\t  stu.setName(<span class=\"string\">&quot;李与析&quot;</span>);</span><br><span class=\"line\">\t\t  stu.setMobile(<span class=\"string\">&quot;HUAWEI&quot;</span>);</span><br><span class=\"line\">\t\t  String grade = <span class=\"string\">&quot;A&quot;</span>;</span><br><span class=\"line\">\t\t  <span class=\"comment\">//info.jsp用来展现学生信息，studentservlet用来初始化</span></span><br><span class=\"line\">\t\t  request.setAttribute(<span class=\"string\">&quot;student&quot;</span>, stu);</span><br><span class=\"line\">\t\t  request.setAttribute(<span class=\"string\">&quot;grade&quot;</span>, grade);</span><br><span class=\"line\">\t\t  request.getRequestDispatcher(<span class=\"string\">&quot;/info.jsp&quot;</span>).forward(request, response);</span><br><span class=\"line\">\t\t  </span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure>\n<p>  –JSP显示信息(传统方法)</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">   &lt;%</span><br><span class=\"line\">     Student stu =  (Student)request.getAttribute(<span class=\"string\">&quot;student&quot;</span>);</span><br><span class=\"line\">     String grade = (String)request.getAttribute(<span class=\"string\">&quot;grade&quot;</span>);</span><br><span class=\"line\">     out.println(<span class=\"string\">&quot;&lt;h1&gt;姓名：&quot;</span>+stu.getName()+<span class=\"string\">&quot;&lt;/h1&gt;&quot;</span>);</span><br><span class=\"line\">     out.println(<span class=\"string\">&quot;&lt;h2&gt;手机：&quot;</span>+stu.getMobile()+<span class=\"string\">&quot;&lt;/h2&gt;&quot;</span>);</span><br><span class=\"line\">     out.println(<span class=\"string\">&quot;&lt;h1&gt;教师等级：&quot;</span>+grade+<span class=\"string\">&quot;&lt;/h1&gt;&quot;</span>);</span><br><span class=\"line\">   %&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br></pre></td></tr></table></figure>\n<p> –EL表达式方法</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">   &lt;h1&gt;姓名：$&#123;requestScope.student.name&#125;&lt;/h1&gt;</span><br><span class=\"line\">   &lt;h1&gt;手机：$&#123;requestScope.student.mobile&#125;&lt;/h1&gt;</span><br><span class=\"line\">   &lt;h1&gt;评级：$&#123;requestScope.grade&#125;&lt;/h1&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br></pre></td></tr></table></figure>\n<h3 id=\"作用域对象\"><a href=\"#作用域对象\" class=\"headerlink\" title=\"作用域对象\"></a>作用域对象</h3><p>◇EL表达式内置四种作用域对象<br><img src=\"/p/5d7/1.png\" class=\"lazyload\" data-srcset=\"/p/5d7/1.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\"><br>代码示例：<br> –将学生信息放在session会话中</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doGet</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">\t\t  Student stu = <span class=\"keyword\">new</span> Student();</span><br><span class=\"line\">\t\t  stu.setName(<span class=\"string\">&quot;李与析&quot;</span>);</span><br><span class=\"line\">\t\t  stu.setMobile(<span class=\"string\">&quot;HUAWEI&quot;</span>);</span><br><span class=\"line\">\t\t  String grade = <span class=\"string\">&quot;A&quot;</span>;</span><br><span class=\"line\">      <span class=\"comment\">//将学生信息放在session会话中</span></span><br><span class=\"line\">\t\t  HttpSession session = request.getSession();\t\t </span><br><span class=\"line\">\t\t  session.setAttribute(<span class=\"string\">&quot;student&quot;</span>, stu);</span><br><span class=\"line\">\t\t  session.setAttribute(<span class=\"string\">&quot;grade&quot;</span>, grade);</span><br><span class=\"line\">\t\t  request.getRequestDispatcher(<span class=\"string\">&quot;/info.jsp&quot;</span>).forward(request, response);</span><br><span class=\"line\">\t\t  </span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure>\n<p> –则应当使用sessionScope</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">   &lt;h1&gt;姓名：$&#123;sessionScope.student.name&#125;&lt;/h1&gt;</span><br><span class=\"line\">   &lt;h1&gt;手机：$&#123;sessionScope.student.mobile&#125;&lt;/h1&gt;</span><br><span class=\"line\">   &lt;h1&gt;评级：$&#123;sessionScope.grade&#125;&lt;/h1&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br></pre></td></tr></table></figure>\n<p> –EL也可以忽略作用域对象<br> 它会自动按作用域从小到大的顺序获取(page -&gt; application)若都没有，则会输出空字符串；</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">   &lt;h1&gt;姓名：$&#123;student.name&#125;&lt;/h1&gt;</span><br><span class=\"line\">   &lt;h1&gt;手机：$&#123;student.mobile&#125;&lt;/h1&gt;</span><br><span class=\"line\">   &lt;h1&gt;评级：$&#123;grade&#125;&lt;/h1&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br></pre></td></tr></table></figure>\n<h3 id=\"EL表达式输出\"><a href=\"#EL表达式输出\" class=\"headerlink\" title=\"EL表达式输出\"></a>EL表达式输出</h3><p>◇语法: ${[作用域].属性名.[子属性]}<br>◇EL表达式支持将运算结果进行输出<br>◇EL支持绝大多数对象输出，本质是调用toString()方法<br>eg：<br>${title} //将自定义属性title输出<br>${emp.salary + 300} //算术运算<br>${1&lt;=3&amp;&amp;2&gt;4}<br>​</p>\n<p>通过改写toString()方法可以就可以使用EL表达式按照自定义的格式输出对象:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">publie String <span class=\"title\">toString</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> name + <span class=\"string\">&quot;:&quot;</span> + moblie;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">直接输出对象，student具有子属性；</span><br><span class=\"line\">$&#123;student&#125;;</span><br></pre></td></tr></table></figure>\n<h3 id=\"EL输出参数值\"><a href=\"#EL输出参数值\" class=\"headerlink\" title=\"EL输出参数值\"></a>EL输出参数值</h3><p>◇EL表达式内置param对象来简化参数的输出<br>◇语法:${param.参数名}  eg：${param.teacher}； 浏览器输入：?teacher=王老师</p>\n<h2 id=\"JSTL\"><a href=\"#JSTL\" class=\"headerlink\" title=\"JSTL\"></a>JSTL</h2><h3 id=\"JSTL标签库\"><a href=\"#JSTL标签库\" class=\"headerlink\" title=\"JSTL标签库\"></a>JSTL标签库</h3><p>◇JSTL(JSP Standard Tag Library),JSP标准标签库<br>◇JSTL用于简化JSP开发，提高代码可读性与可维护性<br>◇JSTL由SUN(Oracle)定义规范，由Apache Tomcat团队实现</p>\n<h3 id=\"下载JSTL标签库\"><a href=\"#下载JSTL标签库\" class=\"headerlink\" title=\"下载JSTL标签库\"></a>下载JSTL标签库</h3><p>◇官方地址：<a href=\"http://tomcat.apache.org/\">http://tomcat.apache.org</a><br>◇JSTL v1.2.5组件介绍<br><img src=\"/p/5d7/2.png\" class=\"lazyload\" data-srcset=\"/p/5d7/2.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\"></p>\n<p>如果需要默认支持JSTL，则需将前两个包复制到Tomcat\\apache-tomcat-8.5.34\\lib目录中；仅工程目录的话，就复制到工程文件的lib中。</p>\n<h3 id=\"JSTL的标签库种类\"><a href=\"#JSTL的标签库种类\" class=\"headerlink\" title=\"JSTL的标签库种类\"></a>JSTL的标签库种类</h3><p>◇JSTL按功能划分可分为五类标签库<br><img src=\"/p/5d7/3.png\" class=\"lazyload\" data-srcset=\"/p/5d7/3.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\"><br><strong>引用JSTL核心库</strong><br>◇核心标签库(Core)是JSTL最重要的标签库，提供了JSTL的基础功能<br>◇&lt;%@ taglib uri=”<a href=\"http://java.sun.com/jsp/jstl/core&quot;\">http://java.sun.com/jsp/jstl/core&quot;</a> prefix=”c” %&gt;<br>◇JSTL核心标签库在taglibs-standard-impl,jar由META-INF/c.tld定义</p>\n<h3 id=\"判断标签\"><a href=\"#判断标签\" class=\"headerlink\" title=\"判断标签\"></a>判断标签</h3><p>◇JSTL核心库提供了两组判断的标签<br>◇&lt;c:if&gt; -单分支判断<br>◇&lt;c:choose&gt; 、&lt;c:when&gt;、&lt;c:otherwise&gt; - 多分支判断<br>◇代码演示：<br>  –Servlet数据端</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doGet</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> </span></span><br><span class=\"line\"><span class=\"function\">    <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">\t\trequest.setAttribute(<span class=\"string\">&quot;score&quot;</span>, <span class=\"number\">100</span>);</span><br><span class=\"line\">\t\trequest.setAttribute(<span class=\"string\">&quot;grade&quot;</span>, <span class=\"string\">&quot;A&quot;</span>);</span><br><span class=\"line\">\t\trequest.getRequestDispatcher(<span class=\"string\">&quot;/core.jsp&quot;</span>).forward(request, response);</span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure>\n<p> –JSP</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;%@ page language=<span class=\"string\">&quot;java&quot;</span> contentType=<span class=\"string\">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class=\"line\">    pageEncoding=<span class=\"string\">&quot;UTF-8&quot;</span>%&gt;</span><br><span class=\"line\">    &lt;!--在java或者jsp文件中按住Alt+/可以出现智能提示  --&gt;</span><br><span class=\"line\"> &lt;%@ taglib uri=<span class=\"string\">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> prefix=<span class=\"string\">&quot;c&quot;</span> %&gt;</span><br><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">&lt;meta charset=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span><br><span class=\"line\">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">   &lt;h1&gt;$&#123;requestScope.score&#125;&lt;/h1&gt;  &lt;!--  EL表达式 --&gt;</span><br><span class=\"line\">   &lt;c:<span class=\"keyword\">if</span> test =<span class=\"string\">&quot;$&#123;score&gt;=90&#125;&quot;</span>&gt; &lt;!--  单分支判断 --&gt;</span><br><span class=\"line\">   &lt;h1 style = <span class=\"string\">&quot;color:green&quot;</span>&gt;恭喜，你已通过考试&lt;/h1&gt;</span><br><span class=\"line\">   &lt;/c:<span class=\"keyword\">if</span>&gt;</span><br><span class=\"line\">   &lt;c:<span class=\"keyword\">if</span> test=<span class=\"string\">&quot;$&#123;score&lt;90&#125;&quot;</span>&gt;</span><br><span class=\"line\">     &lt;h1 style = <span class=\"string\">&quot;color:red&quot;</span>&gt;很遗憾，请再接再厉&lt;/h1&gt;</span><br><span class=\"line\">   &lt;/c:<span class=\"keyword\">if</span>&gt;</span><br><span class=\"line\">   </span><br><span class=\"line\">   &lt;!--  choose when otherwise --&gt;</span><br><span class=\"line\">   $&#123;grade&#125;</span><br><span class=\"line\">   &lt;c:choose&gt;   &lt;!--  多分支 --&gt;</span><br><span class=\"line\">         &lt;c:when test=<span class=\"string\">&quot;$&#123;grade==&#x27;A&#x27;&#125;&quot;</span>&gt;&lt;h2&gt;你很优秀&lt;/h2&gt;&lt;/c:when&gt;</span><br><span class=\"line\">         &lt;c:when test=<span class=\"string\">&quot;$&#123;grade==&#x27;B&#x27;&#125;&quot;</span>&gt;&lt;h2&gt;你很不错&lt;/h2&gt;&lt;/c:when&gt;</span><br><span class=\"line\">         &lt;c:when test=<span class=\"string\">&quot;$&#123;grade==&#x27;C&#x27;&#125;&quot;</span>&gt;&lt;h2&gt;勉强及格&lt;/h2&gt;&lt;/c:when&gt;</span><br><span class=\"line\">         &lt;c:otherwise&gt; &lt;h2&gt;再接再厉&lt;/h2&gt;&lt;/c:otherwise&gt;</span><br><span class=\"line\">   &lt;/c:choose&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<h3 id=\"遍历集合\"><a href=\"#遍历集合\" class=\"headerlink\" title=\"遍历集合\"></a>遍历集合</h3><p>◇&lt;c:forEach&gt;标签用于遍历集合(Collection)中的每一个对象<br><img src=\"/p/5d7/4.png\" class=\"lazyload\" data-srcset=\"/p/5d7/4.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\"><br>◇代码演示<br>  –Java创建公司类</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.lcg.jstl;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Company</span> </span>&#123;</span><br><span class=\"line\">       <span class=\"keyword\">private</span> String cname;</span><br><span class=\"line\">       <span class=\"keyword\">private</span> String url;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Company</span><span class=\"params\">(String cname,String url)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.cname=cname;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.url=url;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"> \t<span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getCname</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> cname;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setCname</span><span class=\"params\">(String cname)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.cname = cname;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getUrl</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> url;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setUrl</span><span class=\"params\">(String url)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.url = url;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> –Servlet初始化</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doGet</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> </span></span><br><span class=\"line\"><span class=\"function\">    <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">\t\tArrayList&lt;Company&gt; list=<span class=\"keyword\">new</span> ArrayList&lt;Company&gt;();</span><br><span class=\"line\">\t\tlist.add(<span class=\"keyword\">new</span> Company(<span class=\"string\">&quot;百度&quot;</span>,<span class=\"string\">&quot;www.baidu.com&quot;</span>));</span><br><span class=\"line\">\t\tlist.add(<span class=\"keyword\">new</span> Company(<span class=\"string\">&quot;腾讯&quot;</span>,<span class=\"string\">&quot;www.tencent.com&quot;</span>));</span><br><span class=\"line\">\t\tlist.add(<span class=\"keyword\">new</span> Company(<span class=\"string\">&quot;交通&quot;</span>,<span class=\"string\">&quot;www.gamest.link&quot;</span>));</span><br><span class=\"line\">\t\trequest.setAttribute(<span class=\"string\">&quot;companies&quot;</span>, list);</span><br><span class=\"line\">\t\trequest.getRequestDispatcher(<span class=\"string\">&quot;/core.jsp&quot;</span>).forward(request, response);</span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure>\n<p> –core.jsp使用</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!-- forEach标签用于遍历集合  java代码实现</span><br><span class=\"line\">    List companies =(List)request.getAttribute(<span class=\"string\">&quot;companies&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(Company c : companies)&#123;</span><br><span class=\"line\">      out.print(<span class=\"string\">&quot;...&quot;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  --&gt;</span><br><span class=\"line\">      &lt;!--items数据来源  <span class=\"keyword\">var</span> 数据变量  varStatus变量状态(第几个) --&gt;</span><br><span class=\"line\">  &lt;c:forEach items=<span class=\"string\">&quot;$&#123;requestScope.companies&#125;&quot;</span> <span class=\"keyword\">var</span>=<span class=\"string\">&quot;c&quot;</span> varStatus=<span class=\"string\">&quot;idx&quot;</span>&gt;</span><br><span class=\"line\">       &lt;h2&gt;$&#123;idx.index+<span class=\"number\">1</span>&#125;.$&#123;c.cname&#125;--$&#123;c.url&#125;&lt;/h2&gt;</span><br><span class=\"line\">  &lt;/c:forEach&gt;</span><br></pre></td></tr></table></figure>\n<h3 id=\"格式化标签库\"><a href=\"#格式化标签库\" class=\"headerlink\" title=\"格式化标签库\"></a>格式化标签库</h3><p>◇fmt格式化标签库 URL:<a href=\"http://java.sun.com/jsp/jstl/fmt\">http://java.sun.com/jsp/jstl/fmt</a><br>◇&lt;fmt:formatDate value=”” pattern =”” &gt; 格式化日期标签<br>◇&lt;fmt:formatNumber value=”” pattern =”” &gt; 格式化数字标签<br>◇代码演示</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;%@ page language=<span class=\"string\">&quot;java&quot;</span> contentType=<span class=\"string\">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class=\"line\">    pageEncoding=<span class=\"string\">&quot;UTF-8&quot;</span>%&gt;</span><br><span class=\"line\">&lt;%@ taglib uri=<span class=\"string\">&quot;http://java.sun.com/jsp/jstl/fmt&quot;</span> prefix=<span class=\"string\">&quot;fmt&quot;</span> %&gt;</span><br><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">&lt;meta charset=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span><br><span class=\"line\">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">       &lt;%</span><br><span class=\"line\">          request.setAttribute(<span class=\"string\">&quot;amt&quot;</span>,<span class=\"number\">1575101.585</span>);</span><br><span class=\"line\">          request.setAttribute(<span class=\"string\">&quot;now&quot;</span>,<span class=\"keyword\">new</span> java.util.Date());</span><br><span class=\"line\">          request.setAttribute(<span class=\"string\">&quot;html&quot;</span>, <span class=\"string\">&quot;&lt;a href=&#x27;index.html&#x27;&gt;index&lt;/a&gt;&quot;</span>);</span><br><span class=\"line\">          request.setAttribute(<span class=\"string\">&quot;nothing&quot;</span>,<span class=\"keyword\">null</span>);</span><br><span class=\"line\">       %&gt;</span><br><span class=\"line\">       &lt;!-- </span><br><span class=\"line\">         formatDate pattern</span><br><span class=\"line\">         yyyy  -四位年</span><br><span class=\"line\">         MM - 两位月</span><br><span class=\"line\">         dd - 两位日</span><br><span class=\"line\">         HH - <span class=\"number\">24</span>小时制</span><br><span class=\"line\">         hh - <span class=\"number\">12</span>小时制</span><br><span class=\"line\">         mm - 分钟</span><br><span class=\"line\">         ss - 秒数</span><br><span class=\"line\">         sss - 毫秒</span><br><span class=\"line\">        --&gt;</span><br><span class=\"line\">        &lt;!--格式化日期--&gt;</span><br><span class=\"line\">     &lt;h2&gt; </span><br><span class=\"line\">     &lt;fmt:formatDate value=<span class=\"string\">&quot;$&#123;requestScope.now&#125;&quot;</span> pattern=<span class=\"string\">&quot;yyyy年MM月dd日HH时mm分ss秒&quot;</span>/&gt;</span><br><span class=\"line\">     &lt;/h2&gt;</span><br><span class=\"line\">     &lt;!--格式化数字 <span class=\"number\">0.00</span>表示保留两位小数 <span class=\"number\">0</span>,<span class=\"number\">00.00</span>表示按百分位用<span class=\"string\">&#x27;,&#x27;</span>分割--&gt;</span><br><span class=\"line\">     &lt;h2&gt; </span><br><span class=\"line\">     &lt;fmt:formatNumber value=<span class=\"string\">&quot;$&#123;requestScope.amt&#125;&quot;</span> pattern=<span class=\"string\">&quot;0.00&quot;</span>/&gt;</span><br><span class=\"line\">     &lt;/h2&gt;</span><br><span class=\"line\">     </span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<p>◇默认值，与转义<br>  –defalut设置默认值，escapeXml表示是否进行转义，若转义，则将<a>标签的链接显示出来，</a></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">&lt;h2&gt;<span class=\"keyword\">null</span>默认值：&lt;c:out value=<span class=\"string\">&quot;$&#123;nothing&#125;&quot;</span> <span class=\"keyword\">default</span>=<span class=\"string\">&quot;无&quot;</span>&gt;&lt;/c:out&gt;&lt;/h2&gt;</span><br><span class=\"line\">&lt;h2&gt;&lt;c:out value=<span class=\"string\">&quot;$&#123;html&#125;&quot;</span> escapeXml=<span class=\"string\">&quot;true&quot;</span>&gt;&lt;/c:out&gt;&lt;/h2&gt;</span><br></pre></td></tr></table></figure>\n<h2 id=\"综合训练\"><a href=\"#综合训练\" class=\"headerlink\" title=\"综合训练\"></a>综合训练</h2><p>◇创建Dynamic web工程；<br>◇导入静态页面demo文件，放在项目主目录employee下；<br>◇静态的页面<br>◇导入jstl的声明jar包和实现jar包，放入到WEB-INF\\lib目录下；<br>◇新增员工实体类</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Employee</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer empno;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String ename;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String department;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String job;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Float salary;</span><br><span class=\"line\">    <span class=\"comment\">//get和set方法</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>◇新建ListServlet初始化数据；</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.lcg.employee;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.ArrayList;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletContext;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.annotation.WebServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Servlet implementation class ListServlet</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@WebServlet(&quot;/list&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ListServlet</span> <span class=\"keyword\">extends</span> <span class=\"title\">HttpServlet</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">long</span> serialVersionUID = <span class=\"number\">1L</span>;</span><br><span class=\"line\">       </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@see</span> HttpServlet#HttpServlet()</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ListServlet</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>();</span><br><span class=\"line\">        <span class=\"comment\">// TODO Auto-generated constructor stub</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@see</span> HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class=\"line\"><span class=\"comment\">\t */</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doGet</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> </span></span><br><span class=\"line\"><span class=\"function\">\t\t\t<span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">\t\tServletContext context = request.getServletContext();</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(context.getAttribute(<span class=\"string\">&quot;employees&quot;</span>)==<span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">\t\t\tList&lt;Employee&gt; list = <span class=\"keyword\">new</span> ArrayList&lt;Employee&gt;();</span><br><span class=\"line\">\t\t\tEmployee emp = <span class=\"keyword\">new</span> Employee(<span class=\"number\">2020</span>,<span class=\"string\">&quot;吴浩&quot;</span>,<span class=\"string\">&quot;市场部&quot;</span>,<span class=\"string\">&quot;客户代表&quot;</span>,<span class=\"number\">6000f</span>);</span><br><span class=\"line\">\t\t\tlist.add(emp);</span><br><span class=\"line\">\t\t\tlist.add(<span class=\"keyword\">new</span> Employee(<span class=\"number\">2021</span>,<span class=\"string\">&quot;石磊&quot;</span>,<span class=\"string\">&quot;研发部&quot;</span>,<span class=\"string\">&quot;交通工程师&quot;</span>,<span class=\"number\">8000f</span>));</span><br><span class=\"line\">\t\t\tcontext.setAttribute(<span class=\"string\">&quot;employees&quot;</span>, list);</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">        <span class=\"comment\">//跳转到员工信息页</span></span><br><span class=\"line\">\t\trequest.getRequestDispatcher(<span class=\"string\">&quot;/employee.jsp&quot;</span>).forward(request, response);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>◇将静态的html页面改为动态的jsp页面输出员工信息；</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;%@ page contentType=<span class=\"string\">&quot;text/html;charset=utf-8&quot;</span>%&gt;</span><br><span class=\"line\">&lt;%@ taglib uri=<span class=\"string\">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> prefix=<span class=\"string\">&quot;c&quot;</span> %&gt;</span><br><span class=\"line\">&lt;%@ taglib uri=<span class=\"string\">&quot;http://java.sun.com/jsp/jstl/fmt&quot;</span> prefix=<span class=\"string\">&quot;fmt&quot;</span> %&gt;</span><br><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">    &lt;meta charset=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span><br><span class=\"line\">    &lt;meta name=<span class=\"string\">&quot;viewport&quot;</span> content=<span class=\"string\">&quot;width=device-width,initial-scale=1&quot;</span>&gt;</span><br><span class=\"line\">    &lt;title&gt;员工列表&lt;/title&gt;</span><br><span class=\"line\">    &lt;link href=<span class=\"string\">&quot;css/bootstrap.css&quot;</span> type=<span class=\"string\">&quot;text/css&quot;</span> rel=<span class=\"string\">&quot;stylesheet&quot;</span>&gt;&lt;/link&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">    &lt;script type=<span class=\"string\">&quot;text/javascript&quot;</span> src=<span class=\"string\">&quot;js/jquery-1.11.1.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">    &lt;script type=<span class=\"string\">&quot;text/javascript&quot;</span> src=<span class=\"string\">&quot;js/bootstrap.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;style type=<span class=\"string\">&quot;text/css&quot;</span>&gt;</span><br><span class=\"line\">        .pagination &#123;</span><br><span class=\"line\">            margin: 0px</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        .pagination &gt; li &gt; a, .pagination &gt; li &gt; span &#123;</span><br><span class=\"line\">            margin: <span class=\"number\">0</span> 5px;</span><br><span class=\"line\">            border: 1px solid #dddddd;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        .glyphicon &#123;</span><br><span class=\"line\">            margin-right: 3px;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        .form-control[readonly] &#123;</span><br><span class=\"line\">            cursor: pointer;</span><br><span class=\"line\">            background-color: white;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        #dlgPhoto .modal-body&#123;</span><br><span class=\"line\">            text-align: center;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        .preview&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">            max-width: 500px;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &lt;/style&gt;</span><br><span class=\"line\">    &lt;script&gt;</span><br><span class=\"line\">        $(function () &#123;</span><br><span class=\"line\">            </span><br><span class=\"line\">            $(<span class=\"string\">&quot;#btnAdd&quot;</span>).click(function () &#123;</span><br><span class=\"line\">                $(<span class=\"string\">&#x27;#dlgForm&#x27;</span>).modal()</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;/script&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;container&quot;</span>&gt;</span><br><span class=\"line\">    &lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;row&quot;</span>&gt;</span><br><span class=\"line\">        &lt;h1 style=<span class=\"string\">&quot;text-align: center&quot;</span>&gt;交通控股员工信息表&lt;/h1&gt;</span><br><span class=\"line\">        &lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;panel panel-default&quot;</span>&gt;</span><br><span class=\"line\">            &lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;clearfix panel-heading &quot;</span>&gt;</span><br><span class=\"line\">                &lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;input-group&quot;</span> style=<span class=\"string\">&quot;width: 500px;&quot;</span>&gt;</span><br><span class=\"line\">                    &lt;button <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;btn btn-primary&quot;</span> id=<span class=\"string\">&quot;btnAdd&quot;</span>&gt;&lt;span <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;glyphicon glyphicon-zoom-in&quot;</span>&gt;&lt;/span&gt;新增</span><br><span class=\"line\">                    &lt;/button&gt;</span><br><span class=\"line\">                &lt;/div&gt;</span><br><span class=\"line\">            &lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">            &lt;table <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;table table-bordered table-hover&quot;</span>&gt;</span><br><span class=\"line\">                &lt;thead&gt;</span><br><span class=\"line\">                &lt;tr&gt;</span><br><span class=\"line\">                    &lt;th&gt;序号&lt;/th&gt;</span><br><span class=\"line\">                    &lt;th&gt;员工编号&lt;/th&gt;</span><br><span class=\"line\">                    &lt;th&gt;姓名&lt;/th&gt;</span><br><span class=\"line\">                    &lt;th&gt;部门&lt;/th&gt;</span><br><span class=\"line\">                    &lt;th&gt;职务&lt;/th&gt;</span><br><span class=\"line\">                    &lt;th&gt;工资&lt;/th&gt;</span><br><span class=\"line\">                    &lt;th&gt;&amp;nbsp;&lt;/th&gt;</span><br><span class=\"line\">                &lt;/tr&gt;</span><br><span class=\"line\">                &lt;/thead&gt;</span><br><span class=\"line\">                &lt;tbody&gt;</span><br><span class=\"line\">               &lt;--利用循环以及EL表达式输出每一个员工的信息 --&gt;</span><br><span class=\"line\">                &lt;c:forEach items=<span class=\"string\">&quot;$&#123;applicationScope.employees&#125;&quot;</span> <span class=\"keyword\">var</span>=<span class=\"string\">&quot;emp&quot;</span> varStatus=<span class=\"string\">&quot;idx&quot;</span>&gt;</span><br><span class=\"line\">                &lt;tr&gt;</span><br><span class=\"line\">                    &lt;td&gt;$&#123;idx.index+<span class=\"number\">1</span>&#125;&lt;/td&gt;</span><br><span class=\"line\">                    &lt;td&gt;$&#123;emp.empno&#125;&lt;/td&gt;</span><br><span class=\"line\">                    &lt;td&gt;$&#123;emp.ename&#125;&lt;/td&gt;</span><br><span class=\"line\">                    &lt;td&gt;$&#123;emp.department &#125;&lt;/td&gt;</span><br><span class=\"line\">                    &lt;td&gt;$&#123;emp.job &#125;&lt;/td&gt;</span><br><span class=\"line\">                    &lt;td style=<span class=\"string\">&quot;color: red;font-weight: bold&quot;</span>&gt;</span><br><span class=\"line\">             ￥&lt;fmt:formatNumber value=<span class=\"string\">&quot;$&#123;emp.salary&#125;&quot;</span> pattern=<span class=\"string\">&quot;0,000.00&quot;</span>&gt;&lt;/fmt:formatNumber&gt;</span><br><span class=\"line\">             &lt;/td&gt;                   </span><br><span class=\"line\">                &lt;/tr&gt;</span><br><span class=\"line\">               &lt;/c:forEach&gt;</span><br><span class=\"line\">                &lt;/tbody&gt;</span><br><span class=\"line\">            &lt;/table&gt;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!-- 表单 --&gt;</span><br><span class=\"line\">&lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;modal fade&quot;</span> tabindex=<span class=\"string\">&quot;-1&quot;</span> role=<span class=\"string\">&quot;dialog&quot;</span> id=<span class=\"string\">&quot;dlgForm&quot;</span>&gt;</span><br><span class=\"line\">    &lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;modal-dialog&quot;</span> role=<span class=\"string\">&quot;document&quot;</span>&gt;</span><br><span class=\"line\">        &lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;modal-content&quot;</span>&gt;</span><br><span class=\"line\">            &lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;modal-header&quot;</span>&gt;</span><br><span class=\"line\">                &lt;button type=<span class=\"string\">&quot;button&quot;</span> <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;close&quot;</span> data-dismiss=<span class=\"string\">&quot;modal&quot;</span> aria-label=<span class=\"string\">&quot;Close&quot;</span>&gt;&lt;span aria-hidden=<span class=\"string\">&quot;true&quot;</span>&gt;&amp;times;&lt;/span&gt;</span><br><span class=\"line\">                &lt;/button&gt;</span><br><span class=\"line\">                &lt;h4 <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;modal-title&quot;</span>&gt;新增员工&lt;/h4&gt;</span><br><span class=\"line\">            &lt;/div&gt;</span><br><span class=\"line\">            &lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;modal-body&quot;</span>&gt;</span><br><span class=\"line\">                &lt;form action=<span class=\"string\">&quot;/employee/create&quot;</span> method=<span class=\"string\">&quot;post&quot;</span> &gt; &lt;!-- action表单存放地址 --&gt;</span><br><span class=\"line\">                    &lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;form-group&quot;</span>&gt;</span><br><span class=\"line\">                        &lt;label <span class=\"keyword\">for</span>=<span class=\"string\">&quot;empno&quot;</span>&gt;员工编号&lt;/label&gt;</span><br><span class=\"line\">                        &lt;input type=<span class=\"string\">&quot;text&quot;</span> name=<span class=\"string\">&quot;empno&quot;</span> <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;form-control&quot;</span> id=<span class=\"string\">&quot;empno&quot;</span> placeholder=<span class=\"string\">&quot;请输入员工编号&quot;</span>&gt;</span><br><span class=\"line\">                    &lt;/div&gt;</span><br><span class=\"line\">                    &lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;form-group&quot;</span>&gt;</span><br><span class=\"line\">                        &lt;label <span class=\"keyword\">for</span>=<span class=\"string\">&quot;ename&quot;</span>&gt;员工姓名&lt;/label&gt;</span><br><span class=\"line\">                        &lt;input type=<span class=\"string\">&quot;text&quot;</span> name=<span class=\"string\">&quot;ename&quot;</span> <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;form-control&quot;</span> id=<span class=\"string\">&quot;ename&quot;</span> placeholder=<span class=\"string\">&quot;请输入员工姓名&quot;</span>&gt;</span><br><span class=\"line\">                    &lt;/div&gt;</span><br><span class=\"line\">                    &lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;form-group&quot;</span>&gt;</span><br><span class=\"line\">                        &lt;label&gt;部门&lt;/label&gt;</span><br><span class=\"line\">                        &lt;select id=<span class=\"string\">&quot;dname&quot;</span> name=<span class=\"string\">&quot;department&quot;</span> <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;form-control&quot;</span>&gt;</span><br><span class=\"line\">                            &lt;option selected=<span class=\"string\">&quot;selected&quot;</span>&gt;请选择部门&lt;/option&gt;</span><br><span class=\"line\">                            &lt;option value=<span class=\"string\">&quot;市场部&quot;</span>&gt;市场部&lt;/option&gt;</span><br><span class=\"line\">                            &lt;option value=<span class=\"string\">&quot;研发部&quot;</span>&gt;研发部&lt;/option&gt;</span><br><span class=\"line\">                        \t&lt;option value=<span class=\"string\">&quot;后勤部&quot;</span>&gt;后勤部&lt;/option&gt;</span><br><span class=\"line\">                        &lt;/select&gt;</span><br><span class=\"line\">                    &lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">                    &lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;form-group&quot;</span>&gt;</span><br><span class=\"line\">                        &lt;label&gt;职务&lt;/label&gt;</span><br><span class=\"line\">                        &lt;input type=<span class=\"string\">&quot;text&quot;</span> name=<span class=\"string\">&quot;job&quot;</span> <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;form-control&quot;</span> id=<span class=\"string\">&quot;sal&quot;</span> placeholder=<span class=\"string\">&quot;请输入职务&quot;</span>&gt;</span><br><span class=\"line\">                    &lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">                    &lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;form-group&quot;</span>&gt;</span><br><span class=\"line\">                        &lt;label <span class=\"keyword\">for</span>=<span class=\"string\">&quot;sal&quot;</span>&gt;工资&lt;/label&gt;</span><br><span class=\"line\">                        &lt;input type=<span class=\"string\">&quot;text&quot;</span> name=<span class=\"string\">&quot;salary&quot;</span> <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;form-control&quot;</span> id=<span class=\"string\">&quot;sal&quot;</span> placeholder=<span class=\"string\">&quot;请输入工资&quot;</span>&gt;</span><br><span class=\"line\">                    &lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">                    &lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;form-group&quot;</span> style=<span class=\"string\">&quot;text-align: center;&quot;</span>&gt;</span><br><span class=\"line\">                        &lt;button type=<span class=\"string\">&quot;submit&quot;</span> <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;btn btn-primary&quot;</span>&gt;保存&lt;/button&gt;</span><br><span class=\"line\">                    &lt;/div&gt;</span><br><span class=\"line\">                &lt;/form&gt;</span><br><span class=\"line\">            &lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;/div&gt;&lt;!-- /.modal-content --&gt;</span><br><span class=\"line\">    &lt;/div&gt;&lt;!-- /.modal-dialog --&gt;</span><br><span class=\"line\">&lt;/div&gt;&lt;!-- /.modal --&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<p>◇实现新增功能，创建新的servlet用于创建员工;</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.lcg.employee;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletContext;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.annotation.WebServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Servlet implementation class CreateServlet</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@WebServlet(&quot;/create&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CreateServlet</span> <span class=\"keyword\">extends</span> <span class=\"title\">HttpServlet</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">long</span> serialVersionUID = <span class=\"number\">1L</span>;</span><br><span class=\"line\">       </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@see</span> HttpServlet#HttpServlet()</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">CreateServlet</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>();</span><br><span class=\"line\">        <span class=\"comment\">// TODO Auto-generated constructor stub</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@see</span> HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class=\"line\"><span class=\"comment\">\t */</span></span><br><span class=\"line\">    <span class=\"comment\">//表单通过post提交;</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doPost</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> </span></span><br><span class=\"line\"><span class=\"function\">\t\t\t<span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">\t\trequest.setCharacterEncoding(<span class=\"string\">&quot;UTF-8&quot;</span>);</span><br><span class=\"line\">\t\tString empno = request.getParameter(<span class=\"string\">&quot;empno&quot;</span>);<span class=\"comment\">//empno是在jsp中设置的name属性;</span></span><br><span class=\"line\">\t\tString ename = request.getParameter(<span class=\"string\">&quot;ename&quot;</span>);</span><br><span class=\"line\">\t\tString department = request.getParameter(<span class=\"string\">&quot;department&quot;</span>);</span><br><span class=\"line\">\t\tString job = request.getParameter(<span class=\"string\">&quot;job&quot;</span>);</span><br><span class=\"line\">\t\t<span class=\"comment\">//尽管salary是float类型，但getParameter接收时须为String类型</span></span><br><span class=\"line\">\t\tString salary = request.getParameter(<span class=\"string\">&quot;salary&quot;</span>); </span><br><span class=\"line\">\t\tEmployee emp = <span class=\"keyword\">new</span> Employee(Integer.parseInt(empno),ename,department,job,Float.parseFloat(salary));</span><br><span class=\"line\">\t    <span class=\"comment\">/*将emp对象保存到原始数据中，原始数据由应用全局对象保存，</span></span><br><span class=\"line\"><span class=\"comment\">\t\t注意属性employees来自于context.setAttribute(&quot;employees&quot;, list);*/</span></span><br><span class=\"line\">\t\tServletContext context = request.getServletContext();</span><br><span class=\"line\">\t\t<span class=\"comment\">//获取初始的数据</span></span><br><span class=\"line\">\t    List employees = (List)context.getAttribute(<span class=\"string\">&quot;employees&quot;</span>);</span><br><span class=\"line\">\t    <span class=\"comment\">//添加数据</span></span><br><span class=\"line\">\t    employees.add(emp);</span><br><span class=\"line\">\t    <span class=\"comment\">//再将添加完成后的数据放回去</span></span><br><span class=\"line\">\t    context.setAttribute(<span class=\"string\">&quot;employees&quot;</span>, employees);</span><br><span class=\"line\">\t    request.getRequestDispatcher(<span class=\"string\">&quot;/employee.jsp&quot;</span>).forward(request, response);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n","categories":["JavaWeb"],"tags":["EL"]},{"title":"Java正则表达式","url":"/p/830d.html","content":"<h2 id=\"什么是正则表达式\"><a href=\"#什么是正则表达式\" class=\"headerlink\" title=\"什么是正则表达式\"></a>什么是正则表达式</h2><p>◇正则表达式是检查、匹配字符串的表达式<br>◇正则表达式是描述规则，主流语言都有良好支持<br>◇字符串校验、查找与替换是正则表达式的主要使用场景</p>\n<h2 id=\"正则表达式案例\"><a href=\"#正则表达式案例\" class=\"headerlink\" title=\"正则表达式案例\"></a>正则表达式案例</h2><p>◇检查输入身份证号是否合法(15位，18位)<br>◇示例：522725200012140613<br>◇正则表达式：^(\\d{6})(\\d{4})(\\d{2})(\\d{2})(\\d{3})(<br>[0-9]|X)$</p>\n<h2 id=\"字符串匹配范围\"><a href=\"#字符串匹配范围\" class=\"headerlink\" title=\"字符串匹配范围\"></a>字符串匹配范围</h2><p><img src=\"/p/830d/1622273814688-c95bbe36-4de4-4097-926a-bdd9d272ae4c.png\" class=\"lazyload\" data-srcset=\"/p/830d/1622273814688-c95bbe36-4de4-4097-926a-bdd9d272ae4c.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h2 id=\"元字符\"><a href=\"#元字符\" class=\"headerlink\" title=\"元字符\"></a>元字符</h2><p><img src=\"/p/830d/1622275128906-171de557-e8e8-49e2-91ec-5cfc99b60ad5.png\" class=\"lazyload\" data-srcset=\"/p/830d/1622275128906-171de557-e8e8-49e2-91ec-5cfc99b60ad5.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>◇eg：3213.383219  匹配四个整数，六个小数<br>正则表达式1：[0-9][0-9][0-9][0-9].[0-9][0-9][0-9][0-9][0-9][0-9]<br>可以看出原始方法过于繁琐<br>正则表达式2：\\d\\d\\d\\d.\\d\\d\\d\\d\\d\\d</p>\n<h2 id=\"多次重复匹配\"><a href=\"#多次重复匹配\" class=\"headerlink\" title=\"多次重复匹配\"></a>多次重复匹配</h2><p><img src=\"/p/830d/1622275953538-2e523fbb-f7d7-4cdf-896b-aedc908f446a.png\" class=\"lazyload\" data-srcset=\"/p/830d/1622275953538-2e523fbb-f7d7-4cdf-896b-aedc908f446a.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h2 id=\"定位匹配\"><a href=\"#定位匹配\" class=\"headerlink\" title=\"定位匹配\"></a>定位匹配</h2><p><img src=\"/p/830d/1622292656494-fee0f93c-a372-4d1d-9762-867693b3d037.png\" class=\"lazyload\" data-srcset=\"/p/830d/1622292656494-fee0f93c-a372-4d1d-9762-867693b3d037.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h2 id=\"贪婪模式\"><a href=\"#贪婪模式\" class=\"headerlink\" title=\"贪婪模式\"></a>贪婪模式</h2><p>◇在满足条件的情况下尽可能多匹配到字符串（默认）<br>◇eg：111222333 正则： \\d{6,8}  结果：11122233</p>\n<h2 id=\"非贪婪模式\"><a href=\"#非贪婪模式\" class=\"headerlink\" title=\"非贪婪模式\"></a>非贪婪模式</h2><p>◇在满足条件的情况下尽可能少匹配到字符串<br>◇eg：111222333 正则： \\d{6,8}?  结果：111222</p>\n<h2 id=\"表达式分组\"><a href=\"#表达式分组\" class=\"headerlink\" title=\"表达式分组\"></a>表达式分组</h2><p>◇分组将”正则”分组为多个子表达式<br>◇示例：abababcdcdcd<br>◇正则表达式： (ab){3}(cd){3}</p>\n<h2 id=\"JavaScript表单验证\"><a href=\"#JavaScript表单验证\" class=\"headerlink\" title=\"JavaScript表单验证\"></a>JavaScript表单验证</h2><p> –代码演示</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Insert title here<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">action</span>=<span class=\"string\">&quot;#&quot;</span> <span class=\"attr\">method</span>=<span class=\"string\">&quot;post&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;frmInfo&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;err&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;color:red&quot;</span>&gt;</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">                    姓名:<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;name&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;name&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">                   身份证:<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;idno&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;idno&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">             <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"javascript\"></span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;frmInfo&quot;</span>).onsubmit = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            \t<span class=\"comment\">//在JS中定义正则表达式只需在  /正则表达式/</span></span></span><br><span class=\"line\"><span class=\"javascript\">            \t<span class=\"keyword\">var</span> regex1 = <span class=\"regexp\">/^[\\u4e00-\\u9fa5]&#123;2,8&#125;$/</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">            \t<span class=\"keyword\">var</span> regex2 = <span class=\"regexp\">/^[1234568]\\d&#123;16&#125;[0-9xX]$/</span></span></span><br><span class=\"line\"><span class=\"javascript\">            \t<span class=\"keyword\">var</span> name = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;name&quot;</span>).value;</span></span><br><span class=\"line\"><span class=\"javascript\">            \t<span class=\"keyword\">var</span> idno = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;idno&quot;</span>).value;</span></span><br><span class=\"line\"><span class=\"javascript\">            \t<span class=\"comment\">//利用正则校验数据，true表示匹配</span></span></span><br><span class=\"line\"><span class=\"javascript\">            \t<span class=\"keyword\">if</span>(regex1.test(name)==<span class=\"literal\">false</span>)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            \t\t<span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;err&quot;</span>).innerHTML=<span class=\"string\">&quot;无效姓名&quot;</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">            \t\t<span class=\"keyword\">return</span> <span class=\"literal\">false</span>;<span class=\"comment\">//在onsubmit中，return false代表表单不提交</span></span></span><br><span class=\"line\"><span class=\"javascript\">            \t&#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(regex2.test(idno)==<span class=\"literal\">false</span>)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            \t\t<span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;err&quot;</span>).innerHTML=<span class=\"string\">&quot;无效身份证号&quot;</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">            \t\t<span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">            \t&#125;</span></span><br><span class=\"line\"><span class=\"javascript\">            \t<span class=\"keyword\">else</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            \t\talert(<span class=\"string\">&quot;success&quot;</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">            \t\t<span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">            \t&#125;</span></span><br><span class=\"line\"><span class=\"javascript\">            &#125;</span></span><br><span class=\"line\"><span class=\"javascript\">    </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"Java中Web页面信息提取\"><a href=\"#Java中Web页面信息提取\" class=\"headerlink\" title=\"Java中Web页面信息提取\"></a>Java中Web页面信息提取</h2><p> ◇html</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPEhtml&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">&lt;meta charset=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span><br><span class=\"line\">&lt;title&gt;国际主要城市&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">\t&lt;h1&gt;国际主要城市&lt;/h1&gt;</span><br><span class=\"line\">\t&lt;ul&gt;</span><br><span class=\"line\">\t\t&lt;li&gt;纽约NewYork&lt;/li&gt;</span><br><span class=\"line\">\t\t&lt;li&gt;伦敦London&lt;/li&gt;</span><br><span class=\"line\">\t\t&lt;li&gt;东京Tokyo&lt;/li&gt;</span><br><span class=\"line\">\t\t&lt;li&gt;巴黎Paris&lt;/li&gt;</span><br><span class=\"line\">\t\t&lt;li&gt;香港HongKong&lt;/li&gt;</span><br><span class=\"line\">\t\t&lt;li&gt;新加坡Singapore&lt;/li&gt;</span><br><span class=\"line\">\t\t&lt;li&gt;悉尼Sydney&lt;/li&gt;</span><br><span class=\"line\">\t\t&lt;li&gt;米兰Milano&lt;/li&gt;</span><br><span class=\"line\">\t\t&lt;li&gt;上海Shanghai&lt;/li&gt;</span><br><span class=\"line\">\t\t&lt;li&gt;北京Beijing&lt;/li&gt;</span><br><span class=\"line\">\t\t&lt;li&gt;马德里Madrid&lt;/li&gt;</span><br><span class=\"line\">\t\t&lt;li&gt;莫斯科Moscow&lt;/li&gt;</span><br><span class=\"line\">\t\t&lt;li&gt;首尔Seoul&lt;/li&gt;</span><br><span class=\"line\">\t\t&lt;li&gt;曼谷Bangkok&lt;/li&gt;</span><br><span class=\"line\">\t\t&lt;li&gt;台北Taipei&lt;/li&gt;</span><br><span class=\"line\">        ...</span><br><span class=\"line\">\t&lt;/ul&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<p>◇regex类</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.lcg.regex;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.BufferedReader;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.FileInputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.InputStreamReader;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.regex.Matcher;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.regex.Pattern;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RegexSample</span> </span>&#123;</span><br><span class=\"line\">       <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">    \t   StringBuilder content = <span class=\"keyword\">new</span> StringBuilder();</span><br><span class=\"line\">    \t   <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">\t\t\tFileInputStream fis = </span><br><span class=\"line\">\t\t   <span class=\"keyword\">new</span> FileInputStream(<span class=\"string\">&quot;F:\\\\JAVA\\\\workspace\\\\regex\\\\WebContent\\\\sample.html&quot;</span>);</span><br><span class=\"line\">\t\t\t<span class=\"comment\">//将二进制流转换为可读的字符串流</span></span><br><span class=\"line\">\t\t\tInputStreamReader isr = <span class=\"keyword\">new</span> InputStreamReader(fis,<span class=\"string\">&quot;UTF-8&quot;</span>);</span><br><span class=\"line\">\t\t\t<span class=\"comment\">//缓冲流，提高对原始文件的读取效率</span></span><br><span class=\"line\">\t\t\tBufferedReader bufferedReader = <span class=\"keyword\">new</span> BufferedReader(isr);</span><br><span class=\"line\">\t\t\tString lineText=<span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">while</span>((lineText=bufferedReader.readLine())!=<span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">\t\t\t\t</span><br><span class=\"line\">\t\t\t\tcontent.append(lineText+<span class=\"string\">&quot;\\n&quot;</span>);<span class=\"comment\">//将读取到的每一行数据追加到content中</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\tbufferedReader.close();</span><br><span class=\"line\">\t\t\t<span class=\"comment\">//System.out.println(content);</span></span><br><span class=\"line\">\t\t&#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">// TODO Auto-generated catch block</span></span><br><span class=\"line\">\t\t\te.printStackTrace();</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">    \t   <span class=\"comment\">//1.创建正则表达式对象</span></span><br><span class=\"line\">    \t   <span class=\"comment\">//在字符串中\\前增加一个\\表示原义输出</span></span><br><span class=\"line\">    \t  Pattern p = Pattern.compile(<span class=\"string\">&quot;&lt;li&gt;([\\\\u4e00-\\\\u9fa5]&#123;2,10&#125;)([a-zA-Z]+)&lt;/li&gt;&quot;</span>);</span><br><span class=\"line\">    \t  <span class=\"comment\">//2.匹配正则表达式</span></span><br><span class=\"line\">    \t  Matcher m = p.matcher(content);</span><br><span class=\"line\">    \t  <span class=\"comment\">//3.查找匹配结果</span></span><br><span class=\"line\">    \t <span class=\"keyword\">while</span>( m.find()) &#123;</span><br><span class=\"line\">             <span class=\"comment\">//m.group(0)是匹配的完整字符串,1是第一个分组。</span></span><br><span class=\"line\">    \t\t<span class=\"comment\">// System.out.println(m.group(0));</span></span><br><span class=\"line\">    \t\tString chs = m.group(<span class=\"number\">1</span>);</span><br><span class=\"line\">    \t\tString eng = m.group(<span class=\"number\">2</span>);</span><br><span class=\"line\">    \t\tSystem.out.println(chs+<span class=\"string\">&quot;-&quot;</span>+eng);</span><br><span class=\"line\">    \t &#125;</span><br><span class=\"line\">    \t </span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n","categories":["JavaWeb"],"tags":["正则"]},{"title":"Lambda表达式","url":"/p/8609.html","content":"<h2 id=\"课程介绍\"><a href=\"#课程介绍\" class=\"headerlink\" title=\"课程介绍\"></a>课程介绍</h2><p>◇实例讲解Lambda语法<br>◇基于Lambda实现函数式编程<br>◇Stream流式处理  </p>\n<h2 id=\"初识Lambda表达式\"><a href=\"#初识Lambda表达式\" class=\"headerlink\" title=\"初识Lambda表达式\"></a>初识Lambda表达式</h2><h3 id=\"什么是Lambda表达式\"><a href=\"#什么是Lambda表达式\" class=\"headerlink\" title=\"什么是Lambda表达式\"></a>什么是Lambda表达式</h3><p>◇JDK8开始支持Lambda表达式,用来让程序编写更优雅<br>◇利用Lambda可以更简洁的实现匿名内部类与函数声明与调用<br>◇基于Lambda提供stream流式处理极大简化对集合的操作  </p>\n<h3 id=\"传统代码\"><a href=\"#传统代码\" class=\"headerlink\" title=\"传统代码\"></a>传统代码</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">List&lt;String&gt; names = Arrays.asList(<span class=\"string\">&quot;peter&quot;</span>, <span class=\"string\">&quot;anna&quot;</span>, <span class=\"string\">&quot;mike&quot;</span>, <span class=\"string\">&quot;xenia&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">//实现集合排序</span></span><br><span class=\"line\">Collections.sort(names, <span class=\"keyword\">new</span> Comparator&lt;String&gt;() &#123;</span><br><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">compare</span><span class=\"params\">(String a, String b)</span> </span>&#123;</span><br><span class=\"line\"><span class=\"keyword\">return</span> b.compareTo(a);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<h3 id=\"使用Lambda表达式\"><a href=\"#使用Lambda表达式\" class=\"headerlink\" title=\"使用Lambda表达式\"></a>使用Lambda表达式</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">List&lt;String&gt; names = Arrays.asList(<span class=\"string\">&quot;peter&quot;</span>, <span class=\"string\">&quot;anna&quot;</span>, <span class=\"string\">&quot;mike&quot;</span>, <span class=\"string\">&quot;xenia&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">//通过lambda表达式简化匿名类的编写</span></span><br><span class=\"line\">Collections.sort(names, (a,b) -&gt; b.compareTo(a));</span><br></pre></td></tr></table></figure>\n<h2 id=\"Lambda表达式语法\"><a href=\"#Lambda表达式语法\" class=\"headerlink\" title=\"Lambda表达式语法\"></a>Lambda表达式语法</h2><h3 id=\"Lambda语法格式\"><a href=\"#Lambda语法格式\" class=\"headerlink\" title=\"Lambda语法格式\"></a>Lambda语法格式</h3><p><img src=\"/p/8609/1628129093309-0703436d-3189-4b06-a49a-3dd455c97aa9.png\" class=\"lazyload\" data-srcset=\"/p/8609/1628129093309-0703436d-3189-4b06-a49a-3dd455c97aa9.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"Lambda表达式示例\"><a href=\"#Lambda表达式示例\" class=\"headerlink\" title=\"Lambda表达式示例\"></a>Lambda表达式示例</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//四则运算接口</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">MathOperation</span> </span>&#123;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">operation</span><span class=\"params\">(<span class=\"keyword\">int</span> a, <span class=\"keyword\">int</span> b)</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LambdaSample</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//1.标准使用方式</span></span><br><span class=\"line\">        <span class=\"comment\">//约束条件：Lambda表达式只能实现有且仅有一个抽象方法的接口，java称为&quot;函数式接口&quot;</span></span><br><span class=\"line\">        MathOperation addition = (Integer a,Integer b)-&gt;&#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;加法运算&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> a + b + <span class=\"number\">0f</span>;<span class=\"comment\">//加上0f隐式的将结果转换为浮点型，与接口数据类型对应</span></span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        System.out.println(addition.operation(<span class=\"number\">3</span>,<span class=\"number\">9</span>));</span><br><span class=\"line\">        <span class=\"comment\">//2.Lambda允许参数类型忽略</span></span><br><span class=\"line\">        MathOperation substraction = (a,b)-&gt;&#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;减法运算&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> a-b+<span class=\"number\">0f</span>;</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        <span class=\"comment\">//3.单行实现代码可以省略大括号和return</span></span><br><span class=\"line\">        MathOperation multiplication = (a,b)-&gt;a*b+<span class=\"number\">0f</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//传统方法：新建一个class类，在类中定义运算方法，然后再实例化进行运算</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"函数式编程\"><a href=\"#函数式编程\" class=\"headerlink\" title=\"函数式编程\"></a>函数式编程</h2><h3 id=\"什么是函数式编程\"><a href=\"#什么是函数式编程\" class=\"headerlink\" title=\"什么是函数式编程\"></a>什么是函数式编程</h3><p>◇函数式编程是基于函数式接口并使用lambda表达的编程方式<br>◇函数式编程理念是将代码作为可重用数据代入到程序运行中<br>◇函数式编程强调”你想做什么”,而不是”你想怎么做”  </p>\n<h3 id=\"什么是函数式接口\"><a href=\"#什么是函数式接口\" class=\"headerlink\" title=\"什么是函数式接口\"></a>什么是函数式接口</h3><p>◇函数式接口是有且只有一个抽象方法的接口<br>◇Java中拥有大量函数式接口,如java.lang.Runnable<br>◇JDK8后提供了一系列新的函数式接口,位于java.util.function<br>◇函数式接口的注解@FunctionInterface用来进行抽象方法检查，防止接口中存在多个方法</p>\n<h3 id=\"函数式接口Predicate\"><a href=\"#函数式接口Predicate\" class=\"headerlink\" title=\"函数式接口Predicate\"></a>函数式接口Predicate</h3><p>◇Predicate是新增的函数式接口,位于java.util.function<br>◇Predicate用于测试传入的数据是否满足判断要求<br>◇Predicate接口需要实现test()方法进行逻辑判断  </p>\n<h3 id=\"函数式编程示例\"><a href=\"#函数式编程示例\" class=\"headerlink\" title=\"函数式编程示例\"></a>函数式编程示例</h3><p>◇示例一</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PredicateSample</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        Predicate&lt;Integer&gt; predicate = n-&gt;n&gt;<span class=\"number\">4</span>;</span><br><span class=\"line\">        <span class=\"keyword\">boolean</span> result = predicate.test(<span class=\"number\">5</span>);</span><br><span class=\"line\">        System.out.println(result);</span><br><span class=\"line\">        List&lt;Integer&gt; list = Arrays.asList(<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"number\">6</span>, <span class=\"number\">7</span>, <span class=\"number\">8</span>, <span class=\"number\">9</span>, <span class=\"number\">10</span>);</span><br><span class=\"line\">    <span class=\"comment\">/*   传统方法判断奇数，代码写死，不灵活</span></span><br><span class=\"line\"><span class=\"comment\">         for(Integer num:list)&#123;</span></span><br><span class=\"line\"><span class=\"comment\">            if(num%2==1)&#123;</span></span><br><span class=\"line\"><span class=\"comment\">                System.out.println(num);</span></span><br><span class=\"line\"><span class=\"comment\">            &#125;</span></span><br><span class=\"line\"><span class=\"comment\">        &#125;*/</span></span><br><span class=\"line\">        filter(list,n-&gt;n%<span class=\"number\">2</span>==<span class=\"number\">1</span>);<span class=\"comment\">//判断奇数，直接传参数即可</span></span><br><span class=\"line\">        filter(list,n-&gt;n%<span class=\"number\">2</span>==<span class=\"number\">0</span>);<span class=\"comment\">//判断偶数</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">filter</span><span class=\"params\">(List&lt;Integer&gt; list,Predicate&lt;Integer&gt; predicate)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(Integer num:list)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(predicate.test(num))&#123;</span><br><span class=\"line\">                System.out.print(num + <span class=\"string\">&quot; &quot;</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"函数式编程与面向对象编程比较\"><a href=\"#函数式编程与面向对象编程比较\" class=\"headerlink\" title=\"函数式编程与面向对象编程比较\"></a>函数式编程与面向对象编程比较</h3><p><img src=\"/p/8609/1628129379547-304e9c37-fd96-4baf-9943-4bd9c4eb18d7.png\" class=\"lazyload\" data-srcset=\"/p/8609/1628129379547-304e9c37-fd96-4baf-9943-4bd9c4eb18d7.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h2 id=\"函数式接口\"><a href=\"#函数式接口\" class=\"headerlink\" title=\"函数式接口\"></a>函数式接口</h2><h3 id=\"JDK8常用函数式接口\"><a href=\"#JDK8常用函数式接口\" class=\"headerlink\" title=\"JDK8常用函数式接口\"></a>JDK8常用函数式接口</h3><p><img src=\"/p/8609/1628129449949-b8221a19-cc47-4028-8504-49abae762bf2.png\" class=\"lazyload\" data-srcset=\"/p/8609/1628129449949-b8221a19-cc47-4028-8504-49abae762bf2.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"函数式接口的应用\"><a href=\"#函数式接口的应用\" class=\"headerlink\" title=\"函数式接口的应用\"></a>函数式接口的应用</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//Function函数式接口说明闭包要求输入参数并返回数据</span></span><br><span class=\"line\">Function&lt;String, String&gt; fn = (str) -&gt; str.toUpperCase();</span><br><span class=\"line\">String result = fn.apply(<span class=\"string\">&quot;admin&quot;</span>); <span class=\"comment\">//apply用于执行方法返回结果</span></span><br><span class=\"line\">System.out.println(result);</span><br><span class=\"line\"><span class=\"comment\">//Consumer函数式接口说明闭包只要求输入参数,但不会返回数据</span></span><br><span class=\"line\">Consumer&lt;String&gt; c = arg -&gt; &#123;</span><br><span class=\"line\">System.out.println(arg);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">c.accept(<span class=\"string\">&quot;hello&quot;</span>); <span class=\"comment\">//accept只接受参数,没有任何结果返回</span></span><br></pre></td></tr></table></figure>\n<p>◇利用Function函数式接口生成定长随机字符串</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FunctionSample</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        Function&lt;Integer,String&gt; randomStringFunction = len-&gt;&#123;</span><br><span class=\"line\">            String chars=<span class=\"string\">&quot;abcdefghijklmnopqrstuvwxyz0123456789&quot;</span>;</span><br><span class=\"line\">            StringBuffer stringBuffer = <span class=\"keyword\">new</span> StringBuffer();</span><br><span class=\"line\">            Random random = <span class=\"keyword\">new</span> Random();</span><br><span class=\"line\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;i&lt;len;i++)&#123;</span><br><span class=\"line\">                <span class=\"comment\">//截取某一个字符的位置</span></span><br><span class=\"line\">                <span class=\"keyword\">int</span> position = random.nextInt(chars.length());</span><br><span class=\"line\">                <span class=\"comment\">//charAt方法按照指定位置将字符提取出来</span></span><br><span class=\"line\">                stringBuffer.append(chars.charAt(position));</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> stringBuffer.toString();</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        String randomString = randomStringFunction.apply(<span class=\"number\">5</span>);</span><br><span class=\"line\">        System.out.println(randomString);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"Stream流式处理\"><a href=\"#Stream流式处理\" class=\"headerlink\" title=\"Stream流式处理\"></a>Stream流式处理</h2><p>◇Stream流式处理是建立在Lambda基础上的多数据处理技术<br>◇Stream对集合数据处理进行高度抽象,极大简化代码量<br>◇Stream可对集合进行迭代,去重,筛选,排序,聚合等一系列处理  </p>\n<h3 id=\"Stream示例\"><a href=\"#Stream示例\" class=\"headerlink\" title=\"Stream示例\"></a>Stream示例</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//获取List集合中最大的偶数</span></span><br><span class=\"line\">Optional&lt;Integer&gt; op = Arrays.asList(<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>,<span class=\"number\">5</span>,<span class=\"number\">6</span>).stream()</span><br><span class=\"line\">.filter(x -&gt; x%<span class=\"number\">2</span> == <span class=\"number\">0</span>)<span class=\"comment\">//先进行筛选,得到偶数</span></span><br><span class=\"line\">.sorted((a,b) -&gt; b-a)<span class=\"comment\">//b-a表示降序,a-b表示升序</span></span><br><span class=\"line\">.findFirst();<span class=\"comment\">//取第一个,这里即最大的</span></span><br><span class=\"line\">System.out.println(op.get());</span><br></pre></td></tr></table></figure>\n<h3 id=\"Stream常用方法\"><a href=\"#Stream常用方法\" class=\"headerlink\" title=\"Stream常用方法\"></a>Stream常用方法</h3><p><img src=\"/p/8609/1628129577239-b2769d4b-57df-4c3d-9ddf-edc3c57fabb9.png\" class=\"lazyload\" data-srcset=\"/p/8609/1628129577239-b2769d4b-57df-4c3d-9ddf-edc3c57fabb9.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"Stream操作实例\"><a href=\"#Stream操作实例\" class=\"headerlink\" title=\"Stream操作实例\"></a>Stream操作实例</h3><p>◇Stream流的五种创建方式；最常用的为1,2两种  </p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">StreamGenerator</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//1.基于数组创建</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">generator1</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        String[] arr = &#123;<span class=\"string\">&quot;莉莉&quot;</span>, <span class=\"string\">&quot;安迪&quot;</span>, <span class=\"string\">&quot;明明&quot;</span>, <span class=\"string\">&quot;牛牛&quot;</span>&#125;;</span><br><span class=\"line\">        Stream&lt;String&gt; stream = Stream.of(arr);</span><br><span class=\"line\">        stream.forEach(s-&gt;System.out.println(s));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//2.基于集合创建</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">generator2</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        List&lt;String&gt; list = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\">        list.add(<span class=\"string\">&quot;莉莉&quot;</span>);</span><br><span class=\"line\">        list.add(<span class=\"string\">&quot;安迪&quot;</span>);</span><br><span class=\"line\">        list.add(<span class=\"string\">&quot;马马&quot;</span>);</span><br><span class=\"line\">        list.add(<span class=\"string\">&quot;牛牛&quot;</span>);</span><br><span class=\"line\">        Stream&lt;String&gt; stream = list.stream();</span><br><span class=\"line\">        stream.forEach(s-&gt; System.out.println(s));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//3.利用generate方法创建无限长度流</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">generator3</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//bound限制产生的随机数小于其参数</span></span><br><span class=\"line\">        Stream&lt;Integer&gt; stream = Stream.generate(() -&gt; <span class=\"keyword\">new</span> Random().nextInt(<span class=\"number\">1000</span>));</span><br><span class=\"line\">        <span class=\"comment\">//limit用来限制流的最大长度，不设置则为无限</span></span><br><span class=\"line\">        stream.limit(<span class=\"number\">10</span>).forEach(i-&gt; System.out.println(i));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//4.基于迭代器创建</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">generator4</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//seed：起始的数据；n+1表示每一次循环步长为1</span></span><br><span class=\"line\">        Stream&lt;Integer&gt; stream = Stream.iterate(<span class=\"number\">1</span>, n -&gt; n + <span class=\"number\">1</span>);</span><br><span class=\"line\">        stream.limit(<span class=\"number\">100</span>).forEach(i-&gt; System.out.println(i));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//5.基于字符序列创建</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">generator5</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        String str = <span class=\"string\">&quot;hello你好&quot;</span>;</span><br><span class=\"line\">        IntStream stream = str.chars();</span><br><span class=\"line\">        <span class=\"comment\">//输出为字母的ASCII码或者汉字的Unicode编码;将c强制转换成char类型即可输出原字符</span></span><br><span class=\"line\">        stream.forEach(c -&gt; System.out.println((<span class=\"keyword\">char</span>)c));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>◇Stream流的常用方法</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">StreamMethod</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//1.提取集合中所有偶数并求和</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">case1</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//List的泛型设为String类型,否则编译器默认s为object,而parseInt不支持object类型</span></span><br><span class=\"line\">        List&lt;String&gt; list = Arrays.asList(<span class=\"string\">&quot;1&quot;</span>, <span class=\"string\">&quot;2&quot;</span>, <span class=\"string\">&quot;3&quot;</span>, <span class=\"string\">&quot;4&quot;</span>, <span class=\"string\">&quot;5&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> sum = list.stream() <span class=\"comment\">//获取stream对象</span></span><br><span class=\"line\">            .mapToInt(s-&gt;Integer.parseInt(s)) <span class=\"comment\">//mapToInt将流中的每一个数据转换为整数</span></span><br><span class=\"line\">            .filter(n-&gt;n%<span class=\"number\">2</span>==<span class=\"number\">0</span>)<span class=\"comment\">//对流中数据进行过滤</span></span><br><span class=\"line\">            .sum();<span class=\"comment\">//将所有数据进行求和，数据只能为整数</span></span><br><span class=\"line\">        System.out.println(sum);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//2.所有名字首字母大写</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">case2</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        List&lt;String&gt; list = Arrays.asList(<span class=\"string\">&quot;lily&quot;</span>,<span class=\"string\">&quot;smith&quot;</span>,<span class=\"string\">&quot;jackson&quot;</span>,<span class=\"string\">&quot;bob&quot;</span>);</span><br><span class=\"line\">        List newList = list.stream()</span><br><span class=\"line\">                <span class=\"comment\">/*substring()截取位置为a到b的字符串，</span></span><br><span class=\"line\"><span class=\"comment\">                若只有一个参数，则此参数表示从该位置截取</span></span><br><span class=\"line\"><span class=\"comment\">                到最后*/</span></span><br><span class=\"line\">                .map(s -&gt; s.substring(<span class=\"number\">0</span>, <span class=\"number\">1</span>).toUpperCase()+s.substring(<span class=\"number\">1</span>))</span><br><span class=\"line\">                <span class=\"comment\">//.forEach(s -&gt; System.out.println(s));只能进行打印，没有保存</span></span><br><span class=\"line\">                <span class=\"comment\">//collect对流数据进行收集，生成新的List/Set(Set可以将重复数据自动清除)</span></span><br><span class=\"line\">                .collect(Collectors.toList());<span class=\"comment\">//可以将转换后的结果保存到新的List中</span></span><br><span class=\"line\">        System.out.println(newList);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//3.将所有奇数从大到小进行排序，且不许出现重复</span></span><br><span class=\"line\">    <span class=\"comment\">//Set方法可以清楚重复数据，但没有顺序，排序功能会失效</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">case3</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        List&lt;Integer&gt; list = Arrays.asList(<span class=\"number\">1</span>,<span class=\"number\">60</span>,<span class=\"number\">38</span>,<span class=\"number\">21</span>,<span class=\"number\">51</span>,<span class=\"number\">60</span>,<span class=\"number\">51</span>,<span class=\"number\">73</span>);</span><br><span class=\"line\">        List newList = list.stream().distinct()<span class=\"comment\">//去除重复的流数据</span></span><br><span class=\"line\">                .filter(n-&gt;n%<span class=\"number\">2</span>==<span class=\"number\">1</span>)</span><br><span class=\"line\">                .sorted((a,b)-&gt;b-a)</span><br><span class=\"line\">                .collect(Collectors.toList());</span><br><span class=\"line\">        System.out.println(newList);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"如何通过oracle官网学习Stream流的方法\"><a href=\"#如何通过oracle官网学习Stream流的方法\" class=\"headerlink\" title=\"如何通过oracle官网学习Stream流的方法\"></a>如何通过oracle官网学习Stream流的方法</h3><p>◇<a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html\">官网地址</a>:百度java.util.stream<br>◇查看每一个方法的作用<br>​</p>\n","categories":["Java数据库","框架前置知识"],"tags":["Lambda"]},{"title":"Java反射","url":"/p/7c7c.html","content":"<h2 id=\"课程介绍\"><a href=\"#课程介绍\" class=\"headerlink\" title=\"课程介绍\"></a>课程介绍</h2><p>◇介绍反射及作用<br>◇讲解反射四个核心类<br>◇反射在项目中的应用 </p>\n<h2 id=\"主要知识点\"><a href=\"#主要知识点\" class=\"headerlink\" title=\"主要知识点\"></a>主要知识点</h2><p>◇反射的作用<br>◇Class类<br>◇Constructor构造方法类<br>◇Method方法类<br>◇Field成员变量类  </p>\n<h2 id=\"什么是反射Reflect\"><a href=\"#什么是反射Reflect\" class=\"headerlink\" title=\"什么是反射Reflect\"></a>什么是反射Reflect</h2><p>◇反射(Reflect)是在运行时动态访问类与对象的技术<br>◇反射是JDK1.2版本后的高级特性,隶属于java.lang.reflect<br>◇大多数Java框架都基于反射实现参数配置、动态注入等特性<br>◇反射方法与传统方法对比,传统方法要增加乘法类时需要再写一个if else而反射方法支持动态增加方法的功能</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">    * 传统的创建对象方式</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">case1</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">       Scanner scanner = <span class=\"keyword\">new</span> Scanner(System.in);</span><br><span class=\"line\">       System.out.print(<span class=\"string\">&quot;请输入计算类名:&quot;</span>);</span><br><span class=\"line\">       String op = scanner.next();</span><br><span class=\"line\">       System.out.print(<span class=\"string\">&quot;请输入a:&quot;</span>);</span><br><span class=\"line\">       <span class=\"keyword\">int</span> a = scanner.nextInt();</span><br><span class=\"line\">       System.out.print(<span class=\"string\">&quot;请输入b:&quot;</span>);</span><br><span class=\"line\">       <span class=\"keyword\">int</span> b = scanner.nextInt();</span><br><span class=\"line\">       MathOperation mathOperation = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">       <span class=\"keyword\">if</span>(op.equals(<span class=\"string\">&quot;Addition&quot;</span>))&#123;</span><br><span class=\"line\">           mathOperation = <span class=\"keyword\">new</span> Addition();</span><br><span class=\"line\">       &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(op.equals(<span class=\"string\">&quot;Subtraction&quot;</span>)) &#123;</span><br><span class=\"line\">           mathOperation = <span class=\"keyword\">new</span> Subtraction();</span><br><span class=\"line\">       &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(op.equals(<span class=\"string\">&quot;Multiplication&quot;</span>))&#123;</span><br><span class=\"line\">           mathOperation = <span class=\"keyword\">new</span> Multiplication();</span><br><span class=\"line\">       &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">           System.out.println(<span class=\"string\">&quot;无效的计算类&quot;</span>);</span><br><span class=\"line\">           <span class=\"keyword\">return</span>;</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       <span class=\"keyword\">float</span> result = mathOperation.operate(a, b);</span><br><span class=\"line\">       System.out.println(result);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">    * 利用反射创建对象更加灵活</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">case2</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">       Scanner scanner = <span class=\"keyword\">new</span> Scanner(System.in);</span><br><span class=\"line\">       System.out.print(<span class=\"string\">&quot;请输入计算类名:&quot;</span>);</span><br><span class=\"line\">       String op = scanner.next();</span><br><span class=\"line\">       System.out.print(<span class=\"string\">&quot;请输入a:&quot;</span>);</span><br><span class=\"line\">       <span class=\"keyword\">int</span> a = scanner.nextInt();</span><br><span class=\"line\">       System.out.print(<span class=\"string\">&quot;请输入b:&quot;</span>);</span><br><span class=\"line\">       <span class=\"keyword\">int</span> b = scanner.nextInt();</span><br><span class=\"line\">       MathOperation mathOperation = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">       <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">           mathOperation = </span><br><span class=\"line\">               (MathOperation) Class.forName(<span class=\"string\">&quot;com.lcg.reflect.&quot;</span> + op).newInstance();</span><br><span class=\"line\">       &#125;<span class=\"keyword\">catch</span>(Exception e)&#123;</span><br><span class=\"line\">           System.out.println(<span class=\"string\">&quot;无效的计算类&quot;</span>);</span><br><span class=\"line\">           <span class=\"keyword\">return</span>;</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       <span class=\"keyword\">float</span> result = mathOperation.operate(a, b);</span><br><span class=\"line\">       System.out.println(result);</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"反射的核心类\"><a href=\"#反射的核心类\" class=\"headerlink\" title=\"反射的核心类\"></a>反射的核心类</h2><p>◇Class类<br>◇Constructor构造方法类<br>◇Method方法类<br>◇Field成员变量类 </p>\n<h2 id=\"Class类\"><a href=\"#Class类\" class=\"headerlink\" title=\"Class类\"></a>Class类</h2><p>◇Class是JVM中代表”类和接口”的类<br>◇Class对象具体包含了某个特定类的结构信息<br>◇通过Class对象可获取对应类的构造方法/方法/成员变量  </p>\n<h3 id=\"Class核心方法\"><a href=\"#Class核心方法\" class=\"headerlink\" title=\"Class核心方法\"></a>Class核心方法</h3><p><img src=\"/p/7c7c/1627994260419-a7f327ff-16ef-4c68-82b0-f4bf86f15749.png\" class=\"lazyload\" data-srcset=\"/p/7c7c/1627994260419-a7f327ff-16ef-4c68-82b0-f4bf86f15749.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"利用Class创建对象\"><a href=\"#利用Class创建对象\" class=\"headerlink\" title=\"利用Class创建对象\"></a>利用Class创建对象</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ClassSample</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">//Class.forName()方法将指定的类加载到jvm,并返回对应Class对象(得到员工类对象)</span></span><br><span class=\"line\">            Class employeeClass = Class.forName(<span class=\"string\">&quot;com.imooc.reflect.entity.Employee&quot;</span>);</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;Employee已被加载到jvm&quot;</span>);</span><br><span class=\"line\">            <span class=\"comment\">//newInstance通过默认构造方法创建新的对象(实例化),返回Object对象，需要强制转换</span></span><br><span class=\"line\">            Employee emp = (Employee)employeeClass.newInstance();</span><br><span class=\"line\">            System.out.println(emp);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (ClassNotFoundException e) &#123;</span><br><span class=\"line\">            <span class=\"comment\">//类名与类路径书写错误是抛出&quot;类无法找到&quot;异常</span></span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (IllegalAccessException e) &#123;</span><br><span class=\"line\">            <span class=\"comment\">//非法访问异常,当在作用域外访问对象方法或成员变量时抛出</span></span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InstantiationException e) &#123;</span><br><span class=\"line\">            <span class=\"comment\">//对象无法被实例化,抛出&quot;实例化异常&quot;</span></span><br><span class=\"line\">            e.printStackTrace();<span class=\"comment\">//抽象类(abstract)无法被实例化</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"Constructor构造方法类\"><a href=\"#Constructor构造方法类\" class=\"headerlink\" title=\"Constructor构造方法类\"></a>Constructor构造方法类</h2><p>◇Constructor类是对Java类中的构造方法的抽象<br>◇Contructor对象包含了具体类的某个具体构造方法的声明<br>◇通过Constructor对象调用带参构造方法创建对象  </p>\n<h3 id=\"Constructor类核心方法\"><a href=\"#Constructor类核心方法\" class=\"headerlink\" title=\"Constructor类核心方法\"></a>Constructor类核心方法</h3><p><img src=\"/p/7c7c/1627996525920-b349474c-5ebe-4cda-a6fa-dcf70573d893.png\" class=\"lazyload\" data-srcset=\"/p/7c7c/1627996525920-b349474c-5ebe-4cda-a6fa-dcf70573d893.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"利用Constructor创建对象\"><a href=\"#利用Constructor创建对象\" class=\"headerlink\" title=\"利用Constructor创建对象\"></a>利用Constructor创建对象</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConstructorSample</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">//得到员工类的类对象</span></span><br><span class=\"line\">            Class employeeClass = Class.forName(<span class=\"string\">&quot;com.lcg.reflect.entity.Employee&quot;</span>);</span><br><span class=\"line\">            <span class=\"comment\">//得到Employee类中包含有四个参数的构造方法对象,Class[]类型数组</span></span><br><span class=\"line\">            Constructor constructor = employeeClass.getConstructor(<span class=\"keyword\">new</span> Class[]&#123;</span><br><span class=\"line\">                    Integer.class,String.class,Float.class,String.class</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">            <span class=\"comment\">//通过指定构造方法传入数据,创建对象</span></span><br><span class=\"line\">            Employee employee = (Employee) constructor.newInstance(<span class=\"keyword\">new</span> Object[]&#123;</span><br><span class=\"line\">                    <span class=\"number\">100</span>,<span class=\"string\">&quot;李磊&quot;</span>,<span class=\"number\">3000f</span>,<span class=\"string\">&quot;研发部&quot;</span></span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">            System.out.println(employee);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (ClassNotFoundException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (NoSuchMethodException e) &#123;</span><br><span class=\"line\">            <span class=\"comment\">//没有找到与之对应格式的方法</span></span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (IllegalAccessException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InstantiationException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InvocationTargetException e) &#123;</span><br><span class=\"line\">            <span class=\"comment\">//当被调用的方法的内部抛出了异常而没有被捕获时</span></span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"Method方法类\"><a href=\"#Method方法类\" class=\"headerlink\" title=\"Method方法类\"></a>Method方法类</h2><p>◇Method对象指代某个类中的方法的描述<br>◇Method对象使用classObj.getMethod()方法获取<br>◇通过Method对象调用指定对象的对应方法  </p>\n<h3 id=\"Method类核心方法\"><a href=\"#Method类核心方法\" class=\"headerlink\" title=\"Method类核心方法\"></a>Method类核心方法</h3><p><img src=\"/p/7c7c/1627996618023-85940d99-f781-4daf-8279-76c4a76ff3c6.png\" class=\"lazyload\" data-srcset=\"/p/7c7c/1627996618023-85940d99-f781-4daf-8279-76c4a76ff3c6.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"利用Method执行方法\"><a href=\"#利用Method执行方法\" class=\"headerlink\" title=\"利用Method执行方法\"></a>利用Method执行方法</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 利用Method方法类调用</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MethodSample</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            Class employeeClass = Class.forName(<span class=\"string\">&quot;com.lcg.reflect.entity.Employee&quot;</span>);</span><br><span class=\"line\">            Constructor constructor = employeeClass.getConstructor(<span class=\"keyword\">new</span> Class[]&#123;</span><br><span class=\"line\">                    Integer.class, String.class, Float.class, String.class</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">            <span class=\"comment\">//传入参数时用Object[]对象数组</span></span><br><span class=\"line\">            Employee employee = (Employee) constructor.newInstance(<span class=\"keyword\">new</span> Object[]&#123;</span><br><span class=\"line\">                    <span class=\"number\">100</span>, <span class=\"string\">&quot;李磊&quot;</span>, <span class=\"number\">3000f</span>, <span class=\"string\">&quot;研发部&quot;</span></span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">            Method updateSalaryMethod = employeeClass.getMethod(<span class=\"string\">&quot;updateSalary&quot;</span>, <span class=\"keyword\">new</span> Class[]&#123;</span><br><span class=\"line\">                    Float.class</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">            Employee employee1 = (Employee) updateSalaryMethod.invoke(employee, <span class=\"keyword\">new</span> Object[]&#123;<span class=\"number\">1000f</span>&#125;);</span><br><span class=\"line\">            System.out.println(employee1);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (ClassNotFoundException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (NoSuchMethodException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (IllegalAccessException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InstantiationException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InvocationTargetException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"Field成员变量类\"><a href=\"#Field成员变量类\" class=\"headerlink\" title=\"Field成员变量类\"></a>Field成员变量类</h2><p>◇Field对应某个具体类中的成员变量的声明<br>◇Field对象使用classObj.getField()方法获取<br>◇通过Field对象可为某对象成员变量赋值/取值  </p>\n<h3 id=\"Field类核心方法\"><a href=\"#Field类核心方法\" class=\"headerlink\" title=\"Field类核心方法\"></a>Field类核心方法</h3><p><img src=\"/p/7c7c/1627996714885-1ad3a503-3276-4d82-aa14-3ed8abf131de.png\" class=\"lazyload\" data-srcset=\"/p/7c7c/1627996714885-1ad3a503-3276-4d82-aa14-3ed8abf131de.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"利用Field赋值与取值\"><a href=\"#利用Field赋值与取值\" class=\"headerlink\" title=\"利用Field赋值与取值\"></a>利用Field赋值与取值</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"><span class=\"comment\">//获取员工姓名Field成员变量对象</span></span><br><span class=\"line\">Field enameField = employeeClass.getField(<span class=\"string\">&quot;ename&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">//成员变量赋值</span></span><br><span class=\"line\">enameField.set(employee,<span class=\"string\">&quot;李雷&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">//成员变量取值，参数为对象名</span></span><br><span class=\"line\">String ename = (String)enameField.get(employee);</span><br></pre></td></tr></table></figure>\n<h2 id=\"getDeclared系列方法\"><a href=\"#getDeclared系列方法\" class=\"headerlink\" title=\"getDeclared系列方法\"></a>getDeclared系列方法</h2><p>◇getDeclaredConstructor(s)|Method(s)|Field(s)获取对应对象(构造方法，方法，成员变量) ,+s表示获取所有(多个)<br>◇getConstructor(s)|Method(s)|Field(s)只能获取public对象<br>◇访问非作用域内构造方法、方法、成员变量,会抛出异常<br>◇public变量.get()直接获取，非public变量先通过类对象获取到get方法再来调用get方法获取</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">Class employeeClass = Class.forName(<span class=\"string\">&quot;com.lcg.reflect.entity.Employee&quot;</span>);</span><br><span class=\"line\">Constructor constructor = employeeClass.getConstructor(<span class=\"keyword\">new</span> Class[]&#123;</span><br><span class=\"line\">    Integer.class, String.class, Float.class, String.class</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">Employee employee = (Employee) constructor.newInstance(<span class=\"keyword\">new</span> Object[]&#123;</span><br><span class=\"line\">    <span class=\"number\">100</span>, <span class=\"string\">&quot;李磊&quot;</span>, <span class=\"number\">3000f</span>, <span class=\"string\">&quot;研发部&quot;</span></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"><span class=\"comment\">//获取当前类所有成员变量</span></span><br><span class=\"line\">Field[] fields = employeeClass.getDeclaredFields();</span><br><span class=\"line\"><span class=\"keyword\">for</span>(Field field : fields)&#123;</span><br><span class=\"line\">    <span class=\"comment\">//System.out.println(field.getName());</span></span><br><span class=\"line\">    <span class=\"comment\">//对成员变量区分对待</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(field.getModifiers() == <span class=\"number\">1</span>)&#123; <span class=\"comment\">//pubilc修饰</span></span><br><span class=\"line\">        Object val = field.get(employee);</span><br><span class=\"line\">        System.out.println(field.getName() + <span class=\"string\">&quot;:&quot;</span> + val);</span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(field.getModifiers() == <span class=\"number\">2</span>)&#123; <span class=\"comment\">//private修饰</span></span><br><span class=\"line\">        <span class=\"comment\">//构造出get方法名,eg: getSalary();</span></span><br><span class=\"line\">        String methodName = <span class=\"string\">&quot;get&quot;</span> + field.getName().substring(<span class=\"number\">0</span>,<span class=\"number\">1</span>).toUpperCase()</span><br><span class=\"line\">            + field.getName().substring(<span class=\"number\">1</span>);</span><br><span class=\"line\">        Method getMethod = employeeClass.getMethod(methodName);<span class=\"comment\">//获取类的get方法;</span></span><br><span class=\"line\">        Object ret = getMethod.invoke(employee);<span class=\"comment\">//执行get方法</span></span><br><span class=\"line\">        System.out.println(field.getName() + <span class=\"string\">&quot;:&quot;</span> + ret);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"反射在项目中的应用\"><a href=\"#反射在项目中的应用\" class=\"headerlink\" title=\"反射在项目中的应用\"></a>反射在项目中的应用</h2><p>◇网站的国际化</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Application</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">say</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        Properties properties = <span class=\"keyword\">new</span> Properties();<span class=\"comment\">//加载指定配置文件</span></span><br><span class=\"line\">        <span class=\"comment\">//获取配置文件路径</span></span><br><span class=\"line\">        String configPath = Application.class.getResource(<span class=\"string\">&quot;/config.properties&quot;</span>).getPath();</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            configPath = <span class=\"keyword\">new</span> URLDecoder().decode(configPath,<span class=\"string\">&quot;UTF-8&quot;</span>);</span><br><span class=\"line\">            properties.load(<span class=\"keyword\">new</span> FileInputStream(configPath));</span><br><span class=\"line\">            <span class=\"comment\">//用 Properties.getProperty来读取配置文件里面的(language属性)的属性值</span></span><br><span class=\"line\">            String language = properties.getProperty(<span class=\"string\">&quot;language&quot;</span>);</span><br><span class=\"line\">            <span class=\"comment\">//利用language告知Class获取哪一个指定类并实例化</span></span><br><span class=\"line\">            I18N i18n = (I18N)Class.forName(language).newInstance();</span><br><span class=\"line\">            System.out.println(i18n.say());</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        Application.say();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n","categories":["Java数据库","框架前置知识"],"tags":["反射"]},{"title":"Linux基础和Java环境搭建","url":"/p/c40f.html","content":"<h2 id=\"内容简介\"><a href=\"#内容简介\" class=\"headerlink\" title=\"内容简介\"></a>内容简介</h2><p>◇Linux基础入门<br><img src=\"/p/c40f/1629881600929-861c5540-c71f-4186-b9f5-ae2f5453bf19.png\" class=\"lazyload\" data-srcset=\"/p/c40f/1629881600929-861c5540-c71f-4186-b9f5-ae2f5453bf19.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>◇Linux进阶应用<br><img src=\"/p/c40f/1629902441633-e553b490-a782-4a8c-bf13-112f3324acb5.png\" class=\"lazyload\" data-srcset=\"/p/c40f/1629902441633-e553b490-a782-4a8c-bf13-112f3324acb5.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>◇Redis应用入门<br><img src=\"/p/c40f/1629902552805-78f40e53-3374-43dc-8d18-b673821de5ad.png\" class=\"lazyload\" data-srcset=\"/p/c40f/1629902552805-78f40e53-3374-43dc-8d18-b673821de5ad.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h2 id=\"主要知识点\"><a href=\"#主要知识点\" class=\"headerlink\" title=\"主要知识点\"></a>主要知识点</h2><p>◇介绍Linux与CentOS      ◇讲解Linux基础命令<br>◇yum应用安装与卸载     ◇CentOS的权限与系统安全<br>◇Linux文本工具与命令   ◇部署OA项目至Linux服务器  </p>\n<h2 id=\"操作系统\"><a href=\"#操作系统\" class=\"headerlink\" title=\"操作系统\"></a>操作系统</h2><h3 id=\"什么是操作系统\"><a href=\"#什么是操作系统\" class=\"headerlink\" title=\"什么是操作系统\"></a>什么是操作系统</h3><p>◇操作系统(Operating System)是应用程序运行的基础支撑环境<br>◇操作系统作用是管理和控制计算机系统的硬件与软件资源<br>◇Intel x86架构上常见的操作系统:Windows、Linux、Unix…  </p>\n<h3 id=\"Linux操作系统\"><a href=\"#Linux操作系统\" class=\"headerlink\" title=\"Linux操作系统\"></a>Linux操作系统</h3><p>◇Linux是开源的基于Intel x86架构的类Unix多用户操作系统<br>◇Linux是目前最主要的服务器端操作系统<br>◇互联网大厂都在使用Linux作为服务器主要操作系统  </p>\n<h3 id=\"Linux为什么受欢迎\"><a href=\"#Linux为什么受欢迎\" class=\"headerlink\" title=\"Linux为什么受欢迎\"></a>Linux为什么受欢迎</h3><p>◇免费使用，自由传播    ◇支持多任务、多用户、多CPU<br>◇高效而灵活                  ◇兼容任意x86架构计算机<br>◇强大易用的系统命令    ◇完整的应用软件生态  </p>\n<h3 id=\"Linux发行版本\"><a href=\"#Linux发行版本\" class=\"headerlink\" title=\"Linux发行版本\"></a>Linux发行版本</h3><p>◇Linux系统内核(kernel)提供了Linux操作系统的核心功能<br>◇不同开发商在内核基础上扩展封装,形成了不同发行版本<br>◇常见发行版：Red Hat Linux、CentOS、Ubuntu、SUSE…  </p>\n<h3 id=\"Linux发行版选择建议\"><a href=\"#Linux发行版选择建议\" class=\"headerlink\" title=\"Linux发行版选择建议\"></a>Linux发行版选择建议</h3><p>◇桌面系统:Ubuntu<br>◇服务器操作系统: CentOS（免费）、Red Hat Linux（收费）<br>◇特定需求: Debian(稳定性)、Fedora(新特性)、麒麟Linux(国产)  </p>\n<h2 id=\"CentOS-社区企业操作系统\"><a href=\"#CentOS-社区企业操作系统\" class=\"headerlink\" title=\"CentOS - 社区企业操作系统\"></a>CentOS - 社区企业操作系统</h2><h3 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h3><p>◇基于Red Hat Enterprice Linux 的开源企业级Linux发行版本<br>◇各版本CentOS都会获得十年的支持,与RHEL保持同步更新<br>◇CentOS采用社区支持,同时修正了RHEL许多BUG   </p>\n<h3 id=\"CentOS版本选择\"><a href=\"#CentOS版本选择\" class=\"headerlink\" title=\"CentOS版本选择\"></a>CentOS版本选择</h3><p>◇CentOS 5/6 : 历史版本,已被淘汰<br>◇CentOS 7 : 主流版本,稳定成熟,大多数服务器的首选版本<br>◇CentOS 8 : 全新版本,基于最新内核,不排除存在漏洞隐患  </p>\n<h2 id=\"安装CentOS-7-7\"><a href=\"#安装CentOS-7-7\" class=\"headerlink\" title=\"安装CentOS 7.7\"></a>安装CentOS 7.7</h2><h3 id=\"CentOS-7-运行要求\"><a href=\"#CentOS-7-运行要求\" class=\"headerlink\" title=\"CentOS 7 运行要求\"></a>CentOS 7 运行要求</h3><p>◇CPU : 1核,建议2核以上<br>◇内存 : 1G,建议2G以上<br>◇硬盘 : 预留20G可用空间  </p>\n<h3 id=\"开启CPU虚拟化\"><a href=\"#开启CPU虚拟化\" class=\"headerlink\" title=\"开启CPU虚拟化\"></a>开启CPU虚拟化</h3><p>◇Ctrl+Alt+Delete打开任务管理器-&gt;性能-&gt;查看右下角虚拟化是否已启用<br>◇若未启动,则应开启CPU虚拟化，由于电脑型号不同，具体方法可百度</p>\n<h3 id=\"安装VMware-Workstation虚拟机\"><a href=\"#安装VMware-Workstation虚拟机\" class=\"headerlink\" title=\"安装VMware Workstation虚拟机\"></a>安装VMware Workstation虚拟机</h3><p>◇<a href=\"https://blog.csdn.net/weixin_36522099/article/details/106959969\">在VMware中搭建CentOS </a> </p>\n<h2 id=\"Linux系统目录\"><a href=\"#Linux系统目录\" class=\"headerlink\" title=\"Linux系统目录\"></a>Linux系统目录</h2><p>Linux倒挂树形目录结构<br><img src=\"/p/c40f/1629975406516-bb1ea1f7-fab0-4da8-8303-a12633159db2.png\" class=\"lazyload\" data-srcset=\"/p/c40f/1629975406516-bb1ea1f7-fab0-4da8-8303-a12633159db2.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>◇”/“是所有目录的顶点,称为”根目录”<br>◇不同目录下的数据可分布在不同磁盘,所有目录按规则组织与命名<br>◇Linux也区分绝对路径与相对路径  </p>\n<h3 id=\"常见系统目录\"><a href=\"#常见系统目录\" class=\"headerlink\" title=\"常见系统目录\"></a>常见系统目录</h3><p><img src=\"/p/c40f/1629975580379-b983d605-acc6-4e15-be66-c7eb638aea3d.png\" class=\"lazyload\" data-srcset=\"/p/c40f/1629975580379-b983d605-acc6-4e15-be66-c7eb638aea3d.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br><img src=\"/p/c40f/1629975605738-db5bbc1c-10c7-45fa-a10f-b3dda57685e7.png\" class=\"lazyload\" data-srcset=\"/p/c40f/1629975605738-db5bbc1c-10c7-45fa-a10f-b3dda57685e7.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h2 id=\"Linux远程管理\"><a href=\"#Linux远程管理\" class=\"headerlink\" title=\"Linux远程管理\"></a>Linux远程管理</h2><h3 id=\"SSH客户端\"><a href=\"#SSH客户端\" class=\"headerlink\" title=\"SSH客户端\"></a>SSH客户端</h3><p> ◇SSH是专为远程登录和其他网络服务提供的安全性协议<br>◇SSH分为两个不兼容版本1.x与2.x,默认通过SSH2.x连接<br>◇基于SSH远程连接工具有很多,最常见的是Xshell与SecureCRT </p>\n<h3 id=\"Xshell与Xftp\"><a href=\"#Xshell与Xftp\" class=\"headerlink\" title=\"Xshell与Xftp\"></a>Xshell与Xftp</h3><p>◇Xshell是著名的Linux客户端,常用于在Windows下远程访问<br>◇Xshell同时还支持Telent、RLogin、Serial等其他连接方式<br>◇Xftp是Xshell配套组件，用于向服务器上传/下载文件  </p>\n<h3 id=\"Xshell与Xftp安装与配置\"><a href=\"#Xshell与Xftp安装与配置\" class=\"headerlink\" title=\"Xshell与Xftp安装与配置\"></a>Xshell与Xftp安装与配置</h3><p>◇在官方网站安装个人版<br>◇在虚拟机终端输入ifconfig查看虚拟机的ip地址<br>◇新建xshell会话，连接后输入用户名和密码即可<br><img src=\"/p/c40f/1629978963671-fd31e45c-c4c0-4fc0-b4eb-a66bd9787a1c.png\" class=\"lazyload\" data-srcset=\"/p/c40f/1629978963671-fd31e45c-c4c0-4fc0-b4eb-a66bd9787a1c.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\" style=\"zoom: 67%;\"><br>◇在Xshell顶部绿色的新建文件传输打开，可以进行文件的传输<br><img src=\"/p/c40f/1629979354707-b035a667-88ab-4732-b0de-37ad49bfbcb7.png\" class=\"lazyload\" data-srcset=\"/p/c40f/1629979354707-b035a667-88ab-4732-b0de-37ad49bfbcb7.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h2 id=\"Linux文件操作命令\"><a href=\"#Linux文件操作命令\" class=\"headerlink\" title=\"Linux文件操作命令\"></a>Linux文件操作命令</h2><h3 id=\"Linux命令格式\"><a href=\"#Linux命令格式\" class=\"headerlink\" title=\"Linux命令格式\"></a>Linux命令格式</h3><p>◇命令 [参数选项] [文件或路径] </p>\n<h3 id=\"Linux文件操作核心命令\"><a href=\"#Linux文件操作核心命令\" class=\"headerlink\" title=\"Linux文件操作核心命令\"></a>Linux文件操作核心命令</h3><p><img src=\"/p/c40f/1629979553331-35a0fe9d-22c7-4753-a083-a1a9916b591d.png\" class=\"lazyload\" data-srcset=\"/p/c40f/1629979553331-35a0fe9d-22c7-4753-a083-a1a9916b591d.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>◇clear     清屏   ◇rmdir 删除空目录<br>◇cd时输入某个路径的前一个字母后可以按Tab进行自动补全<br>◇命令 –help可以查看命令的参数等相关信息<br>◇mv 重命名格式：mv old.c  new.c ;移动格式：mv old.c /xx/xx 也可以移动整个文件夹<br>◇不要轻易使用rm -rf，这样会强制迭代删除而不进行询问，rm -r迭代删除进行询问</p>\n<h3 id=\"vim文本编辑器\"><a href=\"#vim文本编辑器\" class=\"headerlink\" title=\"vim文本编辑器\"></a>vim文本编辑器</h3><p>◇vi是Linux重要的文字编辑工具,vim是它的增强版<br>◇vim用于在远程环境下用命令形式对文本进行在线编辑<br>◇用法格式: vim [选项] [文件] </p>\n<h3 id=\"vim三种模式\"><a href=\"#vim三种模式\" class=\"headerlink\" title=\"vim三种模式\"></a>vim三种模式</h3><p>◇普通模式:默认模式,文本只读,不可编辑<br>◇编辑模式:编辑文本模式,普通模式按i键进入,Esc键退出<br>◇命令模式:执行保存、搜索、退出等操作</p>\n<h3 id=\"vim重要快捷键\"><a href=\"#vim重要快捷键\" class=\"headerlink\" title=\"vim重要快捷键\"></a>vim重要快捷键</h3><p><img src=\"/p/c40f/1629980002766-5c22ebbf-1dc8-4840-9a9b-44410e4e2520.png\" class=\"lazyload\" data-srcset=\"/p/c40f/1629980002766-5c22ebbf-1dc8-4840-9a9b-44410e4e2520.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h2 id=\"Linux文本工具\"><a href=\"#Linux文本工具\" class=\"headerlink\" title=\"Linux文本工具\"></a>Linux文本工具</h2><h3 id=\"常用文本工具\"><a href=\"#常用文本工具\" class=\"headerlink\" title=\"常用文本工具\"></a>常用文本工具</h3><p><img src=\"/p/c40f/1630068704114-ec0a4e45-4072-42bc-8618-ee730f5ffd2e.png\" class=\"lazyload\" data-srcset=\"/p/c40f/1630068704114-ec0a4e45-4072-42bc-8618-ee730f5ffd2e.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"文件输入与输出\"><a href=\"#文件输入与输出\" class=\"headerlink\" title=\"文件输入与输出\"></a>文件输入与输出</h3><p>◇文件输入：&lt; (重写) 或者 &lt;&lt; (追加)          ◇文件输出：&gt; (重写) 或者 &gt;&gt; (追加)<br>◇echo “xxxx” &gt;&gt; log.txt 将xxxx文本追加写入到log.txt文件中<br>◇合并文件：cat hello.txt myname.txt &gt;&gt; full.txt<br>◇tail full.txt –显示文件尾部内容;   tail -n 2 full.txt –显示文件最后两行<br>◇tail -f full.txt –动态监测文件末尾所产生的新行; ctrl+c退出<br>◇grep lcg test.txt –查找test.txt文件中包含lcg字符串的文本行,字符串可以是正则表达式<br>◇grep -v lcg test.txt –查找test.txt文件中不包含lcg字符串的文本行<br>◇ll | grep -E “log[0-9]{1,5}.txt” –进行文件的筛选，查看所有日志文件 -E表示使用扩展正则表达式；{1,5}表示数字位数为1~5；</p>\n<h2 id=\"文件打包与压缩\"><a href=\"#文件打包与压缩\" class=\"headerlink\" title=\"文件打包与压缩\"></a>文件打包与压缩</h2><h3 id=\"Linux压缩程序-gzip\"><a href=\"#Linux压缩程序-gzip\" class=\"headerlink\" title=\"Linux压缩程序-gzip\"></a>Linux压缩程序-gzip</h3><p>◇gzip是Linux系统的文件压缩程序<br>◇gzip压缩包文件扩展名.gz<br>◇大流量的网站默认都在使用gzip进行数据压缩传输   </p>\n<h3 id=\"tar打包与压缩\"><a href=\"#tar打包与压缩\" class=\"headerlink\" title=\"tar打包与压缩\"></a>tar打包与压缩</h3><p>◇tar是Linux系统将多个文件打包和压缩的工具<br>◇tar本质是打包软件，扩展名.tar<br>◇tar可结合gzip或其他压缩工具实现打包压缩，扩展名.tar.gz<br>◇压缩命令: tar zcvf tomcat.tar.gz /usr/local/tomcat<br>◇解压缩命令: tar zxvf tomcat.tar.gz -C /usr/local/tomcat   </p>\n<h3 id=\"tar常用可选项\"><a href=\"#tar常用可选项\" class=\"headerlink\" title=\"tar常用可选项\"></a>tar常用可选项</h3><img src=\"/p/c40f/1630068871801-23d4fefb-c44f-409e-bb11-51dd710ab2f9.png\" class=\"lazyload\" data-srcset=\"/p/c40f/1630068871801-23d4fefb-c44f-409e-bb11-51dd710ab2f9.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\">\n\n<h2 id=\"安装与卸载应用程序\"><a href=\"#安装与卸载应用程序\" class=\"headerlink\" title=\"安装与卸载应用程序\"></a>安装与卸载应用程序</h2><h3 id=\"为CentOS安装应用程序\"><a href=\"#为CentOS安装应用程序\" class=\"headerlink\" title=\"为CentOS安装应用程序\"></a>为CentOS安装应用程序</h3><p>◇在CentOS中安装第三方应用程序包含两种方式:<br>◇rpm:Red Hat软件包管理器,相当于应用程序安装文件的执行者<br>◇编译安装:用户自己从网站下载程序源码进行编译安装 </p>\n<h3 id=\"yum与rpm的关系\"><a href=\"#yum与rpm的关系\" class=\"headerlink\" title=\"yum与rpm的关系\"></a>yum与rpm的关系</h3><p>◇rpm安装过程中,需要用户自己解决依赖问题<br>◇yum通过引入软件仓库,联网下载rpm包及依赖,并依次自动安装<br>◇yum是rpm的前端程序,其目的就是简化rpm的安装过程</p>\n<h3 id=\"yum常用命令\"><a href=\"#yum常用命令\" class=\"headerlink\" title=\"yum常用命令\"></a>yum常用命令</h3><p>◇yum search 应用名 #在仓库中查询是否存在指定应用<br>◇yum install -y 应用名 #全自动下载安装应用及其依赖<br>◇yum info 应用名 #查看软件详细信息<br>◇yum list installed 应用名 #查看已安装的应用程序<br>◇rpm -ql 应用名 #查看安装后输出的文件清单<br>◇yum remove -y 应用名 #全自动卸载指定应用  ，-y表示遇到询问都用y</p>\n<h2 id=\"编译方式安装\"><a href=\"#编译方式安装\" class=\"headerlink\" title=\"编译方式安装\"></a>编译方式安装</h2><h3 id=\"编译方式安装应用程序\"><a href=\"#编译方式安装应用程序\" class=\"headerlink\" title=\"编译方式安装应用程序\"></a>编译方式安装应用程序</h3><p>◇如yum仓库未提供rpm,往往需要采用编译安装方式<br>◇编译安装是指从应用官网下载源码后,对源码进行编译后使用<br>◇编译命令: make #使用对应编译器对源码编译生成可执行文件  </p>\n<h3 id=\"yum与编译安装比较\"><a href=\"#yum与编译安装比较\" class=\"headerlink\" title=\"yum与编译安装比较\"></a>yum与编译安装比较</h3><p><img src=\"/p/c40f/1630070373099-9af554f6-920f-4c76-9782-70dc5c1dc783.png\" class=\"lazyload\" data-srcset=\"/p/c40f/1630070373099-9af554f6-920f-4c76-9782-70dc5c1dc783.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"编译安装Redis\"><a href=\"#编译安装Redis\" class=\"headerlink\" title=\"编译安装Redis\"></a>编译安装Redis</h3><p>◇利用xftp将下载好的压缩包文件上传到linux；然后解压；进入redis-4.0.14目录；安装gcc编译器：yum install -y gcc;<br>◇有时候第一次make编译出错后，可能改变了原来的文件结构，因此纠正错误后下一次编译时需要将解压后的目录删除重新解压；当出现Hint: It’s a good idea to run ‘make test’ ;)时代表编译成功；<br>◇编译安装后的应用程序redis-server存放在src中，在启动redis-server前需要加载上一级目录下的redis.conf配置文件;即启动命令为:./src/redis-server redis.conf  启动后ctrl+c退回命令状态</p>\n<h2 id=\"Linux进阶应用\"><a href=\"#Linux进阶应用\" class=\"headerlink\" title=\"Linux进阶应用\"></a>Linux进阶应用</h2><h3 id=\"Linux系统管理命令\"><a href=\"#Linux系统管理命令\" class=\"headerlink\" title=\"Linux系统管理命令\"></a>Linux系统管理命令</h3><p>◇使用ifconfig查看网卡ip<br><img src=\"/p/c40f/1630146548264-3229c8fc-d16f-4ace-9c4b-4d140a726bc0.png\" class=\"lazyload\" data-srcset=\"/p/c40f/1630146548264-3229c8fc-d16f-4ace-9c4b-4d140a726bc0.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>◇netstat 查看网络端口号：netstat -tulpn 或 netstat -ano<br>◇Recv-Q:接收队列；Send-Q:发送队列; LISTEN表示网络状态正在被监听;PID:进程编号；Program name创建网络连接的应用<br><img src=\"/p/c40f/1630146738224-1f08c511-0871-4f93-8fdc-1b45678b64a5.png\" class=\"lazyload\" data-srcset=\"/p/c40f/1630146738224-1f08c511-0871-4f93-8fdc-1b45678b64a5.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>◇netstat 常用选项<br><img src=\"/p/c40f/1630146946866-e7e838d8-a463-417b-9b9c-0603f83dfba4.png\" class=\"lazyload\" data-srcset=\"/p/c40f/1630146946866-e7e838d8-a463-417b-9b9c-0603f83dfba4.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>◇查看进程: ps -ef ，箭头处5412指PID；杀掉进程：kill -9 PID<br>◇一般使用应用程序退出来关闭进程，而不是强制杀掉进程，因为可能造成数据丢失<br>◇ps -ef | grep vim ; | 表示通道，即ps -ef查询产生的数据像通过通道一样送入到后一个指令<br><img src=\"/p/c40f/1630147070833-32dca895-ace6-45ad-a972-0cb3f0471b45.png\" class=\"lazyload\" data-srcset=\"/p/c40f/1630147070833-32dca895-ace6-45ad-a972-0cb3f0471b45.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h2 id=\"应用服务化\"><a href=\"#应用服务化\" class=\"headerlink\" title=\"应用服务化\"></a>应用服务化</h2><h3 id=\"简介-1\"><a href=\"#简介-1\" class=\"headerlink\" title=\"简介\"></a>简介</h3><p>◇ 应用服务化是指让应用程序以服务方式在系统后台运行<br>◇ Linux系统对服务化应用进行统一管理<br>◇ 服务管理命令：systemctl    </p>\n<h3 id=\"systemctl\"><a href=\"#systemctl\" class=\"headerlink\" title=\"systemctl\"></a>systemctl</h3><p><img src=\"/p/c40f/1630147494122-9ac16bd2-3b54-497a-be4c-2ef65b16ca12.png\" class=\"lazyload\" data-srcset=\"/p/c40f/1630147494122-9ac16bd2-3b54-497a-be4c-2ef65b16ca12.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>◇.pid文件用来保存进程编号<br>◇将redis服务化，需要在/usr/lib/systemd/system目录下创建 vim redis.service；在文件中写入配置：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=Redis</span><br><span class=\"line\">After=syslog.target network.target remote-fs.target nss-lookup.target #表示在这些服务启动以后才能启动redis</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">Type=forking #forking代表后台运行</span><br><span class=\"line\">PIDFile=/run/redis_6379.pid</span><br><span class=\"line\">#说明启动时执行server，加载配置文件</span><br><span class=\"line\">ExecStart=/home/lcg/0/redis-4.0.14/src/redis-server /home/lcg/0/redis-4.0.14/redis.conf</span><br><span class=\"line\">#关闭,-s采用正常流程进行退出；-9表示强制退出</span><br><span class=\"line\">ExecStop=/bin/kill -s QUIT $MAINPID</span><br><span class=\"line\">PrivateTmp=True #为每一个服务设置私有的Tmp临时文件目录</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target #将当前的redis服务分配到multi-user服务组上；</span><br></pre></td></tr></table></figure>\n<p>◇systemctl daemon-reload #对所有service进行重载;<br>◇systemctl start redis #启动服务； systemctl status redis #查看状态</p>\n<h2 id=\"Linux用户与权限\"><a href=\"#Linux用户与权限\" class=\"headerlink\" title=\"Linux用户与权限\"></a>Linux用户与权限</h2><h3 id=\"用户\"><a href=\"#用户\" class=\"headerlink\" title=\"用户\"></a>用户</h3><p>◇ Linux是多用户多任务系统,包含两个概念:用户与用户组<br>◇ 用户与账户是同一概念,用于登录系统与区分资源权限<br>◇ 用户让系统变的更安全,同时也保护了用户的个人数字资产</p>\n<h3 id=\"用户组\"><a href=\"#用户组\" class=\"headerlink\" title=\"用户组\"></a>用户组</h3><p>◇ 用户组就是将用户分组,隶属用户自动拥有组权限<br>◇ 一个用户可隶属于多个组,用户可任意切换当前组<br>◇ 用户组的出现让用户权限管理变更轻松 </p>\n<h3 id=\"用户与用户组常用命令\"><a href=\"#用户与用户组常用命令\" class=\"headerlink\" title=\"用户与用户组常用命令\"></a>用户与用户组常用命令</h3><p><img src=\"/p/c40f/1630152748335-c52d7d9a-f0cc-4e31-a1ef-204bfebbaead.png\" class=\"lazyload\" data-srcset=\"/p/c40f/1630152748335-c52d7d9a-f0cc-4e31-a1ef-204bfebbaead.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>◇分组：usermod -g [组名] [用户名]<br>◇让用户拥有多个组： usermod -G [组名1],[组名2] [用户名];通过newgrp进行切换<br>◇将用户连接系统: 打开-&gt;创建系统副本：然后用新建的用户密码登录<br>◇groups #查看用户隶属于哪个组<br>◇chown用法：chown [用户名]:[组名] [文件名]</p>\n<h2 id=\"项目内部文件权限管理实践\"><a href=\"#项目内部文件权限管理实践\" class=\"headerlink\" title=\"项目内部文件权限管理实践\"></a>项目内部文件权限管理实践</h2><h3 id=\"文件权限代码表\"><a href=\"#文件权限代码表\" class=\"headerlink\" title=\"文件权限代码表\"></a>文件权限代码表</h3><p><img src=\"/p/c40f/1630153162614-19019fff-aa2c-483e-83e3-46715e47ab51.png\" class=\"lazyload\" data-srcset=\"/p/c40f/1630153162614-19019fff-aa2c-483e-83e3-46715e47ab51.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>◇每个颜色表示一组，共三组；eg:drwxr-xr-x; 其中-代表没有对应属性，此处即没有w(完整的一组是rwx)<br>◇在目录上r-x不允许写是指不准修改目录名</p>\n<h3 id=\"chmod命令\"><a href=\"#chmod命令\" class=\"headerlink\" title=\"chmod命令\"></a>chmod命令</h3><p>◇ chmod 750: 组用户可读写，其他用户不允许访问<br>◇ chmod 777: 所有用户拥有完整权限<br>◇ chmod 700: 只有属主拥有完整权限<br>◇chmod  750 dev-document/(文件名/) #示例操作，</p>\n<h3 id=\"sudo超级管理员命令\"><a href=\"#sudo超级管理员命令\" class=\"headerlink\" title=\"sudo超级管理员命令\"></a>sudo超级管理员命令</h3><p>◇ sudo可以让普通用户拥有超级管理员的执行权限<br>◇ 普通用户要进行经过超级管理员授权才能使用<br>◇ 授权命令：visudo<br>◇普通模式下输入：100gg 快速定位到100行,无法再屏幕上看到命令；在此处的root ALL-(ALL) ALL下增加一行：<br>[用户名] ALL-(ALL) ALL 即可授权用户拥有sudo命令；第一个ALL代表用户可以从任意计算机进行连接；第二个ALL表示切换用户，最后一个ALL代表运行执行所有命令；<br>◇:wq保存文件后，使用命令visudo -c进行文件的格式检查;</p>\n<h2 id=\"CentOS7防火墙firewall\"><a href=\"#CentOS7防火墙firewall\" class=\"headerlink\" title=\"CentOS7防火墙firewall\"></a>CentOS7防火墙firewall</h2><h3 id=\"什么是防火墙\"><a href=\"#什么是防火墙\" class=\"headerlink\" title=\"什么是防火墙\"></a>什么是防火墙</h3><p>◇ 防火墙是借助硬件和软件对内外部网络环境的保护措施<br>◇ CentOS 7基于firewall实现应用层防火墙,CentOS6基于iptables<br>◇ firewall-cmd是firewall的核心命令 </p>\n<h3 id=\"firwall-cmd\"><a href=\"#firwall-cmd\" class=\"headerlink\" title=\"firwall-cmd\"></a>firwall-cmd</h3><p>◇ systemctl start|restart firewalld #启动防火墙<br>◇ firewall-cmd –state | –reload #查看状态,重载防火墙<br>◇ firewall-cmd –zone=public –permanent –add-port=8502/tcp  </p>\n<h3 id=\"对外开放Tomcat\"><a href=\"#对外开放Tomcat\" class=\"headerlink\" title=\"对外开放Tomcat\"></a>对外开放Tomcat</h3><p>◇解压apache-tomcat-9.0.34.tar.gz；进入apache-tomcat-9.0.34/bin目录启动startup.sh文件：./startup.sh<br>◇增加放行端口：firewall-cmd –zone=public –permanent –add-port=8080/tcp #zone代表区域；permanent表示永久更改；将add改成remove即可去除端口;8000-9000可以用来进行端口范围的设置<br>◇将防火墙进行重载</p>\n<h2 id=\"Bash-Shell\"><a href=\"#Bash-Shell\" class=\"headerlink\" title=\"Bash Shell\"></a>Bash Shell</h2><h3 id=\"什么是Shell\"><a href=\"#什么是Shell\" class=\"headerlink\" title=\"什么是Shell\"></a>什么是Shell</h3><p>u Shell是一个用c语言编写的脚本解释器,是用户通过代码操作 Linux的桥梁<br>u Shell脚本描述要执行的任务,完成系列复杂操作,文件通常以.sh后缀<br>u Shell脚本通过Shell解释器执行,按解释器分类分为多种类型  </p>\n<h3 id=\"Linux-Shell-分类\"><a href=\"#Linux-Shell-分类\" class=\"headerlink\" title=\"Linux Shell 分类\"></a>Linux Shell 分类</h3><p><img src=\"/p/c40f/1630222283043-b5cd5a06-bbf9-4590-96b0-7028756802c4.png\" class=\"lazyload\" data-srcset=\"/p/c40f/1630222283043-b5cd5a06-bbf9-4590-96b0-7028756802c4.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"一键发布Tomcat应用程序\"><a href=\"#一键发布Tomcat应用程序\" class=\"headerlink\" title=\"一键发布Tomcat应用程序\"></a>一键发布Tomcat应用程序</h3><p>◇vim deploy_tomcat.sh创建脚本</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">echo &quot;准备下载Tomcat9&quot;</span><br><span class=\"line\">wget https://mirrors.tuna.tsinghua.edu.cn/apache/tomcat/tomcat-9/v9.0.52/bin/apache-tomcat-9.0.52.tar.gz</span><br><span class=\"line\">echo &quot;正在解压Tomcat9&quot;</span><br><span class=\"line\">tar zxf apache-tomcat-9.0.52.tar.gz</span><br><span class=\"line\">echo &quot;防火墙开放8080端口&quot;</span><br><span class=\"line\">firewall-cmd --zone=public --permanent --add-port=8080/tcp</span><br><span class=\"line\">firewall-cmd --reload</span><br><span class=\"line\">echo &quot;启动Tomact&quot;</span><br><span class=\"line\">cd ./apache-tomcat-9.0.52/bin</span><br><span class=\"line\">./startup.sh</span><br></pre></td></tr></table></figure>\n<p>◇启动脚本文件：/bin/bash deploy_tomcat.sh;或./deploy.tomcat.sh</p>\n<h2 id=\"部署OA项目\"><a href=\"#部署OA项目\" class=\"headerlink\" title=\"部署OA项目\"></a>部署OA项目</h2><h3 id=\"部署架构\"><a href=\"#部署架构\" class=\"headerlink\" title=\"部署架构\"></a>部署架构</h3><p><img src=\"/p/c40f/1630243029737-67057a7c-0650-4d8c-b630-bd8eab42b589.png\" class=\"lazyload\" data-srcset=\"/p/c40f/1630243029737-67057a7c-0650-4d8c-b630-bd8eab42b589.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>◇创建两个虚拟机CentosDB,CentosWEB，均最小化安装(不要图形界面);然后在界面输入: yum install -y net-tools.x86_64 #安装ifconfig等命令;<br>◇使用Xshell进行远程连接；</p>\n<h3 id=\"Centos安装MySQL8\"><a href=\"#Centos安装MySQL8\" class=\"headerlink\" title=\"Centos安装MySQL8\"></a>Centos安装MySQL8</h3><p>◇yum search mysql-community #查看是否安装了mysql社区版<br>◇mkdir mysql #在/usr/local目录下新建目录存放mysql<br>◇wget <a href=\"https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm\">https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm</a> #获取下载<br>◇yum install -y wget #安装wget 命令<br>◇yum localinstall -y mysql80-community-release-el7-3.noarch.rpm #从本地安装rpm文件<br>◇以上只是安装了mysql的安装源，还没有完成mysql的安装；<br>◇yum install -y mysql-community-server #进行安装   ctrl+c可以停止安装<br>◇cd /var/cache/yum/x86_64/7/mysql80-community/packages/ #进入yum下载的缓存路径<br>◇进入官网找到Mysql Red Hat Enterprise Linux/ Oracle Linux；选择系统版本Linux 7 X86_64； 下载RPM Bundle；然后将这一组rpm文件传到缓存路径中；此时重新执行yum install -y mysql-community-server命令；以此可解决跨国服务器下载缓慢问题；<br>◇systemctl start mysqld #启动服务  systemctl status mysqld #查看服务状态<br>◇systemctl enable mysqld #设置为开机启动</p>\n<h3 id=\"初始化MySQL8\"><a href=\"#初始化MySQL8\" class=\"headerlink\" title=\"初始化MySQL8\"></a>初始化MySQL8</h3><p>◇vi  /var/log/mysqld.log #进入mysql日志 在第3~4行可以看到自动生成的密码<br>◇mysql -uroot -p #输入密码进行登录<br>◇alter user ‘root‘@’localhost’ identified with mysql_native_password by ‘newpassword’(需要包含字母大小写以及数字，特殊符号，长度大于8位) 回车加上’;’ 即可修改，with mysql_native_password做与navicat的兼容考虑；<br>◇默认的root用户只能从本机登录；use mysql #使用数据库； select host,user from user;#查询主机和用户<br>◇update user set host=’%’ where user=’root’;#将root用户的host改为%,即任意设备都可以使用root用户连接mysql服务器; flush privileges #使刚才修改的权限立即生效<br>◇exit #退出mysql<br>◇放行3306端口并重载，使之能够远程访问mysql；<br>◇打开Navicat，新建连接：主机即虚拟机的IP地址；</p>\n<h3 id=\"部署配置Web应用服务\"><a href=\"#部署配置Web应用服务\" class=\"headerlink\" title=\"部署配置Web应用服务\"></a>部署配置Web应用服务</h3><p>◇yum search jdk #查看仓库中包含哪些版本的jdk;openjdk表示开源jdk<br>◇yum install -y java-1.8.0-openjdk #安装jdk<br>◇java -version #查看<br>◇安装Tomcat;<br>◇将oa项目的war包传到虚拟机中，解压；<br>◇将解压后的oa目录移动：mv lcg_oa ./apache-tomcat-9.0.34/webapps/<br>◇进入webapps目录，vim ./lcg_oa/WEB-INF/classes/mybatis-config.xml(yum install vim-common#安装vim基础包，yum install vim-enhanced#安装增强包)<br>◇/root全文查找，在连接字符串的地方进行调整；将localhost改为mysql服务器的IP地址，密码改为相应的密码<br>◇回到上一层目录进行Tomcat的配置: vim ./conf/server.xml -&gt;搜索/8080-&gt;将端口改为80-&gt;按pagedown跳到最后<br>-&gt;在Host标签上增加<Context path=\"/\" docbase=\"lcg_oa\">#将oa这个web应用映射的上下文路径指向根路径-&gt;:wq保存<br>◇启动tomcat：./bin/startup.sh<br>◇放行80端口，并重载<br>◇在虚拟机DB中，屏蔽掉任意主机都能访问的3306端口；重载；<br>◇firewall-cmd –permanent –zone=public –add-rich-rule=”rule family=”ipv4” source address=”web服务器的IP地址” port protocol=”tcp” port=”3306” accept” #-rich-rule利用规则放行端口，这样就能放行指定主机指定端口的访问;</Context></p>\n","categories":["Java数据库","Linux与Redis基础"],"tags":["Linux"]},{"title":"MyBaits入门","url":"/p/f37d.html","content":"<h2 id=\"MyBatis课程介绍\"><a href=\"#MyBatis课程介绍\" class=\"headerlink\" title=\"MyBatis课程介绍\"></a>MyBatis课程介绍</h2><h3 id=\"MyBatis入门使用\"><a href=\"#MyBatis入门使用\" class=\"headerlink\" title=\"MyBatis入门使用\"></a>MyBatis入门使用</h3><p><img src=\"/p/f37d/1628238899331-11e1e3ae-ea4c-48e1-b933-0cece45283b9.png\" class=\"lazyload\" data-srcset=\"/p/f37d/1628238899331-11e1e3ae-ea4c-48e1-b933-0cece45283b9.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"MyBatis高级特性\"><a href=\"#MyBatis高级特性\" class=\"headerlink\" title=\"MyBatis高级特性\"></a>MyBatis高级特性</h3><p><img src=\"/p/f37d/1628239064225-a53dd20e-0d65-4c5e-acc9-0dc429a8d32e.png\" class=\"lazyload\" data-srcset=\"/p/f37d/1628239064225-a53dd20e-0d65-4c5e-acc9-0dc429a8d32e.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h2 id=\"认识框架-Framework\"><a href=\"#认识框架-Framework\" class=\"headerlink\" title=\"认识框架-Framework\"></a>认识框架-Framework</h2><h3 id=\"生活中的框架\"><a href=\"#生活中的框架\" class=\"headerlink\" title=\"生活中的框架\"></a>生活中的框架</h3><p><img src=\"/p/f37d/1628239313228-062756fe-2b58-4e3b-902e-c73bf87d0331.png\" class=\"lazyload\" data-srcset=\"/p/f37d/1628239313228-062756fe-2b58-4e3b-902e-c73bf87d0331.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br><img src=\"/p/f37d/1628239334642-ca21d0cd-4c30-4653-8811-2537f6edd963.png\" class=\"lazyload\" data-srcset=\"/p/f37d/1628239334642-ca21d0cd-4c30-4653-8811-2537f6edd963.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"软件开发中框架\"><a href=\"#软件开发中框架\" class=\"headerlink\" title=\"软件开发中框架\"></a>软件开发中框架</h3><p>◇框架是可被应用开发者定制的应用骨架<br>◇框架是一种规则,保证开发者遵循相同的方式开发程序<br>◇框架提倡”不要重复造轮子”,对基础功能进行封装  </p>\n<h3 id=\"框架的优点\"><a href=\"#框架的优点\" class=\"headerlink\" title=\"框架的优点\"></a>框架的优点</h3><p>◇极大提高了开发效率<br>◇统一的编码规则,利于团队管理<br>◇灵活配置的应用,拥有更好的维护性  </p>\n<h3 id=\"SSM开发框架\"><a href=\"#SSM开发框架\" class=\"headerlink\" title=\"SSM开发框架\"></a>SSM开发框架</h3><p><img src=\"/p/f37d/1628239469486-ecff36a6-0968-4804-8f26-63c745ed2252.png\" class=\"lazyload\" data-srcset=\"/p/f37d/1628239469486-ecff36a6-0968-4804-8f26-63c745ed2252.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h2 id=\"介绍MyBatis\"><a href=\"#介绍MyBatis\" class=\"headerlink\" title=\"介绍MyBatis\"></a>介绍MyBatis</h2><h3 id=\"什么是MyBatis\"><a href=\"#什么是MyBatis\" class=\"headerlink\" title=\"什么是MyBatis\"></a>什么是MyBatis</h3><p>◇MyBatis是优秀的持久层框架<br>◇MyBatis使用XML将SQL与程序解耦,便于维护<br>◇MyBatis学习简单,执行高效,是JDBC的延伸 </p>\n<h3 id=\"MyBatis开发流程\"><a href=\"#MyBatis开发流程\" class=\"headerlink\" title=\"MyBatis开发流程\"></a>MyBatis开发流程</h3><p>◇引入MyBatis依赖                          ◇创建核心配置文件<br>◇创建实体(Entity)类                        ◇创建Mapper映射文件<br>◇初始化SessionFactory                   ◇利用SqlSession对象操作数据  </p>\n<h2 id=\"单元测试与JUnit-4\"><a href=\"#单元测试与JUnit-4\" class=\"headerlink\" title=\"单元测试与JUnit 4\"></a>单元测试与JUnit 4</h2><h3 id=\"单元测试\"><a href=\"#单元测试\" class=\"headerlink\" title=\"单元测试\"></a>单元测试</h3><p>◇单元测试是指对软件中的最小可测试单元进行检查和验证<br>◇测试用例是指编写一段代码对已有功能(方法)进行校验<br>◇JUnit 4是Java中最著名的单元测试工具,主流IDE内置支持  </p>\n<h3 id=\"JUnit-4使用方法\"><a href=\"#JUnit-4使用方法\" class=\"headerlink\" title=\"JUnit 4使用方法\"></a>JUnit 4使用方法</h3><p>◇引入JUnit Jar包或增加Maven依赖<br>◇编写测试用例验证目标方法是否正确运行<br>◇在测试用例上增加@Test注解开始单元测试  </p>\n<h3 id=\"JUnit-4使用入门\"><a href=\"#JUnit-4使用入门\" class=\"headerlink\" title=\"JUnit 4使用入门\"></a>JUnit 4使用入门</h3><p>◇创建Maven项目<br> –pom.xml配置</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;dependencies&gt;</span><br><span class=\"line\">        &lt;dependency&gt;</span><br><span class=\"line\">            &lt;groupId&gt;junit&lt;/groupId&gt;</span><br><span class=\"line\">            &lt;artifactId&gt;junit&lt;/artifactId&gt;</span><br><span class=\"line\">            &lt;version&gt;<span class=\"number\">4.12</span>&lt;/version&gt;</span><br><span class=\"line\">        &lt;/dependency&gt;</span><br><span class=\"line\">&lt;/dependencies&gt;</span><br></pre></td></tr></table></figure>\n<p> –main中创建类</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Calculator</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">add</span><span class=\"params\">(<span class=\"keyword\">int</span> a, <span class=\"keyword\">int</span> b)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> a+b;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">subtract</span><span class=\"params\">(<span class=\"keyword\">int</span> a, <span class=\"keyword\">int</span> b)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> a - b;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">multiply</span><span class=\"params\">(<span class=\"keyword\">int</span> a, <span class=\"keyword\">int</span> b)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> a * b;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">float</span> <span class=\"title\">divide</span><span class=\"params\">(<span class=\"keyword\">int</span> a, <span class=\"keyword\">int</span> b)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (a*<span class=\"number\">1f</span>)/b;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p> –test中创建测试类,测试类或测试方法前有√则为正确运行,也要看程序运行和预期是否相同</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CalculatorTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Calculator cal = <span class=\"keyword\">new</span> Calculator();</span><br><span class=\"line\">    <span class=\"comment\">//测试用例命名规则</span></span><br><span class=\"line\">    <span class=\"comment\">//1.与原方法保持一致add</span></span><br><span class=\"line\">    <span class=\"comment\">//2.在原方法前增加test前缀testAdd</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testAdd</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> result = cal.add(<span class=\"number\">3</span>, <span class=\"number\">5</span>);</span><br><span class=\"line\">        System.out.println(result);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">subtract</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> result = cal.subtract(<span class=\"number\">1</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\">        System.out.println(result);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">multiply</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> result = cal.multiply(<span class=\"number\">1</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\">        System.out.println(result);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">divide</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">float</span> result = cal.divide(<span class=\"number\">1</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\">        System.out.println(result);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>◇快速生成测试类方法：选中需要测试的类-&gt;Code-&gt;Generate-&gt;Test<br>◇可以同时运行多个测试类</p>\n<h2 id=\"MyBatis环境配置\"><a href=\"#MyBatis环境配置\" class=\"headerlink\" title=\"MyBatis环境配置\"></a>MyBatis环境配置</h2><h3 id=\"mybatis-config-xml\"><a href=\"#mybatis-config-xml\" class=\"headerlink\" title=\"mybatis-config.xml\"></a>mybatis-config.xml</h3><p>◇ MyBatis采用XML格式配置数据库环境信息<br>◇ MyBaits环境配置标签<br>◇ environment包含数据库驱动、URL、用户名与密码 </p>\n<h3 id=\"项目演示\"><a href=\"#项目演示\" class=\"headerlink\" title=\"项目演示\"></a>项目演示</h3><p>◇IDEA支持数据库面板，DataBase-&gt;+ -&gt;DataSource-&gt;MySql<br>◇pom.xml配置</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;repositories&gt;</span><br><span class=\"line\">        &lt;repository&gt;</span><br><span class=\"line\">            &lt;id&gt;aliyun&lt;/id&gt;</span><br><span class=\"line\">            &lt;name&gt;aliyun&lt;/name&gt;</span><br><span class=\"line\">            &lt;url&gt;https:<span class=\"comment\">//maven.aliyun.com/repository/public&lt;/url&gt;</span></span><br><span class=\"line\">        &lt;/repository&gt;</span><br><span class=\"line\">    &lt;/repositories&gt;</span><br><span class=\"line\">    &lt;dependencies&gt;</span><br><span class=\"line\">        &lt;dependency&gt;</span><br><span class=\"line\">            &lt;groupId&gt;org.mybatis&lt;/groupId&gt;</span><br><span class=\"line\">            &lt;artifactId&gt;mybatis&lt;/artifactId&gt;</span><br><span class=\"line\">            &lt;version&gt;<span class=\"number\">3.5</span><span class=\"number\">.1</span>&lt;/version&gt;</span><br><span class=\"line\">        &lt;/dependency&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;dependency&gt;</span><br><span class=\"line\">            &lt;groupId&gt;mysql&lt;/groupId&gt;</span><br><span class=\"line\">            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</span><br><span class=\"line\">            &lt;version&gt;<span class=\"number\">5.1</span><span class=\"number\">.47</span>&lt;/version&gt;</span><br><span class=\"line\">        &lt;/dependency&gt;</span><br><span class=\"line\">        &lt;!--增加junit用于测试 --&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;/dependencies&gt;</span><br></pre></td></tr></table></figure>\n<p>◇在main/resources目录下创建mybatis-config.xml文件</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span><br><span class=\"line\">&lt;!DOCTYPE configuration</span><br><span class=\"line\">        PUBLIC <span class=\"string\">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span><br><span class=\"line\">        <span class=\"string\">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span><br><span class=\"line\">&lt;configuration&gt;</span><br><span class=\"line\">    &lt;!--设置默认指向的数据库,这里默认指向dev--&gt;</span><br><span class=\"line\">    &lt;environments <span class=\"keyword\">default</span>=<span class=\"string\">&quot;dev&quot;</span>&gt;</span><br><span class=\"line\">        &lt;!--配置环境，不同的环境不同的id名字--&gt;</span><br><span class=\"line\">        &lt;environment id=<span class=\"string\">&quot;dev&quot;</span>&gt;</span><br><span class=\"line\">            &lt;!-- 采用JDBC方式对数据库事务进行commit/rollback --&gt;</span><br><span class=\"line\">            &lt;transactionManager type=<span class=\"string\">&quot;JDBC&quot;</span>&gt;&lt;/transactionManager&gt;</span><br><span class=\"line\">            &lt;!--采用连接池方式管理数据库连接--&gt;</span><br><span class=\"line\">            &lt;dataSource type=<span class=\"string\">&quot;POOLED&quot;</span>&gt;</span><br><span class=\"line\">                &lt;property name=<span class=\"string\">&quot;driver&quot;</span> value=<span class=\"string\">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span><br><span class=\"line\">                &lt;property name=<span class=\"string\">&quot;url&quot;</span> value=</span><br><span class=\"line\">    <span class=\"string\">&quot;jdbc:mysql://localhost:3306/babytun?useUnicode=true&amp;amp;characterEncoding=UTF-8&quot;</span>/&gt;</span><br><span class=\"line\">                &lt;property name=<span class=\"string\">&quot;username&quot;</span> value=<span class=\"string\">&quot;root&quot;</span>/&gt;</span><br><span class=\"line\">                &lt;property name=<span class=\"string\">&quot;password&quot;</span> value=<span class=\"string\">&quot;www.LCG.com&quot;</span>/&gt;</span><br><span class=\"line\">            &lt;/dataSource&gt;</span><br><span class=\"line\">        &lt;/environment&gt;</span><br><span class=\"line\">    &lt;/environments&gt;</span><br><span class=\"line\">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>\n<h2 id=\"SqlSessionFactory\"><a href=\"#SqlSessionFactory\" class=\"headerlink\" title=\"SqlSessionFactory\"></a>SqlSessionFactory</h2><p>◇ SqlSessionFactory是MyBatis的核心对象<br>◇ 用于初始化MyBatis,创建SqlSession对象<br>◇ 保证SqlSessionFactory在应用中全局唯一 </p>\n<h3 id=\"SqlSession\"><a href=\"#SqlSession\" class=\"headerlink\" title=\"SqlSession\"></a>SqlSession</h3><p>◇ SqlSession是MyBatis操作数据库的核心对象<br>◇ SqlSession使用JDBC方式与数据库交互<br>◇ SqlSession对象提供了数据表CRUD对应方法    </p>\n<h3 id=\"项目演示-1\"><a href=\"#项目演示-1\" class=\"headerlink\" title=\"项目演示\"></a>项目演示</h3><p>◇pom.xml中增加junit依赖用于测试<br>◇JUNIT单元测试类</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyBatisTestor</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testSqlSessionFactory</span><span class=\"params\">()</span><span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//按照字符流方式进行.xml文件的读取，返回Reader对象</span></span><br><span class=\"line\">        Reader reader = Resources.getResourceAsReader(<span class=\"string\">&quot;mybatis-config.xml&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">//初始化SqlSessionFactory对象，同时通过reader对象解析xml文件</span></span><br><span class=\"line\">        SqlSessionFactory sqlSessionFactory = <span class=\"keyword\">new</span> SqlSessionFactoryBuilder().build(reader);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;SessionFactory加载成功&quot;</span>);</span><br><span class=\"line\">        SqlSession sqlSession = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">//创建SqlSession对象，SqlSession是JDBC的扩展类，用于与数据库交互</span></span><br><span class=\"line\">            sqlSession = sqlSessionFactory.openSession();</span><br><span class=\"line\">            <span class=\"comment\">//进行数据库的交互</span></span><br><span class=\"line\">            Connection connection = sqlSession.getConnection();</span><br><span class=\"line\">            System.out.println(connection);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;<span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">/*如果type=&quot;POOLED&quot;,代表使用连接池，close则是将连接回收到连接池中</span></span><br><span class=\"line\"><span class=\"comment\">            * 如果type=&quot;UNPOOLED&quot;,代表直连，close则会调用Connection.close()</span></span><br><span class=\"line\"><span class=\"comment\">            * 方法关闭连接*/</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span>(sqlSession!=<span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">                sqlSession.close();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">//测试工具类</span></span><br><span class=\"line\">     <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testMyBatisUtils</span><span class=\"params\">()</span><span class=\"keyword\">throws</span> Exception</span>&#123;</span><br><span class=\"line\">        SqlSession sqlSession = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            sqlSession = MyBatisUtils.openSession();</span><br><span class=\"line\">            Connection connection = sqlSession.getConnection();</span><br><span class=\"line\">            System.out.println(connection);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;<span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">            MyBatisUtils.closeSession(sqlSession);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>◇初始化工具类</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyBatisUtils</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//利用static(静态)属于类不属于对象，且全局唯一</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> SqlSessionFactory sqlSessionFactory = <span class=\"keyword\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//利用静态块在初始化类时实例化sqlSessionFactory</span></span><br><span class=\"line\">    <span class=\"keyword\">static</span> &#123;</span><br><span class=\"line\">        Reader reader = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            reader = Resources.getResourceAsReader(<span class=\"string\">&quot;mybatis-config.xml&quot;</span>);</span><br><span class=\"line\">            sqlSessionFactory = <span class=\"keyword\">new</span> SqlSessionFactoryBuilder().build(reader);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">            <span class=\"comment\">//初始化错误时，通过抛出异常ExceptionInInitializerError通知调用者</span></span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> ExceptionInInitializerError(e);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * openSession 创建一个新的SqlSession对象</span></span><br><span class=\"line\"><span class=\"comment\">     * 对于工具类的方法大都使用static描述，</span></span><br><span class=\"line\"><span class=\"comment\">     * 这样通过类名和方法名就可以直接使用了</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> SqlSession对象</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> SqlSession <span class=\"title\">openSession</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> sqlSessionFactory.openSession();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 释放一个有效的SqlSession对象</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> session 准备释放SqlSession对象</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">closeSession</span><span class=\"params\">(SqlSession session)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (session != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            session.close();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"MyBatis数据查询\"><a href=\"#MyBatis数据查询\" class=\"headerlink\" title=\"MyBatis数据查询\"></a>MyBatis数据查询</h2><h3 id=\"MyBatis数据查询步骤\"><a href=\"#MyBatis数据查询步骤\" class=\"headerlink\" title=\"MyBatis数据查询步骤\"></a>MyBatis数据查询步骤</h3><p>◇创建实体类(Entity)                 ◇创建Mapper XML<br>◇编写SQL标签                         ◇开启驼峰命名映射<br>◇新增                                       ◇SqlSession执行select语句 </p>\n<h3 id=\"项目演示-2\"><a href=\"#项目演示-2\" class=\"headerlink\" title=\"项目演示\"></a>项目演示</h3><p>◇生成实体类，entity</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Goods</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer goodsId;<span class=\"comment\">//商品编号</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String title;<span class=\"comment\">//标题</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String subTitle;<span class=\"comment\">//子标题</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Float originalCost;<span class=\"comment\">//原始价格</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Float currentPrice;<span class=\"comment\">//当前价格</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Float discount;<span class=\"comment\">//折扣率</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer isFreeDelivery;<span class=\"comment\">//是否包邮 ,1-包邮 0-不包邮</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer categoryId;<span class=\"comment\">//分类编号</span></span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>◇在Resources目录中创建mapper(映射器)文件，在其中创建xml文件;goods.xml文件说明了实体类和哪一张表对应</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span> ?&gt;</span><br><span class=\"line\">&lt;!DOCTYPE mapper</span><br><span class=\"line\">        PUBLIC <span class=\"string\">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class=\"line\">        <span class=\"string\">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;&lt;!--与config中的不同 --&gt;</span><br><span class=\"line\">&lt;!--命名空间用来区分 --&gt;</span><br><span class=\"line\">&lt;mapper namespace=<span class=\"string\">&quot;goods&quot;</span>&gt;</span><br><span class=\"line\">    &lt;!--编写sql标签,resultType说明查询结果返回的实体类 --&gt;</span><br><span class=\"line\">    &lt;select id=<span class=\"string\">&quot;selectAll&quot;</span> resultType=<span class=\"string\">&quot;com.lcg.mybatis.entity.Goods&quot;</span>&gt;</span><br><span class=\"line\">        select * from t_goods order by goods_id desc limit <span class=\"number\">10</span></span><br><span class=\"line\">    &lt;/select&gt;</span><br><span class=\"line\">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>\n<p>◇新建了goods.xml后还需要在mybatis-config.xml中进行声明<br><img src=\"/p/f37d/1628332975684-1cd84570-03e0-4c7a-8f40-a0b5fcd43d7f.png\" class=\"lazyload\" data-srcset=\"/p/f37d/1628332975684-1cd84570-03e0-4c7a-8f40-a0b5fcd43d7f.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>◇驼峰命名转换(在mybatis-config中配置)，数据表字段不区分大小写，但java属性区分大小写；防止读取数据库数据时丢失一些例如goods_id字段的数据</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;settings&gt;</span><br><span class=\"line\">    &lt;!-- goods_id ==&gt; goodsId 驼峰命名转换 --&gt;</span><br><span class=\"line\">    &lt;setting name=<span class=\"string\">&quot;mapUnderscoreToCamelCase&quot;</span> value=<span class=\"string\">&quot;true&quot;</span>/&gt;</span><br><span class=\"line\">&lt;/settings&gt;</span><br></pre></td></tr></table></figure>\n<p>◇编写测试</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testSelectAll</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">    SqlSession session = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    <span class=\"keyword\">try</span>&#123;</span><br><span class=\"line\">        session = MyBatisUtils.openSession();</span><br><span class=\"line\">        List&lt;Goods&gt; list = session.selectList(<span class=\"string\">&quot;goods.selectAll&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(Goods g : list)&#123;</span><br><span class=\"line\">            System.out.println(g.getTitle());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;<span class=\"keyword\">catch</span> (Exception e)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> e;</span><br><span class=\"line\">    &#125;<span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">        MyBatisUtils.closeSession(session);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"Sql传参\"><a href=\"#Sql传参\" class=\"headerlink\" title=\"Sql传参\"></a>Sql传参</h2><h3 id=\"查询-select\"><a href=\"#查询-select\" class=\"headerlink\" title=\"查询 - select\"></a>查询 - select</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;select id=<span class=\"string\">&quot;selectById&quot;</span> parameterType=<span class=\"string\">&quot;Integer&quot;</span></span><br><span class=\"line\">resultType=<span class=\"string\">&quot;com.lcg.mybatis.entity.Goods&quot;</span>&gt;</span><br><span class=\"line\">select * from t_goods where goods_id = #&#123;value&#125;</span><br><span class=\"line\">&lt;/select&gt;</span><br></pre></td></tr></table></figure>\n<h3 id=\"项目示例\"><a href=\"#项目示例\" class=\"headerlink\" title=\"项目示例\"></a>项目示例</h3><p><strong>①单个参数</strong><br>◇在goods.xml中新增一个select查询</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;select id=<span class=\"string\">&quot;selectById&quot;</span> parameterType=<span class=\"string\">&quot;Integer&quot;</span> resultType=<span class=\"string\">&quot;com.lcg.mybatis.entity.Goods&quot;</span>&gt;</span><br><span class=\"line\">        select * from t_goods where goods_id = #&#123;value&#125;</span><br><span class=\"line\">    &lt;/select&gt;</span><br></pre></td></tr></table></figure>\n<p>◇进行测试</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 传递单个SQL参数</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@throws</span> Exception</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testSelectById</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">        SqlSession session = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">try</span>&#123;</span><br><span class=\"line\">            session = MyBatisUtils.openSession();</span><br><span class=\"line\">            Goods goods = session.selectOne(<span class=\"string\">&quot;goods.selectById&quot;</span> , <span class=\"number\">1603</span>);</span><br><span class=\"line\">            System.out.println(goods.getTitle());</span><br><span class=\"line\">        &#125;<span class=\"keyword\">catch</span> (Exception e)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> e;</span><br><span class=\"line\">        &#125;<span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">            MyBatisUtils.closeSession(session);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<p><strong>②多个参数</strong><br><strong>◇</strong>session.selectxxx方法无法传递多个参数，所以利用Java.Util.Map键值对来进行多个参数的传递，即参数名为键，值为参数值<br>◇新增查询</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;select id=<span class=\"string\">&quot;selectByPriceRange&quot;</span> parameterType=<span class=\"string\">&quot;java.util.Map&quot;</span> </span><br><span class=\"line\">    resultType=<span class=\"string\">&quot;com.lcg.mybatis.entity.Goods&quot;</span>&gt;</span><br><span class=\"line\">    select * from t_goods</span><br><span class=\"line\">    where current_price between #&#123;min&#125; and #&#123;max&#125;</span><br><span class=\"line\">    limit <span class=\"number\">0</span>,#&#123;limt&#125;</span><br><span class=\"line\">&lt;/select&gt;</span><br></pre></td></tr></table></figure>\n<p>◇测试</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">    * 传递多个(3个)SQL参数</span></span><br><span class=\"line\"><span class=\"comment\">    * <span class=\"doctag\">@throws</span> Exception</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">   <span class=\"meta\">@Test</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testSelectByPriceRange</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">       SqlSession session = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">       <span class=\"keyword\">try</span>&#123;</span><br><span class=\"line\">           session = MyBatisUtils.openSession();</span><br><span class=\"line\">           Map param = <span class=\"keyword\">new</span> HashMap();</span><br><span class=\"line\">           param.put(<span class=\"string\">&quot;min&quot;</span>,<span class=\"number\">100</span>);</span><br><span class=\"line\">           param.put(<span class=\"string\">&quot;max&quot;</span> , <span class=\"number\">500</span>);</span><br><span class=\"line\">           param.put(<span class=\"string\">&quot;limt&quot;</span> , <span class=\"number\">10</span>);</span><br><span class=\"line\">           List&lt;Goods&gt; list = session.selectList(<span class=\"string\">&quot;goods.selectByPriceRange&quot;</span>, param);</span><br><span class=\"line\">           <span class=\"keyword\">for</span>(Goods g:list)&#123;</span><br><span class=\"line\">               System.out.println(g.getTitle() + <span class=\"string\">&quot;:&quot;</span> + g.getCurrentPrice());</span><br><span class=\"line\">           &#125;</span><br><span class=\"line\">       &#125;<span class=\"keyword\">catch</span> (Exception e)&#123;</span><br><span class=\"line\">           <span class=\"keyword\">throw</span> e;</span><br><span class=\"line\">       &#125;<span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">           MyBatisUtils.closeSession(session);</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<p> ③多表关联<br>◇Sql语句</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 利用LinkedHashMap保存多表关联结果</span></span><br><span class=\"line\"><span class=\"comment\">        MyBatis会将每一条记录包装为LinkedHashMap对象</span></span><br><span class=\"line\"><span class=\"comment\">        key是字段名  value是字段对应的值 , 字段类型根据表结构进行自动判断</span></span><br><span class=\"line\"><span class=\"comment\">        优点: 易于扩展,易于使用</span></span><br><span class=\"line\"><span class=\"comment\">        缺点: 太过灵活,无法进行编译时检查</span></span><br><span class=\"line\"><span class=\"comment\">     --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;selectGoodsMap&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;java.util.LinkedHashMap&quot;</span>&gt;</span></span><br><span class=\"line\">        select g.*,c.category_name from t_goods g, t_category c</span><br><span class=\"line\">        where g.category_id = c.category_id</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>◇测试</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\">@Test</span><br><span class=\"line\">    public void testSelectGoodsMap() throws Exception &#123;</span><br><span class=\"line\">        SqlSession session = null;</span><br><span class=\"line\">        try&#123;</span><br><span class=\"line\">            session = MyBatisUtils.openSession();</span><br><span class=\"line\">            List<span class=\"tag\">&lt;<span class=\"name\">Map</span>&gt;</span> list = session.selectList(&quot;goods.selectGoodsMap&quot;);</span><br><span class=\"line\">            for(Map map : list)&#123;</span><br><span class=\"line\">                System.out.println(map);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;catch (Exception e)&#123;</span><br><span class=\"line\">            throw e;</span><br><span class=\"line\">        &#125;finally &#123;</span><br><span class=\"line\">            MyBatisUtils.closeSession(session);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"ResultMap结果映射\"><a href=\"#ResultMap结果映射\" class=\"headerlink\" title=\"ResultMap结果映射\"></a>ResultMap结果映射</h2><p>◇ResultMap可以将查询结果映射为复杂类型的Java对象<br>◇ResultMap适用于Java对象保存多表关联结果<br>◇ResultMap支持对象关联查询等高级特性<br><strong>项目示例</strong><br>◇创建类别实体</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\">public class Category &#123;</span><br><span class=\"line\">    private Integer categoryId;</span><br><span class=\"line\">    private String categoryName;</span><br><span class=\"line\">    private Integer parentId;</span><br><span class=\"line\">    private Integer categoryLevel;</span><br><span class=\"line\">    private Integer categoryOrder;</span><br><span class=\"line\"> ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>◇创建新包dto，用来进行对原始数据的扩展，保存以及传递;如在包中创建GoodsDTO对原始的Goods进行扩展</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\">//Data Transfer Object--数据传输对象</span><br><span class=\"line\">public class GoodsDTO &#123;</span><br><span class=\"line\">    private Goods goods = new Goods();</span><br><span class=\"line\">    private Category category = new Category();</span><br><span class=\"line\">    private String test;</span><br><span class=\"line\">...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>◇结果映射</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--结果映射--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">resultMap</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;rmGoods&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;com.lcg.mybatis.dto.GoodsDTO&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--设置主键字段与属性映射--&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">id</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;goods.goodsId&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;goods_id&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--设置非主键字段与属性映射--&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;goods.title&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;title&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;goods.originalCost&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;original_cost&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;goods.currentPrice&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;current_price&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;goods.discount&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;discount&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;goods.isFreeDelivery&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;is_free_delivery&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;goods.categoryId&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;category_id&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;category.categoryId&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;category_id&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;category.categoryName&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;category_name&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;category.parentId&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;parent_id&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;category.categoryLevel&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;category_level&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;category.categoryOrder&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;category_order&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">result</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;test&quot;</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;test&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">resultMap</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;selectGoodsDTO&quot;</span> <span class=\"attr\">resultMap</span>=<span class=\"string\">&quot;rmGoods&quot;</span>&gt;</span></span><br><span class=\"line\">        select g.* , c.*,&#x27;1&#x27; as test from t_goods g , t_category c</span><br><span class=\"line\">        where g.category_id = c.category_id</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>◇测试</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\">@Test</span><br><span class=\"line\">    public void testSelectGoodsDTO()throws Exception&#123;</span><br><span class=\"line\">        SqlSession session = null;</span><br><span class=\"line\">        try &#123;</span><br><span class=\"line\">            session = MyBatisUtils.openSession();</span><br><span class=\"line\">            List<span class=\"tag\">&lt;<span class=\"name\">GoodsDTO</span>&gt;</span> list = session.selectList(&quot;goods.selectGoodsDTO&quot;);</span><br><span class=\"line\">            for(GoodsDTO g:list)&#123;</span><br><span class=\"line\">                System.out.println(g.getGoods().getTitle());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; catch (Exception e) &#123;</span><br><span class=\"line\">            throw e;</span><br><span class=\"line\">        &#125;finally &#123;</span><br><span class=\"line\">            MyBatisUtils.closeSession(session);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"MyBatis数据写入\"><a href=\"#MyBatis数据写入\" class=\"headerlink\" title=\"MyBatis数据写入\"></a>MyBatis数据写入</h2><h3 id=\"数据库事务\"><a href=\"#数据库事务\" class=\"headerlink\" title=\"数据库事务\"></a>数据库事务</h3><p>◇数据库事务是保证数据操作完整性的基础<br><img src=\"/p/f37d/1628513637346-4dc8cb72-ae9e-46b1-8732-63a7f3f9c3b3.png\" class=\"lazyload\" data-srcset=\"/p/f37d/1628513637346-4dc8cb72-ae9e-46b1-8732-63a7f3f9c3b3.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"MyBatis写操作包含三种\"><a href=\"#MyBatis写操作包含三种\" class=\"headerlink\" title=\"MyBatis写操作包含三种\"></a>MyBatis写操作包含三种</h3><p>◇插入 -  insert</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">insert</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;insert&quot;</span> <span class=\"attr\">parameterType</span>=<span class=\"string\">&quot;com.lcg.mybatis.entity.Goods&quot;</span>&gt;</span></span><br><span class=\"line\">INSERT INTO `babytun`.`t_goods`( `title`, `sub_title`, `original_cost`, current_price`)</span><br><span class=\"line\">VALUES ( #&#123;title&#125;, #&#123;subTitle&#125;, #&#123;originalCost&#125;, #&#123;currentPrice&#125;)</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">selectKey</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;int&quot;</span> <span class=\"attr\">keyProperty</span>=<span class=\"string\">&quot;goodsId&quot;</span> <span class=\"attr\">order</span>=<span class=\"string\">&quot;AFTER&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 当前连接中最后产生的id号 --&gt;</span></span><br><span class=\"line\">select last_insert_id()</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">selectKey</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">insert</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">--示例代码</span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">insert</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;insert&quot;</span> <span class=\"attr\">parameterType</span>=<span class=\"string\">&quot;com.lcg.mybatis.entity.Goods&quot;</span>&gt;</span></span><br><span class=\"line\">        insert into t_goods(title, sub_title, original_cost, current_price, </span><br><span class=\"line\">                            discount, is_free_delivery,category_id)</span><br><span class=\"line\">        value (#&#123;title&#125; , #&#123;subTitle&#125; , #&#123;originalCost&#125;, </span><br><span class=\"line\">               #&#123;currentPrice&#125;, #&#123;discount&#125;, #&#123;isFreeDelivery&#125;, #&#123;categoryId&#125;)</span><br><span class=\"line\">   //用来将新插入的id回填到类中</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">selectKey</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;Integer&quot;</span> <span class=\"attr\">keyProperty</span>=<span class=\"string\">&quot;goodsId&quot;</span> <span class=\"attr\">order</span>=<span class=\"string\">&quot;AFTER&quot;</span>&gt;</span></span><br><span class=\"line\">            select last_insert_id()</span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">selectKey</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">insert</span>&gt;</span></span><br><span class=\"line\">    @Test</span><br><span class=\"line\">    public void testInsert() throws Exception &#123;</span><br><span class=\"line\">        SqlSession session = null;</span><br><span class=\"line\">        try&#123;</span><br><span class=\"line\">            session = MyBatisUtils.openSession();</span><br><span class=\"line\">            Goods goods = new Goods();</span><br><span class=\"line\">            goods.setTitle(&quot;测试商品&quot;);</span><br><span class=\"line\">            goods.setSubTitle(&quot;测试子标题&quot;);</span><br><span class=\"line\">            goods.setOriginalCost(200f);</span><br><span class=\"line\">            goods.setCurrentPrice(100f);</span><br><span class=\"line\">            goods.setDiscount(0.5f);</span><br><span class=\"line\">            goods.setIsFreeDelivery(1);</span><br><span class=\"line\">            goods.setCategoryId(43);</span><br><span class=\"line\">            //insert()方法返回值代表本次成功插入的记录总数</span><br><span class=\"line\">            int num = session.insert(&quot;goods.insert&quot;, goods);</span><br><span class=\"line\">            session.commit();//提交事务数据</span><br><span class=\"line\">            System.out.println(goods.getGoodsId());</span><br><span class=\"line\">        &#125;catch (Exception e)&#123;</span><br><span class=\"line\">            if(session != null)&#123;</span><br><span class=\"line\">                session.rollback();//回滚事务</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            throw e;</span><br><span class=\"line\">        &#125;finally &#123;</span><br><span class=\"line\">            MyBatisUtils.closeSession(session);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<p>◇更新 -  update</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">update</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;update&quot;</span> <span class=\"attr\">parameterType</span>=<span class=\"string\">&quot;com.lcg.mybatis.entity.Goods&quot;</span>&gt;</span></span><br><span class=\"line\">        UPDATE t_goods</span><br><span class=\"line\">        SET</span><br><span class=\"line\">          title = #&#123;title&#125; ,</span><br><span class=\"line\">          sub_title = #&#123;subTitle&#125; ,</span><br><span class=\"line\">          original_cost = #&#123;originalCost&#125; ,</span><br><span class=\"line\">          current_price = #&#123;currentPrice&#125; ,</span><br><span class=\"line\">          discount = #&#123;discount&#125; ,</span><br><span class=\"line\">          is_free_delivery = #&#123;isFreeDelivery&#125; ,</span><br><span class=\"line\">          category_id = #&#123;categoryId&#125;</span><br><span class=\"line\">        WHERE</span><br><span class=\"line\">          goods_id = #&#123;goodsId&#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">update</span>&gt;</span></span><br><span class=\"line\"> @Test</span><br><span class=\"line\">    public void testUpdate() throws Exception &#123;</span><br><span class=\"line\">        SqlSession session = null;</span><br><span class=\"line\">        try&#123;</span><br><span class=\"line\">            session = MyBatisUtils.openSession();</span><br><span class=\"line\">            //通过selectOne方法得到指定商品编号的goods对象</span><br><span class=\"line\">            Goods goods = session.selectOne(&quot;goods.selectById&quot;, 739);</span><br><span class=\"line\">            goods.setTitle(&quot;更新测试商品&quot;);</span><br><span class=\"line\">            int num = session.update(&quot;goods.update&quot; , goods);</span><br><span class=\"line\">            session.commit();//提交事务数据</span><br><span class=\"line\">        &#125;catch (Exception e)&#123;</span><br><span class=\"line\">            if(session != null)&#123;</span><br><span class=\"line\">                session.rollback();//回滚事务</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            throw e;</span><br><span class=\"line\">        &#125;finally &#123;</span><br><span class=\"line\">            MyBatisUtils.closeSession(session);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>◇删除 -  delete</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--delete from t_goods where goods_id in (1920,1921)--&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">delete</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;delete&quot;</span> <span class=\"attr\">parameterType</span>=<span class=\"string\">&quot;Integer&quot;</span>&gt;</span></span><br><span class=\"line\">       delete from t_goods where goods_id = #&#123;value&#125;</span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">delete</span>&gt;</span></span><br><span class=\"line\">@Test</span><br><span class=\"line\">   public void testDelete() throws Exception &#123;</span><br><span class=\"line\">       SqlSession session = null;</span><br><span class=\"line\">       try&#123;</span><br><span class=\"line\">           session = MyBatisUtils.openSession();</span><br><span class=\"line\">           int num = session.delete(&quot;goods.delete&quot; , 739);</span><br><span class=\"line\">           session.commit();//提交事务数据</span><br><span class=\"line\">       &#125;catch (Exception e)&#123;</span><br><span class=\"line\">           if(session != null)&#123;</span><br><span class=\"line\">               session.rollback();//回滚事务</span><br><span class=\"line\">           &#125;</span><br><span class=\"line\">           throw e;</span><br><span class=\"line\">       &#125;finally &#123;</span><br><span class=\"line\">           MyBatisUtils.closeSession(session);</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"selectKey与useGeneratedKeys的区别\"><a href=\"#selectKey与useGeneratedKeys的区别\" class=\"headerlink\" title=\"selectKey与useGeneratedKeys的区别\"></a>selectKey与useGeneratedKeys的区别</h3><p>◇selectKey标签的用法</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">insert</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;insert&quot;</span> <span class=\"attr\">parameterType</span>=<span class=\"string\">&quot;com.lcg.mybatis.entity.Goods&quot;</span>&gt;</span></span><br><span class=\"line\">      INSERT INTO SQL语句</span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">selectKey</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;Integer&quot;</span> <span class=\"attr\">keyProperty</span>=<span class=\"string\">&quot;goodsId&quot;</span> <span class=\"attr\">order</span>=<span class=\"string\">&quot;AFTER&quot;</span>&gt;</span></span><br><span class=\"line\">           select last_insert_id()</span><br><span class=\"line\">       <span class=\"tag\">&lt;/<span class=\"name\">selectKey</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>◇useGeneratedKeys属性用法</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">insert</span>&gt;</span></span><br><span class=\"line\">   parameterType=&quot;com.lcg.mybatis.entity.Goods&quot;</span><br><span class=\"line\">   useGeneratedKeys=&quot;true&quot;</span><br><span class=\"line\">   keyProperty=&quot;goodsId&quot;</span><br><span class=\"line\">   KeyColumn=&quot;goods_id&quot;</span><br><span class=\"line\">  INSERT INTO SQL 语句</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p><strong>二者区别</strong><br>◇selectKey标签需要明确编写获取最新主键的SQL语句<br>◇useGeneratedKeys属性会自动根据驱动生成对应SQL语句<br>◇selectKey适用于所有的关系型数据库<br>◇useGeneratedKeys只适用于能够”自增主键”类型的数据库<br>◇在Oracle(非自增)中selectKey的用法</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">insert</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;insert&quot;</span> <span class=\"attr\">parameterType</span>=<span class=\"string\">&quot;com.lcg.mybatis.entity.Goods&quot;</span>&gt;</span></span><br><span class=\"line\">      INSERT INTO SQL语句</span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">selectKey</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;Integer&quot;</span> <span class=\"attr\">keyProperty</span>=<span class=\"string\">&quot;goodsId&quot;</span> <span class=\"attr\">order</span>=<span class=\"string\">&quot;BEFORE&quot;</span>&gt;</span></span><br><span class=\"line\">           select seq_goods.nextval as id from dual</span><br><span class=\"line\">       <span class=\"tag\">&lt;/<span class=\"name\">selectKey</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"MyBatis预防SQL注入攻击\"><a href=\"#MyBatis预防SQL注入攻击\" class=\"headerlink\" title=\"MyBatis预防SQL注入攻击\"></a>MyBatis预防SQL注入攻击</h2><h3 id=\"SQL注入攻击\"><a href=\"#SQL注入攻击\" class=\"headerlink\" title=\"SQL注入攻击\"></a>SQL注入攻击</h3><p> ◇SQL注入是指攻击者利用SQL漏洞,绕过系统约束,越权获取数据的攻击方式  </p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\">SQL代码:</span><br><span class=\"line\">select * from a where name =&#x27;&quot;+ name+&quot;&#x27;&quot;;</span><br><span class=\"line\">正常情况:</span><br><span class=\"line\">name:张三 -&gt; select * from a where name=&#x27;张三&#x27;;</span><br><span class=\"line\">SQL注入攻击:</span><br><span class=\"line\">name:&#x27; or 1=1 or 1=&#x27;</span><br><span class=\"line\">select * from a where name=&#x27;&#x27; or 1=1 or 1=&#x27;&#x27;</span><br></pre></td></tr></table></figure>\n<h3 id=\"MyBatis两种传值方式\"><a href=\"#MyBatis两种传值方式\" class=\"headerlink\" title=\"MyBatis两种传值方式\"></a>MyBatis两种传值方式</h3><p>◇${}文本替换,未经任何处理对SQL文本替换<br>◇ #{}预编译传值,使用预编译传值可以预防SQL注入  </p>\n<h2 id=\"MyBatis工作流程\"><a href=\"#MyBatis工作流程\" class=\"headerlink\" title=\"MyBatis工作流程\"></a>MyBatis工作流程</h2><p><img src=\"/p/f37d/1628585431174-e99c3d94-a034-4cf0-8882-0cee59cca82f.png\" class=\"lazyload\" data-srcset=\"/p/f37d/1628585431174-e99c3d94-a034-4cf0-8882-0cee59cca82f.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>◇首先在Java应用中创建mybatis-config.xml文件，用于全局配置，这个配置文件包含了全局设置项、环境配置、mapper声明等核心配置信息；然后在程序的运行过程中通过SqlSessionFactoryBuilder构造器对象来build(构造)SqlSessionFactory工厂类对象；该工厂类对象需要保证全局唯一，用于创建SqlSession对象；SqlSession是我们用于对数据库增删改查的核心对象，它要解析与之对应的mapper.xml文件，每一个mapper.xml文件中包含了大量的sql语句；我们通过SqlSession来访问mapper.xml文件，进而执行其中的sql语句；在SqlSession中主要提供了四种方法(insert | update | delete | select)和数据库进行交互；在进行写的操作时，不要忘记对事务进行相应的提交和回滚；在交互完毕后，应当关闭会话任务，这样我们的底层数据库连接要么被连接池回收要么就直接释放掉；SessionClose这个操作一般放在finally块中，保证它一定能够执行；</p>\n","categories":["Java数据库","MyBaits"],"tags":["MyBaits"]},{"title":"MySQL基本函数","url":"/p/8500.html","content":"<h2 id=\"MySQL的函数\"><a href=\"#MySQL的函数\" class=\"headerlink\" title=\"MySQL的函数\"></a>MySQL的函数</h2><p> ◇像编程语言利用函数封装业务功能一样，数据库也把一些复杂的功能封装到函数里，供使用者调用<br> ◇也可以自定义函数<br><img src=\"/p/8500/1626744661345-6111ef9d-04c3-4761-b727-9ae5c97863f8.png\" class=\"lazyload\" data-srcset=\"/p/8500/1626744661345-6111ef9d-04c3-4761-b727-9ae5c97863f8.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h2 id=\"数字函数\"><a href=\"#数字函数\" class=\"headerlink\" title=\"数字函数\"></a>数字函数</h2><h3 id=\"数字函数（一）\"><a href=\"#数字函数（一）\" class=\"headerlink\" title=\"数字函数（一）\"></a>数字函数（一）</h3><p><img src=\"/p/8500/1626744703126-a396cd11-c086-4a87-b1b4-6312391ae480.png\" class=\"lazyload\" data-srcset=\"/p/8500/1626744703126-a396cd11-c086-4a87-b1b4-6312391ae480.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"数字函数（二）\"><a href=\"#数字函数（二）\" class=\"headerlink\" title=\"数字函数（二）\"></a>数字函数（二）</h3><p>◇三角函数的参数为弧度<br><img src=\"/p/8500/1626744716967-68f7ed15-b497-4b9e-9f62-1c2445dbe9ec.png\" class=\"lazyload\" data-srcset=\"/p/8500/1626744716967-68f7ed15-b497-4b9e-9f62-1c2445dbe9ec.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h2 id=\"日期函数\"><a href=\"#日期函数\" class=\"headerlink\" title=\"日期函数\"></a>日期函数</h2><h3 id=\"获取系统时间函数\"><a href=\"#获取系统时间函数\" class=\"headerlink\" title=\"获取系统时间函数\"></a>获取系统时间函数</h3><p>◇NOW()函数能获得系统日期和时间，格式yyyy-MM-dd hh:mm:ss<br>◇CURDATE()函数能获得当前系统日期，格式yyyy-MM-dd<br>◇CURTIME()函数能获得当前系统时间，格式hh:mm:ss  </p>\n<h3 id=\"日期格式化函数\"><a href=\"#日期格式化函数\" class=\"headerlink\" title=\"日期格式化函数\"></a>日期格式化函数</h3><p><img src=\"/p/8500/1626752210323-8c7cf93e-cd79-462d-8331-0f275fd02f86.png\" class=\"lazyload\" data-srcset=\"/p/8500/1626752210323-8c7cf93e-cd79-462d-8331-0f275fd02f86.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>◇ DATE_FORMAT()函数用于格式化日期，返回用户想要的日期格式  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">DATE_FORMAT( 日期, 表达式)</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> ename,DATE_FORMAT(hiredate,&quot;%Y&quot;)<span class=\"operator\">/</span><span class=\"operator\">/</span>获取年份的格式</span><br><span class=\"line\">DATE_FORMAT(hiredate,&quot;%Y/%m%d&quot;) <span class=\"operator\">/</span><span class=\"operator\">/</span>返回<span class=\"number\">2021</span><span class=\"operator\">/</span><span class=\"number\">07</span><span class=\"operator\">/</span><span class=\"number\">20</span>这种格式</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> t_emp;</span><br></pre></td></tr></table></figure>\n<h3 id=\"日期计算的注意事项\"><a href=\"#日期计算的注意事项\" class=\"headerlink\" title=\"日期计算的注意事项\"></a>日期计算的注意事项</h3><p>◇ MySQL数据库里面，两个日期不能直接加减，日期也不能与数字加减  </p>\n<h3 id=\"日期偏移计算\"><a href=\"#日期偏移计算\" class=\"headerlink\" title=\"日期偏移计算\"></a>日期偏移计算</h3><p> ◇ DATE_ADD()函数可以实现日期的偏移计算，而且时间单位很灵活  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">DATE_ADD( 日期 , <span class=\"type\">INTERVAL</span> 偏移量 时间单位 )</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> DATE_ADD(NOW(),<span class=\"type\">INTERVAL</span> <span class=\"number\">15</span> <span class=\"keyword\">DAY</span>);</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> DATE_ADD(NOW(),<span class=\"type\">INTERVAL</span> <span class=\"number\">-300</span> <span class=\"keyword\">MINUTE</span>);</span><br></pre></td></tr></table></figure>\n<h3 id=\"计算日期之间相隔的天数\"><a href=\"#计算日期之间相隔的天数\" class=\"headerlink\" title=\"计算日期之间相隔的天数\"></a>计算日期之间相隔的天数</h3><p>◇ DATEDIFF()函数用来计算两个日期之间相差的天数  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">DATEDIFF ( 日期 , 日期 )</span><br></pre></td></tr></table></figure>\n<h3 id=\"课堂练习\"><a href=\"#课堂练习\" class=\"headerlink\" title=\"课堂练习\"></a>课堂练习</h3><p>◇ 利用日期函数，查询明年你的生日是星期几？  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> DATE_FORMAT(&quot;2020-02-19&quot;,&quot;%w&quot;)</span><br></pre></td></tr></table></figure>\n<p>◇ 利用日期函数，查询1981年上半年入职的员工有多少人？  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"built_in\">COUNT</span>(<span class=\"operator\">*</span>) <span class=\"keyword\">FROM</span> t_emp</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> DATE_FORMAT(hiredate,&quot;%Y&quot;)<span class=\"operator\">=</span><span class=\"number\">1981</span></span><br><span class=\"line\"><span class=\"keyword\">AND</span> DATE_FORMAT(hiredate,&quot;%m&quot;)<span class=\"operator\">&lt;=</span><span class=\"number\">6</span>;</span><br></pre></td></tr></table></figure>\n<h2 id=\"字符函数\"><a href=\"#字符函数\" class=\"headerlink\" title=\"字符函数\"></a>字符函数</h2><h3 id=\"字符函数（一）\"><a href=\"#字符函数（一）\" class=\"headerlink\" title=\"字符函数（一）\"></a>字符函数（一）</h3><p>◇INSERT(“ABC”,1,0,”DE”)数字1表示从前面的字符串ABC的第一个位置插入后面的字符串DE，0表示替换从插入位置起的0个字符；<br>◇REPLACE() 的第二个参数表示被替换的内容，最后一个参数表示替换的内容<br><img src=\"/p/8500/1626744868617-349e75c7-1c16-4cd4-bf54-b7ed9fab0132.png\" class=\"lazyload\" data-srcset=\"/p/8500/1626744868617-349e75c7-1c16-4cd4-bf54-b7ed9fab0132.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"字符函数（二）\"><a href=\"#字符函数（二）\" class=\"headerlink\" title=\"字符函数（二）\"></a>字符函数（二）</h3><p>◇截取字符串起始位置从1开始<br>◇填充字符函数第二个参数表示填充到多少字符，而不是填充多少字符；<br><img src=\"/p/8500/1626744883419-428def08-c61f-4a7c-b422-7e6c5ecd35fa.png\" class=\"lazyload\" data-srcset=\"/p/8500/1626744883419-428def08-c61f-4a7c-b422-7e6c5ecd35fa.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"课堂练习-1\"><a href=\"#课堂练习-1\" class=\"headerlink\" title=\"课堂练习\"></a>课堂练习</h3><p>◇将某人的姓名的名用<em>替代  eg: 欧</em>*</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> RPAD(<span class=\"built_in\">SUBSTRING</span>(&quot;欧宝玉&quot;,<span class=\"number\">1</span>,<span class=\"number\">1</span>),LENGTH(&quot;欧宝玉&quot;)<span class=\"operator\">/</span><span class=\"number\">3</span>,&quot;*&quot;);</span><br></pre></td></tr></table></figure>\n<h2 id=\"条件函数\"><a href=\"#条件函数\" class=\"headerlink\" title=\"条件函数\"></a>条件函数</h2><p>◇ SQL语句中可以利用条件函数来实现编程语言里的条件判断  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">IFNULL( 表达式 , 值 )</span><br><span class=\"line\">IF( 表达式 , 值<span class=\"number\">1</span> , 值<span class=\"number\">2</span> )<span class=\"operator\">/</span><span class=\"operator\">/</span>如果满足表达式则是值<span class=\"number\">1</span>，否则是值<span class=\"number\">2</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"条件语句\"><a href=\"#条件语句\" class=\"headerlink\" title=\"条件语句\"></a>条件语句</h3><p> ◇ 复杂的条件判断可以用条件语句来实现，比IF语句功能更强大  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CASE</span></span><br><span class=\"line\"><span class=\"keyword\">WHEN</span> 表达式 <span class=\"keyword\">THEN</span> 值<span class=\"number\">1</span> ,</span><br><span class=\"line\"><span class=\"keyword\">WHEN</span> 表达式 <span class=\"keyword\">THEN</span> 值<span class=\"number\">2</span> , …… , <span class=\"keyword\">ELSE</span> 值N</span><br><span class=\"line\"><span class=\"keyword\">END</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"课堂练习-2\"><a href=\"#课堂练习-2\" class=\"headerlink\" title=\"课堂练习\"></a>课堂练习</h3><p>◇ 中秋节公司发放礼品，SALES部门发放礼品A，其余部门发放礼品B， 打印每名员工获得的礼品。  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">FROM</span> t_emp e <span class=\"keyword\">JOIN</span> t_dept d <span class=\"keyword\">ON</span> e.deptno<span class=\"operator\">=</span>d.deptno,</span><br><span class=\"line\">IF(d.dname<span class=\"operator\">=</span>&quot;SALES&quot;,&quot;礼品A&quot;,&quot;礼品B&quot;)</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> t_emp e <span class=\"keyword\">JOIN</span> t_dept d <span class=\"keyword\">ON</span> e.deptno<span class=\"operator\">=</span>d.deptno;</span><br></pre></td></tr></table></figure>\n<p>◇ 公司年庆决定组织员工集体旅游，每个部门旅游目的地是不同的。SALES部门去P1地点，ACCOUNTING部门去P2地点 ，RESEARCH部门去P3地点，查询每名员工的旅行地点。  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> </span><br><span class=\"line\"> e.empno,e.ename,</span><br><span class=\"line\"> <span class=\"keyword\">CASE</span> </span><br><span class=\"line\"> <span class=\"keyword\">WHEN</span> d.dname<span class=\"operator\">=</span>&quot;SALES&quot; <span class=\"keyword\">THEN</span> &quot;P1&quot;</span><br><span class=\"line\"> <span class=\"keyword\">WHEN</span> d.dname<span class=\"operator\">=</span>&quot;ACCOUNTING&quot; <span class=\"keyword\">THEN</span> &quot;P2&quot;</span><br><span class=\"line\"> <span class=\"keyword\">WHEN</span> d.dname<span class=\"operator\">=</span>&quot;RESEARCH&quot; <span class=\"keyword\">THEN</span> &quot;P3&quot;</span><br><span class=\"line\"> <span class=\"keyword\">END</span> </span><br><span class=\"line\"> <span class=\"keyword\">AS</span> place</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> t_emp e <span class=\"keyword\">JOIN</span> t_dept d <span class=\"keyword\">ON</span> e.deptno<span class=\"operator\">=</span>d.deptno</span><br></pre></td></tr></table></figure>\n<p>◇ 公司决定为员工调整基本工资，具体调整方案如下：<br><img src=\"/p/8500/1626790167145-a52425b0-80f5-499c-9547-8e4307a1d314.png\" class=\"lazyload\" data-srcset=\"/p/8500/1626790167145-a52425b0-80f5-499c-9547-8e4307a1d314.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">UPDATE t_emp e <span class=\"keyword\">LEFT</span> <span class=\"keyword\">JOIN</span> t_dept d <span class=\"keyword\">ON</span> e.deptno<span class=\"operator\">=</span>d.deptno</span><br><span class=\"line\"><span class=\"keyword\">LEFT</span> <span class=\"keyword\">JOIN</span> (<span class=\"keyword\">SELECT</span> deptno,<span class=\"built_in\">AVG</span>(sal) <span class=\"keyword\">AS</span> avg <span class=\"keyword\">FROM</span> t_emp <span class=\"keyword\">GROUP</span> <span class=\"keyword\">BY</span> deptno) t</span><br><span class=\"line\"><span class=\"keyword\">ON</span> e.deptno<span class=\"operator\">=</span>t.deptno</span><br><span class=\"line\"><span class=\"keyword\">SET</span> sal<span class=\"operator\">=</span>(</span><br><span class=\"line\"><span class=\"keyword\">CASE</span> </span><br><span class=\"line\">  <span class=\"keyword\">WHEN</span> d.dname<span class=\"operator\">=</span>&quot;SALES&quot; <span class=\"keyword\">AND</span> DATEDIFF(NOW(),e.hiredate)<span class=\"operator\">/</span><span class=\"number\">365</span><span class=\"operator\">&gt;=</span><span class=\"number\">20</span></span><br><span class=\"line\">  <span class=\"keyword\">THEN</span> e.sal<span class=\"operator\">*</span><span class=\"number\">1.1</span></span><br><span class=\"line\">  <span class=\"keyword\">WHEN</span> d.dname<span class=\"operator\">=</span>&quot;SALES&quot; <span class=\"keyword\">AND</span> DATEDIFF(NOW(),e.hiredate)<span class=\"operator\">/</span><span class=\"number\">365</span><span class=\"operator\">&lt;</span><span class=\"number\">20</span></span><br><span class=\"line\">  <span class=\"keyword\">THEN</span> e.sal<span class=\"operator\">*</span><span class=\"number\">1.05</span></span><br><span class=\"line\">  <span class=\"keyword\">WHEN</span> d.dname<span class=\"operator\">=</span>&quot;ACCOUNTING&quot;  <span class=\"keyword\">THEN</span> e.sal<span class=\"operator\">+</span><span class=\"number\">300</span></span><br><span class=\"line\">  <span class=\"keyword\">WHEN</span> d.dname<span class=\"operator\">=</span>&quot;RESEARCH&quot; <span class=\"keyword\">AND</span> e.sal<span class=\"operator\">&lt;</span>t.avg <span class=\"keyword\">THEN</span> e.sal<span class=\"operator\">+</span><span class=\"number\">200</span></span><br><span class=\"line\">  <span class=\"keyword\">WHEN</span> e.deptno <span class=\"keyword\">IS</span> <span class=\"keyword\">NULL</span> <span class=\"keyword\">THEN</span> e.sal<span class=\"operator\">+</span><span class=\"number\">100</span></span><br><span class=\"line\">  <span class=\"keyword\">END</span></span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n","categories":["Java数据库","MySQL基础"],"tags":["MySQL"]},{"title":"Maven项目管理","url":"/p/316f.html","content":"<h3 id=\"课程介绍\"><a href=\"#课程介绍\" class=\"headerlink\" title=\"课程介绍\"></a>课程介绍</h3><p> ◇ 介绍Maven的核心特性<br> ◇ 掌握Maven的依赖管理<br> ◇ 掌握Maven的打包方式  </p>\n<h3 id=\"Maven介绍\"><a href=\"#Maven介绍\" class=\"headerlink\" title=\"Maven介绍\"></a>Maven介绍</h3><p> ◇ Maven 是项目管理工具,对软件项目提供构建与依赖管理<br> ◇ Maven是Apache下的Java开源项目<br> ◇ Maven为Java项目提供了统一的管理方式，已成为业界标准  </p>\n<h3 id=\"Maven核心特性\"><a href=\"#Maven核心特性\" class=\"headerlink\" title=\"Maven核心特性\"></a>Maven核心特性</h3><p>◇ 项目设置遵循统一的规则，保证不同开发环境的兼容性 Maven核心特性<br>◇ 强大的依赖管理，项目依赖组件自动下载、自动更新<br>◇ 可扩展的插件机制，使用简单，功能丰富  </p>\n<h3 id=\"Maven的安装与配置\"><a href=\"#Maven的安装与配置\" class=\"headerlink\" title=\"Maven的安装与配置\"></a>Maven的安装与配置</h3><h3 id=\"Maven的坐标\"><a href=\"#Maven的坐标\" class=\"headerlink\" title=\"Maven的坐标\"></a>Maven的坐标</h3><p> ◇ GroupId：机构或者团体的英文，采用”逆向域名”形式书写<br> ◇ ArtifactId：项目名称,说明其用途，例如：cms、oa…<br> ◇ Version：版本号，一般采用”版本+单词”形式，例如：1.0.0.RELEASE  </p>\n<h3 id=\"Maven项目标准结构\"><a href=\"#Maven项目标准结构\" class=\"headerlink\" title=\"Maven项目标准结构\"></a>Maven项目标准结构</h3><p><img src=\"/p/316f/1627634963647-8798bed9-4a2c-4e9b-8873-7bb418fdba6d.png\" class=\"lazyload\" data-srcset=\"/p/316f/1627634963647-8798bed9-4a2c-4e9b-8873-7bb418fdba6d.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"Maven依赖管理\"><a href=\"#Maven依赖管理\" class=\"headerlink\" title=\"Maven依赖管理\"></a>Maven依赖管理</h3><p>◇Maven利用dependency(依赖)自动下载、管理第三发jar<br>◇在pom.xml文件中配置项目依赖的第三方组件<br>◇maven自动将依赖从远程仓库下载至本地仓库，并在工程中引用<br>◇<a href=\"https://search.maven.org/\">maven中央仓库检索网站</a><br>◇pinyin4j将汉字转换为拼音<br> 配置</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.belerweb<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>pinyin4j<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.5.1<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p> 代码</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">\t\tScanner scan = <span class=\"keyword\">new</span> Scanner(System.in);</span><br><span class=\"line\">\t\tString str = scan.nextLine();</span><br><span class=\"line\">\t\tString[] pinyin = PinyinHelper.toHanyuPinyinStringArray(<span class=\"string\">&#x27;李&#x27;</span>); </span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span>(String py : pinyin) &#123;</span><br><span class=\"line\">\t\t\tSystem.out.println(py);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure>\n<p>◇配置多个jar包:依赖本身也依赖于底层jar包，因此有多个jar包</p>\n<h3 id=\"本地仓库与中央仓库\"><a href=\"#本地仓库与中央仓库\" class=\"headerlink\" title=\"本地仓库与中央仓库\"></a>本地仓库与中央仓库</h3><p><img src=\"/p/316f/1627635052884-beae7764-b69b-40ff-8215-a112d76dbd79.png\" class=\"lazyload\" data-srcset=\"/p/316f/1627635052884-beae7764-b69b-40ff-8215-a112d76dbd79.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<p> 本地仓库目录</p>\n<p><img src=\"/p/316f/1627733946275-eab3e214-a8aa-4a33-aa28-3b7371428144.png\" class=\"lazyload\" data-srcset=\"/p/316f/1627733946275-eab3e214-a8aa-4a33-aa28-3b7371428144.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>◇创建备份服务器，提高下载速度</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;repositories&gt;</span><br><span class=\"line\">  &lt;repository&gt;</span><br><span class=\"line\">    &lt;!-- 创建私服的地址 --&gt;</span><br><span class=\"line\">    &lt;id&gt;aliyun&lt;/id&gt;</span><br><span class=\"line\">    &lt;name&gt;aliyun&lt;/name&gt;</span><br><span class=\"line\">    &lt;url&gt;https:<span class=\"comment\">//maven.aliyun.com/repository/public&lt;/url&gt;</span></span><br><span class=\"line\">  &lt;/repository&gt;</span><br><span class=\"line\">&lt;/repositories&gt;</span><br></pre></td></tr></table></figure>\n<h3 id=\"项目打包\"><a href=\"#项目打包\" class=\"headerlink\" title=\"项目打包\"></a>项目打包</h3><p> ◇ Maven可将Java项目打包为jar、war包<br> ◇ Maven项目打包是通过Plugins（插件）技术实现<br> ◇ Maven输出Jar包插件：maven-assembly-plugin<br> ◇ 配置文件</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;build&gt;</span><br><span class=\"line\">  &lt;!-- 配置插件 --&gt;</span><br><span class=\"line\">    &lt;plugins&gt;</span><br><span class=\"line\">      &lt;plugin&gt;</span><br><span class=\"line\">        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</span><br><span class=\"line\">        &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;</span><br><span class=\"line\">        &lt;version&gt;<span class=\"number\">2.5</span><span class=\"number\">.5</span>&lt;/version&gt;</span><br><span class=\"line\">        &lt;configuration&gt;</span><br><span class=\"line\">          &lt;archive&gt;</span><br><span class=\"line\">            &lt;mainfest&gt;</span><br><span class=\"line\">              &lt;mainClass&gt;com.lcg.maven.PinyinTestor&lt;/mainClass&gt;</span><br><span class=\"line\">            &lt;/mainfest&gt;</span><br><span class=\"line\">          &lt;/archive&gt;</span><br><span class=\"line\">          &lt;descriptorRefs&gt;</span><br><span class=\"line\">          &lt;!--  all in one 在打包时会将所有引用的jar合并到输出的jar文件中 --&gt;</span><br><span class=\"line\">            &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;</span><br><span class=\"line\">          &lt;/descriptorRefs&gt;</span><br><span class=\"line\">        &lt;/configuration&gt;</span><br><span class=\"line\">      &lt;/plugin&gt;</span><br><span class=\"line\">    &lt;/plugins&gt;</span><br><span class=\"line\">  &lt;/build&gt;</span><br></pre></td></tr></table></figure>\n<p> ◇ 配置运行<br><img src=\"/p/316f/1627738334274-d9101c2e-e3dd-43be-b703-6cc97ac65fc9.png\" class=\"lazyload\" data-srcset=\"/p/316f/1627738334274-d9101c2e-e3dd-43be-b703-6cc97ac65fc9.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>◇ 打包成功后的运行命令</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">java -jar maven-<span class=\"number\">1</span>-<span class=\"number\">1.0</span><span class=\"number\">.0</span>-RELEASE-jar-with-dependencies.jar</span><br></pre></td></tr></table></figure>\n<h3 id=\"Maven构建Web工程\"><a href=\"#Maven构建Web工程\" class=\"headerlink\" title=\"Maven构建Web工程\"></a>Maven构建Web工程</h3><p>◇创建maven项目-&gt;配置JRE：JRE System Library-&gt;properties-&gt;Workspace default JRE-&gt;Apply and Close<br>◇修改JDK编译级别：工程名-&gt;properties-&gt;Java Compiler-&gt;Compiler compliance level(编译级别):1.8-OK<br>◇在src/main目录下创建webapp文件夹<br>◇工程名-&gt;properties-&gt;Project Facets-&gt;Convert to faceted form-&gt;勾选Dynamic Web Module 3.1-&gt;Runtimes:指定Apache Tomcat-&gt;Further configuration available-&gt;Content directory:src/main/webapp-&gt;勾选web.xml-OK-&gt;Apply and Close</p>\n<h3 id=\"Web工程打包\"><a href=\"#Web工程打包\" class=\"headerlink\" title=\"Web工程打包\"></a>Web工程打包</h3><p>◇<a href=\"https://blog.csdn.net/cx1110162/article/details/78110277?spm=1001.2014.3001.5506\">遇见错误</a>：将jar文件复制到工程的WEB-INF/lib目录即可<br>◇配置：RunConfigurations-&gt;MavenBuild-&gt;NewConfiguration-&gt;Name:build-war-&gt;Base directory:指向工程-&gt;Goals:package-&gt;Apply-&gt;Run<br>◇pom.xml</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;project xmlns=<span class=\"string\">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> </span><br><span class=\"line\">    xmlns:xsi=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> </span><br><span class=\"line\">        xsi:schemaLocation=</span><br><span class=\"line\">          <span class=\"string\">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br><span class=\"line\">  &lt;modelVersion&gt;<span class=\"number\">4.0</span><span class=\"number\">.0</span>&lt;/modelVersion&gt;</span><br><span class=\"line\">  &lt;groupId&gt;com.lcg&lt;/groupId&gt;</span><br><span class=\"line\">  &lt;artifactId&gt;maven&lt;/artifactId&gt;</span><br><span class=\"line\">  &lt;version&gt;<span class=\"number\">1.0</span><span class=\"number\">.0</span>-RELEASE&lt;/version&gt;</span><br><span class=\"line\">    &lt;!-- packaging代表输出的格式 --&gt;</span><br><span class=\"line\">  &lt;packaging&gt;war&lt;/packaging&gt;</span><br><span class=\"line\">  &lt;dependencies&gt;</span><br><span class=\"line\">    &lt;dependency&gt;</span><br><span class=\"line\">\t  &lt;groupId&gt;javax.servlet&lt;/groupId&gt;</span><br><span class=\"line\">\t  &lt;artifactId&gt;jstl&lt;/artifactId&gt;</span><br><span class=\"line\">\t  &lt;version&gt;<span class=\"number\">1.2</span>&lt;/version&gt;</span><br><span class=\"line\">    &lt;/dependency&gt;</span><br><span class=\"line\">  &lt;/dependencies&gt;</span><br><span class=\"line\">  &lt;!-- 自定义解压文件名 --&gt;</span><br><span class=\"line\">  &lt;build&gt;</span><br><span class=\"line\">  \t&lt;finalName&gt;maven-web&lt;/finalName&gt;</span><br><span class=\"line\">  \t&lt;plugins&gt;</span><br><span class=\"line\">  \t\t&lt;plugin&gt;</span><br><span class=\"line\">  \t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</span><br><span class=\"line\">  \t\t\t&lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;</span><br><span class=\"line\">  \t\t\t&lt;version&gt;<span class=\"number\">3.2</span><span class=\"number\">.2</span>&lt;/version&gt;</span><br><span class=\"line\">  \t\t&lt;/plugin&gt;</span><br><span class=\"line\">  \t&lt;/plugins&gt;</span><br><span class=\"line\">  &lt;/build&gt;</span><br><span class=\"line\">&lt;/project&gt;</span><br></pre></td></tr></table></figure>\n<h3 id=\"Maven常用命令\"><a href=\"#Maven常用命令\" class=\"headerlink\" title=\"Maven常用命令\"></a>Maven常用命令</h3><p>◇需要配置环境变量<br>◇在cmd中使用<br><img src=\"/p/316f/1627635155092-1aa7242a-e588-4d42-81df-c93b29c0ceb3.png\" class=\"lazyload\" data-srcset=\"/p/316f/1627635155092-1aa7242a-e588-4d42-81df-c93b29c0ceb3.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"修改本地仓库地址\"><a href=\"#修改本地仓库地址\" class=\"headerlink\" title=\"修改本地仓库地址\"></a>修改本地仓库地址</h3><p>◇打开F:\\JAVA\\tool\\apache-maven-3.6.0\\conf中的settings.xml文件<br>◇修改49-52处的代码</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">修改前 </span><br><span class=\"line\">&lt;!-- localRepository</span><br><span class=\"line\">   | The path to the local repository maven will use to store artifacts.</span><br><span class=\"line\">   |</span><br><span class=\"line\">   | Default: $&#123;user.home&#125;/.m2/repository</span><br><span class=\"line\">  &lt;localRepository&gt;/path/to/local/repo&lt;/localRepository&gt;</span><br><span class=\"line\">  --&gt;</span><br><span class=\"line\">  修改后</span><br><span class=\"line\">    &lt;!-- localRepository</span><br><span class=\"line\">   | The path to the local repository maven will use to store artifacts.</span><br><span class=\"line\">   |</span><br><span class=\"line\">   | Default: $&#123;user.home&#125;/.m2/repository  --&gt;</span><br><span class=\"line\">  &lt;localRepository&gt;G:/maven-repo&lt;/localRepository&gt;</span><br></pre></td></tr></table></figure>\n<p>◇Eclipse中配置：Window-&gt;Preferences-&gt;Maven-&gt;User Settings:选择apache-maven-3.6.0\\conf中的settings.xml文件-&gt;Reindex-Apply and Close</p>\n<h3 id=\"在IDEA中配置Maven\"><a href=\"#在IDEA中配置Maven\" class=\"headerlink\" title=\"在IDEA中配置Maven\"></a>在IDEA中配置Maven</h3><p>◇Settings-&gt;Build,Execution-&gt;Build Tools-&gt;Maven-&gt;Maven home directory: ;User settings file: ;Local repository:<br><img src=\"/p/316f/1627914341482-b8b8d144-9206-48d8-82e5-94b3fa017a28.png\" class=\"lazyload\" data-srcset=\"/p/316f/1627914341482-b8b8d144-9206-48d8-82e5-94b3fa017a28.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>◇创建Maven项目：New Project-&gt;Maven-&gt;Next-&gt;GroupID;ArtifactID;Version-&gt;Next-&gt;Finish<br>◇IDEA关于Maven的快捷键:点击右边的Maven弹出界面,即Maven的常用命令<br><img src=\"/p/316f/1627915088171-0ea5f377-320d-4db9-90c8-30e2f2f06f5b.png\" class=\"lazyload\" data-srcset=\"/p/316f/1627915088171-0ea5f377-320d-4db9-90c8-30e2f2f06f5b.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n","categories":["Java数据库","框架前置知识"],"tags":["Maven"]},{"title":"MyBaits进阶","url":"/p/fb2c.html","content":"<h2 id=\"MyBatis日志管理\"><a href=\"#MyBatis日志管理\" class=\"headerlink\" title=\"MyBatis日志管理\"></a>MyBatis日志管理</h2><h3 id=\"什么是日志\"><a href=\"#什么是日志\" class=\"headerlink\" title=\"什么是日志\"></a>什么是日志</h3><p>◇日志文件是用于记录系统操作事件的记录文件或文件集合<br>◇日志保存历史数据,是诊断问题以及理解系统活动的重要依据  </p>\n<h3 id=\"SLF4j与Logback\"><a href=\"#SLF4j与Logback\" class=\"headerlink\" title=\"SLF4j与Logback\"></a>SLF4j与Logback</h3><p><img src=\"/p/fb2c/1628599313923-5abfc2e2-0d7c-4efe-8078-f5601db8fca6.png\" class=\"lazyload\" data-srcset=\"/p/fb2c/1628599313923-5abfc2e2-0d7c-4efe-8078-f5601db8fca6.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<p><strong>代码示例</strong>​<br>◇配置依赖</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>ch.qos.logback<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>logback-classic<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.2.3<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p> ◇产生的日志(部分)</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\">20:53:41.109 [main] DEBUG goods.selectByTitle - ==&gt;  Preparing: select * from t_goods where title = ? order by title desc </span><br><span class=\"line\">20:53:41.131 [main] DEBUG goods.selectByTitle - ==&gt; Parameters: &#x27;&#x27; or 1=1 or title=&#x27;【德国】爱他美婴幼儿配方奶粉1段800g*2罐 铂金版&#x27;(String)</span><br><span class=\"line\">20:53:41.298 [main] DEBUG goods.selectByTitle - &lt;==      Total: 0</span><br></pre></td></tr></table></figure>\n<p>◇自定义日志格式：在resource目录新建logback.xml文件</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!--ConsoleAppender是指在控制台输出日志 pattern指定日志输出格式，示例格式即</span></span><br><span class=\"line\"><span class=\"comment\">  线程，时间，按5个字符右对齐，说明哪个类产生的日志(最多36字符超过压缩)，具体日志内容 换行 </span></span><br><span class=\"line\"><span class=\"comment\">--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">appender</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;console&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">encoder</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">pattern</span>&gt;</span>[%thread] %d&#123;HH:mm:ss.SSS&#125; %-5level %logger&#123;36&#125; - %msg%n<span class=\"tag\">&lt;/<span class=\"name\">pattern</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">encoder</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">appender</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">        日志输出级别(优先级高到低):</span></span><br><span class=\"line\"><span class=\"comment\">        error: 错误 - 系统的故障日志</span></span><br><span class=\"line\"><span class=\"comment\">        warn: 警告 - 存在风险或使用不当的日志</span></span><br><span class=\"line\"><span class=\"comment\">        info: 一般性消息</span></span><br><span class=\"line\"><span class=\"comment\">        de<span class=\"doctag\">bug:</span> 程序内部用于调试信息</span></span><br><span class=\"line\"><span class=\"comment\">        trace: 程序运行的跟踪信息</span></span><br><span class=\"line\"><span class=\"comment\">     --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">root</span> <span class=\"attr\">level</span>=<span class=\"string\">&quot;debug&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">appender-ref</span> <span class=\"attr\">ref</span>=<span class=\"string\">&quot;console&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">root</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"MyBatis动态SQL\"><a href=\"#MyBatis动态SQL\" class=\"headerlink\" title=\"MyBatis动态SQL\"></a>MyBatis动态SQL</h2><p> ◇动态SQL是指根据参数数据动态组织SQL的技术  </p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;dynamicSQL&quot;</span> <span class=\"attr\">parameterType</span>=<span class=\"string\">&quot;java.util.Map&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;com..Goods&quot;</span>&gt;</span></span><br><span class=\"line\">select * from t_goods</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">where</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">if</span> <span class=\"attr\">test</span>=<span class=\"string\">&quot;categoryId != null&quot;</span>&gt;</span></span><br><span class=\"line\">and category_id = #&#123;categoryId&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">if</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">if</span> <span class=\"attr\">test</span>=<span class=\"string\">&quot;currentPrice != null&quot;</span>&gt;</span></span><br><span class=\"line\">and current_price <span class=\"symbol\">&amp;lt;</span> #&#123;currentPrice&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">if</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">where</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>◇示例代码</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;dynamicSQL&quot;</span> <span class=\"attr\">parameterType</span>=<span class=\"string\">&quot;java.util.Map&quot;</span> </span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;com.lcg.mybatis.entity.Goods&quot;</span>&gt;</span></span><br><span class=\"line\">        select * from t_goods</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">where</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">if</span> <span class=\"attr\">test</span>=<span class=\"string\">&quot;categoryId != null&quot;</span>&gt;</span></span><br><span class=\"line\">              and category_id = #&#123;categoryId&#125;</span><br><span class=\"line\">          <span class=\"tag\">&lt;/<span class=\"name\">if</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">if</span> <span class=\"attr\">test</span>=<span class=\"string\">&quot;currentPrice != null&quot;</span>&gt;</span></span><br><span class=\"line\">              and current_price <span class=\"symbol\">&amp;lt;</span> #&#123;currentPrice&#125;  //小于号转义符</span><br><span class=\"line\">          <span class=\"tag\">&lt;/<span class=\"name\">if</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">where</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    @Test</span><br><span class=\"line\">    public void testDynamicSQL() throws Exception &#123;</span><br><span class=\"line\">        SqlSession session = null;</span><br><span class=\"line\">        try&#123;</span><br><span class=\"line\">            session = MyBatisUtils.openSession();</span><br><span class=\"line\">            Map param = new HashMap();</span><br><span class=\"line\">            param.put(&quot;categoryId&quot;, 44);</span><br><span class=\"line\">            param.put(&quot;currentPrice&quot;, 500);</span><br><span class=\"line\">            //查询条件</span><br><span class=\"line\">            List<span class=\"tag\">&lt;<span class=\"name\">Goods</span>&gt;</span> list = session.selectList(&quot;goods.dynamicSQL&quot;, param);</span><br><span class=\"line\">            for(Goods g:list)&#123;</span><br><span class=\"line\">                System.out.println(g.getTitle() + &quot;:&quot; +</span><br><span class=\"line\">                        g.getCategoryId()  + &quot;:&quot; + g.getCurrentPrice());</span><br><span class=\"line\"></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;catch (Exception e)&#123;</span><br><span class=\"line\">            throw e;</span><br><span class=\"line\">        &#125;finally &#123;</span><br><span class=\"line\">            MyBatisUtils.closeSession(session);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"MyBatis二级缓存\"><a href=\"#MyBatis二级缓存\" class=\"headerlink\" title=\"MyBatis二级缓存\"></a>MyBatis二级缓存</h2><h3 id=\"缓存简介\"><a href=\"#缓存简介\" class=\"headerlink\" title=\"缓存简介\"></a>缓存简介</h3><p>◇我们从数据库中查询到某一条数据后，因为业务的要求还需要这条数据，那么按照原始的方法就还需要在数据库中查询到该数据；因为MySql是将数据存放在硬盘上的，而硬盘的读取访问速度不是特别快；而且我们这里第一次获取和第二次获取记录的时候，都返回相同的数据；因此我们可以在第一次查询数据时，将该数据暂时保存到内存的某一个区域中，第二次查询时直接从内存的对应区域取出即可，因为内存的访问速度快，这样就能够提高查询的速度；在Mybatis中存在了两级缓存；<br>◇ 一级缓存默认开启,缓存的数据范围为SqlSession会话，即在一次SqlSession会话中，对数据库中的某个数据进行重复读取，Mybatis就会利用到这个缓存来提高程序的处理速度；<br>◇ 二级缓存手动开启,属于范围Mapper Namespace ，范围比SqlSession大的多；</p>\n<h3 id=\"缓存的范围\"><a href=\"#缓存的范围\" class=\"headerlink\" title=\"缓存的范围\"></a>缓存的范围</h3><p><img src=\"/p/fb2c/1628648358170-3c4957c8-1a4f-4c0b-9266-d477a41ad6d0.png\" class=\"lazyload\" data-srcset=\"/p/fb2c/1628648358170-3c4957c8-1a4f-4c0b-9266-d477a41ad6d0.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"二级缓存运行规则\"><a href=\"#二级缓存运行规则\" class=\"headerlink\" title=\"二级缓存运行规则\"></a>二级缓存运行规则</h3><p>◇二级开启后默认所有查询操作均使用缓存<br>◇写操作使用commit提交时对该namespace缓存强制清空，保证商品一致性；如第一个用户查询到商品，而第二个用户将此商品名称改了，那么这时候就会将namespace缓存强制清空，第一个用户再次查询该商品时就得从数据库中获取了；<br>◇配置useCache=false可以不用缓存<br>◇在某一sql语句中配置flushCache=true代表执行完该sql语句后强制清空缓存<br>◇代码示例</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//测试一级缓存</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testLv1Cache</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">        SqlSession session = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">try</span>&#123;</span><br><span class=\"line\">            session = MyBatisUtils.openSession();</span><br><span class=\"line\">            <span class=\"comment\">//这里执行了两次sql查询，由于使用了缓存，所以在日志中可以看到只打印出一条sql语句</span></span><br><span class=\"line\">            Goods goods = session.selectOne(<span class=\"string\">&quot;goods.selectById&quot;</span> , <span class=\"number\">1603</span>);</span><br><span class=\"line\">            Goods goods1 = session.selectOne(<span class=\"string\">&quot;goods.selectById&quot;</span> , <span class=\"number\">1603</span>);</span><br><span class=\"line\">            System.out.println(goods.hashCode() + <span class=\"string\">&quot;:&quot;</span> + goods1.hashCode());</span><br><span class=\"line\">        &#125;<span class=\"keyword\">catch</span> (Exception e)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> e;</span><br><span class=\"line\">        &#125;<span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">            MyBatisUtils.closeSession(session);<span class=\"comment\">//关闭了会话</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">try</span>&#123;</span><br><span class=\"line\">            session = MyBatisUtils.openSession();</span><br><span class=\"line\">            <span class=\"comment\">//由于前面关闭了会话，这里是新的会话，需要对数据库进行查询</span></span><br><span class=\"line\">            Goods goods = session.selectOne(<span class=\"string\">&quot;goods.selectById&quot;</span> , <span class=\"number\">1603</span>);</span><br><span class=\"line\">            session.commit();<span class=\"comment\">//commit提交时对该namespace缓存强制清空</span></span><br><span class=\"line\">            <span class=\"comment\">//由于前面对缓存进行了强制清空，所以还需要访问数据库</span></span><br><span class=\"line\">            Goods goods1 = session.selectOne(<span class=\"string\">&quot;goods.selectById&quot;</span> , <span class=\"number\">1603</span>);</span><br><span class=\"line\">            System.out.println(goods.hashCode() + <span class=\"string\">&quot;:&quot;</span> + goods1.hashCode());</span><br><span class=\"line\">        &#125;<span class=\"keyword\">catch</span> (Exception e)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> e;</span><br><span class=\"line\">        &#125;<span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">            MyBatisUtils.closeSession(session);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">//测试二级缓存 </span></span><br><span class=\"line\"> <span class=\"comment\">//在mapper标签下添加cache标签</span></span><br><span class=\"line\">&lt;!--开启了二级缓存</span><br><span class=\"line\">        eviction是缓存的清除策略,当缓存对象数量达到上限后,自动触发对应算法对缓存对象清除</span><br><span class=\"line\">            <span class=\"number\">1.</span>LRU – 最近最久未使用:移除最长时间不被使用的对象。</span><br><span class=\"line\">            O1 O2 O3 O4 .. O512</span><br><span class=\"line\">            <span class=\"number\">14</span> <span class=\"number\">99</span> <span class=\"number\">83</span> <span class=\"number\">1</span>     <span class=\"number\">893</span></span><br><span class=\"line\">            <span class=\"number\">2.</span>FIFO – 先进先出:按对象进入缓存的顺序来移除它们。</span><br><span class=\"line\">            <span class=\"number\">3.</span>SOFT – 软引用:移除基于垃圾收集器状态和软引用规则的对象。</span><br><span class=\"line\">            <span class=\"number\">4.</span>WEAK – 弱引用:更积极的移除基于垃圾收集器状态和弱引用规则的对象。</span><br><span class=\"line\">            <span class=\"number\">5.</span>LFU - 最近最少使用：移除最近访问频率最低的对象</span><br><span class=\"line\">      flushInterval代表间隔多长时间自动清空缓存，单位毫秒，<span class=\"number\">600000</span>毫秒为<span class=\"number\">10</span>分钟</span><br><span class=\"line\">    --&gt;</span><br><span class=\"line\">    &lt;cache eviction=<span class=\"string\">&quot;LRU&quot;</span> flushInterval=<span class=\"string\">&quot;600000&quot;</span> size=<span class=\"string\">&quot;512&quot;</span> readOnly=<span class=\"string\">&quot;true&quot;</span>/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testLv2Cache</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">        SqlSession session = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">try</span>&#123;</span><br><span class=\"line\">            session = MyBatisUtils.openSession();</span><br><span class=\"line\">            Goods goods = session.selectOne(<span class=\"string\">&quot;goods.selectById&quot;</span> , <span class=\"number\">1603</span>);</span><br><span class=\"line\">            System.out.println(goods.hashCode());</span><br><span class=\"line\">        &#125;<span class=\"keyword\">catch</span> (Exception e)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> e;</span><br><span class=\"line\">        &#125;<span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">            MyBatisUtils.closeSession(session);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">try</span>&#123;</span><br><span class=\"line\">            <span class=\"comment\">//这里虽然是新的会话，但是由于是二级缓存，所以还是可以从内存中提取数据；</span></span><br><span class=\"line\">            session = MyBatisUtils.openSession();</span><br><span class=\"line\">            Goods goods = session.selectOne(<span class=\"string\">&quot;goods.selectById&quot;</span> , <span class=\"number\">1603</span>);</span><br><span class=\"line\">            System.out.println(goods.hashCode());</span><br><span class=\"line\">        &#125;<span class=\"keyword\">catch</span> (Exception e)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> e;</span><br><span class=\"line\">        &#125;<span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">            MyBatisUtils.closeSession(session);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<p>◇缓存标签的属性：<br>eviction是缓存的清除策略,当缓存对象数量达到上限后,自动触发对应算法对缓存对象清除<br>            1.LRU – 最近最久未使用:移除最长时间不被使用的对象。<br>            O1 O2 O3 O4 .. O512<br>            14 99 83 1     893<br>            2.FIFO – 先进先出:按对象进入缓存的顺序来移除它们。<br>            3.SOFT – 软引用:移除基于垃圾收集器状态和软引用规则的对象。<br>            4.WEAK – 弱引用:更积极的移除基于垃圾收集器状态和弱引用规则的对象。<br> flushInterval代表间隔多长时间自动清空缓存，单位毫秒<br>size 缓存存储上限，用于保存对象或集合(1个集合算1个对象)的数量上限<br>readOnly 设置为true，代表返回只读缓存，每次从缓存取出的是缓存对象本身，这种执行效率较高<br>                设置为false，代表每次取出的是缓存对象的”副本”，每一次取出的对象都是不同的，这种安全性较高<br>◇一些缓存相关的属性：useCache=”false”代表查询结果不被放入缓存，常用于读取全部数据的SQL语句中<br>执行完insert语句需要立即清空缓存，flushCache=”true”在sql执行后强制清空缓存 </p>\n<h2 id=\"MyBatis多表级联查询\"><a href=\"#MyBatis多表级联查询\" class=\"headerlink\" title=\"MyBatis多表级联查询\"></a>MyBatis多表级联查询</h2><h3 id=\"实体关系分析\"><a href=\"#实体关系分析\" class=\"headerlink\" title=\"实体关系分析\"></a>实体关系分析</h3><p><img src=\"/p/fb2c/1628753256241-93038a3b-4c03-4530-ace1-ddb89972beda.png\" class=\"lazyload\" data-srcset=\"/p/fb2c/1628753256241-93038a3b-4c03-4530-ace1-ddb89972beda.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"商品和详情对象关联查询\"><a href=\"#商品和详情对象关联查询\" class=\"headerlink\" title=\"商品和详情对象关联查询\"></a>商品和详情对象关联查询</h3><p><strong>一对多</strong><br>◇增加实体类GoodsDetail</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\">public class GoodsDetail &#123;</span><br><span class=\"line\">    private Integer gdId;</span><br><span class=\"line\">    private Integer goodsId;</span><br><span class=\"line\">    private String gdPicUrl;</span><br><span class=\"line\">    private Integer gdOrder;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>◇配置</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">mapper</span></span></span><br><span class=\"line\"><span class=\"meta\">        <span class=\"meta-keyword\">PUBLIC</span> <span class=\"meta-string\">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">        <span class=\"meta-string\">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mapper</span> <span class=\"attr\">namespace</span>=<span class=\"string\">&quot;goodsDetail&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;selectByGoodsId&quot;</span> <span class=\"attr\">parameterType</span>=<span class=\"string\">&quot;Integer&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;com.lcg.mybatis.entity.GoodsDetail&quot;</span>&gt;</span></span><br><span class=\"line\">        select * from t_goods_detail where goods_id = #&#123;value&#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>◇表达一个Goods对象有多个GoodsDetail对象：在Goods类中增加**private **List<GoodsDetail> <strong>goodsDetails</strong>;<br>◇Goods.xml中</GoodsDetail></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">    resultMap可用于说明一对多或者多对一以及多表查询(前面学过)的映射逻辑</span></span><br><span class=\"line\"><span class=\"comment\">    id 是resultMap属性引用的标志,需要和其他resultMap区分开</span></span><br><span class=\"line\"><span class=\"comment\">    type 在一对多的关系中指向One的实体(Goods)</span></span><br><span class=\"line\"><span class=\"comment\">--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">resultMap</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;rmGoods1&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;com.lcg.mybatis.entity.Goods&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 映射goods对象的主键到goods_id字段 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">id</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;goods_id&quot;</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;goodsId&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">        collection(集合)专用于描述Goods实体中的goodsDetails这个List数据从哪来的; 其含义是,在</span></span><br><span class=\"line\"><span class=\"comment\">        select * from t_goods limit 0,10 得到结果后,对所有Goods对象遍历得到goods_id字段值,</span></span><br><span class=\"line\"><span class=\"comment\">        并代入到goodsDetail命名空间的 selectByGoodsId的SQL中执行查询,</span></span><br><span class=\"line\"><span class=\"comment\">        将得到的&quot;商品详情&quot;集合赋值给goodsDetails 这个List对象.</span></span><br><span class=\"line\"><span class=\"comment\">    --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">collection</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;goodsDetails&quot;</span> <span class=\"attr\">select</span>=<span class=\"string\">&quot;goodsDetail.selectByGoodsId&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                <span class=\"attr\">column</span>=<span class=\"string\">&quot;goods_id&quot;</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">resultMap</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;selectOneToMany&quot;</span> <span class=\"attr\">resultMap</span>=<span class=\"string\">&quot;rmGoods1&quot;</span>&gt;</span></span><br><span class=\"line\">    select * from t_goods limit 0,10</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>◇在核心配置文件(mybatis-config.xml)中进行注册</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mappers</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">mapper</span> <span class=\"attr\">resource</span>=<span class=\"string\">&quot;mappers/goods.xml&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">mapper</span> <span class=\"attr\">resource</span>=<span class=\"string\">&quot;mappers/goods_detail.xml&quot;</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>◇测试</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\">@Test</span><br><span class=\"line\">    public void testOneToMany() throws Exception &#123;</span><br><span class=\"line\">        SqlSession session = null;</span><br><span class=\"line\">        try &#123;</span><br><span class=\"line\">            session = MyBatisUtils.openSession();</span><br><span class=\"line\">            List<span class=\"tag\">&lt;<span class=\"name\">Goods</span>&gt;</span> list = session.selectList(&quot;goods.selectOneToMany&quot;);</span><br><span class=\"line\">            for(Goods goods:list) &#123;</span><br><span class=\"line\">               System.out.println(goods.getTitle() + &quot;:&quot; + goods.getGoodsDetails().size());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; catch (Exception e) &#123;</span><br><span class=\"line\">            throw e;</span><br><span class=\"line\">        &#125; finally &#123;</span><br><span class=\"line\">            MyBatisUtils.closeSession(session);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<p><strong>多对一</strong><br>◇在实体类GoodsDetail中增加**private **Goods <strong>goods</strong>;<br>◇在goods_detail.xml文件中进行对像关联的描述</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">resultMap</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;rmGoodsDetail&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;com.lcg.mybatis.entity.GoodsDetail&quot;</span>&gt;</span></span><br><span class=\"line\">       <span class=\"comment\">&lt;!--主键关联--&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">id</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;gd_id&quot;</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;gdId&quot;</span>/&gt;</span></span><br><span class=\"line\">       <span class=\"comment\">&lt;!--结果关联--&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">result</span> <span class=\"attr\">column</span>=<span class=\"string\">&quot;goods_id&quot;</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;goodsId&quot;</span>/&gt;</span></span><br><span class=\"line\">       <span class=\"comment\">&lt;!--association关联标签，用于多对一--&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">association</span> <span class=\"attr\">property</span>=<span class=\"string\">&quot;goods&quot;</span> <span class=\"attr\">select</span>=<span class=\"string\">&quot;goods.selectById&quot;</span> </span></span><br><span class=\"line\"><span class=\"tag\">                    <span class=\"attr\">column</span>=<span class=\"string\">&quot;goods_id&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">association</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">resultMap</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;selectManyToOne&quot;</span> <span class=\"attr\">resultMap</span>=<span class=\"string\">&quot;rmGoodsDetail&quot;</span>&gt;</span></span><br><span class=\"line\">       select * from t_goods_detail limit 0,20</span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>◇测试  项目见F:mybatis;</p>\n<h2 id=\"分页插件PageHelper\"><a href=\"#分页插件PageHelper\" class=\"headerlink\" title=\"分页插件PageHelper\"></a>分页插件PageHelper</h2><h3 id=\"分页查询的麻烦事\"><a href=\"#分页查询的麻烦事\" class=\"headerlink\" title=\"分页查询的麻烦事\"></a>分页查询的麻烦事</h3><p>◇当前页数据查询 - select * from tab limit 0,10<br>◇总记录数查询 - select count(*) from tab<br>◇程序计算总页数、上一页页码、下一页页码<br>◇MyBatis分页插件PageHelper<a href=\"https://pagehelper.github.io/\">官方网站</a></p>\n<h3 id=\"pageHelper使用流程\"><a href=\"#pageHelper使用流程\" class=\"headerlink\" title=\"pageHelper使用流程\"></a>pageHelper使用流程</h3><p>◇maven引入PageHelper与jsqlparser </p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\">//pom.xml中</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.github.pagehelper<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>pagehelper<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>5.1.10<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.github.jsqlparser<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jsqlparser<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>◇mybatis-config.xml增加Plugin配置 </p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">plugin</span> <span class=\"attr\">interceptor</span>=<span class=\"string\">&quot;com.github.pagehelper.PageInterceptor&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--设置数据类型 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;helperDialect&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;mysql&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--分页合理化 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;reasonable&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;true&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">plugins</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>◇代码中使用PageHelper.startPage()自动分页  </p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;selectPage&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;com.lcg.mybatis.entity.Goods&quot;</span>&gt;</span></span><br><span class=\"line\">        select * from t_goods where current_price <span class=\"symbol\">&amp;lt;</span> 1000</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\">@Test</span><br><span class=\"line\">    public void testSelectPage() throws Exception &#123;</span><br><span class=\"line\">        SqlSession session = null;</span><br><span class=\"line\">        try &#123;</span><br><span class=\"line\">            session = MyBatisUtils.openSession();</span><br><span class=\"line\">            /*startPage方法会自动将下一次查询进行分页*/</span><br><span class=\"line\">            PageHelper.startPage(2,10);</span><br><span class=\"line\">            Page<span class=\"tag\">&lt;<span class=\"name\">Goods</span>&gt;</span> page = (Page) session.selectList(&quot;goods.selectPage&quot;);</span><br><span class=\"line\">            System.out.println(&quot;总的页数:&quot; + page.getPages());</span><br><span class=\"line\">            System.out.println(&quot;总记录数:&quot; + page.getTotal());</span><br><span class=\"line\">            System.out.println(&quot;开始行号:&quot; + page.getStartRow());</span><br><span class=\"line\">            System.out.println(&quot;结束行号:&quot; + page.getEndRow());</span><br><span class=\"line\">            System.out.println(&quot;当前页码:&quot; + page.getPageNum());</span><br><span class=\"line\">            List<span class=\"tag\">&lt;<span class=\"name\">Goods</span>&gt;</span> data = page.getResult();//当前页数据</span><br><span class=\"line\">            for (Goods g : data) &#123;</span><br><span class=\"line\">                System.out.println(g.getTitle());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            System.out.println(&quot;&quot;);</span><br><span class=\"line\">        &#125; catch (Exception e) &#123;</span><br><span class=\"line\">            throw e;</span><br><span class=\"line\">        &#125; finally &#123;</span><br><span class=\"line\">            MyBatisUtils.closeSession(session);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"不同数据库的分页实现\"><a href=\"#不同数据库的分页实现\" class=\"headerlink\" title=\"不同数据库的分页实现\"></a>不同数据库的分页实现</h2><h3 id=\"MySQL分页\"><a href=\"#MySQL分页\" class=\"headerlink\" title=\"MySQL分页\"></a>MySQL分页</h3><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\">//第一个参数代表起始行号，第二个是偏移量</span><br><span class=\"line\">select * from table limit 10,20;</span><br></pre></td></tr></table></figure>\n<h3 id=\"Oracle\"><a href=\"#Oracle\" class=\"headerlink\" title=\"Oracle\"></a>Oracle</h3><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> t3.<span class=\"operator\">*</span> <span class=\"keyword\">from</span> (</span><br><span class=\"line\"> <span class=\"keyword\">select</span> t2.<span class=\"operator\">*</span>, rownum <span class=\"keyword\">as</span> row_num <span class=\"keyword\">from</span> ( <span class=\"comment\">--rownum是伪列：无需声明直接使用的列，将前20条数据筛选</span></span><br><span class=\"line\"> <span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> <span class=\"keyword\">table</span> <span class=\"keyword\">order</span> <span class=\"keyword\">by</span> id <span class=\"keyword\">asc</span> <span class=\"comment\">--用于查询</span></span><br><span class=\"line\"> ) t2 <span class=\"keyword\">where</span> rownum<span class=\"operator\">&lt;=</span><span class=\"number\">20</span></span><br><span class=\"line\">) t3 </span><br><span class=\"line\"><span class=\"keyword\">where</span> t2.row_num<span class=\"operator\">&gt;</span><span class=\"number\">11</span> <span class=\"comment\">--第三层嵌套用于起始位置的筛选</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"SQL-Server-2000\"><a href=\"#SQL-Server-2000\" class=\"headerlink\" title=\"SQL Server 2000\"></a>SQL Server 2000</h3><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> top <span class=\"number\">3</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> <span class=\"keyword\">table</span> <span class=\"comment\">--top语句在sql语句执行完后获取前几条数据</span></span><br><span class=\"line\"><span class=\"keyword\">where</span> </span><br><span class=\"line\"> id <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> </span><br><span class=\"line\"> (<span class=\"keyword\">select</span> top <span class=\"number\">15</span> id <span class=\"keyword\">from</span> <span class=\"keyword\">table</span>)</span><br></pre></td></tr></table></figure>\n<h3 id=\"SQL-Server-2012\"><a href=\"#SQL-Server-2012\" class=\"headerlink\" title=\"SQL Server 2012+\"></a>SQL Server 2012+</h3><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> <span class=\"keyword\">table</span> <span class=\"keyword\">order</span> <span class=\"keyword\">by</span> id </span><br><span class=\"line\"> <span class=\"keyword\">offset</span> <span class=\"number\">4</span> <span class=\"keyword\">rows</span> <span class=\"keyword\">fetch</span> next <span class=\"number\">5</span> <span class=\"keyword\">rows</span> <span class=\"keyword\">only</span> <span class=\"comment\">--offset偏移量 fetch next向后取多少行</span></span><br><span class=\"line\"> <span class=\"comment\">--若id为1的话即从第5(1+4)行开始向后取5条数据</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"MyBatis配置C3P0连接池\"><a href=\"#MyBatis配置C3P0连接池\" class=\"headerlink\" title=\"MyBatis配置C3P0连接池\"></a>MyBatis配置C3P0连接池</h2><p>◇pom.xml进行配置</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"operator\">&lt;</span>dependency<span class=\"operator\">&gt;</span></span><br><span class=\"line\">    <span class=\"operator\">&lt;</span>groupId<span class=\"operator\">&gt;</span>com.mchange<span class=\"operator\">&lt;</span><span class=\"operator\">/</span>groupId<span class=\"operator\">&gt;</span></span><br><span class=\"line\">    <span class=\"operator\">&lt;</span>artifactId<span class=\"operator\">&gt;</span>c3p0<span class=\"operator\">&lt;</span><span class=\"operator\">/</span>artifactId<span class=\"operator\">&gt;</span></span><br><span class=\"line\">    <span class=\"operator\">&lt;</span>version<span class=\"operator\">&gt;</span><span class=\"number\">0.9</span><span class=\"number\">.5</span><span class=\"number\">.4</span><span class=\"operator\">&lt;</span><span class=\"operator\">/</span>version<span class=\"operator\">&gt;</span></span><br><span class=\"line\"><span class=\"operator\">&lt;</span><span class=\"operator\">/</span>dependency<span class=\"operator\">&gt;</span></span><br></pre></td></tr></table></figure>\n<p>◇在mybatis创建datasoutce包，再新建C3P0DataSourceFactory类，继承自UnpooledDataSourceFactory以便于连接</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * C3P0与MyBatis兼容使用的数据源工厂类</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">public class C3P0DataSourceFactory extends UnpooledDataSourceFactory &#123;</span><br><span class=\"line\">    public C3P0DataSourceFactory()&#123;</span><br><span class=\"line\">        this.dataSource <span class=\"operator\">=</span> <span class=\"keyword\">new</span> ComboPooledDataSource();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>◇在mybatis-config.xml配置文件中将<dataSource>的type改为com.lcg.mybatis.datasource.C3P0DataSourceFactory;因为不同的连接池对属性的命名规则不同，所以有以下更改：driver-&gt;driverClass , url-&gt;jdbcUrl , username-&gt;user</dataSource></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dataSource</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;com.lcg.mybatis.datasource.C3P0DataSourceFactory&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;driverClass&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;jdbcUrl&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;user&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;root&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;password&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;www.LCG.com&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;initialPoolSize&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;5&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;maxPoolSize&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;20&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;minPoolSize&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;5&quot;</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dataSource</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"MyBatis批处理\"><a href=\"#MyBatis批处理\" class=\"headerlink\" title=\"MyBatis批处理\"></a>MyBatis批处理</h2><p>◇goods.xml增加批处理的SQL语句</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"> <span class=\"comment\">&lt;!--INSERT INTO table--&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--VALUES (&quot;a&quot; , &quot;a1&quot; , &quot;a2&quot;),(&quot;b&quot; , &quot;b1&quot; , &quot;b2&quot;),(....)--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">insert</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;batchInsert&quot;</span> <span class=\"attr\">parameterType</span>=<span class=\"string\">&quot;java.util.List&quot;</span>&gt;</span></span><br><span class=\"line\">        INSERT INTO t_goods(title, sub_title, original_cost, </span><br><span class=\"line\">      current_price, discount, is_free_delivery, category_id)</span><br><span class=\"line\">        VALUES</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">foreach</span> <span class=\"attr\">collection</span>=<span class=\"string\">&quot;list&quot;</span> <span class=\"attr\">item</span>=<span class=\"string\">&quot;item&quot;</span> <span class=\"attr\">index</span>=<span class=\"string\">&quot;index&quot;</span> <span class=\"attr\">separator</span>=<span class=\"string\">&quot;,&quot;</span>&gt;</span></span><br><span class=\"line\">          (#&#123;item.title&#125;,#&#123;item.subTitle&#125;, #&#123;item.originalCost&#125;,</span><br><span class=\"line\">        #&#123;item.currentPrice&#125;, #&#123;item.discount&#125;, #&#123;item.isFreeDelivery&#125;, #&#123;item.categoryId&#125;)</span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">foreach</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">insert</span>&gt;</span></span><br><span class=\"line\">    @Test</span><br><span class=\"line\">    public void testBatchInsert() throws Exception &#123;</span><br><span class=\"line\">        SqlSession session = null;</span><br><span class=\"line\">        try &#123;</span><br><span class=\"line\">            long st = new Date().getTime();</span><br><span class=\"line\">            session = MyBatisUtils.openSession();</span><br><span class=\"line\">            List list = new ArrayList();</span><br><span class=\"line\">            for (int i = 0; i &lt; 10000; i++) &#123;</span><br><span class=\"line\">                Goods goods = new Goods();</span><br><span class=\"line\">                goods.setTitle(&quot;测试商品&quot;);</span><br><span class=\"line\">                goods.setSubTitle(&quot;测试子标题&quot;);</span><br><span class=\"line\">                goods.setOriginalCost(200f);</span><br><span class=\"line\">                goods.setCurrentPrice(100f);</span><br><span class=\"line\">                goods.setDiscount(0.5f);</span><br><span class=\"line\">                goods.setIsFreeDelivery(1);</span><br><span class=\"line\">                goods.setCategoryId(43);</span><br><span class=\"line\">                //insert()方法返回值代表本次成功插入的记录总数</span><br><span class=\"line\">                list.add(goods);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            session.insert(&quot;goods.batchInsert&quot;, list);</span><br><span class=\"line\">            session.commit();//提交事务数据</span><br><span class=\"line\">            long et = new Date().getTime();</span><br><span class=\"line\">            System.out.println(&quot;执行时间:&quot; + (et - st) + &quot;毫秒&quot;);</span><br><span class=\"line\">//            System.out.println(goods.getGoodsId());</span><br><span class=\"line\">        &#125; catch (Exception e) &#123;</span><br><span class=\"line\">            if (session != null) &#123;</span><br><span class=\"line\">                session.rollback();//回滚事务</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            throw e;</span><br><span class=\"line\">        &#125; finally &#123;</span><br><span class=\"line\">            MyBatisUtils.closeSession(session);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<p>◇批量插入数据的局限：①无法获得插入数据的id；②批量生成的SQL太长，可能会被服务器拒绝<br>◇批量删除</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--delete from t_goods where goods_id in (1920,1921,...)--&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">delete</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;batchDelete&quot;</span> <span class=\"attr\">parameterType</span>=<span class=\"string\">&quot;java.util.List&quot;</span>&gt;</span></span><br><span class=\"line\">        DELETE FROM t_goods WHERE goods_id in</span><br><span class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">foreach</span> <span class=\"attr\">collection</span>=<span class=\"string\">&quot;list&quot;</span> <span class=\"attr\">item</span>=<span class=\"string\">&quot;item&quot;</span> <span class=\"attr\">index</span>=<span class=\"string\">&quot;index&quot;</span> <span class=\"attr\">open</span>=<span class=\"string\">&quot;(&quot;</span> <span class=\"attr\">close</span>=<span class=\"string\">&quot;)&quot;</span> <span class=\"attr\">separator</span>=<span class=\"string\">&quot;,&quot;</span>&gt;</span></span><br><span class=\"line\">           #&#123;item&#125;</span><br><span class=\"line\">     <span class=\"tag\">&lt;/<span class=\"name\">foreach</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">delete</span>&gt;</span></span><br><span class=\"line\">    @Test</span><br><span class=\"line\">    public void testBatchDelete() throws Exception &#123;</span><br><span class=\"line\">        SqlSession session = null;</span><br><span class=\"line\">        try &#123;</span><br><span class=\"line\">            long st = new Date().getTime();</span><br><span class=\"line\">            session = MyBatisUtils.openSession();</span><br><span class=\"line\">            List list = new ArrayList();</span><br><span class=\"line\">            list.add(1920);</span><br><span class=\"line\">            list.add(1921);</span><br><span class=\"line\">            list.add(1922);</span><br><span class=\"line\">            session.delete(&quot;goods.batchDelete&quot;, list);</span><br><span class=\"line\">            session.commit();//提交事务数据</span><br><span class=\"line\">            long et = new Date().getTime();</span><br><span class=\"line\">            System.out.println(&quot;执行时间:&quot; + (et - st) + &quot;毫秒&quot;);</span><br><span class=\"line\">//          System.out.println(goods.getGoodsId());</span><br><span class=\"line\">        &#125; catch (Exception e) &#123;</span><br><span class=\"line\">            if (session != null) &#123;</span><br><span class=\"line\">                session.rollback();//回滚事务</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            throw e;</span><br><span class=\"line\">        &#125; finally &#123;</span><br><span class=\"line\">            MyBatisUtils.closeSession(session);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"MyBatis注解开发\"><a href=\"#MyBatis注解开发\" class=\"headerlink\" title=\"MyBatis注解开发\"></a>MyBatis注解开发</h2><h3 id=\"Mybatis常用注解\"><a href=\"#Mybatis常用注解\" class=\"headerlink\" title=\"Mybatis常用注解\"></a>Mybatis常用注解</h3><p>◇把原有放在xml的标签语句放在程序中<br><img src=\"/p/fb2c/1628925337535-f97712fe-fea0-4be2-87bd-c66e102d765b.png\" class=\"lazyload\" data-srcset=\"/p/fb2c/1628925337535-f97712fe-fea0-4be2-87bd-c66e102d765b.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>◇创建dao包，然后创建GoodsDAO接口</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">GoodsDAO</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Select(&quot;select * from t_goods where current_price between  </span></span><br><span class=\"line\"><span class=\"meta\">        #&#123;min&#125; and #&#123;max&#125; order by current_price limit 0,#&#123;limt&#125;&quot;)</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> List&lt;Goods&gt; <span class=\"title\">selectByPriceRange</span><span class=\"params\">(<span class=\"meta\">@Param(&quot;min&quot;)</span> Float min ,</span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">      <span class=\"meta\">@Param(&quot;max&quot;)</span> Float max ,<span class=\"meta\">@Param(&quot;limt&quot;)</span> Integer limt)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Insert(&quot;INSERT INTO t_goods(title, sub_title, original_cost,</span></span><br><span class=\"line\"><span class=\"meta\">      current_price, discount, is_free_delivery, category_id)</span></span><br><span class=\"line\"><span class=\"meta\">      VALUES (#&#123;title&#125; , #&#123;subTitle&#125; , #&#123;originalCost&#125;, #&#123;currentPrice&#125;, </span></span><br><span class=\"line\"><span class=\"meta\">      #&#123;discount&#125;, #&#123;isFreeDelivery&#125;, #&#123;categoryId&#125;)&quot;)</span></span><br><span class=\"line\">    <span class=\"comment\">//&lt;selectKey&gt;</span></span><br><span class=\"line\">    <span class=\"meta\">@SelectKey(statement = &quot;select last_insert_id()&quot; , </span></span><br><span class=\"line\"><span class=\"meta\">      before = false , keyProperty = &quot;goodsId&quot; , resultType = Integer.class)</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">insert</span><span class=\"params\">(Goods goods)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Select(&quot;select * from t_goods&quot;)</span></span><br><span class=\"line\">    <span class=\"comment\">//&lt;resultMap&gt;</span></span><br><span class=\"line\">    <span class=\"meta\">@Results(&#123;</span></span><br><span class=\"line\"><span class=\"meta\">            //&lt;id&gt;</span></span><br><span class=\"line\"><span class=\"meta\">          @Result(column = &quot;goods_id&quot; ,property = &quot;goodsId&quot; , id = true) ,</span></span><br><span class=\"line\"><span class=\"meta\">            //&lt;result&gt;</span></span><br><span class=\"line\"><span class=\"meta\">            @Result(column = &quot;title&quot; ,property = &quot;title&quot;),</span></span><br><span class=\"line\"><span class=\"meta\">            @Result(column = &quot;current_price&quot; ,property = &quot;currentPrice&quot;)</span></span><br><span class=\"line\"><span class=\"meta\">    &#125;)</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> List&lt;GoodsDTO&gt; <span class=\"title\">selectAll</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>◇在核心配置文件mybatis-config.xml中进行相应说明</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mappers</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--&lt;mapper class=&quot;com.lcg.mybatis.dao.GoodsDAO&quot;/&gt; 指向接口，下为简便方法--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">package</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;com.lcg.mybatis.dao&quot;</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>◇测试类</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testSelectByPriceRange</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">        SqlSession session = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">try</span>&#123;</span><br><span class=\"line\">            session = MyBatisUtils.openSession();</span><br><span class=\"line\">            <span class=\"comment\">//传入类对象</span></span><br><span class=\"line\">            GoodsDAO goodsDAO = session.getMapper(GoodsDAO.class);</span><br><span class=\"line\">            List&lt;Goods&gt; list = goodsDAO.selectByPriceRange(<span class=\"number\">100f</span>, <span class=\"number\">500f</span>, <span class=\"number\">20</span>);</span><br><span class=\"line\">            System.out.println(list.size());</span><br><span class=\"line\">        &#125;<span class=\"keyword\">catch</span> (Exception e)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> e;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">            MyBatisUtils.closeSession(session);</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 新增数据</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@throws</span> Exception</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testInsert</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">        SqlSession session = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">try</span>&#123;</span><br><span class=\"line\">            session = MyBatisUtils.openSession();</span><br><span class=\"line\">            Goods goods = <span class=\"keyword\">new</span> Goods();</span><br><span class=\"line\">            goods.setTitle(<span class=\"string\">&quot;测试商品&quot;</span>);</span><br><span class=\"line\">            goods.setSubTitle(<span class=\"string\">&quot;测试子标题&quot;</span>);</span><br><span class=\"line\">            goods.setOriginalCost(<span class=\"number\">200f</span>);</span><br><span class=\"line\">            goods.setCurrentPrice(<span class=\"number\">100f</span>);</span><br><span class=\"line\">            goods.setDiscount(<span class=\"number\">0.5f</span>);</span><br><span class=\"line\">            goods.setIsFreeDelivery(<span class=\"number\">1</span>);</span><br><span class=\"line\">            goods.setCategoryId(<span class=\"number\">43</span>);</span><br><span class=\"line\">            GoodsDAO goodsDAO = session.getMapper(GoodsDAO.class);</span><br><span class=\"line\">            <span class=\"comment\">//insert()方法返回值代表本次成功插入的记录总数</span></span><br><span class=\"line\">            <span class=\"keyword\">int</span> num = goodsDAO.insert(goods);</span><br><span class=\"line\">            session.commit();<span class=\"comment\">//提交事务数据</span></span><br><span class=\"line\">            System.out.println(goods.getGoodsId());</span><br><span class=\"line\">        &#125;<span class=\"keyword\">catch</span> (Exception e)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(session != <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">                session.rollback();<span class=\"comment\">//回滚事务</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> e;</span><br><span class=\"line\">        &#125;<span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">            MyBatisUtils.closeSession(session);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">testSelectAll</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</span><br><span class=\"line\">        SqlSession session = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">try</span>&#123;</span><br><span class=\"line\">            session = MyBatisUtils.openSession();</span><br><span class=\"line\">            GoodsDAO goodsDAO = session.getMapper(GoodsDAO.class);</span><br><span class=\"line\">            List&lt;GoodsDTO&gt; list = goodsDAO.selectAll();</span><br><span class=\"line\">            System.out.println(list.size());</span><br><span class=\"line\">        &#125;<span class=\"keyword\">catch</span> (Exception e)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> e;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">            MyBatisUtils.closeSession(session);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n","categories":["Java数据库","MyBaits"],"tags":["MyBaits"]},{"title":"MySQL基本操作","url":"/p/a881.html","content":"<h2 id=\"数据操作语言：INSERT语句\"><a href=\"#数据操作语言：INSERT语句\" class=\"headerlink\" title=\"数据操作语言：INSERT语句\"></a>数据操作语言：INSERT语句</h2><h3 id=\"INSERT语句\"><a href=\"#INSERT语句\" class=\"headerlink\" title=\"INSERT语句\"></a>INSERT语句</h3><p> ◇ INSERT语句可以向数据表写入记录，可以是一条记录，也可以是多条记录  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> 表名 ( 字段<span class=\"number\">1</span>, 字段<span class=\"number\">2</span>, …… ) </span><br><span class=\"line\"><span class=\"keyword\">VALUES</span> ( 值<span class=\"number\">1</span>, 值<span class=\"number\">2</span>, …… ) ;</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> 表名 ( 字段<span class=\"number\">1</span>, 字段<span class=\"number\">2</span>, …… ) </span><br><span class=\"line\"><span class=\"keyword\">VALUES</span> ( 值<span class=\"number\">1</span>, 值<span class=\"number\">2</span>, …… ) , ( 值<span class=\"number\">1</span>, 值<span class=\"number\">2</span>, …… ) ;<span class=\"operator\">/</span><span class=\"operator\">/</span>插入多条记录</span><br></pre></td></tr></table></figure>\n<h3 id=\"INSERT语句方言\"><a href=\"#INSERT语句方言\" class=\"headerlink\" title=\"INSERT语句方言\"></a>INSERT语句方言</h3><p> ◇ MYSQL的INSERT语句还有一种方言语法  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> 表名 <span class=\"keyword\">SET</span> 字段<span class=\"number\">1</span><span class=\"operator\">=</span>值<span class=\"number\">1</span>, 字段<span class=\"number\">2</span><span class=\"operator\">=</span>值<span class=\"number\">2</span>, …… ;</span><br></pre></td></tr></table></figure>\n<h3 id=\"IGNORE关键字\"><a href=\"#IGNORE关键字\" class=\"headerlink\" title=\"IGNORE关键字\"></a>IGNORE关键字</h3><p> ◇ IGNORE关键字会让INSERT只插入数据库不存在的记录  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">INSERT</span> [ IGNORE ] <span class=\"keyword\">INTO</span> 表名 …… ;</span><br></pre></td></tr></table></figure>\n<h3 id=\"INSERT中的子查询\"><a href=\"#INSERT中的子查询\" class=\"headerlink\" title=\"INSERT中的子查询\"></a>INSERT中的子查询</h3><p>◇ INSERT语句中可以包含子查询语句，代表把子查询的内容写入到数据表<br>◇ 把人数超过5人的部门记录拷贝到新的部门表  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> t_dept_new <span class=\"keyword\">LIKE</span> t_dept;</span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> t_dept_new(deptno,dname,loc)</span><br><span class=\"line\">(<span class=\"keyword\">SELECT</span> d.deptno,d.dname,d.loc <span class=\"keyword\">FROM</span> t_dept d <span class=\"keyword\">JOIN</span></span><br><span class=\"line\">(<span class=\"keyword\">SELECT</span> deptno <span class=\"keyword\">FROM</span> t_emp <span class=\"keyword\">GROUP</span> <span class=\"keyword\">BY</span> deptno</span><br><span class=\"line\"><span class=\"keyword\">HAVING</span> <span class=\"built_in\">COUNT</span>(<span class=\"operator\">*</span>)<span class=\"operator\">&gt;=</span><span class=\"number\">5</span>) temp</span><br><span class=\"line\"><span class=\"keyword\">ON</span> d.deptno <span class=\"operator\">=</span> temp.deptno</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<h2 id=\"数据操作语言：UPDATE语句\"><a href=\"#数据操作语言：UPDATE语句\" class=\"headerlink\" title=\"数据操作语言：UPDATE语句\"></a>数据操作语言：UPDATE语句</h2><h3 id=\"UPDATE语句\"><a href=\"#UPDATE语句\" class=\"headerlink\" title=\"UPDATE语句\"></a>UPDATE语句</h3><ul>\n<li>◇ UPDATE语句用于修改表的记录  <figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"operator\">/</span><span class=\"operator\">/</span>&quot;IGNORE&quot;关键字在UPDATE语句中表示忽略修改数据时遇到冲突的记录，把不冲突的记录写到数据表里</span><br><span class=\"line\">UPDATE [ IGNORE ] 表名</span><br><span class=\"line\"><span class=\"keyword\">SET</span> 字段<span class=\"number\">1</span><span class=\"operator\">=</span>值<span class=\"number\">1</span>, 字段<span class=\"number\">2</span><span class=\"operator\">=</span>值<span class=\"number\">2</span>, ……</span><br><span class=\"line\">[ <span class=\"keyword\">WHERE</span> 条件<span class=\"number\">1</span>, 条件<span class=\"number\">2</span>, …… ] </span><br><span class=\"line\">[ <span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span> …… ] <span class=\"operator\">/</span><span class=\"operator\">/</span>排序，如果需要将员工编号<span class=\"operator\">+</span><span class=\"number\">1</span>的话，可以先进行降序否则可能引发主键冲突</span><br><span class=\"line\">[ LIMIT …… ] <span class=\"operator\">/</span><span class=\"operator\">/</span>取分页数据</span><br></pre></td></tr></table></figure>\n<h3 id=\"UPDATE语句的表连接\"><a href=\"#UPDATE语句的表连接\" class=\"headerlink\" title=\"UPDATE语句的表连接\"></a>UPDATE语句的表连接</h3>◇ 因为WHERE子句中的子查询效率非常低，所以我们可以利用表连接的方式来改造UPDATE语句  <figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">UPDATE 表<span class=\"number\">1</span> <span class=\"keyword\">JOIN</span> 表<span class=\"number\">2</span> <span class=\"keyword\">ON</span> 条件</span><br><span class=\"line\"><span class=\"keyword\">SET</span> 字段<span class=\"number\">1</span> <span class=\"operator\">=</span> 值<span class=\"number\">1</span> , 字段<span class=\"number\">2</span> <span class=\"operator\">=</span> 值<span class=\"number\">2</span> , …… ;</span><br></pre></td></tr></table></figure>\n◇ 表连接的UPDATE语句可以修改多张表的记录<br>◇ UPDATE语句的表连接可以演变成下面的样子  <figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">UPDATE 表<span class=\"number\">1</span> , 表<span class=\"number\">2</span></span><br><span class=\"line\"><span class=\"keyword\">SET</span> 字段<span class=\"number\">1</span> <span class=\"operator\">=</span> 值<span class=\"number\">1</span> , 字段<span class=\"number\">2</span> <span class=\"operator\">=</span> 值<span class=\"number\">2</span> , ……</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> 连接条件 ;</span><br></pre></td></tr></table></figure>\n◇ UPDATE语句的表连接既可以是内连接，又可以是外连接 <figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">UPDATE 表<span class=\"number\">1</span> [ <span class=\"keyword\">LEFT</span> <span class=\"operator\">|</span> <span class=\"keyword\">RIGHT</span> ] <span class=\"keyword\">JOIN</span> 表<span class=\"number\">2</span> <span class=\"keyword\">ON</span> 条件</span><br><span class=\"line\"><span class=\"keyword\">SET</span> 字段<span class=\"number\">1</span> <span class=\"operator\">=</span> 值<span class=\"number\">1</span> , 字段<span class=\"number\">2</span> <span class=\"operator\">=</span> 值<span class=\"number\">2</span> , …… ;</span><br></pre></td></tr></table></figure>\n◇ 把没有部门的员工，或者SALES部门低于2000元底薪的员工，都调往20部门  <figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">UPDATE t_emp e <span class=\"keyword\">LEFT</span> <span class=\"keyword\">JOIN</span> t_dept d <span class=\"keyword\">ON</span> e.deptno<span class=\"operator\">=</span>d.deptno</span><br><span class=\"line\"><span class=\"keyword\">SET</span> e.deptno<span class=\"operator\">=</span><span class=\"number\">20</span></span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> e.deptno <span class=\"keyword\">IS</span> <span class=\"keyword\">NULL</span> <span class=\"keyword\">OR</span> (d.dname<span class=\"operator\">=</span>&quot;SALES&quot; <span class=\"keyword\">AND</span> e.sal<span class=\"operator\">&lt;</span><span class=\"number\">2000</span>);</span><br></pre></td></tr></table></figure>\n<h3 id=\"课堂练习\"><a href=\"#课堂练习\" class=\"headerlink\" title=\"课堂练习\"></a>课堂练习</h3>◇ 把每个员工的编号和上司的编号+1，用ORDER BY子句完成 <figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">UPDATE t_emp <span class=\"keyword\">SET</span> empno<span class=\"operator\">=</span>empno<span class=\"operator\">+</span><span class=\"number\">1</span>,mgr<span class=\"operator\">=</span>mgr<span class=\"operator\">+</span><span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span> empno <span class=\"keyword\">DESC</span></span><br></pre></td></tr></table></figure>\n◇ 把月收入前三名的员工底薪减100元，用LIMIT子句完成  <figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">UPDATE t_emp <span class=\"keyword\">SET</span> sal<span class=\"operator\">=</span>sal<span class=\"number\">-100</span></span><br><span class=\"line\"><span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span> sal<span class=\"operator\">+</span>IFNULL(comm,<span class=\"number\">0</span>) <span class=\"keyword\">DESC</span></span><br><span class=\"line\">LIMIT <span class=\"number\">3</span>;</span><br></pre></td></tr></table></figure>\n◇ 把ALLEN调往RESEARCH部门，职务调整为ANALYST  //牵扯到两张表<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"operator\">/</span><span class=\"operator\">/</span>这里不能写连接条件(<span class=\"keyword\">ON</span> e.deptno<span class=\"operator\">=</span>d.deptno)，因为会将A锁定到R部门</span><br><span class=\"line\">UPDATE t_emp e <span class=\"keyword\">JOIN</span> t_dept d </span><br><span class=\"line\"><span class=\"keyword\">SET</span> e.deptno<span class=\"operator\">=</span>d.deptno,e.job<span class=\"operator\">=</span>&quot;ANALYST&quot;</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> e.ename<span class=\"operator\">=</span>&quot;ALLEN&quot; <span class=\"keyword\">AND</span> d.dname<span class=\"operator\">=</span>&quot;RESEARCH&quot;</span><br></pre></td></tr></table></figure>\n◇ 把底薪低于公司平均底薪的员工，底薪增加150元  <figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">UPDATE t_emp e <span class=\"keyword\">JOIN</span></span><br><span class=\"line\">(<span class=\"keyword\">SELECT</span> <span class=\"built_in\">AVG</span>(sal) <span class=\"keyword\">AS</span> avg <span class=\"keyword\">FROM</span> t_emp) t<span class=\"operator\">/</span><span class=\"operator\">/</span>子查询结果集</span><br><span class=\"line\"><span class=\"keyword\">ON</span> e.sal<span class=\"operator\">&lt;</span>t.avg</span><br><span class=\"line\"><span class=\"keyword\">SET</span> e.sal<span class=\"operator\">=</span>e.sal<span class=\"operator\">+</span><span class=\"number\">150</span>;</span><br></pre></td></tr></table></figure>\n<h2 id=\"数据操作语言：DELETE语句\"><a href=\"#数据操作语言：DELETE语句\" class=\"headerlink\" title=\"数据操作语言：DELETE语句\"></a>数据操作语言：DELETE语句</h2><h3 id=\"DELETE语句\"><a href=\"#DELETE语句\" class=\"headerlink\" title=\"DELETE语句\"></a>DELETE语句</h3>◇ DELETE语句用于删除记录，语法如下：  <figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">DELETE</span> [ IGNORE ] <span class=\"keyword\">FROM</span> 表名<span class=\"operator\">/</span><span class=\"operator\">/</span>IGNORE:能删则删，不能删则忽略，不会报错</span><br><span class=\"line\">[ <span class=\"keyword\">WHERE</span> 条件<span class=\"number\">1</span>, 条件<span class=\"number\">2</span>, …… ]</span><br><span class=\"line\">[ <span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span> …… ] </span><br><span class=\"line\">[ LIMIT …… ] ;</span><br></pre></td></tr></table></figure>\n<h3 id=\"DELETE语句的表连接\"><a href=\"#DELETE语句的表连接\" class=\"headerlink\" title=\"DELETE语句的表连接\"></a>DELETE语句的表连接</h3>◇ 因为相关子查询效率非常低，所以我们可以利用表连接的方式来改造DELETE语句  <figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">DELETE</span> 表<span class=\"number\">1</span> , …… <span class=\"keyword\">FROM</span> 表<span class=\"number\">1</span> <span class=\"keyword\">JOIN</span> 表<span class=\"number\">2</span> <span class=\"keyword\">ON</span> 条件</span><br><span class=\"line\">[ <span class=\"keyword\">WHERE</span> 条件<span class=\"number\">1</span> , 条件<span class=\"number\">2</span> , …… ] </span><br><span class=\"line\">[ <span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span> …… ] </span><br><span class=\"line\">[ LIMIT …… ] ;</span><br></pre></td></tr></table></figure>\n◇ DELETE语句的表连接既可以是内连接，又可以是外连接  <figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">DELETE</span> 表<span class=\"number\">1</span> , …… <span class=\"keyword\">FROM</span> 表<span class=\"number\">1</span> [ <span class=\"keyword\">LEFT</span> <span class=\"operator\">|</span> <span class=\"keyword\">RIGHT</span> ] <span class=\"keyword\">JOIN</span> 表<span class=\"number\">2</span> </span><br><span class=\"line\"><span class=\"keyword\">ON</span> 条件 …… ;</span><br></pre></td></tr></table></figure>\n◇ 删除SALES部门的员工，以及没有部门的员工。  <figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">DELETE</span> e</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> t_emp e <span class=\"keyword\">LEFT</span> <span class=\"keyword\">JOIN</span> t_dept d <span class=\"keyword\">ON</span> e.deptno<span class=\"operator\">=</span>d.deptno</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> d.dneme<span class=\"operator\">=</span>&quot;SALES&quot; <span class=\"keyword\">OR</span> e.deptno <span class=\"keyword\">IS</span> <span class=\"keyword\">NULL</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"快速删除数据表全部记录\"><a href=\"#快速删除数据表全部记录\" class=\"headerlink\" title=\"快速删除数据表全部记录\"></a>快速删除数据表全部记录</h3>◇ DELETE语句是在事务机制下删除记录，删除记录之前，先把将要删除的记录保存到日志文件里，然后再删除记录。<br>◇ TRUNCATE语句在事务机制之外删除记录，速度远超过DELETE语句  <figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">TRUNCATE</span> <span class=\"keyword\">TABLE</span> 表名 ;</span><br></pre></td></tr></table></figure>\n<h3 id=\"课堂练习-1\"><a href=\"#课堂练习-1\" class=\"headerlink\" title=\"课堂练习\"></a>课堂练习</h3>◇ 删除10部门中，工龄超过20年的员工记录 <figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">DELETE</span> <span class=\"keyword\">FROM</span> t_emp</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> deptno<span class=\"operator\">=</span><span class=\"number\">10</span> <span class=\"keyword\">AND</span> DATEDIFF(NOW(),hiredate)<span class=\"operator\">/</span><span class=\"number\">365</span></span><br></pre></td></tr></table></figure>\n◇ 删除20部门中工资最高的员工记录  <figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">DELETE</span> <span class=\"keyword\">FROM</span> t_emp</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> deptno<span class=\"operator\">=</span><span class=\"number\">20</span></span><br><span class=\"line\"><span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span> sal<span class=\"operator\">+</span>IFNULL(comm,<span class=\"number\">0</span>) <span class=\"keyword\">DESC</span></span><br><span class=\"line\">LIMIT <span class=\"number\">1</span>;</span><br></pre></td></tr></table></figure>\n◇ 删除SALES部门和该部门的全部员工记录 <figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">DELETE</span> e,d</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> t_emp e <span class=\"keyword\">JOIN</span> t_dept d <span class=\"keyword\">ON</span> e.deptno<span class=\"operator\">=</span>d.deptno</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> d.dname<span class=\"operator\">=</span>&quot;SALES&quot;;</span><br></pre></td></tr></table></figure>\n◇ 删除每个低于部门平均底薪的员工记录  <figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">DELETE</span> e</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> t_emp e <span class=\"keyword\">JOIN</span> </span><br><span class=\"line\">(<span class=\"keyword\">SELECT</span> deptno,<span class=\"built_in\">AVG</span>(sal) <span class=\"keyword\">AS</span> avg <span class=\"keyword\">FROM</span> t_emp <span class=\"keyword\">GROUP</span> <span class=\"keyword\">BY</span> deptno) t</span><br><span class=\"line\"><span class=\"keyword\">ON</span> e.deptno <span class=\"operator\">=</span> t.deptno <span class=\"keyword\">AND</span> e.sal<span class=\"operator\">&lt;</span>t.avg</span><br></pre></td></tr></table></figure>\n◇ 删除员工KING和他的直接下属的员工记录，用表连接实现。  <figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">DELETE</span> e</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> t_emp e <span class=\"keyword\">JOIN</span> </span><br><span class=\"line\">(<span class=\"keyword\">SELECT</span> empno <span class=\"keyword\">FROM</span> t_emp <span class=\"keyword\">WHERE</span> ename<span class=\"operator\">=</span>&quot;KING&quot;) t<span class=\"operator\">/</span><span class=\"operator\">/</span>结果集里的数据不能删</span><br><span class=\"line\"><span class=\"keyword\">ON</span> e.mgr<span class=\"operator\">=</span>t.empno <span class=\"keyword\">OR</span> e.empno<span class=\"operator\">=</span>t.empno;</span><br></pre></td></tr></table></figure></li>\n</ul>\n","categories":["Java数据库","MySQL基础"],"tags":["MySQL"]},{"title":"Redis入门","url":"/p/d40.html","content":"<h2 id=\"课程介绍\"><a href=\"#课程介绍\" class=\"headerlink\" title=\"课程介绍\"></a>课程介绍</h2><p>◇Redis介绍与安装<br>◇掌握在Java中操作Redis<br>◇掌握Redis的常用命令与数据类型  </p>\n<h2 id=\"Redis介绍\"><a href=\"#Redis介绍\" class=\"headerlink\" title=\"Redis介绍\"></a>Redis介绍</h2><p>◇Redis是Key-Value型NoSQL数据库 ,即每一个数据都有键和值；<br>◇Redis将数据存储在内存中，同时也能持久化到磁盘<br>◇Redis常用于缓存，利用内存的高效提高程序的处理速度  </p>\n<h2 id=\"Redis特点\"><a href=\"#Redis特点\" class=\"headerlink\" title=\"Redis特点\"></a>Redis特点</h2><p>◇ 速度快              ◇ 广泛的语言支持<br>◇ 持久化              ◇ 多种数据结构<br>◇ 主从复制           ◇ 分布式与高可用 </p>\n<h2 id=\"Redis的安装与启动\"><a href=\"#Redis的安装与启动\" class=\"headerlink\" title=\"Redis的安装与启动\"></a>Redis的安装与启动</h2><h3 id=\"在Linux系统中安装Redis\"><a href=\"#在Linux系统中安装Redis\" class=\"headerlink\" title=\"在Linux系统中安装Redis\"></a>在Linux系统中安装Redis</h3><p>◇进入<a href=\"https://redis.io/\">redis官网</a><br>◇创建redis目录，安装gcc用于make编译<br>◇安装命令</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ wget https://download.redis.io/releases/redis-5.0.2.tar.gz</span><br><span class=\"line\">$ tar xzf redis-5.0.2.tar.gz</span><br><span class=\"line\">$ cd redis-5.0.2</span><br><span class=\"line\">$ make</span><br></pre></td></tr></table></figure>\n<p>◇启动redis: 在src目录中redis-server开启服务器；redis-cli进行客户端连接；<br>◇[root@master redis-5.0.2]# ./src/redis-server redis.conf #启动命令</p>\n<h3 id=\"在Windows系统中安装Redis\"><a href=\"#在Windows系统中安装Redis\" class=\"headerlink\" title=\"在Windows系统中安装Redis\"></a>在Windows系统中安装Redis</h3><p>◇进入github<a href=\"https://github.com/MicrosoftArchive/redis\">下载</a><br>◇点击releases，下载zip文件进行解压<br>◇在终端(cmd)进入解压目录中，dir查看文件；<br>◇安装命令：redis-server  redis.windows.conf<br>◇由于Windows的版本过旧，仅做学习使用；</p>\n<h2 id=\"Redis的常用基本配置\"><a href=\"#Redis的常用基本配置\" class=\"headerlink\" title=\"Redis的常用基本配置\"></a>Redis的常用基本配置</h2><p><img src=\"/p/d40/1630301413623-fa8ca9d5-879a-45c2-9331-146cbba40f2f.png\" class=\"lazyload\" data-srcset=\"/p/d40/1630301413623-fa8ca9d5-879a-45c2-9331-146cbba40f2f.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>◇编辑redis.conf（配置文件）定位到136行，有一个daemonize（是否后台运行，守护进程)，改为yes即可进行守护；这样启动后，不会出现redis的logo并且启动会只要虚拟机运行，则redis一直提供服务；netstat -tulpn#查看系统占用的端口，进而查看redis是否运行；若要关闭redis，可以杀死进程或者利用客户端关闭；<br>◇redis-cli即redis客户端，用来执行redis指令；进入方法：./src/redis-cli 退出命令：exit<br>◇在客户端使用命令:ping 若出现PONG 则说明redis正常运行；关闭redis进程：./src/redis-cli shutdown<br>◇在redis.conf文件可以使用vim命令修改相关配置；<br>◇修改redis端口后需要指定端口进行连接， ./src/redis-cli -p 6380 #指定6380端口进行连接<br>◇redis的数据库名字为数字0~15；如果觉得数据库数量不够用，可以在配置文件中设置，在大概186行出的databases进行修改;<br>◇在配置文件的507行有个#requirepass foobared,说明默认密码是foobared，将注释取消，修改为12345。这样在使用redis时需要使用密码了。在启动后，输入命令：auth 12345即可<br>◇在263行，有dir ./即数据的保存目录；dump.rdb就是redis的全量备份。</p>\n<h2 id=\"Redis通用命令\"><a href=\"#Redis通用命令\" class=\"headerlink\" title=\"Redis通用命令\"></a>Redis通用命令</h2><p><img src=\"/p/d40/1630301443965-582fbcdb-70a6-42ef-8a1b-d04ef40c75fe.png\" class=\"lazyload\" data-srcset=\"/p/d40/1630301443965-582fbcdb-70a6-42ef-8a1b-d04ef40c75fe.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>◇示例</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">./src/redis-cli -p 6379 #连接客户端</span><br><span class=\"line\">auth 12345 #输入密码</span><br><span class=\"line\">select 0 #选择0号数据库</span><br><span class=\"line\">set name lily #在当前数据库中增加一个key=name,value=lily的数据</span><br><span class=\"line\">get name #获取数据</span><br><span class=\"line\">set name lee #会将前面的数据覆盖掉</span><br><span class=\"line\">keys * #查询所有的key</span><br><span class=\"line\">dbsize #显示当前数据库的数据总量</span><br><span class=\"line\">del name #删除name这个key</span><br></pre></td></tr></table></figure>\n<h2 id=\"Redis数据类型\"><a href=\"#Redis数据类型\" class=\"headerlink\" title=\"Redis数据类型\"></a>Redis数据类型</h2><p>◇ String - 字符串类型     ◇ Hash - Hash类型<br>◇ List - 列表类型             ◇ Set - 集合类型<br>◇ Zset - 有序集合类型  </p>\n<h2 id=\"String-字符串类型\"><a href=\"#String-字符串类型\" class=\"headerlink\" title=\"String 字符串类型\"></a>String 字符串类型</h2><p><img src=\"/p/d40/1630301541873-e169dfb8-2a11-44db-b001-d364dad29ec1.png\" class=\"lazyload\" data-srcset=\"/p/d40/1630301541873-e169dfb8-2a11-44db-b001-d364dad29ec1.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h2 id=\"字符串命令\"><a href=\"#字符串命令\" class=\"headerlink\" title=\"字符串命令\"></a>字符串命令</h2><p><img src=\"/p/d40/1630301585498-ea031812-7b93-44fb-bf1f-d358bd0e47b2.png\" class=\"lazyload\" data-srcset=\"/p/d40/1630301585498-ea031812-7b93-44fb-bf1f-d358bd0e47b2.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h2 id=\"Hash键值类型\"><a href=\"#Hash键值类型\" class=\"headerlink\" title=\"Hash键值类型\"></a>Hash键值类型</h2><p>◇Hash类型用于存储结构化数据<br><img src=\"/p/d40/1630301642145-939a3186-55d0-47e9-a6fc-7c83e0178a14.png\" class=\"lazyload\" data-srcset=\"/p/d40/1630301642145-939a3186-55d0-47e9-a6fc-7c83e0178a14.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h2 id=\"Hash-命令\"><a href=\"#Hash-命令\" class=\"headerlink\" title=\"Hash 命令\"></a>Hash 命令</h2><p><img src=\"/p/d40/1630301692289-f55f142a-ad1a-4e01-bf37-bf1c9d1b3503.png\" class=\"lazyload\" data-srcset=\"/p/d40/1630301692289-f55f142a-ad1a-4e01-bf37-bf1c9d1b3503.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h2 id=\"List列表类型\"><a href=\"#List列表类型\" class=\"headerlink\" title=\"List列表类型\"></a>List列表类型</h2><p>◇List列表就是一系列字符串的“数组”，按插入顺序排序<br>◇List列表最大长度为2的32次方-1，可以包含40亿个元素  </p>\n<h2 id=\"List-命令\"><a href=\"#List-命令\" class=\"headerlink\" title=\"List 命令\"></a>List 命令</h2><p>◇rpush listkey c b a - 右侧插入<br>◇lpush listkey f e d - 左侧插入<br>◇ d e f c b a<br>◇rpop listkey - 右侧弹出<br>◇lpop listkey - 左侧弹出  </p>\n<h2 id=\"List-指令\"><a href=\"#List-指令\" class=\"headerlink\" title=\"List 指令\"></a>List 指令</h2><p>◇llen listkey - 获取长度<br>◇lrange listkey 0 2<br>◇lrange listkey 1 -1 获取子集  </p>\n<h2 id=\"Set与Zset集合类型\"><a href=\"#Set与Zset集合类型\" class=\"headerlink\" title=\"Set与Zset集合类型\"></a>Set与Zset集合类型</h2><p>◇Set集合是字符串的无序集合，集合成员是唯一的<br>◇Zset集合是字符串的有序集合，集合成员是唯一的  </p>\n<h2 id=\"Java客户端-Jedis\"><a href=\"#Java客户端-Jedis\" class=\"headerlink\" title=\"Java客户端-Jedis\"></a>Java客户端-Jedis</h2><p>◇Jedis是Java语言开发的Redis客户端工具包<br>◇Jedis只是对Redis命令的封装,掌握Redis命令便可轻易上手  </p>\n<h3 id=\"Jedis使用演示\"><a href=\"#Jedis使用演示\" class=\"headerlink\" title=\"Jedis使用演示\"></a>Jedis使用演示</h3><p>◇编辑配置文件redis.conf，在88行处：protected-mode yes #是否开启保护模式，设置为no关闭，允许其他ip主机连接进来<br>◇在69行处bind 127.0.0.1改为0.0.0.0表示任意ip主机都可以访问进来；<br>◇设置防火墙放行6379端口：firewall-cmd –zone=public –add-port=6379/tcp –permanent; firewall-cmd –reload#重载<br>◇查看redis服务器的IP地址<br>◇Windows上<a href=\"https://github.com/redis/jedis\">下载jedis</a><br>◇利用maven进行下载</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>redis.clients<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jedis<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.9.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"在IDEA中创建maven工程\"><a href=\"#在IDEA中创建maven工程\" class=\"headerlink\" title=\"在IDEA中创建maven工程\"></a>在IDEA中创建maven工程</h3><p>◇JedisTestor</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">JedisTestor</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        Jedis jedis = <span class=\"keyword\">new</span> Jedis(<span class=\"string\">&quot;192.168.132.144&quot;</span> , <span class=\"number\">6379</span>);<span class=\"comment\">//虚拟机IP地址，redis服务器端口号</span></span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            jedis.auth(<span class=\"string\">&quot;12345&quot;</span>);<span class=\"comment\">//输入密码</span></span><br><span class=\"line\">            jedis.select(<span class=\"number\">2</span>);</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;Redis连接成功&quot;</span>);</span><br><span class=\"line\">            <span class=\"comment\">//字符串</span></span><br><span class=\"line\">            jedis.set(<span class=\"string\">&quot;sn&quot;</span> , <span class=\"string\">&quot;7781-9938&quot;</span>);</span><br><span class=\"line\">            String sn = jedis.get(<span class=\"string\">&quot;sn&quot;</span>);</span><br><span class=\"line\">            System.out.println(sn);</span><br><span class=\"line\">            jedis.mset(<span class=\"keyword\">new</span> String[]&#123;<span class=\"string\">&quot;title&quot;</span> , <span class=\"string\">&quot;婴幼儿奶粉&quot;</span> , <span class=\"string\">&quot;num&quot;</span> , <span class=\"string\">&quot;20&quot;</span>&#125;);</span><br><span class=\"line\">            List&lt;String&gt; goods =  jedis.mget(<span class=\"keyword\">new</span> String[]&#123;<span class=\"string\">&quot;sn&quot;</span> , <span class=\"string\">&quot;title&quot;</span> , <span class=\"string\">&quot;num&quot;</span>&#125;);</span><br><span class=\"line\">            System.out.println(goods);</span><br><span class=\"line\">            Long num = jedis.incr(<span class=\"string\">&quot;num&quot;</span>);</span><br><span class=\"line\">            System.out.println(num);</span><br><span class=\"line\">            <span class=\"comment\">//Hash</span></span><br><span class=\"line\">            jedis.hset(<span class=\"string\">&quot;student:3312&quot;</span> , <span class=\"string\">&quot;name&quot;</span> , <span class=\"string\">&quot;张晓明&quot;</span>);</span><br><span class=\"line\">            String name = jedis.hget(<span class=\"string\">&quot;student:3312&quot;</span> , <span class=\"string\">&quot;name&quot;</span>);</span><br><span class=\"line\">            System.out.println(name);</span><br><span class=\"line\">            Map&lt;String,String&gt; studentMap = <span class=\"keyword\">new</span> HashMap();</span><br><span class=\"line\">            studentMap.put(<span class=\"string\">&quot;name&quot;</span>, <span class=\"string\">&quot;李兰&quot;</span>);</span><br><span class=\"line\">            studentMap.put(<span class=\"string\">&quot;age&quot;</span>, <span class=\"string\">&quot;18&quot;</span>);</span><br><span class=\"line\">            studentMap.put(<span class=\"string\">&quot;id&quot;</span>, <span class=\"string\">&quot;3313&quot;</span>);</span><br><span class=\"line\">            jedis.hmset(<span class=\"string\">&quot;student:3313&quot;</span>, studentMap);</span><br><span class=\"line\">            Map&lt;String,String&gt; smap =  jedis.hgetAll(<span class=\"string\">&quot;student:3313&quot;</span>);</span><br><span class=\"line\">            System.out.println(smap);</span><br><span class=\"line\">            <span class=\"comment\">//List</span></span><br><span class=\"line\">            jedis.del(<span class=\"string\">&quot;letter&quot;</span>); <span class=\"comment\">//将letter列表删除,否则后面会依次叠加</span></span><br><span class=\"line\">            jedis.rpush(<span class=\"string\">&quot;letter&quot;</span> , <span class=\"keyword\">new</span> String[]&#123;<span class=\"string\">&quot;d&quot;</span> , <span class=\"string\">&quot;e&quot;</span> , <span class=\"string\">&quot;f&quot;</span>&#125;);</span><br><span class=\"line\">            jedis.lpush(<span class=\"string\">&quot;letter&quot;</span> ,  <span class=\"keyword\">new</span> String[]&#123;<span class=\"string\">&quot;c&quot;</span> , <span class=\"string\">&quot;b&quot;</span> , <span class=\"string\">&quot;a&quot;</span>&#125;);</span><br><span class=\"line\">            List&lt;String&gt; letter =  jedis.lrange(<span class=\"string\">&quot;letter&quot;</span> , <span class=\"number\">0</span> , -<span class=\"number\">1</span>);</span><br><span class=\"line\">            jedis.lpop(<span class=\"string\">&quot;letter&quot;</span>);</span><br><span class=\"line\">            jedis.rpop(<span class=\"string\">&quot;letter&quot;</span>);</span><br><span class=\"line\">            letter = jedis.lrange(<span class=\"string\">&quot;letter&quot;</span>, <span class=\"number\">0</span>, -<span class=\"number\">1</span>);</span><br><span class=\"line\">            System.out.println(letter);</span><br><span class=\"line\">        &#125;<span class=\"keyword\">catch</span>(Exception e)&#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;<span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">            jedis.close();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"利用Jedis缓存数据\"><a href=\"#利用Jedis缓存数据\" class=\"headerlink\" title=\"利用Jedis缓存数据\"></a>利用Jedis缓存数据</h3><p>◇创建实体类Good</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Goods</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer goodsId;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String goodsName;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String description;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Float price;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>◇创建缓存示例类</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CacheSample</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">CacheSample</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        Jedis jedis = <span class=\"keyword\">new</span> Jedis(<span class=\"string\">&quot;192.168.132.144&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            List&lt;Goods&gt; goodsList = <span class=\"keyword\">new</span> ArrayList&lt;Goods&gt;();</span><br><span class=\"line\">            <span class=\"comment\">//初始化模拟数据</span></span><br><span class=\"line\">            goodsList.add(<span class=\"keyword\">new</span> Goods(<span class=\"number\">8818</span>, <span class=\"string\">&quot;红富士苹果&quot;</span>, <span class=\"string\">&quot;&quot;</span>, <span class=\"number\">3.5f</span>));</span><br><span class=\"line\">            goodsList.add(<span class=\"keyword\">new</span> Goods(<span class=\"number\">8819</span>, <span class=\"string\">&quot;进口脐橙&quot;</span>, <span class=\"string\">&quot;&quot;</span>, <span class=\"number\">5f</span>));</span><br><span class=\"line\">            goodsList.add(<span class=\"keyword\">new</span> Goods(<span class=\"number\">8820</span>, <span class=\"string\">&quot;进口香蕉&quot;</span>, <span class=\"string\">&quot;&quot;</span>, <span class=\"number\">25f</span>));</span><br><span class=\"line\">            jedis.auth(<span class=\"string\">&quot;12345&quot;</span>);</span><br><span class=\"line\">            jedis.select(<span class=\"number\">3</span>);<span class=\"comment\">//选择redis的三号数据库</span></span><br><span class=\"line\">            <span class=\"comment\">//将每一个二进制存储的java对象序列化为json字符串以便redis存储</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> (Goods goods : goodsList) &#123;</span><br><span class=\"line\">                String json = JSON.toJSONString(goods);</span><br><span class=\"line\">                System.out.println(json);</span><br><span class=\"line\">                String key = <span class=\"string\">&quot;goods:&quot;</span> + goods.getGoodsId();</span><br><span class=\"line\">                jedis.set(key , json);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;<span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">            jedis.close();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">new</span> CacheSample();</span><br><span class=\"line\">        System.out.printf(<span class=\"string\">&quot;请输入要查询的商品编号：&quot;</span>);</span><br><span class=\"line\">        String goodsId = <span class=\"keyword\">new</span> Scanner(System.in).next();</span><br><span class=\"line\">        Jedis jedis = <span class=\"keyword\">new</span> Jedis(<span class=\"string\">&quot;192.168.132.144&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">try</span>&#123;</span><br><span class=\"line\">            jedis.auth(<span class=\"string\">&quot;12345&quot;</span>);</span><br><span class=\"line\">            jedis.select(<span class=\"number\">3</span>);</span><br><span class=\"line\">            String key = <span class=\"string\">&quot;goods:&quot;</span> + goodsId;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(jedis.exists(key))&#123;</span><br><span class=\"line\">                String json = jedis.get(key);</span><br><span class=\"line\">                System.out.println(json);</span><br><span class=\"line\">                <span class=\"comment\">//json字符串转换为java对象</span></span><br><span class=\"line\">                Goods g = JSON.parseObject(json, Goods.class);</span><br><span class=\"line\">                System.out.println(g.getGoodsName());</span><br><span class=\"line\">                System.out.println(g.getPrice());</span><br><span class=\"line\">            &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                System.out.println(<span class=\"string\">&quot;您输入的商品编号不存在，请重新输入！&quot;</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;<span class=\"keyword\">catch</span>(Exception e)&#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;<span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">            jedis.close();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n","categories":["Java数据库","Linux与Redis基础"],"tags":["Redis"]},{"title":"MySQL综合应用","url":"/p/c9e2.html","content":"<h2 id=\"数据库的事务机制\"><a href=\"#数据库的事务机制\" class=\"headerlink\" title=\"数据库的事务机制\"></a>数据库的事务机制</h2><h3 id=\"避免写入直接操作数据文件\"><a href=\"#避免写入直接操作数据文件\" class=\"headerlink\" title=\"避免写入直接操作数据文件\"></a>避免写入直接操作数据文件</h3><p> ◇ 如果数据的写入直接操作数据文件是非常危险的事情<br><img src=\"/p/c9e2/1626917790269-93acb2ad-63b6-4dd4-be0c-2e9fc2a0efb0.png\" class=\"lazyload\" data-srcset=\"/p/c9e2/1626917790269-93acb2ad-63b6-4dd4-be0c-2e9fc2a0efb0.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"利用日志来实现间接写入\"><a href=\"#利用日志来实现间接写入\" class=\"headerlink\" title=\"利用日志来实现间接写入\"></a>利用日志来实现间接写入</h3><p>◇ MySQL总共有5种日志，其中只有redo(重做)日志和undo(撤销)日志与事务有关<br><img src=\"/p/c9e2/1626917898437-0ccbca8d-0d06-4df1-a5bc-55e18b880fe0.png\" class=\"lazyload\" data-srcset=\"/p/c9e2/1626917898437-0ccbca8d-0d06-4df1-a5bc-55e18b880fe0.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"事务机制（Transaction）\"><a href=\"#事务机制（Transaction）\" class=\"headerlink\" title=\"事务机制（Transaction）\"></a>事务机制（Transaction）</h3><p>◇ RDBMS = SQL语句 + 事务（ACID）<br>◇ 事务是一个或者多个SQL语句组成的整体，要么全部执行成功，要 么全都执行失败  </p>\n<h3 id=\"事务案例\"><a href=\"#事务案例\" class=\"headerlink\" title=\"事务案例\"></a>事务案例</h3><p>◇ 把10部门中MANGER员工调往20部门，其他岗位的员工调往30部门，然后删除10部门<br><img src=\"/p/c9e2/1626917996276-921161a2-38af-41f5-ae65-e38647751e68.png\" class=\"lazyload\" data-srcset=\"/p/c9e2/1626917996276-921161a2-38af-41f5-ae65-e38647751e68.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"管理事务\"><a href=\"#管理事务\" class=\"headerlink\" title=\"管理事务\"></a>管理事务</h3><p>◇ 默认情况下，MySQL执行每条SQL语句都会自动开启和提交事务<br>◇ 为了让多条SQL语句纳入到一个事务之下，可以手动管理事务  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">START</span> TRANSACTION ;<span class=\"operator\">/</span><span class=\"operator\">/</span>开启事务</span><br><span class=\"line\"><span class=\"keyword\">SQL</span>语句</span><br><span class=\"line\">[ <span class=\"keyword\">COMMIT</span> <span class=\"operator\">|</span> <span class=\"keyword\">ROLLBACK</span> ] ;<span class=\"operator\">/</span><span class=\"operator\">/</span>提交<span class=\"operator\">|</span>回滚</span><br></pre></td></tr></table></figure>\n<h3 id=\"事务的ACID属性\"><a href=\"#事务的ACID属性\" class=\"headerlink\" title=\"事务的ACID属性\"></a>事务的ACID属性</h3><p><img src=\"/p/c9e2/1626918119445-1a0602c1-e9b0-4847-bfce-dcefc14db76d.png\" class=\"lazyload\" data-srcset=\"/p/c9e2/1626918119445-1a0602c1-e9b0-4847-bfce-dcefc14db76d.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h4 id=\"事务的原子性\"><a href=\"#事务的原子性\" class=\"headerlink\" title=\"事务的原子性\"></a>事务的原子性</h4><p>◇ 一个事务中的所有操作要么全部完成，要么全部失败。事务执行后 ，不允许停留在中间某个状态  </p>\n<h4 id=\"事务的一致性\"><a href=\"#事务的一致性\" class=\"headerlink\" title=\"事务的一致性\"></a>事务的一致性</h4><p>◇ 不管在任何给定的时间、并发事务有多少，事务必须保证运行结果 的一致性<br>◇ 事务可以并发执行，但是最终MySQL却串行执行<br><img src=\"/p/c9e2/1626918183199-9912d76a-7d0f-43f0-b79e-3a527aa25551.png\" class=\"lazyload\" data-srcset=\"/p/c9e2/1626918183199-9912d76a-7d0f-43f0-b79e-3a527aa25551.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h4 id=\"事务的隔离性\"><a href=\"#事务的隔离性\" class=\"headerlink\" title=\"事务的隔离性\"></a>事务的隔离性</h4><p>◇ 隔离性要求事务不受其他并发事务的影响，如同在给定的时间内，该事务是数据库唯一运行的事物<br>◇ 默认情况下A事务，只能看到日志中该事务的相关数据<br><img src=\"/p/c9e2/1626918249811-8534a704-899e-49cb-9c39-01d8f26737fc.png\" class=\"lazyload\" data-srcset=\"/p/c9e2/1626918249811-8534a704-899e-49cb-9c39-01d8f26737fc.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h4 id=\"事务的持久性\"><a href=\"#事务的持久性\" class=\"headerlink\" title=\"事务的持久性\"></a>事务的持久性</h4><p> ◇事务一旦提交，结果便是永久性的。即便发生宕机，仍然可以依靠事务日志完成数据的持久化  </p>\n<h3 id=\"事务的四个隔离级别\"><a href=\"#事务的四个隔离级别\" class=\"headerlink\" title=\"事务的四个隔离级别\"></a>事务的四个隔离级别</h3><p><img src=\"/p/c9e2/1626918389326-5eab4721-6bd8-43a0-bf2e-6a779663c28e.png\" class=\"lazyload\" data-srcset=\"/p/c9e2/1626918389326-5eab4721-6bd8-43a0-bf2e-6a779663c28e.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"修改事务隔离级别\"><a href=\"#修改事务隔离级别\" class=\"headerlink\" title=\"修改事务隔离级别\"></a>修改事务隔离级别</h3><p>◇在Navicat中开启两个sql面板可以模拟两个不同的事务；Mysql默认的隔离级别是REPEATABLE READ<br>◇ READ UNCOMMITTED 代表可以读取其他事务未提交的数据  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SET</span> SESSION TRANSACTION ISOLATION LEVEL </span><br><span class=\"line\">READ UNCOMMITTED;</span><br></pre></td></tr></table></figure>\n<p>◇ READ COMMITTED 代表只能读取其他事务提交的数据  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SET</span> SESSION TRANSACTION ISOLATION LEVEL </span><br><span class=\"line\">READ COMMITTED;</span><br></pre></td></tr></table></figure>\n<p>◇ REPEATABLE READ 代表事务在执行中反复读取数据，得到的结果是一致的，不会受其他事务影响  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SET</span> SESSION TRANSACTION ISOLATION LEVEL </span><br><span class=\"line\">REPEATABLE READ;</span><br></pre></td></tr></table></figure>\n<h3 id=\"业务案例\"><a href=\"#业务案例\" class=\"headerlink\" title=\"业务案例\"></a>业务案例</h3><p>①比如说购票场景里面，由于事务之间是隔离的，所以A、B两事务分别对第一条记录进行操作；A事务修改将其改为已售出，但是A事务未进行提交，因此真实的数据还是未售出状态；B事务将其改为已售出，并且很快进行提交；那么当A进行提交时，发现记录变成了已售出，就会发生回滚，即修改失败；虽然说没有产生有歧义的数据，但是动不动就购票失败，十分影响用户体验；因此在这个场景下我们应当允许事务去读取其他事务的临时状态；B事务可以看到A事务里的临时信息，即修改了第一条记录，但未提交；那么B就无法修改此记录；就不会引发数据冲突了；所以这里使用的隔离级别为:READ UNCOMMITTED<br><img src=\"/p/c9e2/1626918423470-5ed66a73-33cf-4fd7-8082-cdefb265ee8a.png\" class=\"lazyload\" data-srcset=\"/p/c9e2/1626918423470-5ed66a73-33cf-4fd7-8082-cdefb265ee8a.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>②对于银行转账之类的业务场景；就只能让当前事务去读取其他事务已经提交的数据，而不能够去读取其他事务的临时数据;比如说下面的Scott账户，假设B事务执行，需要支出100元，但是还没有提交；而这时A事务进行转账操作，由于可以看到B事务的临时数据，所以A事务看到Scott账户为4900元，提交后，账户变为5900元；但如果B事务由于某些原因回滚的话，原来的操作无效；而此时账户余额却是4900元，凭空少了100元；因此这种场景必须使用READ COMMITTED隔离级别；<br><img src=\"/p/c9e2/1626918537468-9c083613-aa6e-4b96-9e6a-3cb7625db4f6.png\" class=\"lazyload\" data-srcset=\"/p/c9e2/1626918537468-9c083613-aa6e-4b96-9e6a-3cb7625db4f6.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>③又如，A事务进行某商品的下单购票后未提交事务，但是B事务确将商品价格提高了；那么此时A事务应该根据原价购买；所以隔离级别使用REPEATABLE READ；即不受其他任何事务的影响，无论其他事务提交与否；<br><img src=\"/p/c9e2/1626918633199-35ba965c-25a8-41b6-b280-3a59d1b6d4ee.png\" class=\"lazyload\" data-srcset=\"/p/c9e2/1626918633199-35ba965c-25a8-41b6-b280-3a59d1b6d4ee.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"事务的序列化\"><a href=\"#事务的序列化\" class=\"headerlink\" title=\"事务的序列化\"></a>事务的序列化</h3><p>◇ 由于事务并发执行所带来的各种问题，前三种隔离级别只适用在某些业务场景中，但是序列化的隔离性，只有前面的会话结束后(事务提交后)才能执行下一个事务，即让事务逐一执行，不能够并发地执行事务；但是这样会大大降低数据库的并发能力，所以不太常用；  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SET</span> SESSION TRANSACTION ISOLATION LEVEL</span><br><span class=\"line\">SERIALIZABLE;</span><br></pre></td></tr></table></figure>\n<h2 id=\"数据导入与导出\"><a href=\"#数据导入与导出\" class=\"headerlink\" title=\"数据导入与导出\"></a>数据导入与导出</h2><h3 id=\"数据导出与备份的区别\"><a href=\"#数据导出与备份的区别\" class=\"headerlink\" title=\"数据导出与备份的区别\"></a>数据导出与备份的区别</h3><p>◇ 数据导出，导出的纯粹是业务数据<br>◇ 数据备份，备份的是数据文件、日志文件、索引文件等等<br><img src=\"/p/c9e2/1626918828306-0b54f018-06c6-4391-8539-16724d411448.png\" class=\"lazyload\" data-srcset=\"/p/c9e2/1626918828306-0b54f018-06c6-4391-8539-16724d411448.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"数据导出的分类\"><a href=\"#数据导出的分类\" class=\"headerlink\" title=\"数据导出的分类\"></a>数据导出的分类</h3><p><img src=\"/p/c9e2/1626918863615-44b06718-5e90-4bbd-99c0-489bbc76cba0.png\" class=\"lazyload\" data-srcset=\"/p/c9e2/1626918863615-44b06718-5e90-4bbd-99c0-489bbc76cba0.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"导出SQL文件\"><a href=\"#导出SQL文件\" class=\"headerlink\" title=\"导出SQL文件\"></a>导出SQL文件</h3><p>◇ mysqldump用来把业务数据导出成SQL文件，其中也包括了表结构  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">mysqldump <span class=\"operator\">-</span>uroot <span class=\"operator\">-</span>p [ <span class=\"keyword\">no</span><span class=\"operator\">-</span>data ] 逻辑库 <span class=\"operator\">&gt;</span> 路径</span><br></pre></td></tr></table></figure>\n<p>◇ 如果业务数据非常多，建议只导出表结构，然后用SELECT INTO OUTFILE把数据导出成文本文档  </p>\n<h3 id=\"导入SQL文件\"><a href=\"#导入SQL文件\" class=\"headerlink\" title=\"导入SQL文件\"></a>导入SQL文件</h3><p>◇ source命令用于导入SQL文件，包括创建数据表，写入记录等  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">sql</span> <span class=\"operator\">&gt;</span> USE demo ;</span><br><span class=\"line\"><span class=\"keyword\">sql</span> <span class=\"operator\">&gt;</span> SOURCE backup.sql ;</span><br></pre></td></tr></table></figure>\n\n","categories":["Java数据库","MySQL基础"],"tags":["MySQL"]},{"title":"SQL简介","url":"/p/a804.html","content":"<h2 id=\"学习目标\"><a href=\"#学习目标\" class=\"headerlink\" title=\"学习目标\"></a>学习目标</h2><p>◇ 管理逻辑库和数据表</p>\n<ul>\n<li>创建、删除、修改逻辑库和数据表<br>◇ 了解常用的数据类型和约束  </li>\n<li>字符串、整数、浮点数、精确数字、日期、枚举。主键约束、非空 约束、唯一约束、外键约束等<br>◇ 掌握索引运行机制和使用原则  </li>\n<li>排序为什么可以提高数据检索速度？怎么创建和删除索引？什么条 件下使用索引？  <h2 id=\"什么是SQL语言-？\"><a href=\"#什么是SQL语言-？\" class=\"headerlink\" title=\"什么是SQL语言 ？\"></a>什么是SQL语言 ？</h2>◇ SQL 是用于访问和处理数据的标准的计算机语言<br><img src=\"/p/a804/1625838154950-b6a31bc1-f93a-4483-a4bc-a7499a1c4669.png\" class=\"lazyload\" data-srcset=\"/p/a804/1625838154950-b6a31bc1-f93a-4483-a4bc-a7499a1c4669.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></li>\n</ul>\n<h3 id=\"SQL语言分类\"><a href=\"#SQL语言分类\" class=\"headerlink\" title=\"SQL语言分类\"></a>SQL语言分类</h3><p><img src=\"/p/a804/1625838195563-598330f3-eee6-49ab-b74d-d55f33493ae0.png\" class=\"lazyload\" data-srcset=\"/p/a804/1625838195563-598330f3-eee6-49ab-b74d-d55f33493ae0.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"SQL语句注意事项\"><a href=\"#SQL语句注意事项\" class=\"headerlink\" title=\"SQL语句注意事项\"></a>SQL语句注意事项</h3><p>◇ SQL语句不区分大小写，但是字符串区分大小写<br>◇ SQL语句必须以分号结尾<br>◇ SQL语句中的空白和换行没有限制，但是不能破坏语法 </p>\n<h3 id=\"SQL语句的注释\"><a href=\"#SQL语句的注释\" class=\"headerlink\" title=\"SQL语句的注释\"></a>SQL语句的注释</h3><p>◇ SQL语句的注释有两种，分别如下：<br> #这是一段注释<br>/<em>这是另一段注释</em>/</p>\n<h2 id=\"创建逻辑库\"><a href=\"#创建逻辑库\" class=\"headerlink\" title=\"创建逻辑库\"></a>创建逻辑库</h2><p><img src=\"/p/a804/1625838421553-d4761883-6cd5-47ea-bed3-1e2d07e73537.png\" class=\"lazyload\" data-srcset=\"/p/a804/1625838421553-d4761883-6cd5-47ea-bed3-1e2d07e73537.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h2 id=\"创建数据表\"><a href=\"#创建数据表\" class=\"headerlink\" title=\"创建数据表\"></a>创建数据表</h2><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> 数据表 (</span><br><span class=\"line\">列名<span class=\"number\">1</span> 数据类型 [ 约束 ] [COMMENT 注释] ,</span><br><span class=\"line\">列名<span class=\"number\">2</span> 数据类型 [ 约束 ] [COMMENT 注释] , ……</span><br><span class=\"line\">) [ COMMENT <span class=\"operator\">=</span> 注释 ] ;</span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> 数据表 ;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> student (</span><br><span class=\"line\">id <span class=\"type\">INT</span> UNSIGNED <span class=\"keyword\">PRIMARY</span> KEY ,</span><br><span class=\"line\">name <span class=\"type\">VARCHAR</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> , sex <span class=\"type\">CHAR</span>(<span class=\"number\">1</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> ,</span><br><span class=\"line\">birthday <span class=\"type\">DATE</span> <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> ,</span><br><span class=\"line\">tel <span class=\"type\">CHAR</span>(<span class=\"number\">11</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> ,</span><br><span class=\"line\">remark <span class=\"type\">VARCHAR</span>(<span class=\"number\">200</span>)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<h2 id=\"数据表的其他操作\"><a href=\"#数据表的其他操作\" class=\"headerlink\" title=\"数据表的其他操作\"></a>数据表的其他操作</h2><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SHOW</span> tables ;</span><br><span class=\"line\"><span class=\"keyword\">DESC</span> student ;   <span class=\"operator\">/</span><span class=\"operator\">/</span>查看表的结构</span><br><span class=\"line\"><span class=\"keyword\">SHOW</span> <span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> student ;</span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> student ;</span><br></pre></td></tr></table></figure>\n<h2 id=\"数据定义语言：数据类型\"><a href=\"#数据定义语言：数据类型\" class=\"headerlink\" title=\"数据定义语言：数据类型\"></a>数据定义语言：数据类型</h2><h3 id=\"数据类型：数字\"><a href=\"#数据类型：数字\" class=\"headerlink\" title=\"数据类型：数字\"></a>数据类型：数字</h3><p>◇DECIMAL相当于用字符来保存数字，所以不存在精度的丢失；参数10表示整数+小数为十位<br>参数2表示精确到小数点后两位<br><img src=\"/p/a804/1625838928851-acc12aba-1b8a-47cd-a43b-7bb022a49641.png\" class=\"lazyload\" data-srcset=\"/p/a804/1625838928851-acc12aba-1b8a-47cd-a43b-7bb022a49641.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"不精确的浮点数\"><a href=\"#不精确的浮点数\" class=\"headerlink\" title=\"不精确的浮点数\"></a>不精确的浮点数</h3><p>◇ 十进制的浮点数无法在计算机中用二进制精确表达<br><img src=\"/p/a804/1625838986936-842b2ae4-572c-4618-949b-d0874d60b79f.png\" class=\"lazyload\" data-srcset=\"/p/a804/1625838986936-842b2ae4-572c-4618-949b-d0874d60b79f.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"数据类型：字符串\"><a href=\"#数据类型：字符串\" class=\"headerlink\" title=\"数据类型：字符串\"></a>数据类型：字符串</h3><p><img src=\"/p/a804/1625839086946-6c97c58c-0b4d-4c4a-9314-535803a59c73.png\" class=\"lazyload\" data-srcset=\"/p/a804/1625839086946-6c97c58c-0b4d-4c4a-9314-535803a59c73.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"数据类型：日期类型\"><a href=\"#数据类型：日期类型\" class=\"headerlink\" title=\"数据类型：日期类型\"></a>数据类型：日期类型</h3><p><img src=\"/p/a804/1625839693685-beccf98c-d86a-49ae-ba12-ad38022c6eb1.png\" class=\"lazyload\" data-srcset=\"/p/a804/1625839693685-beccf98c-d86a-49ae-ba12-ad38022c6eb1.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h2 id=\"数据定义语言：修改表结构\"><a href=\"#数据定义语言：修改表结构\" class=\"headerlink\" title=\"数据定义语言：修改表结构\"></a>数据定义语言：修改表结构</h2><h3 id=\"添加字段\"><a href=\"#添加字段\" class=\"headerlink\" title=\"添加字段\"></a>添加字段</h3><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名称</span><br><span class=\"line\"><span class=\"keyword\">ADD</span> 列<span class=\"number\">1</span> 数据类型 [ 约束 ] [COMMENT 注释] , <span class=\"keyword\">ADD</span> 列<span class=\"number\">2</span> 数据类型 [ 约束 ] [COMMENT 注释] ,</span><br><span class=\"line\">…… ;</span><br></pre></td></tr></table></figure>\n<h3 id=\"修改字段类型和约束\"><a href=\"#修改字段类型和约束\" class=\"headerlink\" title=\"修改字段类型和约束\"></a>修改字段类型和约束</h3><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名称</span><br><span class=\"line\">MODIFY 列<span class=\"number\">1</span> 数据类型 [ 约束 ] [COMMENT 注释] , MODIFY 列<span class=\"number\">2</span> 数据类型 [ 约束 ] [COMMENT 注释] ,</span><br><span class=\"line\">…… ;</span><br></pre></td></tr></table></figure>\n<h3 id=\"修改字段名称\"><a href=\"#修改字段名称\" class=\"headerlink\" title=\"修改字段名称\"></a>修改字段名称</h3><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名称</span><br><span class=\"line\">CHANGE 列<span class=\"number\">1</span> 新列名<span class=\"number\">1</span> 数据类型 [ 约束 ] [COMMENT 注释] ,</span><br><span class=\"line\">CHANGE 列<span class=\"number\">2</span> 新列名<span class=\"number\">2</span> 数据类型 [ 约束 ] [COMMENT 注释] ,</span><br><span class=\"line\">…… ;</span><br></pre></td></tr></table></figure>\n<h3 id=\"删除字段\"><a href=\"#删除字段\" class=\"headerlink\" title=\"删除字段\"></a>删除字段</h3><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名称</span><br><span class=\"line\"><span class=\"keyword\">DROP</span> 列<span class=\"number\">1</span> ,</span><br><span class=\"line\"><span class=\"keyword\">DROP</span> 列<span class=\"number\">2</span> ，</span><br><span class=\"line\">…… ;</span><br></pre></td></tr></table></figure>\n<h3 id=\"修改表名\"><a href=\"#修改表名\" class=\"headerlink\" title=\"修改表名\"></a>修改表名</h3><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名 RENAME 新表名 </span><br></pre></td></tr></table></figure>\n","categories":["Java数据库","MySQL基础"],"tags":["数据库"]},{"title":"Servlet入门","url":"/p/1d42.html","content":"<h2 id=\"软件结构发展史\"><a href=\"#软件结构发展史\" class=\"headerlink\" title=\"软件结构发展史\"></a>软件结构发展史</h2><h3 id=\"单机时代-桌面应用\"><a href=\"#单机时代-桌面应用\" class=\"headerlink\" title=\"单机时代-桌面应用\"></a>单机时代-桌面应用</h3><p>◇软件所有数据都保存在电脑本地硬盘中<br>◇优点：易于使用，结构简单<br>◇缺点：数据难以共享，安全性差，更新不及时。<br>eg：Word，eclipse；</p>\n<h3 id=\"联机时代（Client-Server模式）\"><a href=\"#联机时代（Client-Server模式）\" class=\"headerlink\" title=\"联机时代（Client-Server模式）\"></a>联机时代（Client-Server模式）</h3><p>◇Client/Server结构（C/S结构）是指客户端和服务器结构<br>◇优点：数据方便共享，安全性高<br>◇缺点：必须安装客户端，升级与维护困难。<br>eg：QQ，微信，支护宝</p>\n<h3 id=\"互联网时代（Browser-Server模式）\"><a href=\"#互联网时代（Browser-Server模式）\" class=\"headerlink\" title=\"互联网时代（Browser-Server模式）\"></a>互联网时代（Browser-Server模式）</h3><p>◇Browser-Server（B/S）模式及浏览器和服务器架构模式<br>◇优点：开发简单，无需安装客户端，数据易于共享<br>◇缺点：相较于C/S模式，执行速度与用户体验较弱<br>eg：百度网，新浪微博；</p>\n<h2 id=\"Tomcat与Servlet\"><a href=\"#Tomcat与Servlet\" class=\"headerlink\" title=\"Tomcat与Servlet\"></a>Tomcat与Servlet</h2><h3 id=\"B-S模式执行流程\"><a href=\"#B-S模式执行流程\" class=\"headerlink\" title=\"B/S模式执行流程\"></a>B/S模式执行流程</h3><p><img src=\"/p/1d42/1.png\" class=\"lazyload\" data-srcset=\"/p/1d42/1.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\"></p>\n<h3 id=\"请求与响应\"><a href=\"#请求与响应\" class=\"headerlink\" title=\"请求与响应\"></a>请求与响应</h3><p>◇从浏览器发出送给服务器的数据包称为”请求（Request）”<br>◇从服务器返回给浏览器的结果称为”响应（Response）”<br>◇请求和响应对称出现</p>\n<h3 id=\"J2EE简介\"><a href=\"#J2EE简介\" class=\"headerlink\" title=\"J2EE简介\"></a>J2EE简介</h3><p>◇J2EE（Java 2 Platform Enterprise Edition） 是指”Java 2 企业版”<br>◇开发BS应用程序就是J2EE最核心的功能<br>◇J2EE由13个功能模块组成</p>\n<h3 id=\"J2EE中的13个功能模块\"><a href=\"#J2EE中的13个功能模块\" class=\"headerlink\" title=\"J2EE中的13个功能模块\"></a>J2EE中的13个功能模块</h3><p><img src=\"/p/1d42/2.png\" class=\"lazyload\" data-srcset=\"/p/1d42/2.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\"></p>\n<h3 id=\"Apache-Tomcat\"><a href=\"#Apache-Tomcat\" class=\"headerlink\" title=\"Apache Tomcat\"></a>Apache Tomcat</h3><p>◇Tomcat是一个Web应用服务器程序</p>\n<h3 id=\"J2EE与Tomcat的关系\"><a href=\"#J2EE与Tomcat的关系\" class=\"headerlink\" title=\"J2EE与Tomcat的关系\"></a>J2EE与Tomcat的关系</h3><p>◇J2EE是一组技术规范与指南，具体实现由软件厂商决定<br>◇Tomcat是J2EE Web（Servlet 与JSP）标准的实现者<br>◇J2SE是J2EE运行的基石，运行Tomcat离不开J2SE</p>\n<h3 id=\"Servlet\"><a href=\"#Servlet\" class=\"headerlink\" title=\"Servlet\"></a>Servlet</h3><p>◇Servelt与Tomcat的作用如下图，Servlet相当于服务器主机代码<br><img src=\"/p/1d42/3.png\" class=\"lazyload\" data-srcset=\"/p/1d42/3.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\"></p>\n<h3 id=\"Eclipse整合Tomcat\"><a href=\"#Eclipse整合Tomcat\" class=\"headerlink\" title=\"Eclipse整合Tomcat\"></a>Eclipse整合Tomcat</h3><p>◇下载Eclipse 64位的压缩包，下载Eclipse IDE for Java EE Developers版本；然后解压，运行eclipse.exe即可；打开后；Window-&gt;Preferences-&gt;搜索jre-&gt;Installed JREs-&gt;Add-&gt;Standard VM-&gt;选择安装的jdk1.8.0_181-&gt;finish-&gt;OK;<br>◇Window-&gt;Show View-&gt;Servers-&gt;OK-&gt;Servers下的链接-&gt;Apache-&gt;Tomcat v8.5 Server(自定义安装的版本)-&gt;next-&gt;Browse(选择安装路径)-&gt;apache-tomcat的安装路径-&gt;JRE:jdk1.8.0_181-&gt;Next-&gt;Finish-&gt;双击Tomcat v8.5-&gt;Server Locations:选择第二项Use Tomcat installation-&gt;Depoly path: \\apache-tomcat-8.5.34\\webapps-&gt;保存即可；</p>\n<h2 id=\"第一个Servlet\"><a href=\"#第一个Servlet\" class=\"headerlink\" title=\"第一个Servlet\"></a>第一个Servlet</h2><h3 id=\"创建应用程序\"><a href=\"#创建应用程序\" class=\"headerlink\" title=\"创建应用程序\"></a>创建应用程序</h3><p>◇新建一个Dynamic Web Project对象-&gt;Project name:FirstServlet-&gt;-Next-&gt;Next-&gt;勾选Generate web.xml-Finish;<br>◇在自动生成的Java Resources\\src目录下创建一个class,包名为com.lcg.servlet，类名为:FirstServlet;</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.lcg.servlet;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.PrintWriter;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletConfig;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FirstServlet</span> <span class=\"keyword\">extends</span> <span class=\"title\">HttpServlet</span></span>&#123;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">FirstServlet</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">\t\tSystem.out.println(<span class=\"string\">&quot;正在创建FirstServlet对象&quot;</span>);</span><br><span class=\"line\">\t&#125;\t</span><br><span class=\"line\">\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">init</span><span class=\"params\">(ServletConfig config)</span> <span class=\"keyword\">throws</span> ServletException </span>&#123;</span><br><span class=\"line\">\t\tSystem.out.println(<span class=\"string\">&quot;正在初始化FirstServlet对象&quot;</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">service</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">//接收请求发来的参数</span></span><br><span class=\"line\">\t\tString name = request.getParameter(<span class=\"string\">&quot;name&quot;</span>);</span><br><span class=\"line\">\t\tString html = <span class=\"string\">&quot;&lt;h1 style=&#x27;color:red&#x27;&gt;hi,&quot;</span> + name +<span class=\"string\">&quot;!&lt;/h1&gt;&lt;hr/&gt;&quot;</span>;</span><br><span class=\"line\">\t\tSystem.out.println(<span class=\"string\">&quot;返回给浏览器的响应数据为：&quot;</span> + html);</span><br><span class=\"line\">\t\tPrintWriter out = response.getWriter();</span><br><span class=\"line\">\t\tout.println(html);<span class=\"comment\">//将html发送回浏览器</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">destroy</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\tSystem.out.println(<span class=\"string\">&quot;正在销毁servlet对象&quot;</span>); </span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>◇配置web.xml，绑定URL</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 声明Servlet --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- servlet的别名 --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>first<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>com.imooc.servlet.FirstServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 将Servlet与URL绑定 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>first<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/hi<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>◇浏览器输入localhost:8080/FirstServlet/hi?name=Jackson</p>\n<h3 id=\"图解执行流程\"><a href=\"#图解执行流程\" class=\"headerlink\" title=\"图解执行流程\"></a>图解执行流程</h3><p>◇在地址栏输入地址以后,这个信息通过请求发送给Tomcat，然后Tomcat就根据发送来的url地址在web.xml中去查找与/hi匹配的servlet，这里查找匹配到name=first的servlet，然后根据这个name继续在web.xml中查找与之对应的类，这里与之对应的类为FirstServlet,Tomcat就会创建FirstServlet对象,并且执行其中的service方法;<br>◇service方法将name拼接成html字符串,Tomcat会将这个字符串通过response原封不动的发送给浏览器，浏览器再展示在页面上；<br><img src=\"/p/1d42/4.png\" class=\"lazyload\" data-srcset=\"/p/1d42/4.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\"></p>\n<h3 id=\"标准Java-Web工程结构\"><a href=\"#标准Java-Web工程结构\" class=\"headerlink\" title=\"标准Java Web工程结构\"></a>标准Java Web工程结构</h3><p><img src=\"/p/1d42/5.png\" class=\"lazyload\" data-srcset=\"/p/1d42/5.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\"><br>◇index.html放在WebContent目录下</p>\n<h3 id=\"Servlet开发步骤\"><a href=\"#Servlet开发步骤\" class=\"headerlink\" title=\"Servlet开发步骤\"></a>Servlet开发步骤</h3><p>◇创建Servlet类，继承HttpServlet<br>◇重写service方法，编写程序代码</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SampleServlet</span> <span class=\"keyword\">extends</span> <span class=\"title\">HttpServlet</span></span>&#123;</span><br><span class=\"line\">       <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">service</span><span class=\"params\">(HttpServletRequest request,HttpServletResponse response)</span> </span></span><br><span class=\"line\"><span class=\"function\">           <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">    \t PrintWriter out = response.getWriter();<span class=\"comment\">//向浏览器输出的数据流，返回PrintWriter对象</span></span><br><span class=\"line\">    \t out.println(<span class=\"string\">&quot;&lt;a href=&#x27;http://www.gamest.link&#x27;&gt;COF&lt;/a&gt;&quot;</span>);</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>◇配置web.xml，绑定URL</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 声明servlet --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>sample<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span><span class=\"comment\">&lt;!-- servlet的别名 ，Tomcat通过别名绑定URL，提高安全性--&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>com.gamest.servlet.SampleServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- 将servlet于URL绑定 --&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>sample<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/sample<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"Servlet访问方法\"><a href=\"#Servlet访问方法\" class=\"headerlink\" title=\"Servlet访问方法\"></a>Servlet访问方法</h3><p>◇<a href=\"http://IP地址：端口（8080）/context-path(eclipse的工程名称)/url-mapping\">http://IP地址：端口（8080）/context-path(eclipse的工程名称)/url-mapping</a><br>◇远程访问使用IP地址，本地访问localhost(127.0.0.1)<br>◇context-path成为”上下文路径”，默认为工程名</p>\n<h3 id=\"请求参数\"><a href=\"#请求参数\" class=\"headerlink\" title=\"请求参数\"></a>请求参数</h3><p>◇请求参数是指浏览器通过请求向Tomcat提交的数据<br>◇请求参数通常是用户输入的数据，待Servlet进行处理<br>◇参数名1=值1&amp;参数名2=值2&amp;参数名n=…<br>eg:<br>name=lcg&amp;mobile=15751015885&amp;sex=male&amp;spec=Program&amp;spec=Swimming</p>\n<h3 id=\"获取参数\"><a href=\"#获取参数\" class=\"headerlink\" title=\"获取参数\"></a>获取参数</h3><p>◇student.html文件</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>学员信息登记表<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>学员信息登记表<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">  <span class=\"comment\">&lt;!-- 表单提交的后台路径,请求方法--&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">action</span>=<span class=\"string\">&quot;/FirstServlet/sample&quot;</span> <span class=\"attr\">method</span>=<span class=\"string\">&quot;get&quot;</span> &gt;</span></span><br><span class=\"line\">\t\t姓名：<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;name&quot;</span>/&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">br</span>/&gt;</span></span><br><span class=\"line\">\t\t电话：<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;mobile&quot;</span>/&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">br</span>/&gt;</span></span><br><span class=\"line\">\t\t性别：</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;sex&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;width:100px;padding:5px;&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;male&quot;</span> &gt;</span>男<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;female&quot;</span>&gt;</span>女<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">br</span>/&gt;</span></span><br><span class=\"line\">\t\t特长:</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;checkbox&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;spec&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;English&quot;</span>/&gt;</span>英语</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;checkbox&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;spec&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;Program&quot;</span>/&gt;</span>编程</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;checkbox&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;spec&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;Speech&quot;</span>/&gt;</span>演讲</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;checkbox&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;spec&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;Swimming&quot;</span>/&gt;</span>游泳</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">br</span>/&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;提交&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">br</span>/&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>获取单个参数：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">String name = request.getParameter(<span class=\"string\">&quot;name&quot;</span>);</span><br><span class=\"line\">String mobile = request.getParameter(<span class=\"string\">&quot;mobile&quot;</span>);</span><br><span class=\"line\">String sex = request.getParameter(<span class=\"string\">&quot;sex&quot;</span>);</span><br></pre></td></tr></table></figure>\n<p>获取多个：如上面的spec特长数据；</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">String[] specs = request.getParameterValues(<span class=\"string\">&quot;spec&quot;</span>);<span class=\"comment\">//多个值的，用数组</span></span><br></pre></td></tr></table></figure>\n<p>在页面显示参数：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">out.println(<span class=\"string\">&quot;&lt;h1&gt;name:&quot;</span>+name+<span class=\"string\">&quot;&lt;/h1&gt;&quot;</span>);</span><br><span class=\"line\">   \t   out.println(<span class=\"string\">&quot;&lt;h1&gt;mobile:&quot;</span>+mobile+<span class=\"string\">&quot;&lt;/h1&gt;&quot;</span>);</span><br><span class=\"line\">   \t   out.println(<span class=\"string\">&quot;&lt;h1&gt;sex:&quot;</span>+sex+<span class=\"string\">&quot;&lt;/h1&gt;&quot;</span>);</span><br><span class=\"line\">   \t   <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;i&lt;specs.length;i++) &#123;</span><br><span class=\"line\">   \t\t   out.print(<span class=\"string\">&quot;&lt;h2&gt;spec:&quot;</span>+specs[i]+<span class=\"string\">&quot;&lt;/h2&gt;&quot;</span>);</span><br><span class=\"line\">   \t   &#125;</span><br><span class=\"line\">   \t   out.println(<span class=\"string\">&quot;&lt;a href=&#x27;http://www.gamest.link&#x27;&gt;COF&lt;/a&gt;&quot;</span>);</span><br></pre></td></tr></table></figure>\n<h2 id=\"Get与Post请求方法\"><a href=\"#Get与Post请求方法\" class=\"headerlink\" title=\"Get与Post请求方法\"></a>Get与Post请求方法</h2><p>◇Get方式是将数据通过在URL附加数据显性向服务器发送数据<br> eg：<a href=\"http://localhost:8080/FirstServlet/sample?name=Lcg\">http://localhost:8080/FirstServlet/sample?name=Lcg</a><br>◇Post方法会将数据存放在”请求体”中隐性向服务器发送数据<br>  eg：<a href=\"http://localhost:8080/FirstServlet/sample\">http://localhost:8080/FirstServlet/sample</a><br>  请求体：name=Lcg<br>◇区别：二者数据格式一样的，存放数据地址不一样，可以通过F12键Network来查看。<br>post存放在了不可见的请求体中；<br>◇Service是请求处理的核心方法，无论是get或者post都会被service方法处理，request。在Java中getMethod（）方法可以获取是那种方法。</p>\n<h3 id=\"设置方法\"><a href=\"#设置方法\" class=\"headerlink\" title=\"设置方法\"></a>设置方法</h3><p>◇设置表单的请求方法</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">action</span>=<span class=\"string\">&quot;/FirstServlet/sample&quot;</span> <span class=\"attr\">method</span>=<span class=\"string\">&quot;post|get&quot;</span> &gt;</span></span><br></pre></td></tr></table></figure>\n<p>◇设置请求参数，通过设置表单中input,select等标签的name属性。只有设置了name属性的表单元素才能在提交表单时传递它们的值；</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\">性别：</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;sex&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;width:100px;padding:5px;&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;male&quot;</span> &gt;</span>男<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;female&quot;</span>&gt;</span>女<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"Get与Post处理方式\"><a href=\"#Get与Post处理方式\" class=\"headerlink\" title=\"Get与Post处理方式\"></a>Get与Post处理方式</h3><p>◇所有请求 - service()方法；</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SampleServlet</span> <span class=\"keyword\">extends</span> <span class=\"title\">HttpServlet</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">//service是请求处理的核心方法，无论是get或者post都会被service（）方法处理</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">service</span><span class=\"params\">(HttpServletRequest request , HttpServletResponse response)</span> <span class=\"keyword\">throws</span> IOException</span>&#123;</span><br><span class=\"line\">\t\tString methodName = request.getMethod();<span class=\"comment\">//得到请求的方法;</span></span><br><span class=\"line\">\t\tString name = request.getParameter(<span class=\"string\">&quot;name&quot;</span>);</span><br><span class=\"line\">\t\tString mobile = request.getParameter(<span class=\"string\">&quot;mobile&quot;</span>);</span><br><span class=\"line\">\t\tString sex = request.getParameter(<span class=\"string\">&quot;sex&quot;</span>);</span><br><span class=\"line\">\t\tString[] specs = request.getParameterValues(<span class=\"string\">&quot;spec&quot;</span>);</span><br><span class=\"line\">\t\tPrintWriter out =  response.getWriter();<span class=\"comment\">//向浏览器输出的数据流</span></span><br><span class=\"line\">\t\tout.println(<span class=\"string\">&quot;&lt;h1&gt;method:&quot;</span> + methodName + <span class=\"string\">&quot;&lt;/h1&gt;&quot;</span>);</span><br><span class=\"line\">\t\tout.println(<span class=\"string\">&quot;&lt;h1&gt;name:&quot;</span> + name + <span class=\"string\">&quot;&lt;/h1&gt;&quot;</span>);</span><br><span class=\"line\">\t\tout.println(<span class=\"string\">&quot;&lt;h1&gt;mobile:&quot;</span> + mobile + <span class=\"string\">&quot;&lt;/h1&gt;&quot;</span>);</span><br><span class=\"line\">\t\tout.println(<span class=\"string\">&quot;&lt;h1&gt;sex:&quot;</span> + sex + <span class=\"string\">&quot;&lt;/h1&gt;&quot;</span>);</span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span> ; i &lt; specs.length ; i++)&#123;</span><br><span class=\"line\">\t\t\tout.println(<span class=\"string\">&quot;&lt;h2&gt;spec:&quot;</span> + specs[i] + <span class=\"string\">&quot;&lt;/h2&gt;&quot;</span>);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\tout.println(<span class=\"string\">&quot;&lt;a href=&#x27;http://www.baidu.com&#x27;&gt;Baidu&lt;/a&gt;&quot;</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>◇Get请求 - doGet()方法；</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">doGet</span><span class=\"params\">(HttpServletRequest request,HttpServletResponse response)</span> </span></span><br><span class=\"line\"><span class=\"function\">       \t\t<span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">       \tString name = request.getParameter(<span class=\"string\">&quot;name&quot;</span>);</span><br><span class=\"line\">       \tresponse.getWriter().println(<span class=\"string\">&quot;&lt;h1 style=&#x27;color:green&#x27;&gt;&quot;</span>+name+<span class=\"string\">&quot;&lt;/h1&gt;&quot;</span>);</span><br></pre></td></tr></table></figure>\n<p>◇Post请求 -  doPost()方法；</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//处理Post请求</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">doPost</span><span class=\"params\">(HttpServletRequest request,HttpServletResponse response)</span> </span></span><br><span class=\"line\"><span class=\"function\">        \t\t<span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">        \tString name = request.getParameter(<span class=\"string\">&quot;name&quot;</span>);</span><br><span class=\"line\">        \tresponse.getWriter().println(<span class=\"string\">&quot;&lt;h1 style=&#x27;color:red&#x27;&gt;&quot;</span>+name+<span class=\"string\">&quot;&lt;/h1&gt;&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"Get与Post应用场景\"><a href=\"#Get与Post应用场景\" class=\"headerlink\" title=\"Get与Post应用场景\"></a>Get与Post应用场景</h3><p>◇Get常用于不包含敏感信息的查询功能<br>   *例如：<a href=\"https://www.baidu.com/s?wd=imooc&amp;rsv_spt=1\">https://www.baidu.com/s?wd=imooc&amp;rsv_spt=1</a><br>◇Post用于安全性要求较高的功能或者服务器的”写”操作<br>   *用户登录<br>   *用户注册<br>   *更新新公司账目</p>\n<h3 id=\"Servlet生命周期\"><a href=\"#Servlet生命周期\" class=\"headerlink\" title=\"Servlet生命周期\"></a>Servlet生命周期</h3><p>◇装载 -web.xml     ◇创建 - 构造函数<br>◇初始化 - init()      ◇提供服务 - service()|doGet()|doPost<br>◇销毁 - destory() //应用重启或关闭的时候执行<br><strong>代码：</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FirstServlet</span> <span class=\"keyword\">extends</span> <span class=\"title\">HttpServlet</span></span>&#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">FirstServlet</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    \tSystem.out.println(<span class=\"string\">&quot;正在创建FirstServlet对象&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">init</span><span class=\"params\">(ServletConfig config)</span> <span class=\"keyword\">throws</span> ServletException </span>&#123;</span><br><span class=\"line\">\t\tSystem.out.println(<span class=\"string\">&quot;正在初始化FirstServlet对象&quot;</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">service</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> </span></span><br><span class=\"line\"><span class=\"function\">        <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">\t\tString name = request.getParameter(<span class=\"string\">&quot;name&quot;</span>);</span><br><span class=\"line\">\t\tString html = <span class=\"string\">&quot;&lt;h1 style=&#x27;color:pink&#x27;&gt;hi,&quot;</span>+name+<span class=\"string\">&quot;!&lt;/h1&gt;&quot;</span>;</span><br><span class=\"line\">\t\tSystem.out.println(<span class=\"string\">&quot;返回给浏览器的响应数据为：&quot;</span>+ html);</span><br><span class=\"line\">\t\t<span class=\"comment\">//response.getWriter()相当于从服务器向浏览器返回的输出流</span></span><br><span class=\"line\">\t\tPrintWriter out = response.getWriter();</span><br><span class=\"line\">\t\tout.println(html);<span class=\"comment\">//将html发送回浏览器</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">destroy</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\tSystem.out.print(<span class=\"string\">&quot;正在销毁FirstServlet对象&quot;</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>服务端：</strong><br><em>正在创建FirstServlet对象</em><br><em>正在初始化FirstServlet对象</em><br><em>返回给浏览器的响应数据为：<h1 style=\"color:pink\">hi,lcg!</h1></em><br><em>返回给浏览器的响应数据为：<h1 style=\"color:pink\">hi,lcg!</h1></em><br><em>五月 13, 2021 11:28:02 上午 org.apache.catalina.core.StandardContext reload</em><br><em>信息: Reloading Context with name [/FirstServlet] has started</em><br><em>正在销毁FirstServlet对象</em><br><em>​</em></p>\n<p>◇可以看到在访问浏览器页面后就会自动创建和初始化对象，而且每一个Servlet有且仅有一个对象；<br>当更改信息后，并保存（相当于应用重启或关闭）后就会销毁对象。</p>\n<h2 id=\"注解简化配置-及启动时加载Servlet\"><a href=\"#注解简化配置-及启动时加载Servlet\" class=\"headerlink\" title=\"注解简化配置 及启动时加载Servlet\"></a>注解简化配置 及启动时加载Servlet</h2><h3 id=\"使用注解简化配置\"><a href=\"#使用注解简化配置\" class=\"headerlink\" title=\"使用注解简化配置\"></a>使用注解简化配置</h3><p>◇Servlet 3.x之后引入了”注解Annotation”特性<br>◇注解用于简化Web应用程序的配置过程<br>◇Servlet有且仅有一个核心注解：@WebServlet</p>\n<h3 id=\"代码实现：\"><a href=\"#代码实现：\" class=\"headerlink\" title=\"代码实现：\"></a>代码实现：</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@WebServlet(&quot;/anno&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AnnotationServlet</span> <span class=\"keyword\">extends</span> <span class=\"title\">HttpServlet</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">service</span><span class=\"params\">(HttpServletRequest req, HttpServletResponse resp)</span> </span></span><br><span class=\"line\"><span class=\"function\">\t\t\t<span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">\t\tresp.getWriter().println(<span class=\"string\">&quot;I&#x27;m annotation servlet!&quot;</span>);\t\t</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>◇写了@WebServlet(“/anno”) 后，就不用再在web.xml里面进行配置了。它告诉我们映射的地址就是/anno</p>\n<h3 id=\"启动时加载Servlet\"><a href=\"#启动时加载Servlet\" class=\"headerlink\" title=\"启动时加载Servlet\"></a>启动时加载Servlet</h3><p>◇web.xml使用<load-on-startup>设置启动加载<br>◇<load-on-startup>0~9999</load-on-startup> 其中数字代表优先级，0位最高，有多个Servlet需要启动时加载，则优先加载优先级高的。<br>◇启动时加载在工作中常用于系统的预处理。<br>◇这种Servlet不需要提供服务，因此不用绑定URL</load-on-startup></p>\n<h3 id=\"代码实现\"><a href=\"#代码实现\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h3><h4 id=\"传统方法\"><a href=\"#传统方法\" class=\"headerlink\" title=\"传统方法\"></a>传统方法</h4><p>重写init()方法</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">init</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> ServletException </span>&#123;</span><br><span class=\"line\">\t\tSystem.out.print(<span class=\"string\">&quot;正在创建数据库&quot;</span>);</span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure>\n<p>分析Servlet</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>create<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>com.gamest.servlet.CreateServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">load-on-startup</span>&gt;</span>0<span class=\"tag\">&lt;/<span class=\"name\">load-on-startup</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"注解方法\"><a href=\"#注解方法\" class=\"headerlink\" title=\"注解方法\"></a>注解方法</h4><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//在使用注解开发时，强制要求必须设置一个URL，可以任意设置，只要不与其它冲突（可能不会用到，但一定要设置）</span></span><br><span class=\"line\"><span class=\"meta\">@WebServlet(urlPatterns=&quot;/unused&quot;,loadOnStartup=0)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CreateServlet</span> <span class=\"keyword\">extends</span> <span class=\"title\">HttpServlet</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">init</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> ServletException </span>&#123;</span><br><span class=\"line\">\t\tSystem.out.print(<span class=\"string\">&quot;正在创建数据库&quot;</span>);</span><br><span class=\"line\">\t&#125;           </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n","categories":["JavaWeb"],"tags":["Servlet"]},{"title":"ThreadLocal源码解读","url":"/p/4fbd.html","content":"<h3 id=\"ThreadLocal源码解读\"><a href=\"#ThreadLocal源码解读\" class=\"headerlink\" title=\"ThreadLocal源码解读\"></a>ThreadLocal源码解读</h3><h4 id=\"一、ThreadLocal的set方法\"><a href=\"#一、ThreadLocal的set方法\" class=\"headerlink\" title=\"一、ThreadLocal的set方法\"></a>一、ThreadLocal的set方法</h4><p>​       set()方法的作用是把想要保存或者是想要共享的我们实际需要的成员变量(例如用户信息user等等)存入ThreadLocal中，以便后续拿到；那么是如何实现的呢？通过下面的源码可以看到，首先得到当前线程的对象，然后再得到ThreadLocalMap对象；如果为空的话，就以获取的当前线程为键，自定义的对象为值来创建；如果不为空，就覆盖掉原来的值；</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">set</span><span class=\"params\">(T value)</span> </span>&#123;</span><br><span class=\"line\">        Thread t = Thread.currentThread();</span><br><span class=\"line\">        ThreadLocalMap map = getMap(t);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (map != <span class=\"keyword\">null</span>)</span><br><span class=\"line\">            map.set(<span class=\"keyword\">this</span>, value);</span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">            createMap(t, value);</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<p>下面来看看getMap()方法的实现：看到它直接返回threadLocals；而threadLocals是每一个线程都拥有的成员变量；注意：这个map以及map中的key和value都是保存在线程中的，而不是保存在ThreadLocal中；</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">ThreadLocalMap <span class=\"title\">getMap</span><span class=\"params\">(Thread t)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> t.threadLocals;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"二、ThreadLocal的get方法\"><a href=\"#二、ThreadLocal的get方法\" class=\"headerlink\" title=\"二、ThreadLocal的get方法\"></a>二、ThreadLocal的get方法</h4><p>​       get()方法是用来获取到ThreadLocal对象自己set的成员变量，那么get()是如何实现的呢？以下就是get()方法的实现；可以看到它首先通过currentThread()方法获取到当前的线程；然后在去看当前线程中的ThreadLocalMap是否为空；如果map为空，说明前面没有对其进行初始化，则执行InitialValue()来进行初始化；反之，则使用getEntry()方法将当前的ThreadLocal在map键值对中对应的值获取到；</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> T <span class=\"title\">get</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        Thread t = Thread.currentThread();</span><br><span class=\"line\">        ThreadLocalMap map = getMap(t);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (map != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            ThreadLocalMap.Entry e = map.getEntry(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (e != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                <span class=\"meta\">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class=\"line\">                T result = (T)e.value;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> setInitialValue();</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"三、ThreadLocal的remove方法\"><a href=\"#三、ThreadLocal的remove方法\" class=\"headerlink\" title=\"三、ThreadLocal的remove方法\"></a>三、ThreadLocal的remove方法</h4><p>​      remove方法用来删除保存的实际需要的成员变量；这里要注意的是，从线程中获取到的ThreadLocalMap对象是包含了很多个ThreadLocal的，但需要删除的只是当前的ThreadLocal对象，所以使用this引用作为参数执行m.remove()方法；</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">remove</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    ThreadLocalMap m = getMap(Thread.currentThread());</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (m != <span class=\"keyword\">null</span>)</span><br><span class=\"line\">        m.remove(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n","categories":["多线程"],"tags":["源码"]},{"title":"Servlet与JSP进阶","url":"/p/e24.html","content":"<h2 id=\"请求与响应的结构\"><a href=\"#请求与响应的结构\" class=\"headerlink\" title=\"请求与响应的结构\"></a>请求与响应的结构</h2><h3 id=\"HTTP请求的结构\"><a href=\"#HTTP请求的结构\" class=\"headerlink\" title=\"HTTP请求的结构\"></a>HTTP请求的结构</h3><p>◇HTTP请求包含三部分：请求行，请求头，请求体<br><img src=\"/p/e24/1.png\" class=\"lazyload\" data-srcset=\"/p/e24/1.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\"></p>\n<p>◇请求行：第一行，表明请求方法，请求URL及HTTP协议版本。<br>◇常用请求头：Accept；User-Agent(说明操作系统和浏览器的环境)等等；<br>◇只有POST才有请求体；<br>◇F12可以查看请求头等信息<br><img src=\"/p/e24/2.png\" class=\"lazyload\" data-srcset=\"/p/e24/2.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\"></p>\n<h3 id=\"巧用请求头开发多端应用\"><a href=\"#巧用请求头开发多端应用\" class=\"headerlink\" title=\"巧用请求头开发多端应用\"></a>巧用请求头开发多端应用</h3><p>◇在新建JAVA类时，可以直接新建Servlet，它会自动映射到地址；<br>◇代码演示</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doGet</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> </span></span><br><span class=\"line\"><span class=\"function\">    <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// TODO Auto-generated method stub</span></span><br><span class=\"line\">\t\tString userAgent = request.getHeader(<span class=\"string\">&quot;User-Agent&quot;</span>);<span class=\"comment\">//获取浏览器配置信息</span></span><br><span class=\"line\">\t\tresponse.setContentType(<span class=\"string\">&quot;text/html;charset=utf-8&quot;</span>);<span class=\"comment\">//编码方式，支持中文</span></span><br><span class=\"line\">\t\tresponse.getWriter().println(userAgent);</span><br><span class=\"line\">\t\tString output = <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">    <span class=\"comment\">//indexof()方法进行字符串查找，如果找到，则返回大于大于等于0的数字，若未找到，则返回-1；</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(userAgent.indexOf(<span class=\"string\">&quot;Windows NT&quot;</span>) != -<span class=\"number\">1</span>) &#123; <span class=\"comment\">//!= -1表明找到</span></span><br><span class=\"line\">\t\t\toutput = <span class=\"string\">&quot;&lt;h1&gt;这是ＰＣ端首页&lt;/h1&gt;&quot;</span>;</span><br><span class=\"line\">\t\t&#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(userAgent.indexOf(<span class=\"string\">&quot;iPhone&quot;</span>) != -<span class=\"number\">1</span> || userAgent.indexOf(<span class=\"string\">&quot;Android&quot;</span>) != -<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">\t\t\toutput = <span class=\"string\">&quot;&lt;h1&gt;这是移动端首页&lt;/h1&gt;&quot;</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\tresponse.getWriter().println(output);<span class=\"comment\">//对外输出</span></span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"响应的结构\"><a href=\"#响应的结构\" class=\"headerlink\" title=\"响应的结构\"></a>响应的结构</h3><p>◇HTTP响应包含三部分：响应行、响应头、响应体；<br><img src=\"/p/e24/3.png\" class=\"lazyload\" data-srcset=\"/p/e24/3.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\"></p>\n<h3 id=\"HTTP常见状态码\"><a href=\"#HTTP常见状态码\" class=\"headerlink\" title=\"HTTP常见状态码\"></a>HTTP常见状态码</h3><p><img src=\"/p/e24/4.png\" class=\"lazyload\" data-srcset=\"/p/e24/4.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\"></p>\n<h3 id=\"ContentType的作用\"><a href=\"#ContentType的作用\" class=\"headerlink\" title=\"ContentType的作用\"></a>ContentType的作用</h3><p>◇ContentType决定浏览器采用何种方法对响应体进行处理</p>\n<table>\n<thead>\n<tr>\n<th>MIME类型</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>text/plain</td>\n<td>纯文本</td>\n</tr>\n<tr>\n<td>text/html</td>\n<td>HTML文档</td>\n</tr>\n<tr>\n<td>text/xml</td>\n<td>XML文档</td>\n</tr>\n<tr>\n<td>application/x-msdownload</td>\n<td>需要下载的资源</td>\n</tr>\n<tr>\n<td>image/jpeg</td>\n<td></td>\n</tr>\n<tr>\n<td>image/gif</td>\n<td></td>\n</tr>\n<tr>\n<td>image/…</td>\n<td>图片资源</td>\n</tr>\n</tbody></table>\n<p>◇代码示例</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doGet</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> </span></span><br><span class=\"line\"><span class=\"function\">\t<span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">\t\tString output = <span class=\"string\">&quot;&lt;h1&gt;&lt;a href =&#x27;http://www.baidu.com&#x27;&gt;&lt;span&gt;百度&lt;/span&gt;&lt;/h1&gt;&quot;</span>;</span><br><span class=\"line\">\t\tresponse.setContentType(<span class=\"string\">&quot;application/x-msdownload;charset=utf-8&quot;</span>);<span class=\"comment\">//设置类型</span></span><br><span class=\"line\">\t\tresponse.getWriter().println(output);</span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"请求转发与重定向\"><a href=\"#请求转发与重定向\" class=\"headerlink\" title=\"请求转发与重定向\"></a>请求转发与重定向</h2><h3 id=\"使用\"><a href=\"#使用\" class=\"headerlink\" title=\"使用\"></a>使用</h3><p>◇多个Serclet(JSP)之间跳转有两种方式：<br>  ◇request.getRequestDispatcher().forward() - 请求转发<br>  ◇response.sendRedirect() - 响应重定向<br>创建一个servlet<br>  –运行后登陆：<a href=\"http://localhost:8080/request-struc/direct/check\">http://localhost:8080/request-struc/direct/check</a></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doGet</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> </span></span><br><span class=\"line\"><span class=\"function\">\t\t\t<span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">\t\tSystem.out.println(<span class=\"string\">&quot;用户登录成功&quot;</span>);<span class=\"comment\">//在控制台打印显示</span></span><br><span class=\"line\">\t\t<span class=\"comment\">//实现了请求转发功能,跳转到首页去</span></span><br><span class=\"line\">\t\trequest.getRequestDispatcher(<span class=\"string\">&quot;/direct/index&quot;</span>).forward(request, response);</span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure>\n<p>◇结果：<a href=\"http://localhost:8080/request-struc/direct/check\">http://localhost:8080/request-struc/direct/check</a>  地址没有改变；</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doGet</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> </span></span><br><span class=\"line\"><span class=\"function\">\t\t\t<span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">\t\tSystem.out.println(<span class=\"string\">&quot;用户登录成功&quot;</span>);<span class=\"comment\">//在控制台打印显示</span></span><br><span class=\"line\">\t\t<span class=\"comment\">//响应重定向需要增加contentPath：/request-struc</span></span><br><span class=\"line\">\t\tresponse.sendRedirect(<span class=\"string\">&quot;/request-struc/direct/index&quot;</span>);</span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure>\n<p>◇结果： <a href=\"http://localhost:8080/request-struc/direct/index\">http://localhost:8080/request-struc/direct/index</a> 地址变为跳转界面的url地址；<br>◇分析：<br>  –可以看到，请求转发后并没有改变页面地址，而响应重定向却改变了；因为请求转发功能是在服务器，也就是Tomcat内部把请求从第一个Servlet转发到第二个Servlet上；而重定向不同，它是在第一次处理完请求后，由浏览器重新发送一个新的请求，因而改变了地址；</p>\n<h3 id=\"原理\"><a href=\"#原理\" class=\"headerlink\" title=\"原理\"></a>原理</h3><p><strong>请求转发</strong><br>◇请求转发是服务器跳转，只会产生一次请求<br>◇请求转发语句是:request.getRequestDispatcher().forward();<br><img src=\"/p/e24/5.png\" class=\"lazyload\" data-srcset=\"/p/e24/5.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\"><br><strong>响应重定向</strong><br>◇重定向则是浏览器端跳转，会产生两次请求<br>◇响应重定向的语句：response.sendRedirect();<br><img src=\"/p/e24/6.png\" class=\"lazyload\" data-srcset=\"/p/e24/6.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\"></p>\n<h3 id=\"设置请求自定义属性\"><a href=\"#设置请求自定义属性\" class=\"headerlink\" title=\"设置请求自定义属性\"></a>设置请求自定义属性</h3><p>◇请求允许创建自定义属性<br>◇设置请求属性：request.setAttribute(属性名，属性值)<br>◇获取请求属性：Object attr = request.getAttribute(属性名)<br>◇代码演示<br> –请求端 Servlet1</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doGet</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> </span></span><br><span class=\"line\"><span class=\"function\">\t\t\t<span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">\t\tSystem.out.println(<span class=\"string\">&quot;用户登录成功&quot;</span>);<span class=\"comment\">//在控制台打印显示</span></span><br><span class=\"line\">\t\trequest.setAttribute(<span class=\"string\">&quot;username&quot;</span>, <span class=\"string\">&quot;admin&quot;</span>);<span class=\"comment\">//将用户信息保存到请求中</span></span><br><span class=\"line\">\t\t<span class=\"comment\">//实现了请求转发功能</span></span><br><span class=\"line\">\t\trequest.getRequestDispatcher(<span class=\"string\">&quot;/direct/index&quot;</span>).forward(request, response);</span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure>\n<p>–目的端Servlet2</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doGet</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">//获取属性,需强制转换</span></span><br><span class=\"line\">\t\tString name = (String)request.getAttribute(<span class=\"string\">&quot;username&quot;</span>);</span><br><span class=\"line\">\t\tresponse.getWriter().println(<span class=\"string\">&quot;this index page!current username is &quot;</span> + name);\t\t</span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure>\n<p>◇响应重定向由于会产生两个请求，当它发送第一个请求时，会把自定义属性传递给Tomcat，但第二次重新创建的请求并不包含自定义属性（因为这是新的请求并且直接请求Servlet2了）；因此使用响应重定向时，会看到username is null;如果在Servlet2里增加 request.setAttribute(“username”, “servlet2”);则会显示 username is servlet2；</p>\n<h2 id=\"浏览器Cookie-，Session-用户会话\"><a href=\"#浏览器Cookie-，Session-用户会话\" class=\"headerlink\" title=\"浏览器Cookie ，Session-用户会话\"></a>浏览器Cookie ，Session-用户会话</h2><h3 id=\"Cookie\"><a href=\"#Cookie\" class=\"headerlink\" title=\"Cookie\"></a>Cookie</h3><p>◇Cookie(小甜饼)是浏览器保存在本地的文本内容<br>◇Cookie常用于保存登录状态，用户资料等小文本<br>◇Cookie具有时效性，Cookie内容会伴随请求发送给Tomcat<br>◇Cookie如果不设置有效期，则默认存在于浏览器窗口中，当浏览器关闭，则自动销毁。<br>◇Cookie是以文件形式保存在电脑本地的:<br> C:\\Users\\ASUS\\AppData\\Local\\Google\\Chrome\\User Data\\Default\\Cookies文件；<br>–代码演示<br>–登录端，创建Cookie</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doGet</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> </span></span><br><span class=\"line\"><span class=\"function\">\t<span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">\t\tSystem.out.println(<span class=\"string\">&quot;用户登录成功&quot;</span>);</span><br><span class=\"line\">\t\tCookie cookie = <span class=\"keyword\">new</span> Cookie(<span class=\"string\">&quot;user&quot;</span> , <span class=\"string\">&quot;admin&quot;</span>);</span><br><span class=\"line\">\t    cookie.setMaxAge(<span class=\"number\">60</span>*<span class=\"number\">60</span>*<span class=\"number\">24</span>*<span class=\"number\">7</span>);<span class=\"comment\">//以秒为单位，设置有效期为一周</span></span><br><span class=\"line\">\t\tresponse.addCookie(cookie);<span class=\"comment\">//添加cookie</span></span><br><span class=\"line\">\t\tresponse.getWriter().print(<span class=\"string\">&quot;login success&quot;</span>);</span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure>\n<p>–首页端，获取Cookie</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doGet</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> </span></span><br><span class=\"line\"><span class=\"function\">\t <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">\t\tCookie[] cs = request.getCookies();<span class=\"comment\">//获取Cookie，返回数组</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(cs == <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">\t\t\tresponse.getWriter().print(<span class=\"string\">&quot;user not login&quot;</span>);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span>;<span class=\"comment\">//为空，终止程序</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\tString user = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span>(Cookie c : cs) &#123;</span><br><span class=\"line\">\t\t\tSystem.out.print(c.getName()+<span class=\"string\">&quot;:&quot;</span>+c.getValue());</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span>(c.getName().equals(<span class=\"string\">&quot;user&quot;</span>)) &#123;</span><br><span class=\"line\">\t\t\t\tuser=c.getValue();<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(user==<span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">\t\t\tresponse.getWriter().print(<span class=\"string\">&quot;user not login&quot;</span>);</span><br><span class=\"line\">\t\t&#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t\tresponse.getWriter().print(<span class=\"string\">&quot;user:&quot;</span>+user);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"Session-用户会话\"><a href=\"#Session-用户会话\" class=\"headerlink\" title=\"Session-用户会话\"></a>Session-用户会话</h3><p>◇Session(用户会话)用于保存于“浏览器窗口”对应的数据；<br>◇Session的数据存储在Tomcat服务器的内存中，具有时效性(30min)；<br>◇Session通过浏览器Cookie的Sessionid值提取用户数据；<br>◇代码演示<br>  –首页端</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doGet</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> </span></span><br><span class=\"line\"><span class=\"function\">    <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">\t\tHttpSession session = request.getSession();</span><br><span class=\"line\">\t\tString sessionId = session.getId();<span class=\"comment\">//获取SessionId</span></span><br><span class=\"line\">\t\tSystem.out.println(sessionId);</span><br><span class=\"line\">\t\tString name = (String)session.getAttribute(<span class=\"string\">&quot;name&quot;</span>);</span><br><span class=\"line\">\t\tresponse.setContentType(<span class=\"string\">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class=\"line\">\t\tresponse.getWriter().println(<span class=\"string\">&quot;这是首页，当前用户为：&quot;</span>+ name);</span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure>\n<p>  –登录端</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doGet</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span></span></span><br><span class=\"line\"><span class=\"function\">\t\t<span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">\t\tSystem.out.print(<span class=\"string\">&quot;用户登录成功&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">//获取到用户会话Session对象,登录端和首页的session是同一个对象</span></span><br><span class=\"line\">\t\tHttpSession session = request.getSession();</span><br><span class=\"line\">        String sessionId = session.getId();<span class=\"comment\">//获取SessionId</span></span><br><span class=\"line\">\t\tSystem.out.println(sessionId);</span><br><span class=\"line\">\t\tsession.setAttribute(<span class=\"string\">&quot;name&quot;</span>, <span class=\"string\">&quot;李&quot;</span>);</span><br><span class=\"line\">\t\t<span class=\"comment\">//请求转发</span></span><br><span class=\"line\">\t\trequest.getRequestDispatcher(<span class=\"string\">&quot;/session/index&quot;</span>).forward(request, response);</span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure>\n<p>◇对于session而言，形象的看成是一个和浏览器窗口绑定的对象；对于这一个浏览器窗口中所产生的数据，Tomcat会创建一个单独的存储空间；每个浏览器窗口所对应的存储空间都是不同的，存储空间的标识符就是sessionId；因此，同一个窗口中，登录和首页两个servlet共用一个存储空间，因此sessionId是一样的，而当切换一个窗口后，sessionId改变；</p>\n<h3 id=\"Session实现原理\"><a href=\"#Session实现原理\" class=\"headerlink\" title=\"Session实现原理\"></a>Session实现原理</h3><p>◇对于第一个浏览器窗口，它在向Tomcat发送请求的时候，Tomcat发现这是一个全新的请求，就会自动的在Tomcat的内存中开辟一段存储空间，并给它一个id号；当servlet调用setAttribute()方法的时候，就会将 name=张三 的数据保存在存储空间中，Tomcat就会把刚才生成的SessionId:7U809JP返回给浏览器；浏览器就会把这个id值存储到cookie中； 当浏览器再次请求的时候，就会附带这个sessionId，Tomcat就会根据这个ID去查找到对应的存储空间；假如servlet调用了getAttribute()方法,数据就会从存储空间中获得；<br>◇如果是一个新的浏览器窗口，就会创建新的session;<br><img src=\"/p/e24/7.png\" class=\"lazyload\" data-srcset=\"/p/e24/7.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\"></p>\n<h3 id=\"ServletContext\"><a href=\"#ServletContext\" class=\"headerlink\" title=\"ServletContext\"></a>ServletContext</h3><p>◇ ServletContext(Servlet上下文对象)，是Web应用全局对象<br>◇ 一个Web应用只会创建一个ServletContext对象<br>◇ ServletContext随着Web应用启动而自动创建<br>◇代码实现<br>  –初始化</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doGet</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> </span></span><br><span class=\"line\"><span class=\"function\">    <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">\t\tServletContext context = request.getServletContext();</span><br><span class=\"line\">\t\tcontext.setAttribute(<span class=\"string\">&quot;copyright&quot;</span>,<span class=\"string\">&quot;@2021 gamest.link 京ICP备xxxxxx&quot;</span>);</span><br><span class=\"line\">\t\tcontext.setAttribute(<span class=\"string\">&quot;title&quot;</span>, <span class=\"string\">&quot;个人开发网站&quot;</span>);</span><br><span class=\"line\">\t\tresponse.getWriter().print(<span class=\"string\">&quot;init susess&quot;</span>);</span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure>\n<p>  –默认页</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doGet</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> </span></span><br><span class=\"line\"><span class=\"function\">    <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">\t\tServletContext context = request.getServletContext();<span class=\"comment\">//获取应用程序全局对象</span></span><br><span class=\"line\">\t\tString copyright = (String)context.getAttribute(<span class=\"string\">&quot;copyright&quot;</span>);</span><br><span class=\"line\">\t\tString title = (String)context.getAttribute(<span class=\"string\">&quot;title&quot;</span>);</span><br><span class=\"line\">\t\tresponse.setContentType(<span class=\"string\">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class=\"line\">\t\tresponse.getWriter().print(<span class=\"string\">&quot;&lt;h1&gt;&quot;</span>+title+<span class=\"string\">&quot;&lt;/h1&gt;&quot;</span>+copyright);</span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure>\n<p>Java Web三大作用域对象<br>◇HttpServletRequest -请求对象   生命周期最短，当请求送往Tomcat，请求对象就会被创建，当Servlet处理完成后，产生响应并返回给浏览器，则就被销毁。<br>​</p>\n<p>◇HttpSession - 用户会话对象    第一次用户发来请求时被创建，一般30分钟内不被访问则会被销毁<br>​</p>\n<p>◇ServletContext - web应用全局对象  Web应用启动时创建，关闭或重启时销毁</p>\n<h2 id=\"问题解决\"><a href=\"#问题解决\" class=\"headerlink\" title=\"问题解决\"></a>问题解决</h2><h3 id=\"Web应用的中文乱码由来\"><a href=\"#Web应用的中文乱码由来\" class=\"headerlink\" title=\"Web应用的中文乱码由来\"></a>Web应用的中文乱码由来</h3><p>◇Tomcat默认使用字符集ISO-8859-1，属于西欧字符集<br>◇解决乱码的核心思路是将ISO-8859-1转换为UTF-8<br>◇Servlet中请求与响应都需要设置UTF-8字符集<br>​</p>\n<p>◇代码实现<br>        –Get&amp;Post方法分别实现</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doGet</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span></span></span><br><span class=\"line\"><span class=\"function\">    <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">//对于Tomcat8.x的版本，默认get请求发送中文就是UTF-8的格式，因此无需转换</span></span><br><span class=\"line\">\t\tString ename = request.getParameter(<span class=\"string\">&quot;ename&quot;</span>);</span><br><span class=\"line\">\t\tString address = request.getParameter(<span class=\"string\">&quot;address&quot;</span>);</span><br><span class=\"line\">\t\tSystem.out.println(ename + <span class=\"string\">&quot;:&quot;</span> + address);</span><br><span class=\"line\">\t\tresponse.setContentType(<span class=\"string\">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class=\"line\">\t\tresponse.getWriter().println(ename + <span class=\"string\">&quot;:&quot;</span> + address);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@see</span> HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class=\"line\"><span class=\"comment\">\t */</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doPost</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span></span></span><br><span class=\"line\"><span class=\"function\">        <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">//request.setCharacterEncoding方法用于将请求体中的字符集转换为UTF-8，方法简单</span></span><br><span class=\"line\">        <span class=\"comment\">//但对于get方法无效</span></span><br><span class=\"line\">\t\trequest.setCharacterEncoding(<span class=\"string\">&quot;UTF-8&quot;</span>);<span class=\"comment\">//一定要写在post方法的第一行</span></span><br><span class=\"line\">\t\t<span class=\"comment\">// TODO Auto-generated method stub</span></span><br><span class=\"line\">\t\tString ename = request.getParameter(<span class=\"string\">&quot;ename&quot;</span>);<span class=\"comment\">//获取基本参数</span></span><br><span class=\"line\">\t\tString address = request.getParameter(<span class=\"string\">&quot;address&quot;</span>);</span><br><span class=\"line\">\t\tSystem.out.println(ename + <span class=\"string\">&quot;:&quot;</span> + address);</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">//转换语句，但过于麻烦</span></span><br><span class=\"line\">\t\t<span class=\"comment\">//String utf8Ename = new String(ename.getBytes(&quot;iso-8859-1&quot;) , &quot;utf-8&quot;); </span></span><br><span class=\"line\">\t\t<span class=\"comment\">//String utf8Address = new String(address.getBytes(&quot;iso-8859-1&quot;) , &quot;utf-8&quot;);</span></span><br><span class=\"line\">\t\t<span class=\"comment\">//System.out.println(utf8Ename + &quot;:&quot; + utf8Address);</span></span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"web-xml常用配置\"><a href=\"#web-xml常用配置\" class=\"headerlink\" title=\"web.xml常用配置\"></a>web.xml常用配置</h3><p>◇修改web应用默认首页<br>◇Servlet通配符映射及初始化参数<br>◇设置404、500等状态码默认页面<br>​</p>\n<p>◇代码实现<br>–不用指定具体地址，默认访问的页面</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">welcome-file-list</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">welcome-file</span>&gt;</span>index.html<span class=\"tag\">&lt;/<span class=\"name\">welcome-file</span>&gt;</span> //如果index.html存在，则优先访问此页面</span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">welcome-file</span>&gt;</span>index.htm<span class=\"tag\">&lt;/<span class=\"name\">welcome-file</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">welcome-file</span>&gt;</span>index.jsp<span class=\"tag\">&lt;/<span class=\"name\">welcome-file</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">welcome-file</span>&gt;</span>default.html<span class=\"tag\">&lt;/<span class=\"name\">welcome-file</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">welcome-file</span>&gt;</span>default.htm<span class=\"tag\">&lt;/<span class=\"name\">welcome-file</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">welcome-file</span>&gt;</span>default.jsp<span class=\"tag\">&lt;/<span class=\"name\">welcome-file</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">welcome-file-list</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>◇Servlet通配符映射(*)<br>  –XML</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">  \t<span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>patternServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">  \t<span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>com.lcg.servlet.pattern.PatternServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servlet-mapping</span>&gt;</span></span><br><span class=\"line\">  \t<span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>patternServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\">  \t<span class=\"tag\">&lt;<span class=\"name\">url-pattern</span>&gt;</span>/pattern/*<span class=\"tag\">&lt;/<span class=\"name\">url-pattern</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>  –Java</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.lcg.servlet.pattern;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.PrintWriter;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServlet;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PatternServlet</span> <span class=\"keyword\">extends</span> <span class=\"title\">HttpServlet</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">service</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">//查询员工的基本信息</span></span><br><span class=\"line\">\t\t<span class=\"comment\">//获取当前访问的URL</span></span><br><span class=\"line\">\t\tString url = request.getRequestURL().toString();</span><br><span class=\"line\">\t\tSystem.out.println(url);</span><br><span class=\"line\">        <span class=\"comment\">//lastIndexOf()方法获取最后一次字符参数出现的位置，substring()方法从指定位置截取字符</span></span><br><span class=\"line\">\t\tString id = url.substring(url.lastIndexOf(<span class=\"string\">&quot;/&quot;</span>) + <span class=\"number\">1</span>);</span><br><span class=\"line\">\t\t<span class=\"keyword\">int</span> eid =  Integer.parseInt(id);</span><br><span class=\"line\">\t\tresponse.setContentType(<span class=\"string\">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class=\"line\">\t\tPrintWriter out = response.getWriter();</span><br><span class=\"line\">\t\tout.println(id);</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(eid == <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">\t\t\tout.println(<span class=\"string\">&quot;张三&quot;</span>);</span><br><span class=\"line\">\t\t&#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(eid == <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">\t\t\tout.println(<span class=\"string\">&quot;李四&quot;</span>);</span><br><span class=\"line\">\t\t&#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t\tout.println(<span class=\"string\">&quot;其他员工&quot;</span>);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>◇配置全局参数(应用程序的基本全局配置项目用context-param标签实现)<br>  –XML配置</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">context-param</span>&gt;</span> </span><br><span class=\"line\"> \t<span class=\"tag\">&lt;<span class=\"name\">param-name</span>&gt;</span>copyright<span class=\"tag\">&lt;/<span class=\"name\">param-name</span>&gt;</span></span><br><span class=\"line\"> \t<span class=\"tag\">&lt;<span class=\"name\">param-value</span>&gt;</span>© 2018 gamest.com  京ICP备 XXXXXXXX号-22<span class=\"tag\">&lt;/<span class=\"name\">param-value</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;/<span class=\"name\">context-param</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">context-param</span>&gt;</span></span><br><span class=\"line\"> \t<span class=\"tag\">&lt;<span class=\"name\">param-name</span>&gt;</span>title<span class=\"tag\">&lt;/<span class=\"name\">param-name</span>&gt;</span></span><br><span class=\"line\"> \t<span class=\"tag\">&lt;<span class=\"name\">param-value</span>&gt;</span>无产阶级联合起来！<span class=\"tag\">&lt;/<span class=\"name\">param-value</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;/<span class=\"name\">context-param</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p> –Java端使用</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doGet</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> </span></span><br><span class=\"line\"><span class=\"function\">    <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">\t\tServletContext context = request.getServletContext();<span class=\"comment\">//获取</span></span><br><span class=\"line\">        <span class=\"comment\">//获取在web.xml中设置的全局参数使用getInitParameter()方法</span></span><br><span class=\"line\">\t\tString copyright = context.getInitParameter(<span class=\"string\">&quot;copyright&quot;</span>);</span><br><span class=\"line\">\t\tcontext.setAttribute(<span class=\"string\">&quot;copyright&quot;</span>, copyright);</span><br><span class=\"line\">\t\tString title = context.getInitParameter(<span class=\"string\">&quot;title&quot;</span>);</span><br><span class=\"line\">\t\tcontext.setAttribute(<span class=\"string\">&quot;title&quot;</span>, title);</span><br><span class=\"line\">\t\tresponse.getWriter().println(<span class=\"string\">&quot;init success&quot;</span>);</span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure>\n<p>◇指定错误页面</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 指定错误页面 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">error-page</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">error-code</span>&gt;</span>404<span class=\"tag\">&lt;/<span class=\"name\">error-code</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">location</span>&gt;</span>/error/404.html<span class=\"tag\">&lt;/<span class=\"name\">location</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">error-page</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">error-page</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">error-code</span>&gt;</span>500<span class=\"tag\">&lt;/<span class=\"name\">error-code</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">location</span>&gt;</span>/error/500.html<span class=\"tag\">&lt;/<span class=\"name\">location</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">error-page</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"JSP九大内置对象\"><a href=\"#JSP九大内置对象\" class=\"headerlink\" title=\"JSP九大内置对象\"></a>JSP九大内置对象</h3><p>◇对于JSP来说，平时我们使用的时候它内置了一些对象来简化我们的操作；<br>◇最重要的一个对象<a href=\"https://blog.csdn.net/weiwjacsdn/article/details/90612014\">pageContext</a><br><img src=\"/p/e24/8.png\" class=\"lazyload\" data-srcset=\"/p/e24/8.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\"><br>◇代码实现</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;%@ page language=<span class=\"string\">&quot;java&quot;</span> contentType=<span class=\"string\">&quot;text/html; charset=UTF-8&quot;</span></span><br><span class=\"line\">    pageEncoding=<span class=\"string\">&quot;UTF-8&quot;</span> %&gt;</span><br><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">&lt;meta charset=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span><br><span class=\"line\">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">\t&lt;%</span><br><span class=\"line\">        <span class=\"comment\">//内置对象，可直接拿来使用;因为在经过Tomcat转义为java文件后,</span></span><br><span class=\"line\">        <span class=\"comment\">//可以发现前面已经定义了HttpServletRequest request</span></span><br><span class=\"line\">\t\tString url = request.getRequestURL().toString(); <span class=\"comment\">// 即HttpServletRequest对象</span></span><br><span class=\"line\">\t\tresponse.getWriter().println(url);<span class=\"comment\">//HttpServletResponse</span></span><br><span class=\"line\">\t%&gt;</span><br><span class=\"line\">\t&lt;% out.println(<span class=\"string\">&quot;&lt;br&gt;ABCCC&quot;</span>); </span><br><span class=\"line\">\t\tsession.setAttribute(<span class=\"string\">&quot;user&quot;</span>, <span class=\"string\">&quot;张三&quot;</span>);</span><br><span class=\"line\">\t\tout.println((String)session.getAttribute(<span class=\"string\">&quot;user&quot;</span>));</span><br><span class=\"line\">\t%&gt;</span><br><span class=\"line\">\t&lt;%</span><br><span class=\"line\">\t\tString cp = application.getInitParameter(<span class=\"string\">&quot;copyright&quot;</span>) ; <span class=\"comment\">//ServletContext</span></span><br><span class=\"line\">\t\tout.println(<span class=\"string\">&quot;&lt;hr/&gt;&quot;</span>);</span><br><span class=\"line\">\t\tout.println(cp);</span><br><span class=\"line\">        <span class=\"comment\">//pageContext相当于一个中转站,通过它来获取当前页面的其他内置对象;</span></span><br><span class=\"line\">\t\tpageContext.getRequest();</span><br><span class=\"line\">\t\tpageContext.getResponse();</span><br><span class=\"line\">\t\tpageContext.getSession();</span><br><span class=\"line\">\t\tpageContext.getServletContext();</span><br><span class=\"line\">\t%&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<p> –显示错误信息方法<br>       isErrorPage=”true”表示当前jsp是用来显示错误的页面</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;%@ page contentType=<span class=\"string\">&quot;text/html;charset=utf-8&quot;</span> isErrorPage=<span class=\"string\">&quot;true&quot;</span>%&gt;</span><br><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">&lt;meta charset=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span><br><span class=\"line\">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">\t服务器内部错误，请联系管理员 ,错误信息如下：</span><br><span class=\"line\">\t&lt;%</span><br><span class=\"line\">        <span class=\"comment\">//应用异常对象</span></span><br><span class=\"line\">\t\tString msg = exception.getMessage(); </span><br><span class=\"line\">\t\tout.print(<span class=\"string\">&quot;&lt;br&gt;&quot;</span> + exception.getClass().getSimpleName() + <span class=\"string\">&quot;:&quot;</span> + msg);</span><br><span class=\"line\">\t%&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<h3 id=\"Java-Web打包与发布\"><a href=\"#Java-Web打包与发布\" class=\"headerlink\" title=\"Java Web打包与发布\"></a>Java Web打包与发布</h3><p>◇Java Web应用采用war包进行发布<br>◇发布路径为：{TOMCAT_HOME}/webapps<br>◇Eclipse支持war包导出<br>​</p>\n<p>☆打包步骤<br> File -&gt; Export -&gt; Web -&gt; WAR file -&gt; Destination(指定保存文件路径后缀不能少eg:servlet_test.war) -&gt;finish<br>☆使用方法<br>将.war文件复制到Tomcat\\apache-tomcat-8.5.34\\webapps路径中，然后启动Tomcat\\apache-tomcat-8.5.34\\bin中的startup.bat文件<br>​</p>\n<p>☆Tomcat配置文件修改<br>◇找到Tomcat\\apache-tomcat-8.5.34\\conf中的servlet.xml文件，在63行，将8080改为80，则以后访问不需要加localhost:8080也不要加localhost:80;</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;Connector connectionTimeout=<span class=\"string\">&quot;20000&quot;</span> port=<span class=\"string\">&quot;80&quot;</span> protocol=<span class=\"string\">&quot;HTTP/1.1&quot;</span> redirectPort=<span class=\"string\">&quot;8443&quot;</span>/&gt;</span><br></pre></td></tr></table></figure>\n<p>◇将path路径后面只留”/“，则访问以后直接localhost即可</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;Context docBase=<span class=\"string\">&quot;F:\\JAVA\\Tomcat\\apache-tomcat-8.5.34\\webapps\\request-struc&quot;</span> path=<span class=\"string\">&quot;/&quot;</span> reloadable=<span class=\"string\">&quot;true&quot;</span> source=<span class=\"string\">&quot;org.eclipse.jst.jee.server:request-struc&quot;</span>/&gt;&lt;/Host&gt;</span><br></pre></td></tr></table></figure>\n<p> reloadable:是否自动加载<br>​</p>\n","categories":["JavaWeb"],"tags":["JSP"]},{"title":"【转载】如何成为优秀的程序员","url":"/p/6380.html","content":"<p>​        本文转自:<a href=\"http://www.akaedu.org/pages/news_detail.php?id=294\">http://www.akaedu.org/pages/news_detail.php?id=294</a> </p>\n<p>​        我们的老师每天都要应对报名者和学员提出的很多同样的问题，以下是这类典型问题的汇总：嵌入式行业（或者IT业）有没有前途？我听说编程编到三十五 岁就没人要了，一定要转行找出路是吗？做驱动开发和做应用开发哪个更有前途？我一开始看什么书都看不懂，怎么才能理出一个学习顺序？诸如此类。这使我迫切 地感觉到，应该总结这样一份非具体技术问题的FAQ了。本文仅代表我个人观点，有问题欢迎Email: <a href=\"mailto:songjinshan@akaedu.org\">songjinshan@akaedu.org</a>。</p>\n<p>​        在看这份FAQ之前，你必须先读完ESR的《如何成为一名黑客》（本文末尾附有中译版），该文所讲过的道理我不再重复。该文用很大的篇幅讲什么是黑客文 化，虽然态度和信仰的确是成功的最关键因素，但是你肯定会想，做不做黑客跟我没关系，我只是想学个一技之长，找个好工作而已，对吧？那么肯定更希望获得一 些具体的可操作的指导。</p>\n<h4 id=\"1、各种软件技术之间是怎样的关系？\"><a href=\"#1、各种软件技术之间是怎样的关系？\" class=\"headerlink\" title=\"1、各种软件技术之间是怎样的关系？\"></a>1、各种软件技术之间是怎样的关系？</h4><p>  我把软件技术分为三个层次：<br>        <strong>问题域</strong>：计算机图形学、音视频编码、信息安全、模式识别、信息检索、自然语言分析、人工智能、科学计算等；<br>        <strong>系统集成</strong>：C++和Java等面向对象语言、Python等解释型语言、LISP等函数式编程语言、GUI、中间件、编译器与解释器、虚拟机、数据库、网络服务、并行计算、集群、Peer2Peer、系统管理等；</p>\n<p><strong>系统功能</strong>：硬件描述语言、计算机体系结构与编程模型、指令集与汇编语言、C语言、内核、文件系统、设备驱动、网络协议、POSIX等。</p>\n<p>​        计算机最终是做什么用的呢？最终是通过问题域的各种技术为用户解决问题的，这些技术都包含很高深的算法，然而它们必须在一个平台上运行，它们需要利用平台 提供的各种基础设施，比如计算能力、I/O能力和网络互联能力。系统功能和系统集成层就是用来实现这个平台的。系统功能层实现计算、I/O和网络的基本功 能，系统集成层对这些基本功能做一些抽象和包装，提供更方便灵活的接口。</p>\n<h4 id=\"2、为什么要学习嵌入式技术？\"><a href=\"#2、为什么要学习嵌入式技术？\" class=\"headerlink\" title=\"2、为什么要学习嵌入式技术？\"></a>2、为什么要学习嵌入式技术？</h4><p>​        在亚嵌的学习期间，你将详细了解系统功能层的各部分是如何工作的，也会在面向对象编程、GUI、数据库、网络服务等系统集成层的技术方向进行探索。嵌入式 系统可说是麻雀虽小五脏俱全，虽然没有PC和服务器那么复杂，但计算机系统的各种组成一样也不缺。因此，以嵌入式系统作为切入点开始学习软件技术是非常好 的选择，避开不必要的复杂性，把握计算机系统最根本的概念和技术要点。打下扎实的基础之后，你的职业发展则完全不必局限于嵌入式领域，即使你日后做PC或 服务器开发，在亚嵌所学的知识和技能同样使你终生受益。正如庖丁解牛，心中有全牛，自然就能游刃有余。</p>\n<p>​        另一方面，你一定见到各大网站都有大量的宣传，说现在嵌入式行业前景空前的好，嵌入式人才紧缺，有几百万职位空缺等等。这些说法也是对的，但我们需要更深 入地理解这说明了什么问题。刚才我们说，嵌入式系统也是一个完整的计算机系统，和PC或服务器没有本质的区别，事实上，嵌入式、PC和服务器的界限已经越 来越模糊了。以前的嵌入式就是单片机，只能做简单的运算处理，现在的ARM处理器性能比从前的奔腾还强，打游戏、看电影都没问题，谁能说它不是PC呢？另 外有些专用的嵌入式系统已经在充当服务器的功能了，而集群技术更是可以使许多廉价的处理器组合在一起发挥大型服务器的作用。由于嵌入式越来越多地应用到电 器、汽车和各种设施上，无处不在，并且与PC、服务器呈融合的趋势，所以嵌入式行业前景空前的好。</p>\n<p>​        那么，为什么说嵌入式人才紧缺呢？其实，学嵌入式系统就是学计算机系统，本质上并没有什么特殊的只有嵌入式系统才有的技术。说嵌入式人才紧缺，其实质上是 说真正懂计算机的人才紧缺。现在很多学校的所谓“软件学院”培养的软件人才都是一叶障目不见泰山的：只懂J2EE和.NET，没学过C和汇编；只会调库函 数sort()，而对各种排序算法一无所知；设计模式、软件工程讲得头头是道，却不知道好的软件还是要靠牛人靠智商来做的。培养人像蒸包子一样一屉一屉地 出，靠软件工程搭一条生产线，然后让熟练工人站在生产线上拧螺丝，幻想着这样就能生产出好的软件，那是把软件工程和程序员的作用本末倒置了。现在嵌入式开 发对程序员的素质要求更高了，以上这类“软件人才”不能胜任了，因此说嵌入式人才紧缺。亚嵌的就业班虽然只有几个月，但培养目标是有完整的计算机系统概念 的软件人才，而不是只会拧螺丝的软件工人，这正得益于我们始终坚持做嵌入式培训而不是Java或.NET培训。</p>\n<h4 id=\"3、有人说软件技术变化太快，现在学的东西过两年就要完全淘汰，是吗？\"><a href=\"#3、有人说软件技术变化太快，现在学的东西过两年就要完全淘汰，是吗？\" class=\"headerlink\" title=\"3、有人说软件技术变化太快，现在学的东西过两年就要完全淘汰，是吗？\"></a>3、有人说软件技术变化太快，现在学的东西过两年就要完全淘汰，是吗？</h4><p>​        你知道这话是什么人说的吗？必然是已经被淘汰的人说的。比如Delphi、BCB、PB这些开发工具和语言，都曾经很是风光了一阵，但现在已经完全被 Java和.NET取代了。那么Java和.NET会不会被取代呢，也许在相当长的时间内还不会，但是我看好Python。</p>\n<p>​        这些被淘汰的程序员有一些共同的特点：只会用鼠标拖拽控件，离开IDE就不知道如何工作，学点儿花拳绣腿的功夫就想吃一辈子，对学习新技术不感兴趣，做一 天和尚撞一天钟。现在请回头看看FAQ1，在整个软件技术领域，这些变化快的技术其实只占了很小的一块，却成了这些人的全部看家本领，这样的人能不被淘汰 吗？</p>\n<p>​        与这些流行的开发工具和语言相反，很多技术和思想是很少变化的。比如，POSIX和SUS标准规定了一套系统函数接口和基本命令的语义，只有实现了这些才 可以称作UNIX，因此今天的Linux、Solaris跟20多年前的UNIX在系统功能层上是基本一致的。而指导计算机科学发展的数学理论，甚至是老 祖宗们在计算机还没诞生的年代就替我们想好的：布尔代数发表于19世纪，直到一个世纪后发明了计算机和数字电路才有了用武之地；数论在17世纪就出现了， 一直都被数学家们当成一套好玩的理论，但只是好玩而已，直到计算机密码学诞生后才发现它的实际用处。</p>\n<p>​        各种流行的开发工具和高级语言虽然变化很快，但是底层的编程语言却非常稳定，各种操作系统的内核都是用C语言写的，以前是这样，以后也不会改变。另一方 面，各种编程语言的设计思想也是非常稳定的。其实世界上只有两种编程语言，一种是C，一种是LISP，前者是imperative的，是对计算机模型的抽 象，后者是functional的，是对数学函数模型的抽象。面向对象是一种重要的软件工程思想，却算不上一种新的语言模型，应该归在C的一类。属于同一 类的各种语言其实都大同小异，一个精通C++的人学习Java需要多长时间？熟悉语法一个星期，熟悉类库三个星期，一个月足矣，以往的经验都可以套到新的 编程语言上。然而要想习得深厚的算法功底、逻辑思维和抽象思维修养，能够真正说清楚“系统”是什么，如何分析和设计“系统”，需要多长时间？恐怕要数十 年。</p>\n<h4 id=\"4、C和Java哪种语言更好？\"><a href=\"#4、C和Java哪种语言更好？\" class=\"headerlink\" title=\"4、C和Java哪种语言更好？\"></a>4、C和Java哪种语言更好？</h4><p>​        计算机科学与编程语言无关，甚至与计算机本身也没太大关系，它研究的对象并不是计算机，而是人分析问题解决问题的方法论。程序写出来最主要不是为了给计算 机执行的，而是为了给人看的，使用编程语言和使用自然语言一样是为了表达和交流，只不过程序还可以顺便给计算机执行而已。</p>\n<p>​        以上这些话并不是我说的，而是一位著名的计算机科学家说的。所以，在编程语言的层面上争论是没有意义的。很多初学者错误地认为掌握了编程语言就等于学会了 计算机，一种编程语言都还没有掌握好，更没有上升到方法论的层面，只有这种无知的人才会去争论哪种语言好的问题。掌握了编程语言远远不等于学会了计算机， 而只是最开始的一步，最简单的一步，到了工作中，用到什么语言就去学什么语言，什么语言过时了就丢掉，编程语言不需要积累因为它太简单了，真正需要积累的 是方法论。</p>\n<p>​        很多人喜欢参与到这类争论之中，毫无例外，每个人都在为自己熟练掌握的编程语言辩护，就是“我会的语言最好，我不会的语言都不好”，其实这些人真正想说的 是“我会的语言最好是千秋万代，我就不必学新的语言，不必适应新的变化了”，概括起来说就是一个字，懒。真正的高手都是会很多编程语言的，国外有些做技术 咨询的，每年都要学好几门新的编程语言，这样才能应对市场的变化。不断丢掉旧的编程语言学习新的，看起来好像完全是白费力气，没有积累，其实，每种编程语 言的设计都有独到之处，体现了每种语言的精髓，在融汇百家之后积累下来的正是方法论。</p>\n<p>​       争论哪种语言能做的事情更多、功能更强是没有意义的。从理论上说，任何一种符合图灵机模型的编程语言，加上适当的I/O扩展都可以做任何事情，用 shell脚本也可以写出很像样的游戏来。只不过各种语言的设计目标不同，表达能力不同，做不同的事情所需的代码量不同而已。</p>\n<p>​        另外一种错误认识是：哪种语言的市场最大，开发人员最多，哪种语言就最好。单从这种意义上说，Java的确比C更好，所以往届有学员问我们为什么只教C语 言。请你注意，操作系统内核是用C写的，各种底层的应用程序包括Java虚拟机也是用C写的。如果你想学Java，在亚嵌的学习完成后你将有能力分析 Java虚拟机的实现，站在计算机系统的高度来学Java才会使你成为真正的Java高手。如果你只想速成，想早点学成一门技术去做拧螺丝的工作，那么亚嵌不适合你。</p>\n<p>​       在FAQ3里说过，世界上有C和LISP两种编程语言，你现在学了C，以后学了C++、Java、.NET等等，也仍然只认识了半个世界。LISP和 Haskell构成了另外半个世界，现在很常见的Python和JavaScript等解释型语言也借用了functional programming的思想。如果你只管闷着头写代码，而不去广泛涉猎，那么你将错过很多精彩。</p>\n<h4 id=\"5、我听说编程编到三十五岁就没人要了一定要转行找出路是吗？\"><a href=\"#5、我听说编程编到三十五岁就没人要了一定要转行找出路是吗？\" class=\"headerlink\" title=\"5、我听说编程编到三十五岁就没人要了一定要转行找出路是吗？\"></a>5、我听说编程编到三十五岁就没人要了一定要转行找出路是吗？</h4><p>​      这个观点虽然很流行，但根本不值一驳。现在三十五岁转行的那些人，都具有前面所说的那些特征，对学习新技术不感兴趣，对探索计算机的本质不感兴趣，得过且 过，下了班就是打游戏、看电视，总之就是懒。如果是开出租、摆摊，勤快人懒人都有饭吃，而IT这一行对懒人是非常无情的，懒人就不该入IT这一行，不从自 身找原因，却到处散布这种言论，怪社会不好，打击新人的信心，着实可恨。</p>\n<p>​       另外一种情况，编程编到三十五岁，进入公司的管理层，或者自己创业，这都是很勤快的人，如果他们把这种勤快用在技术上肯定也可以做得更好，所以也无法证明编程编到三十五岁会因为没有出路而转行。</p>\n<p>​       编程不是个体力活，需要高强度的思考和智力投入，分析能力、思考能力都需要时间积累起来，所以并不是越年轻干得越好。相反，我认为三十岁以前写的代码都是 垃圾，三十岁以后才能写出像样的程序来。如果希望一辈子走技术的道路而不会被迫转行，就要不断地把自己的工作性质从“体力活”变成“脑力活”。什么叫“不 断地”变呢？这里的“体力活”并不是指种地、盖房子这种劳动，而是指简单重复地编写代码，这时你会感觉，派给你的工作都能凭以往的经验轻松应付了，但是千 万不要满足于现状，就像温水煮青蛙一样，这是危险的处境！要摆脱这种处境就需要学习、思考、提高，让公司派给你更有挑战性的工作，在工作中应用新学到的知 识和技术就是“脑力活”了，但是用得久了又会变成简单重复的“体力活”，这时就需要再学习、再提高，所以叫做“不断地”把自己的工作性质从“体力活”变成 “脑力活”。如果有一天你发现，自己长期陷于简单重复的劳动之中，并且业余时间非常少，无法学习提高，这说明公司不会用人，你就该考虑跳糟了。</p>\n<p>​       从另外一个角度来说，如果希望一辈子走技术的道路，就要有自己的核心竞争力，这个核心竞争力决不是凭以往的经验能够做某些工作的能力，而是学习能力、思考 能力和解决有挑战性的新问题的潜力。在IT这一行，凭借以往的经验干重复的活是干不长久的，原因很简单，一个问题不会被解决两次，当你发现你的经验能够解 决一类问题时，别人早把解决这一类问题的套路编写成framework，新上手的人即使不具备你的这些经验也可以调用framework中的类和函数来解 决问题，然后在这个framework的基础上积累新的经验解决新的问题。正因为如此，全世界开发人员的经验才会积累起来，促使软件技术发展得如此迅速。 这并不是说经验完全没有用，最关键的，学习和思考也是建立在以往经验的基础之上的。另一方面，现有的framework并不一定是某方面开发经验的完美整 合，也需要不断发展，用新的办法重新解决老问题，以Web开发为例，从早期的ASP、PHP到后来的.NET、J2EE，到现在的Ruby on Rails、Django等等，这些framework解决的是同一问题，就是如何快速有效地开发Web应用，这方面的经验被不断重新整合，推陈出新。总 结一下，什么才是核心竞争力呢？应该是在经验的基础上学习新技术、解决新问题的能力。</p>\n<h4 id=\"6、做驱动开发还是做应用开发更有前途？\"><a href=\"#6、做驱动开发还是做应用开发更有前途？\" class=\"headerlink\" title=\"6、做驱动开发还是做应用开发更有前途？\"></a>6、做驱动开发还是做应用开发更有前途？</h4><p>​       意思就是说，“你告诉我哪个更有前途，我就好好学哪个，另外一个就不用学了”。问这种问题的学员往往会同时问另外一些问题：我以后就想做驱动开发，你教我这些应用开发的技术有什么用？C++用得多吗？学了有什么用？我以后不想做GUI，你教我Qt有什么用？</p>\n<p>​        学习最忌讳的就是“有用的就学，没有用的就不学”这种功利的态度。两个问题：第一，在你还没学进去、还不了解这种技术时，要如何判断这种技术学了有没有 用？只能是根据道听途说，看各种论坛上都怎么说的，岂不知论坛上参与这种讨论的100%都是菜鸟，有的水平还不如你。第二，就算你学的技术没有用上，有什 么损失吗？从亚嵌毕业的学员从事各种各样的开发工作，有做驱动的，有做系统编程的，有做GUI的，有做Web开发的，只要确定了做一类工作，就不可能把在 亚嵌四个月学的知识都用上，但至少也用得上3/4的知识，假设剩下的1/4你一辈子也没机会用上了，那也就损失你一个月的学习时间而已，相比于你的收获， 这算是很大的损失吗？请注意，上面的假设是不成立的，没用上的那1/4也只是暂时没用上而已，程序员要换工作或者换项目是很常见的，任何人都不可能只涉及 一类开发工作，只要有扎实的基础、完备的知识体系，任何工作都能轻松上手。</p>\n<p>​        扎实的基础，完备的知识体系，我们在安排就业班课程体系的时候，正是以这两点为依据的。有的课程内容很少有学员在以后工作中会用到，但是缺了这一环就不成 为一个完备的知识体系，例如MMU和Cache，那这种课该不该上呢？毫无疑问该上。有的课程培养一种基本的编程思想，例如通过C++来讲面向对象编程， 通过Qt来讲面向对象、事件驱动和状态机编程，这些编程思想是程序员必备的基本素质，而C++和Qt可能有些学员以后工作用不到，那这种课该不该上呢？毫 无疑问该上。至于还有些人争论说C++不如Java用得多，Qt不如GTK用得多，请翻回去看FAQ4，这种争论是无意义的，有工夫争论谁优谁劣，不如把 两种都学了，会更有收获。</p>\n<p>​        回到做驱动开发还是做应用开发更有前途的问题。我只能说，做好了都有前途，做不好都没有前途，只会做一样而完全不懂另一样是最没前途的。不要以为内核开发 者就不写应用程序，Linus写了一个源代码管理系统git来维护内核，因为觉得现有的源代码管理系统都不好用。牛人都是这样，需要什么就写什么，才不管 是kernel space还是user space。同样，做应用开发如果不懂内核，也没有办法很好地利用内核提供的服务写出性能最优的程序。做内核难，因为调试难，要跟踪大量的并发线程，因为 入门难，要写一个hello world都需要学很多知识。做应用也难，回头去看FAQ1，计算机科学从理论到实践大部分都在上面两层做文章。所以不存在哪个更难哪个更有前途的问题， 任何关于哪个更难的讨论都是too naive的。</p>\n<h4 id=\"7、我一开始看什么书都看不懂，怎么才能理出一个学习顺序？\"><a href=\"#7、我一开始看什么书都看不懂，怎么才能理出一个学习顺序？\" class=\"headerlink\" title=\"7、我一开始看什么书都看不懂，怎么才能理出一个学习顺序？\"></a>7、我一开始看什么书都看不懂，怎么才能理出一个学习顺序？</h4><p>​       以前有个学员在学C语言时说，“C语言很多地方都很奇怪，都得用内核的知识去解释，可是你又不先教我内核，我没法学C语言。我只好自己看操作系统的书，看 内核代码，可是看不懂。”当然看不懂了，内核代码都是用C写的，如果不学内核就没法学C语言，那不学C语言又怎么可能看懂内核？看来这是一个鸡生蛋还是蛋 生鸡的问题。</p>\n<p>​        懒真的是人的本性，就连学习的过程都希望是一条路顺利地走下去，不用动脑就能学会的：身后走过的路都是“已知”，每走一步就把眼前新的“未知”变成“已 知”，如此一路走来，把所有的“未知”都变成“已知”就算学成了。可惜，知识不是一条路，而是一个圈，你从任何一个地方跳进这个圈开始走，身后都是“未 知”，眼前也都是“未知”。有的人就是不能容忍自己的身后是“未知”：看一本书，一个新的概念A是用我不了解的概念B、C来解释的，我连B、C都不懂怎么 学A？没法学了！</p>\n<p>  不是人家书写得不好，而是没有任何办法能把一个圈扯成一条直线的。学习的过程本质上就是一个循环往复的过程，唯一的办法就是“存疑”：在本子上记着，有 B、C这样两个概念是我暂时不理解的，然后就不再去想这回事，而是相信自己已经理解了B、C，基于自己的理解和假设去学习A，由A再去理解X、Y，这样学 下去，走完一圈之后再回来，自然就明白当初对B、C的假设正确不正确了，理解了这两个概念，就从本子上划掉，这时需要再走一圈，把原来的一些错误认识纠正 过来。所以，任何书都要至少看两遍，第二遍看的时候你会对很多概念有新的认识，因为你看过这个概念后面的章节，在此基础上产生了新的认识。古人早就明白这 个道理，所以提出了“温故而知新”。</p>\n<p>​        亚嵌的课程体系经过多年教学实践的锤炼，已经很好地理顺了知识之间的关系，使你从最佳的位置跳进这个圈开始学习，所谓“最佳位置”是指，在你初学的时候需 要容忍的“未知”尽可能少，需要做的假设尽可能少，但要想消除所有的“未知”是不可能的，例如没有学内核就要学C语言。根据你以往的经验和一些运气因素， 你对内核的一些假设可能正确也可能错误，但这并不影响你学C语言，对内核的一些错误假设可能会导致在学C语言的过程中有些误解，但没关系，只要跟着我们的 课程体系一步一步走下来，这些误解和错误的假设最终都会纠正过来。</p>\n<h4 id=\"8、有哪些好书可以推荐一下吗？\"><a href=\"#8、有哪些好书可以推荐一下吗？\" class=\"headerlink\" title=\"8、有哪些好书可以推荐一下吗？\"></a>8、有哪些好书可以推荐一下吗？</h4><p>​        能问出这个问题的都是聪明的学员。看书学习是入门过程中非常重要的一环，如果用一本烂书入门，浪费时间还是小事，如果被误导了就麻烦了，如果形成的错误认 识不能及时纠正，变得根深蒂固了就更麻烦了。所以，看书一定要有“品牌意识”，在决定看书学习一门技术时先问问这一领域最权威的书是哪本，这里列举一些 Bible级别的书：<br>  <em>T</em>he C Programming Language, 2nd Edition；*<br>  <em>C++ Primer, 4th Edition；</em><br>  <em>Structure and Interpretation of Computer Programs, 2nd Edition；</em><br>  <em>Introduction to Algorithms, 2nd Edition；</em><br>  <em>Compilers: Principles, Techniques, and Tools；</em><br>  <em>Advanced Programming in the UNIX Environment, 2nd Edition；</em><br>  <em>TCP/IP Illustrated, Volume 1: The Protocols；</em><br>  <em>UNIX Network Programming Volume 1, 3rd Edition: The Sockets Networking API；</em><br>  <em>Understanding the Linux Kernel, 3rd Edition；</em><br>  Linux Device Drivers, 3rd Edition。*</p>\n<p>  在学习过程中，眼界一定要开阔，不要学到一点东西就沾沾自喜，坐井观天，以为这就是技术的全部。要多和别人交流，多了解别人在看什么书、别人对技术的认识是怎样的。书是看不完的，活到老学到老，对于程序员来说尤其如此。</p>\n<h4 id=\"9、如何处理打游戏和学习的关系？\"><a href=\"#9、如何处理打游戏和学习的关系？\" class=\"headerlink\" title=\"9、如何处理打游戏和学习的关系？\"></a>9、如何处理打游戏和学习的关系？</h4><p>​        ESR的文章中也说过，黑客们都有一些特别的业余爱好，并且往往是非理性思维的爱好，大概是需要换换脑子吧。典型的例子是因滑翔机事故去世的 Stevens，他写了FAQ8所推荐的Bible当中的三本。爱打游戏的优秀程序员肯定大有人在，有一些还成了优秀的游戏开发人员。但是我认为，要想成 为优秀的程序员，必须有两点基本素质，一是对编程非常感兴趣，二是对所有别的事情都不感兴趣，或者都不如对编程感兴趣。有人说，人的一天有24小时，8小时休息，8小时上班，另外的8小时在干什么就决定了你以后有多大发展。一有时间就看书学习，这就是一个程序员应该做的。今天打游戏，明天看电影，后天炒股，那么你就等着三十五岁下岗。如果你不能够认同编程和思考是比其它事情更有吸引力的，那么你不必学编程，集中精力去做最喜欢的事情或许会有更大的成就。</p>\n","categories":["杂谈"],"tags":["程序员"]},{"title":"工厂模式","url":"/p/177d.html","content":"<h2 id=\"课程介绍\"><a href=\"#课程介绍\" class=\"headerlink\" title=\"课程介绍\"></a>课程介绍</h2><p>◇ 介绍工厂模式的用途与特点<br>◇ 介绍设计模式<br>◇ 掌握工厂模式的项目应用  </p>\n<h2 id=\"设计模式\"><a href=\"#设计模式\" class=\"headerlink\" title=\"设计模式\"></a>设计模式</h2><p>◇ 设计模式是前辈总结的设计经验<br>◇ 设计模式的目标是代码更容易理解,更容易维护<br>◇ 通过设计模式可以让代码更加可靠  </p>\n<h2 id=\"设计模式的分类\"><a href=\"#设计模式的分类\" class=\"headerlink\" title=\"设计模式的分类\"></a>设计模式的分类</h2><p>◇ 创建型模式<br>◇ 结构型模式<br>◇ 行为型模式 </p>\n<h2 id=\"工厂模式\"><a href=\"#工厂模式\" class=\"headerlink\" title=\"工厂模式\"></a>工厂模式</h2><p>◇ 工厂模式用于隐藏创建对象的细节<br>◇ 工厂模式核心:工厂类(Factory)<br>◇ 工厂模式可细分为简单工厂、工厂方法与抽象工厂  </p>\n<h2 id=\"简单工厂\"><a href=\"#简单工厂\" class=\"headerlink\" title=\"简单工厂\"></a>简单工厂</h2><p><img src=\"/p/177d/1627975803385-c3f9255b-05f0-4a31-874c-4b893aaf5838.png\" class=\"lazyload\" data-srcset=\"/p/177d/1627975803385-c3f9255b-05f0-4a31-874c-4b893aaf5838.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h2 id=\"项目应用-i18n国际化\"><a href=\"#项目应用-i18n国际化\" class=\"headerlink\" title=\"项目应用-i18n国际化\"></a>项目应用-i18n国际化</h2><p>◇工程结构<br><img src=\"/p/177d/1627977675883-ad7ab257-f14f-42ad-aafe-390fd88d3ca1.png\" class=\"lazyload\" data-srcset=\"/p/177d/1627977675883-ad7ab257-f14f-42ad-aafe-390fd88d3ca1.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>◇软件类</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Software</span> </span>&#123;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">\t   I18N i18n = I18NFactory.geI18NObject(<span class=\"string\">&quot;China&quot;</span>);<span class=\"comment\">//静态的，不需要new，直接调用方法即可</span></span><br><span class=\"line\">\t   System.out.println(i18n.getTitle());</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>◇国际化工厂类</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">I18NFactory</span> </span>&#123;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> I18N <span class=\"title\">geI18NObject</span><span class=\"params\">(String area)</span> </span>&#123;<span class=\"comment\">//静态工厂</span></span><br><span class=\"line\">\t   <span class=\"keyword\">if</span>(area.equals(<span class=\"string\">&quot;China&quot;</span>)) &#123;</span><br><span class=\"line\">\t\t   <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Chinese();</span><br><span class=\"line\">\t   &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(area.equals(<span class=\"string\">&quot;UK&quot;</span>)) &#123;</span><br><span class=\"line\">\t\t   <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> English();</span><br><span class=\"line\">\t   &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(area.equals(<span class=\"string\">&quot;Japan&quot;</span>)) &#123;</span><br><span class=\"line\">\t\t   <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Japanese();</span><br><span class=\"line\">\t   &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t   <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">\t   &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>◇语言类</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Chinese</span> <span class=\"keyword\">implements</span> <span class=\"title\">I18N</span> </span>&#123;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getTitle</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t   <span class=\"keyword\">return</span> <span class=\"string\">&quot;这是中文&quot;</span>;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>◇接口</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">I18N</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getTitle</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>◇面向接口的开发</p>\n<h2 id=\"项目应用-多端应用切换\"><a href=\"#项目应用-多端应用切换\" class=\"headerlink\" title=\"项目应用-多端应用切换\"></a>项目应用-多端应用切换</h2><p>◇工程目录<br><img src=\"/p/177d/1627993810721-d64e385b-e0f7-4dd9-ab02-1b4bc564436e.png\" class=\"lazyload\" data-srcset=\"/p/177d/1627993810721-d64e385b-e0f7-4dd9-ab02-1b4bc564436e.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>◇工厂类</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DeviceFactory</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Device <span class=\"title\">getDevice</span><span class=\"params\">(HttpServletRequest req)</span> </span>&#123;</span><br><span class=\"line\">\t  String userAgent=req.getHeader(<span class=\"string\">&quot;user-agent&quot;</span>);</span><br><span class=\"line\">\t  System.out.println(userAgent);</span><br><span class=\"line\">\t  <span class=\"keyword\">if</span>(userAgent.indexOf(<span class=\"string\">&quot;Windows NT&quot;</span>)!=-<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">\t\t  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> DesktopDevice();</span><br><span class=\"line\">\t  &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(userAgent.indexOf(<span class=\"string\">&quot;iPhone&quot;</span>)!=-<span class=\"number\">1</span> || userAgent.indexOf(<span class=\"string\">&quot;Android&quot;</span>)!=-<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">\t\t  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> MobileDevice();</span><br><span class=\"line\">\t  &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t  <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">\t  &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n","categories":["Java数据库","框架前置知识"]},{"title":"XML入门","url":"/p/f394.html","content":"<h2 id=\"课程简介\"><a href=\"#课程简介\" class=\"headerlink\" title=\"课程简介\"></a>课程简介</h2><h3 id=\"XML重点知识\"><a href=\"#XML重点知识\" class=\"headerlink\" title=\"XML重点知识\"></a>XML重点知识</h3><p><img src=\"/p/f394/1.png\" class=\"lazyload\" data-srcset=\"/p/f394/1.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\"></p>\n<h3 id=\"Servlet入门\"><a href=\"#Servlet入门\" class=\"headerlink\" title=\"Servlet入门\"></a>Servlet入门</h3><p><img src=\"/p/f394/2.png\" class=\"lazyload\" data-srcset=\"/p/f394/2.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\"></p>\n<h3 id=\"JSP入门\"><a href=\"#JSP入门\" class=\"headerlink\" title=\"JSP入门\"></a>JSP入门</h3><p><img src=\"/p/f394/3.png\" class=\"lazyload\" data-srcset=\"/p/f394/3.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\"></p>\n<h3 id=\"Servlet与JSP进阶\"><a href=\"#Servlet与JSP进阶\" class=\"headerlink\" title=\"Servlet与JSP进阶\"></a>Servlet与JSP进阶</h3><p><img src=\"/p/f394/4.png\" class=\"lazyload\" data-srcset=\"/p/f394/4.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\"></p>\n<h3 id=\"JSTL与EL表达式\"><a href=\"#JSTL与EL表达式\" class=\"headerlink\" title=\"JSTL与EL表达式\"></a>JSTL与EL表达式</h3><p><img src=\"/p/f394/5.png\" class=\"lazyload\" data-srcset=\"/p/f394/5.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\"><br>XML</p>\n<p>◇XML介绍与用途；       ◇XML的语法规则<br>◇XML语义约束；          ◇Java解析XML<br>◇XPath路径表达式</p>\n<h3 id=\"XML是什么\"><a href=\"#XML是什么\" class=\"headerlink\" title=\"XML是什么\"></a>XML是什么</h3><p>◇ <a href=\"https://www.w3school.com.cn/x.asp\">XML</a>的全称是EXtensible Markup Language,可扩展标记语言  <br>◇ 编写XML就是编写标签，与HTML非常类似，扩展名.xml  <br>◇ 良好的人机可读性  </p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\">#hr.xml</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">employee</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>张三<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">age</span>&gt;</span>31<span class=\"tag\">&lt;/<span class=\"name\">age</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">height</span>&gt;</span>178<span class=\"tag\">&lt;/<span class=\"name\">height</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">employee</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"XML与HTML的比较\"><a href=\"#XML与HTML的比较\" class=\"headerlink\" title=\"XML与HTML的比较\"></a>XML与HTML的比较</h3><p>◇XML与HTML非常相似，都是编写标签<br>◇XML没有预定义标签，HTML存在大量预定义标签<br>◇XML重在保存与传输数据，HTML用于显示信息<br>◇eg：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\">xml: </span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">school</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">class</span> <span class=\"attr\">no</span>=<span class=\"string\">&quot;G3N1&quot;</span>&gt;</span> </span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">grade</span>&gt;</span>三年级<span class=\"tag\">&lt;/<span class=\"name\">grade</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>1班<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;/<span class=\"name\">class</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">class</span> <span class=\"attr\">no</span>=<span class=\"string\">&quot;G3N2&quot;</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">grade</span>&gt;</span>三年级<span class=\"tag\">&lt;/<span class=\"name\">grade</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>2班<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;/<span class=\"name\">class</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">school</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\">html:</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;index.html&quot;</span>&gt;</span>首页<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"XML用途\"><a href=\"#XML用途\" class=\"headerlink\" title=\"XML用途\"></a>XML用途</h3><p>◇Java程序的配置描述文件；在程序开发过程中会遇到各种各样的设置项，如果把这些设置项写死在程序中，每次修改配置的时候需要对代码进行修改并重新编译，非常的麻烦；这个时候就可以考虑将这些配置写在xml文件中保存；例如下面的web应用配置文件；</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\">web.xml - web应用配置文件</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">web-app</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">servlet-name</span>&gt;</span>InitTest<span class=\"tag\">&lt;/<span class=\"name\">servlet-name</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">servlet-class</span>&gt;</span>moreservlets.InitServlet<span class=\"tag\">&lt;/<span class=\"name\">servlet-class</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">init-param</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">param-name</span>&gt;</span>param1<span class=\"tag\">&lt;/<span class=\"name\">param-name</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">param-value</span>&gt;</span>value1<span class=\"tag\">&lt;/<span class=\"name\">param-value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">init-param</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">init-param</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">param-name</span>&gt;</span>param2<span class=\"tag\">&lt;/<span class=\"name\">param-name</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">param-value</span>&gt;</span>2<span class=\"tag\">&lt;/<span class=\"name\">param-value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">init-param</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">servlet</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>◇用于保存程序产生的数据；因为xml拥有良好的人机可读性，所以xml可以用来对数据进行存储和转移；<br>◇网络间的数据传输；即在网络传输的过程中，发送方可以将数据组织成xml，接收方对xml进行解析就可以了；如：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\">webservice底层soap协议：</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Envelope</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">Body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">m:reverse</span> <span class=\"attr\">xmlns:m</span>=<span class=\"string\">&quot;urn:strings-com:IString&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">theString</span>&gt;</span>Hello,World<span class=\"tag\">&lt;/<span class=\"name\">theString</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">m:reverse</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">Body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">Envelope</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"XML的文档结构\"><a href=\"#XML的文档结构\" class=\"headerlink\" title=\"XML的文档结构\"></a>XML的文档结构</h3><p>◇第一行必须是XML声明<br>◇有且只有一个根节点<br>◇XML标签的书写规则与HTML完全相同</p>\n<h3 id=\"XML标签书写规则\"><a href=\"#XML标签书写规则\" class=\"headerlink\" title=\"XML标签书写规则\"></a>XML标签书写规则</h3><p>◇合法的标签名</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">abc</span>&gt;</span>abc<span class=\"tag\">&lt;/<span class=\"name\">abc</span>&gt;</span> × (无意义的)</span><br><span class=\"line\">&lt;考试$&gt;数学期末&lt;/考试$&gt; ×  (不可包含特殊字符)</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">class</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">class</span>&gt;</span>班级<span class=\"tag\">&lt;/<span class=\"name\">class</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">class</span>&gt;</span> × (父标签子标签不可同名)</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">shop-cart</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">item</span>&gt;</span>相册<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">shop-cart</span>&gt;</span> √</span><br></pre></td></tr></table></figure>\n<p> ◇适当的注释与缩进； 适当的注释与缩进可以让XML文档更容易阅读。  </p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 员工信息 --&gt;</span> </span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">employee</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>张三<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">age</span>&gt;</span>31<span class=\"tag\">&lt;/<span class=\"name\">age</span>&gt;</span> </span><br><span class=\"line\"> <span class=\"comment\">&lt;!--身高cm--&gt;</span> </span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">height</span>&gt;</span>178<span class=\"tag\">&lt;/<span class=\"name\">height</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">employee</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>◇合理使用属性     </p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">shop-cart</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">sn</span>=<span class=\"string\">&quot;771938&quot;</span> <span class=\"attr\">category</span>=<span class=\"string\">&quot;电器&quot;</span>&gt;</span> </span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>XX空调<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">price</span>&gt;</span>2000.00<span class=\"tag\">&lt;/<span class=\"name\">price</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">num</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">num</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">sn</span>=<span class=\"string\">&quot;890321&quot;</span> <span class=\"attr\">category</span>=<span class=\"string\">&quot;食品&quot;</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>法式面包<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">price</span>&gt;</span>10.00<span class=\"tag\">&lt;/<span class=\"name\">price</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">num</span>&gt;</span>5<span class=\"tag\">&lt;/<span class=\"name\">num</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">shop-cart</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>◇特殊字符与CDATA标签；<br>– 标签体中，出现”&lt;”、”&gt;”特殊字符，会破坏文档原有的结构  ；<br>– 解决方案1：使用实体引用。  <br>– 解决方案2：使用CDATA标签。  </p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\">无效的XML：</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">exam</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">question</span>&gt;</span>1+4&lt;3是否正确？<span class=\"tag\">&lt;/<span class=\"name\">question</span>&gt;</span><span class=\"comment\">&lt;!--出现小于号&lt;会别认为是特殊字符 --&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">question</span>&gt;</span>3+5&gt;8是否正确？<span class=\"tag\">&lt;/<span class=\"name\">question</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">exam</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>◇ XML支持五种实体引用  <br><img src=\"/p/f394/6.png\" class=\"lazyload\" data-srcset=\"/p/f394/6.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\"><br>◇修改后的XML</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">exam</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">question</span>&gt;</span>1+4<span class=\"symbol\">&amp;lt;</span>3是否正确？<span class=\"tag\">&lt;/<span class=\"name\">question</span>&gt;</span><span class=\"comment\">&lt;!--出现小于号&lt;会别认为是特殊字符 --&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">question</span>&gt;</span>3+5<span class=\"symbol\">&amp;gt;</span>8是否正确？<span class=\"tag\">&lt;/<span class=\"name\">question</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">exam</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>◇实体引用的方法只适用于特殊字符少的情况；解决批量的问题用CDATA标签；<br>◇ CDATA 指的是不应由 XML 解析器进行解析的文本数据 <br>◇ 从”<!--[CDATA[\"开始，到\"]]-->“结束   <br>◇如我们想要<content>标签的内容原义输出；则可使用CDATA包裹；</content></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">lesson</span>&gt;</span> </span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">content</span>&gt;</span></span><br><span class=\"line\">   &lt;![CDATA[</span><br><span class=\"line\"> 本节我们来学习html中a标签的使用：</span><br><span class=\"line\"> &lt;body&gt;</span><br><span class=\"line\"> &lt;a href=&quot;index.html&quot;&gt;首页&lt;/a&gt;</span><br><span class=\"line\"> &lt;/body&gt;</span><br><span class=\"line\">   ]]&gt;</span><br><span class=\"line\"> <span class=\"tag\">&lt;/<span class=\"name\">content</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">lesson</span>&gt;</span> </span><br></pre></td></tr></table></figure>\n<p>◇有序的子元素，在XML多层嵌套的子元素中，标签前后顺序应保持一致。  </p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">shop-cart</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">sn</span>=<span class=\"string\">&quot;771938&quot;</span> <span class=\"attr\">category</span>=<span class=\"string\">&quot;电器&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>XX空调<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">price</span>&gt;</span>2000.00<span class=\"tag\">&lt;/<span class=\"name\">price</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">num</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">num</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">sn</span>=<span class=\"string\">&quot;890321&quot;</span> <span class=\"attr\">category</span>=<span class=\"string\">&quot;食品&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>法式面包<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">price</span>&gt;</span>10.00<span class=\"tag\">&lt;/<span class=\"name\">price</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">num</span>&gt;</span>5<span class=\"tag\">&lt;/<span class=\"name\">num</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">shop-cart</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"XML声明\"><a href=\"#XML声明\" class=\"headerlink\" title=\"XML声明\"></a>XML声明</h3><p>◇XML声明说明XML文档的基本信息，包括版本号与字符集，写在XML第一行。</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br></pre></td></tr></table></figure>\n<p>其中，version代表版本号1.0(初始版本)/1.1(升级版本)；encoding UTF-8设置字符集，用于支持中文；<br>​<br></p>\n<h2 id=\"XML语义约束\"><a href=\"#XML语义约束\" class=\"headerlink\" title=\"XML语义约束\"></a>XML语义约束</h2><p>◇ XML文档结构正确，但可能不是有效的。  <br>– 例如，员工档案XML中绝不允许出现”植物品种” 标签。XML语义约束就是用于规定XML文档中允许 出现哪些元素。  <br>– XML语义约束有两种定义方式:DTD与XML Schema。  </p>\n<h3 id=\"DTD简介\"><a href=\"#DTD简介\" class=\"headerlink\" title=\"DTD简介\"></a>DTD简介</h3><p>◇ DTD(Document Type Definition，文档类型定义)是 一种简单易用的语义约束方式。  <br>◇ DTD文件的扩展名为.dtd。  </p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\">hr.dtd</span><br><span class=\"line\"><span class=\"meta\">&lt;!ELEMENT <span class=\"meta-keyword\">hr</span> (<span class=\"meta-keyword\">employee</span>+)&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!ELEMENT <span class=\"meta-keyword\">employee</span> (<span class=\"meta-keyword\">name</span>,<span class=\"meta-keyword\">age</span>,<span class=\"meta-keyword\">salary</span>,<span class=\"meta-keyword\">department</span>)&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!ATTLIST <span class=\"meta-keyword\">employee</span> <span class=\"meta-keyword\">no</span> <span class=\"meta-keyword\">CDATA</span> <span class=\"meta-string\">&quot;&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!ELEMENT <span class=\"meta-keyword\">name</span> (<span class=\"meta-keyword\">#PCDATA</span>)&gt;</span></span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<h3 id=\"DTD定义结点\"><a href=\"#DTD定义结点\" class=\"headerlink\" title=\"DTD定义结点\"></a>DTD定义结点</h3><p>◇利用DTD中的&lt;!ELEMENT&gt;标签，定义XML文档中允许出现的节点及数量；<br>eg: ①定义hr节点下只允许出现一个employee子节点 ：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!ELEMENT <span class=\"meta-keyword\">hr</span> (<span class=\"meta-keyword\">employee</span>)&gt;</span></span><br></pre></td></tr></table></figure>\n<p>   ②employee节点下必须包含以下四个节点，且按顺序出现：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!ELEMENT <span class=\"meta-keyword\">employee</span>(<span class=\"meta-keyword\">name</span>,<span class=\"meta-keyword\">age</span>,<span class=\"meta-keyword\">salary</span>,<span class=\"meta-keyword\">department</span>)&gt;</span></span><br></pre></td></tr></table></figure>\n<p>③定义name标签只能是文本，#PCDATA代表文本元素。</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!ELEMENT <span class=\"meta-keyword\">name</span>(<span class=\"meta-keyword\">#PCDATA</span>)</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"DTD定义节点数量\"><a href=\"#DTD定义节点数量\" class=\"headerlink\" title=\"DTD定义节点数量\"></a>DTD定义节点数量</h3><p>◇如某个子节点需要多次重复出现，则需要在子节点后增加相应的描述符。<br>eg：①hr节点下最少出现1个employee子节点：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!ELEMENT <span class=\"meta-keyword\">hr</span>(<span class=\"meta-keyword\">employee</span>+)&gt;</span></span><br></pre></td></tr></table></figure>\n<p>②hr节点下可出现0..n个employee子节点：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!ELEMENT <span class=\"meta-keyword\">hr</span>(<span class=\"meta-keyword\">employee</span>*)&gt;</span></span><br></pre></td></tr></table></figure>\n<p>③hr节点下最多可出现1个employee子节点：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!ELEMENT <span class=\"meta-keyword\">hr</span>(<span class=\"meta-keyword\">employee</span>?)&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"XML引用DTD文件\"><a href=\"#XML引用DTD文件\" class=\"headerlink\" title=\"XML引用DTD文件\"></a>XML引用DTD文件</h3><p>◇在XML使用&lt;!DOCTYPE&gt;标签来引用DTD文件<br>书写格式:</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE 根节点 <span class=\"meta-keyword\">SYSTEM</span> <span class=\"meta-string\">&quot;dtd文件路径&quot;</span>&gt;</span></span><br><span class=\"line\">eg:</span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">hr</span> <span class=\"meta-keyword\">SYSTEM</span> <span class=\"meta-string\">&quot;hr.dtd&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"XML-Schema\"><a href=\"#XML-Schema\" class=\"headerlink\" title=\"XML Schema\"></a>XML Schema</h3><p>◇<a href=\"https://www.w3school.com.cn/schema/index.asp\">XML Schema</a>比DTD更为复杂，提供了更多功能。<br>◇XML Schema提供了数据类型、格式限定、数据范围等特性。<br>◇XML Schema是W3C标准。<br>◇eg</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">schema</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">element</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;hr&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!-- complexType标签含义是复杂节点，包含子节点时必须使用这个标签 这里表示hr下有子节点 --&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">complexType</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">sequence</span>&gt;</span>  <span class=\"comment\">&lt;!--队列 说明前后顺序--&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">element</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;employee&quot;</span> <span class=\"attr\">minOccurs</span>=<span class=\"string\">&quot;1&quot;</span> <span class=\"attr\">maxOccurs</span>=<span class=\"string\">&quot;9999&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">complexType</span>&gt;</span>  <span class=\"comment\">&lt;!--employee下有子节点 --&gt;</span></span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">sequence</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">element</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;name&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;string&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">element</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">element</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;age&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">simpleType</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">restriction</span> <span class=\"attr\">base</span>=<span class=\"string\">&quot;integer&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">minInclusive</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;18&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">minInclusive</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">maxInclusive</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;60&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">maxInclusive</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">restriction</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">simpleType</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">element</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">element</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;salary&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;integer&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">element</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">element</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;department&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">complexType</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">sequence</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">element</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;dname&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;string&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">element</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">element</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;address&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;string&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">element</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">sequence</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">complexType</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">element</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">sequence</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"tag\">&lt;<span class=\"name\">attribute</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;no&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;string&quot;</span> <span class=\"attr\">use</span>=<span class=\"string\">&quot;required&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">attribute</span>&gt;</span><span class=\"comment\">&lt;!--required表示必须存在no这个属性--&gt;</span>\t\t\t\t\t</span><br><span class=\"line\">\t\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">complexType</span>&gt;</span></span><br><span class=\"line\">\t\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">element</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;/<span class=\"name\">sequence</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">complexType</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">element</span>&gt;</span>\t</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">schema</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"DOM模型与Dom4j\"><a href=\"#DOM模型与Dom4j\" class=\"headerlink\" title=\"DOM模型与Dom4j\"></a>DOM模型与Dom4j</h2><h3 id=\"DOM文档对象模型\"><a href=\"#DOM文档对象模型\" class=\"headerlink\" title=\"DOM文档对象模型\"></a>DOM文档对象模型</h3><p>◇DOM(Document Object Moder) 定义了访问和操作XML文档的标准方法，DOM把XML文档作为树结构来查看，能够通过DOM树来读写所有元素。<br><img src=\"/p/f394/7.png\" class=\"lazyload\" data-srcset=\"/p/f394/7.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\"></p>\n<h3 id=\"Dom4j\"><a href=\"#Dom4j\" class=\"headerlink\" title=\"Dom4j\"></a>Dom4j</h3><p>◇Dom4j是一个易用的、开源的库，用于解析XML。它应用于java平台，具有性能优异、功能强大和极其易使用的特点。<br>◇Dom4j将XML视为Document对象<br>◇XML标签被Dom4j定义为Element对象</p>\n<h3 id=\"利用Dom4j遍历XML\"><a href=\"#利用Dom4j遍历XML\" class=\"headerlink\" title=\"利用Dom4j遍历XML\"></a>利用Dom4j遍历XML</h3><p>◇在xml工程中src存储了xml文件以及dtd和xsd文件；新建一个lib文件用于引入dom4j的依赖；即将dom4j-2.1.1.jar文件复制到lib中，然后右键Build Path-&gt;Add to Build Path即可；<br>◇hr.xml</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span><br><span class=\"line\">&lt;!DOCTYPE hr SYSTEM <span class=\"string\">&quot;hr.dtd&quot;</span>&gt;</span><br><span class=\"line\">&lt;!-- 人力资源管理系统 --&gt;</span><br><span class=\"line\">&lt;hr&gt;</span><br><span class=\"line\">\t&lt;employee no=<span class=\"string\">&quot;3301&quot;</span>&gt;</span><br><span class=\"line\">\t\t&lt;name&gt;李铁柱&lt;/name&gt;</span><br><span class=\"line\">\t\t&lt;age&gt;<span class=\"number\">37</span>&lt;/age&gt;</span><br><span class=\"line\">\t\t&lt;salary&gt;<span class=\"number\">3600</span>&lt;/salary&gt;</span><br><span class=\"line\">\t\t&lt;department&gt;</span><br><span class=\"line\">\t\t\t&lt;dname&gt;人事部&lt;/dname&gt;</span><br><span class=\"line\">\t\t\t&lt;address&gt;XX大厦-B105&lt;/address&gt;</span><br><span class=\"line\">\t\t&lt;/department&gt;</span><br><span class=\"line\">\t&lt;/employee&gt;</span><br><span class=\"line\">\t&lt;employee no=<span class=\"string\">&quot;3302&quot;</span>&gt;</span><br><span class=\"line\">\t\t&lt;name&gt;林海&lt;/name&gt;</span><br><span class=\"line\">\t\t&lt;age&gt;<span class=\"number\">50</span>&lt;/age&gt;</span><br><span class=\"line\">\t\t&lt;salary&gt;<span class=\"number\">7000</span>&lt;/salary&gt;</span><br><span class=\"line\">\t\t&lt;department&gt;</span><br><span class=\"line\">\t\t\t&lt;dname&gt;财务部&lt;/dname&gt;</span><br><span class=\"line\">\t\t\t&lt;address&gt;XX大厦-B106&lt;/address&gt;</span><br><span class=\"line\">\t\t&lt;/department&gt;</span><br><span class=\"line\">\t&lt;/employee&gt;</span><br><span class=\"line\">\t&lt;employee no=<span class=\"string\">&quot;3303&quot;</span>&gt;</span><br><span class=\"line\">\t\t&lt;name&gt;安娜&lt;/name&gt;</span><br><span class=\"line\">\t\t&lt;age&gt;<span class=\"number\">24</span>&lt;/age&gt;</span><br><span class=\"line\">\t\t&lt;salary&gt;<span class=\"number\">4600</span>&lt;/salary&gt;</span><br><span class=\"line\">\t\t&lt;department&gt;</span><br><span class=\"line\">\t\t\t&lt;dname&gt;人事部&lt;/dname&gt;</span><br><span class=\"line\">\t\t\t&lt;address&gt;XX大厦-B105&lt;/address&gt;</span><br><span class=\"line\">\t\t&lt;/department&gt;</span><br><span class=\"line\">\t&lt;/employee&gt;</span><br><span class=\"line\">&lt;/hr&gt;</span><br></pre></td></tr></table></figure>\n<p>◇新建包com.lcg.dom4j，创建类HrReader读取xml文件</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.lcg.dom4j;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.dom4j.Attribute;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.dom4j.Document;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.dom4j.DocumentException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.dom4j.Element;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.dom4j.io.SAXReader;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HrReader</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">readXml</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">\t\tString file = <span class=\"string\">&quot;d:/workspace/xml/src/hr.xml&quot;</span>;</span><br><span class=\"line\">\t\t<span class=\"comment\">//SAXReader类是读取XML文件的核心类，用于将XML解析后以“树”的形式保存在内存中。</span></span><br><span class=\"line\">\t\tSAXReader reader = <span class=\"keyword\">new</span> SAXReader();</span><br><span class=\"line\">\t\t<span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">//read方法解析出一个document对象;</span></span><br><span class=\"line\">\t\t\tDocument document = reader.read(file);</span><br><span class=\"line\">\t\t\t<span class=\"comment\">//获取XML文档的根节点，即hr标签</span></span><br><span class=\"line\">\t\t\tElement root = document.getRootElement();</span><br><span class=\"line\">\t\t\t<span class=\"comment\">//elements方法用于获取指定的标签集合</span></span><br><span class=\"line\">\t\t\tList&lt;Element&gt; employees =  root.elements(<span class=\"string\">&quot;employee&quot;</span>);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">for</span>(Element employee : employees)&#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">//element方法用于获取唯一的子节点对象</span></span><br><span class=\"line\">\t\t\t\tElement name = employee.element(<span class=\"string\">&quot;name&quot;</span>);</span><br><span class=\"line\">\t\t\t\tString empName = name.getText();<span class=\"comment\">//getText()方法用于获取标签或者属性的文本</span></span><br><span class=\"line\">\t\t\t\tSystem.out.println(empName);</span><br><span class=\"line\">        <span class=\"comment\">//直接打印,不赋值;</span></span><br><span class=\"line\">\t\t\t\tSystem.out.println(employee.elementText(<span class=\"string\">&quot;age&quot;</span>));</span><br><span class=\"line\">        <span class=\"comment\">//elementText方法和getText()方法一样;</span></span><br><span class=\"line\">\t\t\t\tSystem.out.println(employee.elementText(<span class=\"string\">&quot;salary&quot;</span>));</span><br><span class=\"line\">\t\t\t\tElement department = employee.element(<span class=\"string\">&quot;department&quot;</span>);</span><br><span class=\"line\">\t\t\t\tSystem.out.println(department.element(<span class=\"string\">&quot;dname&quot;</span>).getText());</span><br><span class=\"line\">\t\t\t\tSystem.out.println(department.element(<span class=\"string\">&quot;address&quot;</span>).getText());</span><br><span class=\"line\">        <span class=\"comment\">//attribute方法用于获取属性;</span></span><br><span class=\"line\">\t\t\t\tAttribute att = employee.attribute(<span class=\"string\">&quot;no&quot;</span>);</span><br><span class=\"line\">\t\t\t\tSystem.out.println(att.getText());</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125; <span class=\"keyword\">catch</span> (DocumentException e) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">// TODO Auto-generated catch block</span></span><br><span class=\"line\">\t\t\te.printStackTrace();</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">\t\tHrReader reader = <span class=\"keyword\">new</span> HrReader();<span class=\"comment\">//实例化HrReader方法;</span></span><br><span class=\"line\">\t\treader.readXml();</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"利用Dom4j更新XML\"><a href=\"#利用Dom4j更新XML\" class=\"headerlink\" title=\"利用Dom4j更新XML\"></a>利用Dom4j更新XML</h3><p>◇新建类HrWriter</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.lcg.dom4j;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.FileOutputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.OutputStreamWriter;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.Writer;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.dom4j.Document;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.dom4j.DocumentException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.dom4j.Element;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.dom4j.io.SAXReader;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HrWriter</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">writeXml</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">\t\tString file = <span class=\"string\">&quot;d:/workspace/xml/src/hr.xml&quot;</span>;</span><br><span class=\"line\">\t\tSAXReader reader = <span class=\"keyword\">new</span> SAXReader();</span><br><span class=\"line\">\t\t<span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">\t\t\tDocument document = reader.read(file);</span><br><span class=\"line\">\t\t\tElement root = document.getRootElement();</span><br><span class=\"line\">            <span class=\"comment\">//增加新的子节点employee;</span></span><br><span class=\"line\">\t\t\tElement employee = root.addElement(<span class=\"string\">&quot;employee&quot;</span>);</span><br><span class=\"line\">            <span class=\"comment\">//增加节点的属性;</span></span><br><span class=\"line\">\t\t\temployee.addAttribute(<span class=\"string\">&quot;no&quot;</span>, <span class=\"string\">&quot;3311&quot;</span>);</span><br><span class=\"line\">\t\t\tElement name = employee.addElement(<span class=\"string\">&quot;name&quot;</span>);<span class=\"comment\">//增加name子节点;</span></span><br><span class=\"line\">\t\t\tname.setText(<span class=\"string\">&quot;李铁柱&quot;</span>);<span class=\"comment\">//设置文本;</span></span><br><span class=\"line\">\t\t\temployee.addElement(<span class=\"string\">&quot;age&quot;</span>).setText(<span class=\"string\">&quot;37&quot;</span>);<span class=\"comment\">//合成一行代码;</span></span><br><span class=\"line\">\t\t\temployee.addElement(<span class=\"string\">&quot;salary&quot;</span>).setText(<span class=\"string\">&quot;3600&quot;</span>);</span><br><span class=\"line\">\t\t\tElement department = employee.addElement(<span class=\"string\">&quot;department&quot;</span>);</span><br><span class=\"line\">\t\t\tdepartment.addElement(<span class=\"string\">&quot;dname&quot;</span>).setText(<span class=\"string\">&quot;人事部&quot;</span>);</span><br><span class=\"line\">\t\t\tdepartment.addElement(<span class=\"string\">&quot;address&quot;</span>).setText(<span class=\"string\">&quot;XX大厦-B105&quot;</span>);</span><br><span class=\"line\">            <span class=\"comment\">//把文件的输出流转换为Writer对象</span></span><br><span class=\"line\">\t\t\tWriter writer = <span class=\"keyword\">new</span> OutputStreamWriter(<span class=\"keyword\">new</span> FileOutputStream(file) , <span class=\"string\">&quot;UTF-8&quot;</span>);</span><br><span class=\"line\">            <span class=\"comment\">//将dom模型写入到对应文件中;</span></span><br><span class=\"line\">\t\t\tdocument.write(writer);</span><br><span class=\"line\">\t\t\twriter.close();</span><br><span class=\"line\">\t\t&#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">// TODO Auto-generated catch block</span></span><br><span class=\"line\">\t\t\te.printStackTrace();</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">\t\tHrWriter hrWriter = <span class=\"keyword\">new</span> HrWriter();</span><br><span class=\"line\">\t\thrWriter.writeXml();</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"XPath表达式\"><a href=\"#XPath表达式\" class=\"headerlink\" title=\"XPath表达式\"></a>XPath表达式</h2><h3 id=\"XPath路径表达式\"><a href=\"#XPath路径表达式\" class=\"headerlink\" title=\"XPath路径表达式\"></a>XPath路径表达式</h3><p>◇XPath路径表达式是XML文档中查找数据的语言。<br>◇掌握XPath可以极大提高在提取数据时的开发效率。<br>◇学习XPath本质就是掌握各种形式表达的使用技巧。</p>\n<h3 id=\"XPath基本表达式\"><a href=\"#XPath基本表达式\" class=\"headerlink\" title=\"XPath基本表达式\"></a>XPath基本表达式</h3><p>◇最常用的基本表达式</p>\n<table>\n<thead>\n<tr>\n<th>表达式</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>nodename</td>\n<td>选取此节点的所有子节点</td>\n</tr>\n<tr>\n<td>/</td>\n<td>从根节点选取</td>\n</tr>\n<tr>\n<td>//</td>\n<td>从匹配选择的当前节点选择文档中的节点，而不考虑它们的位置</td>\n</tr>\n<tr>\n<td>.</td>\n<td>选取当前节点</td>\n</tr>\n<tr>\n<td>..</td>\n<td>选取当前节点的父节点</td>\n</tr>\n<tr>\n<td>@</td>\n<td>选取属性</td>\n</tr>\n</tbody></table>\n<h3 id=\"XPath基本表达式案例\"><a href=\"#XPath基本表达式案例\" class=\"headerlink\" title=\"XPath基本表达式案例\"></a>XPath基本表达式案例</h3><p><img src=\"/p/f394/8.png\" class=\"lazyload\" data-srcset=\"/p/f394/8.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\"></p>\n<h3 id=\"XPath谓语表达式\"><a href=\"#XPath谓语表达式\" class=\"headerlink\" title=\"XPath谓语表达式\"></a>XPath谓语表达式</h3><p>◇谓语表达式统一使用中括号，里面再加一个谓语表示；<br><img src=\"/p/f394/9.png\" class=\"lazyload\" data-srcset=\"/p/f394/9.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\"></p>\n<h2 id=\"Xpath实验室\"><a href=\"#Xpath实验室\" class=\"headerlink\" title=\"Xpath实验室\"></a>Xpath实验室</h2><h3 id=\"Jaxen介绍\"><a href=\"#Jaxen介绍\" class=\"headerlink\" title=\"Jaxen介绍\"></a>Jaxen介绍</h3><p>◇Jaxen是一个java编写的开源的XPath库。这是适应多种不同的对象模型，包括DOM，XOM,dom4j和JDOM。<br>◇Dom4j底层依赖Jaxen实现XPath查询<br>◇Jaxen下载地址:meaven.aliyun.com在阿里云的仓库中搜索下载</p>\n<h3 id=\"代码演示\"><a href=\"#代码演示\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h3><p>◇引入jaxen依赖；<br>◇创建类XPathTestor</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.lcg.dom4j;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.dom4j.Document;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.dom4j.DocumentException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.dom4j.Element;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.dom4j.Node;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.dom4j.io.SAXReader;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">XPathTestor</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">xpath</span><span class=\"params\">(String xpathExp)</span></span>&#123;</span><br><span class=\"line\">\t\tString file = <span class=\"string\">&quot;E:/lianxi/xml/hr.xml&quot;</span>;</span><br><span class=\"line\">\t\tSAXReader reader = <span class=\"keyword\">new</span> SAXReader();</span><br><span class=\"line\">\t\t<span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">//获取document对象</span></span><br><span class=\"line\">\t\t\tDocument document = reader.read(file);</span><br><span class=\"line\">\t\t\t<span class=\"comment\">/*selectNodes方法用来执行xpath表达式;对于xpath表达式来说,不仅可以查询标签本身,</span></span><br><span class=\"line\"><span class=\"comment\">            还可以查询属性,Node是标签和属性的一个父类,因此返回的是一个Node;</span></span><br><span class=\"line\"><span class=\"comment\">            */</span></span><br><span class=\"line\">\t\t\tList&lt;Node&gt; nodes = document.selectNodes(xpathExp);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">for</span>(Node node : nodes)&#123;</span><br><span class=\"line\">\t\t\t\tElement emp = (Element)node;<span class=\"comment\">//把node转换为Element对象;</span></span><br><span class=\"line\">                <span class=\"comment\">//输出相关信息;</span></span><br><span class=\"line\">\t\t\t\tSystem.out.println(emp.attributeValue(<span class=\"string\">&quot;no&quot;</span>));</span><br><span class=\"line\">\t\t\t\tSystem.out.println(emp.elementText(<span class=\"string\">&quot;name&quot;</span>));</span><br><span class=\"line\">\t\t\t\tSystem.out.println(emp.elementText(<span class=\"string\">&quot;age&quot;</span>));</span><br><span class=\"line\">\t\t\t\tSystem.out.println(emp.elementText(<span class=\"string\">&quot;salary&quot;</span>));</span><br><span class=\"line\">\t\t\t\tSystem.out.println(<span class=\"string\">&quot;==============================&quot;</span>);</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125; <span class=\"keyword\">catch</span> (DocumentException e) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">// TODO Auto-generated catch block</span></span><br><span class=\"line\">\t\t\te.printStackTrace();</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">\t\tXPathTestor testor = <span class=\"keyword\">new</span> XPathTestor();</span><br><span class=\"line\"><span class=\"comment\">//\t\ttestor.xpath(&quot;/hr/employee&quot;);</span></span><br><span class=\"line\"><span class=\"comment\">//\t\ttestor.xpath(&quot;//employee&quot;);</span></span><br><span class=\"line\"><span class=\"comment\">//\t\ttestor.xpath(&quot;//employee[salary&lt;4000]&quot;); 工资小于4000的职员</span></span><br><span class=\"line\"><span class=\"comment\">//\t\ttestor.xpath(&quot;//employee[name=&#x27;李铁柱&#x27;]&quot;);</span></span><br><span class=\"line\"><span class=\"comment\">//\t\ttestor.xpath(&quot;//employee[@no=3304]&quot;);</span></span><br><span class=\"line\"><span class=\"comment\">//\t\ttestor.xpath(&quot;//employee[1]&quot;);</span></span><br><span class=\"line\"><span class=\"comment\">//\t\ttestor.xpath(&quot;//employee[last()]&quot;);</span></span><br><span class=\"line\">\t\t<span class=\"comment\">//testor.xpath(&quot;//employee[position()&lt;3]&quot;);</span></span><br><span class=\"line\">\t\ttestor.xpath(<span class=\"string\">&quot;//employee[3] | //employee[8]&quot;</span>);</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n","categories":["JavaWeb"],"tags":["xml"]},{"title":"删除功能出现的BUG","url":"/p/de80.html","content":"<h3 id=\"功能简介\"><a href=\"#功能简介\" class=\"headerlink\" title=\"功能简介\"></a>功能简介</h3><p>​        开发一个删除油画功能模块，要求能够在前台中点击某一油画进行删除后，弹出对话框进行确认删除，若确认则发送ajax请求到后台，然后后台根据发送过来的id进行相应的删除，并且使用json对象返回处理的结果；</p>\n<h3 id=\"实现思路\"><a href=\"#实现思路\" class=\"headerlink\" title=\"实现思路\"></a>实现思路</h3><p>​        对于底层的数据删除，使用dom4j进行对xml的删除操作；首先根据id筛选出指定的节点p；然后根据此节点获取到其父节点，使用父节点的remove方法来删除此节点；代码如下：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//得到P的根节点然后用根节点删去P;</span></span><br><span class=\"line\">p.getParent().remove(p);</span><br></pre></td></tr></table></figure>\n\n<p>​        然后就是根据MVC的调用要求，依次创建Dao、Service、Controller中的方法；在Controller方法中进行与前台的交互即可；</p>\n<h3 id=\"出现的BUG\"><a href=\"#出现的BUG\" class=\"headerlink\" title=\"出现的BUG\"></a>出现的BUG</h3><p>​        当在前台页面点击删除油画后，发现删除成功，然后不刷新页面。再次删除此油画，这幅油画实际上已经被删除了，所以根据后台的逻辑，应该会删除失败，并提示该油画已经被删除或者不存在；但是前台确提示删除成功，按F12查看浏览器控制台打印的json对象如下:</p>\n<p><img src=\"https://s2.loli.net/2021/12/09/oAaKdbu2tNm4iYP.png\" class=\"lazyload\" data-srcset=\"https://s2.loli.net/2021/12/09/oAaKdbu2tNm4iYP.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"console.png\"></p>\n<p>这说明在控制器中根本没有执行catch块里的代码，而是执行了try里的代码，<wavy>没有捕捉到</wavy>XmlDataSource中抛出的异常；后端控制台打印的信息如下：</p>\n<figure class=\"highlight tex\"><table><tr><td class=\"code\"><pre><span class=\"line\">获取ajax请求发送过来的id为:16</span><br><span class=\"line\">/F:/JAVA/Tomcat/apache-tomcat-8.5.34/webapps/mgallery/WEB-INF/classes/painting.xml</span><br><span class=\"line\">java.lang.RuntimeException: 编号为16的油画不存在或已删除</span><br><span class=\"line\">\tat com.lcg.mgallery.utils.XmlDataSource.delete(XmlDataSource.java:186)</span><br><span class=\"line\">\tat com.lcg.mgallery.dao.PaintingDao.delete(PaintingDao.java:68)</span><br><span class=\"line\">\tat com.lcg.mgallery.service.PaintingService.delete(PaintingService.java:69)</span><br><span class=\"line\">\tat com.lcg.mgallery.controller.ManagementController.delete(ManagementController.java:247)</span><br><span class=\"line\">\tat com.lcg.mgallery.controller.ManagementController.doGet(ManagementController.java:64)</span><br><span class=\"line\">\tat com.lcg.mgallery.controller.ManagementController.doPost(ManagementController.java:73)</span><br><span class=\"line\">\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:661)</span><br><span class=\"line\">\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:742)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)</span><br><span class=\"line\">\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)</span><br><span class=\"line\">\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198)</span><br><span class=\"line\">\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)</span><br><span class=\"line\">\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)</span><br><span class=\"line\">\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)</span><br><span class=\"line\">\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)</span><br><span class=\"line\">\tat org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:650)</span><br><span class=\"line\">\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)</span><br><span class=\"line\">\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)</span><br><span class=\"line\">\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:800)</span><br><span class=\"line\">\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)</span><br><span class=\"line\">\tat org.apache.coyote.AbstractProtocol<span class=\"built_in\">$</span>ConnectionHandler.process(AbstractProtocol.java:806)</span><br><span class=\"line\">\tat org.apache.tomcat.util.net.NioEndpoint<span class=\"built_in\">$</span>SocketProcessor.doRun(NioEndpoint.java:1498)</span><br><span class=\"line\">\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)</span><br><span class=\"line\">\tat java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)</span><br><span class=\"line\">\tat java.util.concurrent.ThreadPoolExecutor<span class=\"built_in\">$</span>Worker.run(Unknown Source)</span><br><span class=\"line\">\tat org.apache.tomcat.util.threads.TaskThread<span class=\"built_in\">$</span>WrappingRunnable.run(TaskThread.java:61)</span><br><span class=\"line\">\tat java.lang.Thread.run(Unknown Source)</span><br><span class=\"line\">/F:/JAVA/Tomcat/apache-tomcat-8.5.34/webapps/mgallery/WEB-INF/classes/painting.xml</span><br><span class=\"line\">成功执行了删除的操作</span><br></pre></td></tr></table></figure>\n\n<p>​        可以发现确实出现了异常，但出现异常后确仍然打印出”成功执行了删除的操作”；这是什么原因呢？<strong>为什么在控制器的方法中无法捕捉到XmlDataSource中抛出的异常？</strong>我们来分析一下后台的代码；</p>\n<p>对Xml文件进行直接操作的XmlDataSource类中的删除方法代码如下：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">delete</span><span class=\"params\">(Integer id)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">\t\t\tdocument = reader.read(dataFile);</span><br><span class=\"line\">\t\t\tList&lt;Node&gt; nodes = document.selectNodes(<span class=\"string\">&quot;/root/painting[@id=&quot;</span> + id + <span class=\"string\">&quot;]&quot;</span>);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span>(nodes.size() == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> RuntimeException(<span class=\"string\">&quot;编号为&quot;</span> + id + <span class=\"string\">&quot;的油画不存在或已删除&quot;</span>);</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">             <span class=\"comment\">//省略执行删除操作代码..</span></span><br><span class=\"line\">\t\t&#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">// TODO Auto-generated catch block</span></span><br><span class=\"line\">\t\t\te.printStackTrace();</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> RuntimeException(<span class=\"string\">&quot;编号为&quot;</span> + id + <span class=\"string\">&quot;的油画不存在或已删除&quot;</span>);</span><br><span class=\"line\">\t\t&#125;<span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">//...部分代码</span></span><br><span class=\"line\">\t\t\treload();</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure>\n\n<p>​        控制器中的删除方法代码如下(控制器中调用的是Service中的delete方法，按照MVC的架构模式会<u>逐级调用</u>到XmlDataSource中的方法)</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//删除油画</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">delete</span><span class=\"params\">(HttpServletRequest request,HttpServletResponse response)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">    String id = request.getParameter(<span class=\"string\">&quot;id&quot;</span>);<span class=\"comment\">//获取ajax请求发送过来的参数</span></span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;获取ajax请求发送过来的id为:&quot;</span>+id);</span><br><span class=\"line\">    Map result = <span class=\"keyword\">new</span> HashMap();</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//调用方法进行油画的删除</span></span><br><span class=\"line\">        paintingService.delete(Integer.parseInt(id));</span><br><span class=\"line\">        result.put(<span class=\"string\">&quot;code&quot;</span>, <span class=\"string\">&quot;0&quot;</span>);</span><br><span class=\"line\">        result.put(<span class=\"string\">&quot;msg&quot;</span>, <span class=\"string\">&quot;success&quot;</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;成功执行了删除的操作&quot;</span>);</span><br><span class=\"line\">    &#125;<span class=\"keyword\">catch</span>(Exception e) &#123;</span><br><span class=\"line\">        e.printStackTrace();</span><br><span class=\"line\">        result.put(<span class=\"string\">&quot;code&quot;</span>, <span class=\"string\">&quot;1&quot;</span>);</span><br><span class=\"line\">        result.put(<span class=\"string\">&quot;msg&quot;</span>, e.getMessage());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;遇到了异常&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    String json = JSON.toJSONString(result);</span><br><span class=\"line\">    response.setContentType(<span class=\"string\">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class=\"line\">    response.getWriter().println(json);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>​        通过对控制台中的打印结果分析想到，既然在Controller中并没有捕捉到，那么为什么会打印出异常的信息呢？很快就想到可能在XmlDataSource中就把异常给捕捉了，于是在XmlDataSource中将catch块中的e.printStackTrace();注释掉，在前台执行重复删除的操作，发现后台<emp>果然没有打印出</emp>异常信息!</p>\n<h3 id=\"BUG解决方法\"><a href=\"#BUG解决方法\" class=\"headerlink\" title=\"BUG解决方法\"></a>BUG解决方法</h3><p>​        在知道了为什么在控制器的方法中无法捕捉到XmlDataSource中抛出的异常后，就能想到出错的原因在哪里了；因为在XmlDataSource的删除方法中，前面的一些代码也会抛出异常，为了寻求方便我索性使用Exception来捕捉这些异常，这就导致将我们自定义的异常给捕获并处理了（因为RuntimeException继承自Exception），进而在Controller中无法捕捉到异常，给前台的反馈消息总是删除成功的；</p>\n<p>​        所以解决方法是分别捕捉可能出现的每一种异常(除RuntimeException以外)；修改后的方法如下：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">public static void delete(Integer id) &#123;</span><br><span class=\"line\">\t\tSAXReader reader = new SAXReader();</span><br><span class=\"line\">\t\tWriter writer = null;</span><br><span class=\"line\">\t\tDocument document;</span><br><span class=\"line\">\t\ttry &#123;</span><br><span class=\"line\">\t\t\tdocument = reader.read(dataFile);</span><br><span class=\"line\">\t\t\tList&lt;Node&gt; nodes = document.selectNodes(&quot;/root/painting[@id=&quot; + id + &quot;]&quot;);</span><br><span class=\"line\">\t\t\tif(nodes.size() == 0) &#123;</span><br><span class=\"line\">\t\t\t\tthrow new RuntimeException(&quot;编号为&quot; + id + &quot;的油画不存在或已删除&quot;);</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\tElement p = (Element)nodes.get(0);</span><br><span class=\"line\">\t\t\t//得到P的根节点然后用根节点删去P;</span><br><span class=\"line\">\t\t\tp.getParent().remove(p);</span><br><span class=\"line\">\t\t\t//修改后的数据回写到原来的xml文件中;</span><br><span class=\"line\">\t\t\twriter = new OutputStreamWriter(new FileOutputStream(dataFile),&quot;UTF-8&quot;);</span><br><span class=\"line\">\t\t\tdocument.write(writer);</span><br><span class=\"line\">\t\t&#125; catch (DocumentException e) &#123;</span><br><span class=\"line\">\t\t\t// TODO Auto-generated catch block</span><br><span class=\"line\">\t\t\te.printStackTrace();</span><br><span class=\"line\">\t\t&#125; catch (UnsupportedEncodingException e) &#123;</span><br><span class=\"line\">\t\t\t// TODO Auto-generated catch block</span><br><span class=\"line\">\t\t\te.printStackTrace();</span><br><span class=\"line\">\t\t&#125; catch (FileNotFoundException e) &#123;</span><br><span class=\"line\">\t\t\t// TODO Auto-generated catch block</span><br><span class=\"line\">\t\t\te.printStackTrace();</span><br><span class=\"line\">\t\t&#125; catch (IOException e) &#123;</span><br><span class=\"line\">\t\t\t// TODO Auto-generated catch block</span><br><span class=\"line\">\t\t\te.printStackTrace();</span><br><span class=\"line\">\t\t&#125;finally &#123;</span><br><span class=\"line\">\t\t\tif(writer != null) &#123;</span><br><span class=\"line\">\t\t\t\ttry &#123;</span><br><span class=\"line\">\t\t\t\t\twriter.close();</span><br><span class=\"line\">\t\t\t\t&#125; catch (IOException e) &#123;</span><br><span class=\"line\">\t\t\t\t\t// TODO Auto-generated catch block</span><br><span class=\"line\">\t\t\t\t\te.printStackTrace();</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\treload();</span><br><span class=\"line\">\t\t&#125;\t\t</span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure>\n\n<p>​        这样以后，成功解决了前面出现的问题；这里附上前台页面的代码，弹出窗口使用了<a href=\"https://sweetalert2.github.io/\">SweetAlert</a></p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\"><span class=\"comment\">//提示删除</span></span><br><span class=\"line\">\t<span class=\"function\">function <span class=\"title\">del</span><span class=\"params\">(previewObj)</span></span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">var</span> preview = $(previewObj).attr(<span class=\"string\">&quot;data-preview&quot;</span>);<span class=\"comment\">//获取自定义属性</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">var</span> pname = $(previewObj).attr(<span class=\"string\">&quot;data-pname&quot;</span>);</span><br><span class=\"line\">\t\t<span class=\"keyword\">var</span> id = $(previewObj).attr(<span class=\"string\">&quot;data-id&quot;</span>);\t\t</span><br><span class=\"line\">\t\tSwal.fire(&#123;</span><br><span class=\"line\">\t\t\t  title: <span class=\"string\">&#x27;删除&#x27;</span>+pname+<span class=\"string\">&#x27;?&#x27;</span>,</span><br><span class=\"line\">\t\t\t  html: <span class=\"string\">&quot;&lt;img src=&#x27;&quot;</span> + preview + <span class=\"string\">&quot;&#x27; style=&#x27;width:361px;height:240px&#x27;&gt;&quot;</span>,</span><br><span class=\"line\">\t\t\t  icon: <span class=\"string\">&#x27;warning&#x27;</span>,</span><br><span class=\"line\">\t\t\t  showCancelButton: <span class=\"keyword\">true</span>,</span><br><span class=\"line\">\t\t\t  confirmButtonColor: <span class=\"string\">&#x27;#3085d6&#x27;</span>,</span><br><span class=\"line\">\t\t\t  cancelButtonColor: <span class=\"string\">&#x27;#d33&#x27;</span>,</span><br><span class=\"line\">\t\t\t  confirmButtonText: <span class=\"string\">&#x27;是的&#x27;</span>,</span><br><span class=\"line\">\t\t\t  cancelButtonText: <span class=\"string\">&#x27;取消&#x27;</span></span><br><span class=\"line\">\t\t\t&#125;).then(function(isConfirm)&#123;</span><br><span class=\"line\">\t\t\t  <span class=\"keyword\">if</span> (isConfirm.value) &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">//发送ajax请求</span></span><br><span class=\"line\">\t\t\t\t\t$.ajax(&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">&quot;url&quot;</span> : <span class=\"string\">&quot;/management?method=delete&quot;</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">&quot;type&quot;</span> : <span class=\"string\">&quot;post&quot;</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">&quot;data&quot;</span> : &#123;<span class=\"string\">&quot;id&quot;</span>:id&#125;,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">&quot;dataType&quot;</span> : <span class=\"string\">&quot;json&quot;</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">&quot;success&quot;</span> : function(json)&#123;</span><br><span class=\"line\">\t\t\t\t\t\t\tconsole.log(json);</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"keyword\">if</span>(json.code==<span class=\"string\">&quot;0&quot;</span>)&#123;</span><br><span class=\"line\">\t\t\t\t\t\t\t\tSwal.fire(<span class=\"string\">&#x27;删除成功!&#x27;</span>,<span class=\"string\">&#x27;油画已经成功删除&#x27;</span>,<span class=\"string\">&#x27;success&#x27;</span>).then(function(isConfirm)&#123;</span><br><span class=\"line\">\t\t\t\t\t\t\t\t\t<span class=\"keyword\">if</span> (isConfirm.value)&#123;</span><br><span class=\"line\">\t\t\t\t\t\t\t\t\t\t<span class=\"comment\">//点击确认后刷新页面</span></span><br><span class=\"line\">\t\t\t\t\t\t\t\t\t\twindow.location.reload();</span><br><span class=\"line\">\t\t\t\t\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t\t\t\t\t&#125;)</span><br><span class=\"line\">\t\t\t\t\t\t\t&#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">\t\t\t\t\t\t\t\tSwal.fire(<span class=\"string\">&#x27;删除失败!&#x27;</span>,json.msg,<span class=\"string\">&#x27;error&#x27;</span>).then(function(isConfirm)&#123;</span><br><span class=\"line\">\t\t\t\t\t\t\t\t\t<span class=\"keyword\">if</span> (isConfirm.value)&#123;</span><br><span class=\"line\">\t\t\t\t\t\t\t\t\t\t<span class=\"comment\">//点击确认后刷新页面</span></span><br><span class=\"line\">\t\t\t\t\t\t\t\t\t\twindow.location.reload();</span><br><span class=\"line\">\t\t\t\t\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t\t\t\t\t&#125;)</span><br><span class=\"line\">\t\t\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t\t&#125;)</span><br><span class=\"line\">\t\t\t  &#125;</span><br><span class=\"line\">\t\t&#125;)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\">  &lt;!-- 省略部分代码 --&gt;</span><br><span class=\"line\">&lt;a <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;oplink&quot;</span> data-id=<span class=\"string\">&quot;$&#123;painting.id&#125;&quot;</span> data-preview=<span class=\"string\">&quot;$&#123;painting.preview&#125;&quot;</span> data-pname=<span class=\"string\">&quot;$&#123;painting.pname&#125;&quot;</span> href=<span class=\"string\">&quot;javascript:void(0)&quot;</span> onclick=<span class=\"string\">&quot;del(this)&quot;</span>&gt;删除&lt;/a&gt;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3><p>​        try-catch-finally执行的基本步骤是：如果try块中出现了<emp>异常</emp>,不管是自定义抛出的还是系统抛出的，在catch块中只要符合捕捉的范围，都会对该异常进行处理，最后执行finally块中的代码； 如果没有出现异常，则直接执行try块中的代码，然后执行finally中的代码；因此在开发过程中不要一时图方便，将捕捉异常的范围扩大，还应当业务逻辑进行仔细分析，采用最佳的处理方法；</p>\n","categories":["Java开发"],"tags":["BUG"]},{"title":"数据库的基本查询","url":"/p/f427.html","content":"<h2 id=\"数据操作语言：普通查询\"><a href=\"#数据操作语言：普通查询\" class=\"headerlink\" title=\"数据操作语言：普通查询\"></a>数据操作语言：普通查询</h2><h3 id=\"记录查询\"><a href=\"#记录查询\" class=\"headerlink\" title=\"记录查询\"></a>记录查询</h3><p>◇ 最基本的查询语句是由 SELECT 和 FROM 关键字组成的<br>◇ SELECT语句屏蔽了物理层的操作，用户不必关心数据的真 实存储，交由数据库高效的查找数据  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"operator\">*</span> <span class=\"keyword\">FROM</span> t_student;</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> id,name,sex <span class=\"keyword\">FROM</span> t_student;</span><br></pre></td></tr></table></figure>\n<h3 id=\"使用列别名\"><a href=\"#使用列别名\" class=\"headerlink\" title=\"使用列别名\"></a>使用列别名</h3><p>◇ 通常情况下，SELECT子句中使用了表达式，那么这列的名 字就默认为表达式，因此需要一种对列名重命名的机制  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\"> ename,</span><br><span class=\"line\"> sal <span class=\"operator\">*</span> <span class=\"number\">12</span> <span class=\"keyword\">AS</span> &quot;annual_salary&quot;</span><br><span class=\"line\"> <span class=\"keyword\">FROM</span></span><br><span class=\"line\"> emp;</span><br></pre></td></tr></table></figure>\n<p>◇ 重命名只在显示输出的时候使用，数据表列名不会真的改变<br>◇ 查询语句的子句执行顺序<br><img src=\"/p/f427/1625994166757-969465a0-9e0f-4a0b-ad16-e6d3ae59731c.png\" class=\"lazyload\" data-srcset=\"/p/f427/1625994166757-969465a0-9e0f-4a0b-ad16-e6d3ae59731c.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h2 id=\"数据操作语言：数据分页\"><a href=\"#数据操作语言：数据分页\" class=\"headerlink\" title=\"数据操作语言：数据分页\"></a>数据操作语言：数据分页</h2><h3 id=\"数据分页\"><a href=\"#数据分页\" class=\"headerlink\" title=\"数据分页\"></a>数据分页</h3><p>◇ 比如我们查看朋友圈，只会加载少量部分信息，不用一次性加载全 部朋友圈，那样只会浪费CPU时间、内存和网络带宽<br>◇ 如果结果集的记录很多，则可以使用LIMIT关键字限定结果集数量。  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> …… <span class=\"keyword\">FROM</span> …… LIMIT 起始位置 , 偏移量 ;</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> empno,ename <span class=\"keyword\">FROM</span> t_emp LIMIT <span class=\"number\">0</span>,<span class=\"number\">20</span>;<span class=\"operator\">/</span><span class=\"operator\">/</span><span class=\"number\">20</span>是偏移量而不是终止的</span><br></pre></td></tr></table></figure>\n<h3 id=\"数据分页的简写用法\"><a href=\"#数据分页的简写用法\" class=\"headerlink\" title=\"数据分页的简写用法\"></a>数据分页的简写用法</h3><p>◇如果LIMIT子句只有一个参数，它表示的是偏移量，起始值默认为0<br>◇执行顺序： FROM -&gt; SELECT -&gt; LIMIT  </p>\n<h2 id=\"数据操作语言：结果集排序\"><a href=\"#数据操作语言：结果集排序\" class=\"headerlink\" title=\"数据操作语言：结果集排序\"></a>数据操作语言：结果集排序</h2><h3 id=\"结果集排序\"><a href=\"#结果集排序\" class=\"headerlink\" title=\"结果集排序\"></a>结果集排序</h3><p>◇ 如果没有设置，查询语句不会对结果集进行排序。也就是说，如果 想让结果集按照某种顺序排列，就必须使用ORDER BY子句。  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> …… <span class=\"keyword\">FROM</span> …… <span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span> 列名 [ <span class=\"keyword\">ASC</span> <span class=\"operator\">|</span> <span class=\"keyword\">DESC</span> ] ;</span><br></pre></td></tr></table></figure>\n<h3 id=\"排序关键字\"><a href=\"#排序关键字\" class=\"headerlink\" title=\"排序关键字\"></a>排序关键字</h3><p> ◇ASC代表升序（默认），DESC代表降序 如果排序列是数字类型，数据库就按照数字大小排序，如果是日期 类型就按照日期大小排序，如果是字符串就按照字符集序号排序。  </p>\n<h3 id=\"排序字段内容相同的情况\"><a href=\"#排序字段内容相同的情况\" class=\"headerlink\" title=\"排序字段内容相同的情况\"></a>排序字段内容相同的情况</h3><p>◇ 默认情况下，如果两条数据排序字段内容相同，那么排序会是什么 样子？<br>◇ 如果排序字段内容相同，MySQL会按照主键大小来排序两条数据  </p>\n<h3 id=\"多个排序字段\"><a href=\"#多个排序字段\" class=\"headerlink\" title=\"多个排序字段\"></a>多个排序字段</h3><p> ◇我们可以使用ORDER BY规定首要排序条件和次要排序条件。数据 库会先按照首要排序条件排序，如果遇到首要排序内容相同的记录 ，那么就会启用次要排序条件接着排序  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> empno,ename,sal,hiredate</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> t_emp</span><br><span class=\"line\"><span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span> sal <span class=\"keyword\">DESC</span>,hiredate <span class=\"keyword\">ASC</span>;</span><br></pre></td></tr></table></figure>\n<h3 id=\"排序-分页\"><a href=\"#排序-分页\" class=\"headerlink\" title=\"排序+分页\"></a>排序+分页</h3><p>◇ ORDER BY子句书写的时候放在LIMIT子句的前面<br> FROM -&gt; SELECT -&gt; ORDER BY -&gt; LIMIT  </p>\n<h2 id=\"数据操作语言：去除重复记录\"><a href=\"#数据操作语言：去除重复记录\" class=\"headerlink\" title=\"数据操作语言：去除重复记录\"></a>数据操作语言：去除重复记录</h2><p>◇ 假如我们要查询员工表有多少种职业， 如果我们需要去除重复的数据，可以使用DISTINCT关键字来实现  ；</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">DISTINCT</span> 字段 <span class=\"keyword\">FROM</span> …… ;</span><br></pre></td></tr></table></figure>\n<p>◇ 注意事项  ： ①使用DISTINCT的SELECT子句中只能查询一列数据，如果查询多列， 去除重复记录就会失效。<br>② DISTINCT关键字只能在SELECT子句中使用一次  ；</p>\n<h2 id=\"数据操作语言：条件查询\"><a href=\"#数据操作语言：条件查询\" class=\"headerlink\" title=\"数据操作语言：条件查询\"></a>数据操作语言：条件查询</h2><h3 id=\"条件查询\"><a href=\"#条件查询\" class=\"headerlink\" title=\"条件查询\"></a>条件查询</h3><p>◇ 很多时候，用户感兴趣的并不是逻辑表里的全部记录，而只是它们 当中能够满足某一种或某几种条件的记录。这类条件要用WHERE子 句来实现数据的筛选  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> …… <span class=\"keyword\">FROM</span> …… <span class=\"keyword\">WHERE</span> 条件 [ <span class=\"keyword\">AND</span> <span class=\"operator\">|</span> <span class=\"keyword\">OR</span> ] 条件 …… ;</span><br></pre></td></tr></table></figure>\n<h3 id=\"四类运算符\"><a href=\"#四类运算符\" class=\"headerlink\" title=\"四类运算符\"></a>四类运算符</h3><p> WHERE语句中的条件运算会用到以下四种运算符：<br><img src=\"/p/f427/1625997158623-77abf14a-54c7-475f-b681-9b41a645994f.png\" class=\"lazyload\" data-srcset=\"/p/f427/1625997158623-77abf14a-54c7-475f-b681-9b41a645994f.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"算数运算符\"><a href=\"#算数运算符\" class=\"headerlink\" title=\"算数运算符\"></a>算数运算符</h3><p><img src=\"/p/f427/1626506515565-3a9d08ca-5c97-4fbd-84e7-3fcdfa11bca4.png\" class=\"lazyload\" data-srcset=\"/p/f427/1626506515565-3a9d08ca-5c97-4fbd-84e7-3fcdfa11bca4.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"比较运算符\"><a href=\"#比较运算符\" class=\"headerlink\" title=\"比较运算符\"></a>比较运算符</h3><p><img src=\"/p/f427/1626506532025-a81b1d45-0bcb-4b12-99af-3bf2f1ac8c56.png\" class=\"lazyload\" data-srcset=\"/p/f427/1626506532025-a81b1d45-0bcb-4b12-99af-3bf2f1ac8c56.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br><img src=\"/p/f427/1626506751691-a643c08a-1c57-46a6-8a9e-0f7478ade47b.png\" class=\"lazyload\" data-srcset=\"/p/f427/1626506751691-a643c08a-1c57-46a6-8a9e-0f7478ade47b.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"逻辑运算符\"><a href=\"#逻辑运算符\" class=\"headerlink\" title=\"逻辑运算符\"></a>逻辑运算符</h3><p><img src=\"/p/f427/1626506615665-ab58a3e7-4c84-4cb3-b3ce-b8d089816b3e.png\" class=\"lazyload\" data-srcset=\"/p/f427/1626506615665-ab58a3e7-4c84-4cb3-b3ce-b8d089816b3e.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"二进制按位运算\"><a href=\"#二进制按位运算\" class=\"headerlink\" title=\"二进制按位运算\"></a>二进制按位运算</h3><p>◇ 二进制位运算的实质是将参与运算的两个操作数，按对应的二进制数逐位进行逻辑运算。<br><img src=\"/p/f427/1626506691986-8cb9c71e-23fe-4243-a98f-61ecaeb2037e.png\" class=\"lazyload\" data-srcset=\"/p/f427/1626506691986-8cb9c71e-23fe-4243-a98f-61ecaeb2037e.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"按位运算符\"><a href=\"#按位运算符\" class=\"headerlink\" title=\"按位运算符\"></a>按位运算符</h3><p><img src=\"/p/f427/1626506705766-5f082cda-69bc-4213-8776-6b307ec394b4.png\" class=\"lazyload\" data-srcset=\"/p/f427/1626506705766-5f082cda-69bc-4213-8776-6b307ec394b4.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"WHERE子句的注意事项\"><a href=\"#WHERE子句的注意事项\" class=\"headerlink\" title=\"WHERE子句的注意事项\"></a>WHERE子句的注意事项</h3><p>◇ WHERE子句中，条件执行的顺序是从左到右的。所以我们应该把索引条件，或者筛选掉记录最多的条件写在最左侧  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> empno,ename <span class=\"keyword\">FROM</span> t_emp</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> ename <span class=\"operator\">=</span> &quot;FORD&quot; <span class=\"keyword\">AND</span> sal <span class=\"operator\">&gt;=</span> <span class=\"number\">2000</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> empno,ename <span class=\"keyword\">FROM</span> t_emp</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> deptno <span class=\"operator\">=</span> <span class=\"number\">10</span> <span class=\"keyword\">AND</span> sal <span class=\"operator\">&gt;=</span> <span class=\"number\">2000</span>;</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"各种子句的执行顺序\"><a href=\"#各种子句的执行顺序\" class=\"headerlink\" title=\"各种子句的执行顺序\"></a>各种子句的执行顺序</h3><p> 条件查询中，WHERE子句应该是第几个执行？ FROM -&gt; WHERE -&gt; SELECT -&gt; ORDER BY -&gt; LIMIT  </p>\n","categories":["Java数据库","MySQL基础"],"tags":["数据库"]},{"title":"数据库范式","url":"/p/77e3.html","content":"<h2 id=\"概念\"><a href=\"#概念\" class=\"headerlink\" title=\"概念\"></a>概念</h2><p>◇ 构造数据库必须遵循一定的规则，这种规则就是范式<br>◇ 目前关系数据库有6种范式，一般情况下，只满足第三范式即可  </p>\n<h2 id=\"第一范式：原子性\"><a href=\"#第一范式：原子性\" class=\"headerlink\" title=\"第一范式：原子性\"></a>第一范式：原子性</h2><p>◇ 第一范式是数据库的基本要求，不满足这一点就不是关系数据库<br>◇ 数据表的每一列都是不可分割的基本数据项，同一列中不能有多个值，也不能存在重复的属性。<br><img src=\"/p/77e3/1625840047827-6aee66b4-51fa-4462-9315-661dcc5bbc8c.png\" class=\"lazyload\" data-srcset=\"/p/77e3/1625840047827-6aee66b4-51fa-4462-9315-661dcc5bbc8c.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h2 id=\"第二范式：唯一性\"><a href=\"#第二范式：唯一性\" class=\"headerlink\" title=\"第二范式：唯一性\"></a>第二范式：唯一性</h2><p>◇ 数据表中的每条记录必须是唯一的。为了实现区分，通常要为表 加上一个列用来存储唯一标识，这个唯一属性列被称作主键列<br><img src=\"/p/77e3/1625840463558-faa7b806-aebf-4fa1-83d6-1fa49132c68f.png\" class=\"lazyload\" data-srcset=\"/p/77e3/1625840463558-faa7b806-aebf-4fa1-83d6-1fa49132c68f.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h2 id=\"第三范式：关联性\"><a href=\"#第三范式：关联性\" class=\"headerlink\" title=\"第三范式：关联性\"></a>第三范式：关联性</h2><p>◇ 每列都与主键有直接关系，不存在传递依赖<br><img src=\"/p/77e3/1625840515859-2c1f2750-a72c-4ca8-9693-0097054d1a89.png\" class=\"lazyload\" data-srcset=\"/p/77e3/1625840515859-2c1f2750-a72c-4ca8-9693-0097054d1a89.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br> ◇依照第三范式，数据可以拆分保存到不同的数据表，彼此保持关联<br><img src=\"/p/77e3/1625840617006-d3552f4a-77d7-4734-8d1b-f4347315568f.png\" class=\"lazyload\" data-srcset=\"/p/77e3/1625840617006-d3552f4a-77d7-4734-8d1b-f4347315568f.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h2 id=\"字段约束\"><a href=\"#字段约束\" class=\"headerlink\" title=\"字段约束\"></a>字段约束</h2><p>◇ MySQL中的字段约束共有四种：<br><img src=\"/p/77e3/1625990627379-e5fb0810-df5e-4398-bd38-3841fc1be58b.png\" class=\"lazyload\" data-srcset=\"/p/77e3/1625990627379-e5fb0810-df5e-4398-bd38-3841fc1be58b.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"主键约束\"><a href=\"#主键约束\" class=\"headerlink\" title=\"主键约束\"></a>主键约束</h3><p>◇ 主键约束要求字段的值在全表必须唯一，而且不能为NULL值<br>◇ 建议主键一定要使用数字类型，因为数字的检索速度会非常快<br>◇ 如果主键是数字类型，还可以设置自动增长  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> t_teacher(</span><br><span class=\"line\">id <span class=\"type\">INT</span> <span class=\"keyword\">PRIMARY</span> KEY AUTO_INCREMENT,</span><br><span class=\"line\">.......</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n<h3 id=\"非空约束\"><a href=\"#非空约束\" class=\"headerlink\" title=\"非空约束\"></a>非空约束</h3><p>◇ 非空约束要求字段的值不能为NULL值<br>◇ NULL值以为没有值，而不是” “空字符串  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> t_teacher(</span><br><span class=\"line\">id <span class=\"type\">INT</span> <span class=\"keyword\">PRIMARY</span> KEY AUTO_INCREMENT,</span><br><span class=\"line\">name <span class=\"type\">VARCHAR</span>(<span class=\"number\">200</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span>,</span><br><span class=\"line\">married <span class=\"type\">BOOLEAN</span> <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">FALSE</span> <span class=\"operator\">/</span><span class=\"operator\">/</span>设置默认值为<span class=\"literal\">false</span></span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<h3 id=\"唯一约束\"><a href=\"#唯一约束\" class=\"headerlink\" title=\"唯一约束\"></a>唯一约束</h3><p>◇ 唯一约束要求字段值如果不为NULL，那么在全表必须唯一  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> t_teacher(</span><br><span class=\"line\">...</span><br><span class=\"line\">tel <span class=\"type\">CHAR</span>(<span class=\"number\">11</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> <span class=\"keyword\">UNIQUE</span></span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<h3 id=\"外键约束\"><a href=\"#外键约束\" class=\"headerlink\" title=\"外键约束\"></a>外键约束</h3><p>◇ 外键约束用来保证关联数据的逻辑关系<br><img src=\"/p/77e3/1625991461738-358528fb-416f-4cef-b409-575041655201.png\" class=\"lazyload\" data-srcset=\"/p/77e3/1625991461738-358528fb-416f-4cef-b409-575041655201.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>◇ 外键约束的定义是写在子表上的  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> t_emp(</span><br><span class=\"line\">empno <span class=\"type\">INT</span> UNSIGNED <span class=\"keyword\">PRIMARY</span> KEY,</span><br><span class=\"line\">ename <span class=\"type\">VARCHAR</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span>,</span><br><span class=\"line\">sex ENUM(&quot;MAN&quot;,&quot;WOMAN&quot;) <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span>,</span><br><span class=\"line\">deptno <span class=\"type\">INT</span> UNSIGNED <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span>,</span><br><span class=\"line\">hiredate <span class=\"type\">DATE</span> <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span>,</span><br><span class=\"line\"><span class=\"keyword\">FOREIGN</span> KEY (deptno) <span class=\"keyword\">REFERENCES</span> t_dept(deptno)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<p>** 外键约束的闭环问题  **<br>◇ 如果形成外键闭环，我们将无法删除任何一张表的记录<br><img src=\"/p/77e3/1625992112385-0da833a2-88ca-4eed-8643-262a3b35b40d.png\" class=\"lazyload\" data-srcset=\"/p/77e3/1625992112385-0da833a2-88ca-4eed-8643-262a3b35b40d.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h2 id=\"数据定义语言：索引\"><a href=\"#数据定义语言：索引\" class=\"headerlink\" title=\"数据定义语言：索引\"></a>数据定义语言：索引</h2><h3 id=\"数据排序的好处\"><a href=\"#数据排序的好处\" class=\"headerlink\" title=\"数据排序的好处\"></a>数据排序的好处</h3><p>◇ 一旦数据排序之后，查找的速度就会翻倍，现实世界跟程 序世界都是如此  </p>\n<h3 id=\"数据表的索引\"><a href=\"#数据表的索引\" class=\"headerlink\" title=\"数据表的索引\"></a>数据表的索引</h3><p>◇ MySQL利用二叉树结构，对数据表的记录排序，从而加速 数据的检索速度<br><img src=\"/p/77e3/1625992297169-2ea7a513-51e5-40b6-b3ca-2aca1f27912d.png\" class=\"lazyload\" data-srcset=\"/p/77e3/1625992297169-2ea7a513-51e5-40b6-b3ca-2aca1f27912d.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"如何创建索引\"><a href=\"#如何创建索引\" class=\"headerlink\" title=\"如何创建索引\"></a>如何创建索引</h3><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> 表名称 ( ……，</span><br><span class=\"line\">INDEX [ 索引名称 ] ( 字段 ) ……<span class=\"operator\">/</span><span class=\"operator\">/</span>给哪一个字段设置索引</span><br><span class=\"line\">) ;</span><br></pre></td></tr></table></figure>\n<h3 id=\"如何添加与删除索引\"><a href=\"#如何添加与删除索引\" class=\"headerlink\" title=\"如何添加与删除索引\"></a>如何添加与删除索引</h3><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> INDEX 索引名称 <span class=\"keyword\">ON</span> 表名( 字段 ) ；</span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> 表名称 <span class=\"keyword\">ADD</span> INDEX [ 索引名 ]( 字段 ) ;</span><br><span class=\"line\"><span class=\"keyword\">SHOW</span> INDEX <span class=\"keyword\">FROM</span> 表名 ;   <span class=\"operator\">/</span><span class=\"operator\">/</span>查看索引情况</span><br><span class=\"line\"><span class=\"keyword\">DROP</span> INDEX 索引名称 <span class=\"keyword\">ON</span> 表名 ;</span><br></pre></td></tr></table></figure>\n<h3 id=\"索引的使用原则\"><a href=\"#索引的使用原则\" class=\"headerlink\" title=\"索引的使用原则\"></a>索引的使用原则</h3><p>◇ 数据量很大，而且经常被查询的数据表可以设置索引<br>◇ 索引只添加在经常被用作检索条件的字段上面<br>◇ 不要在大字段上创建索引</p>\n","categories":["Java数据库","MySQL基础"],"tags":["数据库"]},{"title":"数据库的高级查询","url":"/p/1648.html","content":"<h2 id=\"数据操作语言：聚合函数\"><a href=\"#数据操作语言：聚合函数\" class=\"headerlink\" title=\"数据操作语言：聚合函数\"></a>数据操作语言：聚合函数</h2><h3 id=\"什么是聚合函数\"><a href=\"#什么是聚合函数\" class=\"headerlink\" title=\"什么是聚合函数\"></a>什么是聚合函数</h3><p>◇ 聚合函数在数据的查询分析中，应用十分广泛。聚合函数可以对数 据求和、求最大值和最小值、求平均值等等。<br>◇ 求公司员工的平均月收入是多少？  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"built_in\">AVG</span>(sal<span class=\"operator\">+</span>IFNULL(comm,<span class=\"number\">0</span>)) <span class=\"keyword\">FROM</span> t_emp;</span><br></pre></td></tr></table></figure>\n<h3 id=\"SUM函数\"><a href=\"#SUM函数\" class=\"headerlink\" title=\"SUM函数\"></a>SUM函数</h3><p> ◇ SUM函数用于求和，只能用于数字类型，字符类型的统计结果为0 ，日期类型统计结果是毫秒数相加<br> ◇ SUM函数求和会排除NULL值  </p>\n<h3 id=\"MAX函数\"><a href=\"#MAX函数\" class=\"headerlink\" title=\"MAX函数\"></a>MAX函数</h3><p> ◇ MAX函数用于获得非空值的最大值。<br> ◇ 问题1：查询10和20部门中，月收入最高的员工？  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"built_in\">MAX</span>(sal<span class=\"operator\">+</span>IFNULL(comm,<span class=\"number\">0</span>)) <span class=\"keyword\">FROM</span> t_emp</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> deptno <span class=\"keyword\">IN</span>(<span class=\"number\">10</span>,<span class=\"number\">20</span>);</span><br></pre></td></tr></table></figure>\n<p> ◇ 问题2：查询员工名字最长的是几个字符？  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"built_in\">MAX</span>(LENGTH(ename)) <span class=\"keyword\">FROM</span> t_emp;</span><br></pre></td></tr></table></figure>\n<h3 id=\"MIN函数\"><a href=\"#MIN函数\" class=\"headerlink\" title=\"MIN函数\"></a>MIN函数</h3><p> ◇ MIN函数用于获得非空值的最小值。  </p>\n<h3 id=\"AVG函数\"><a href=\"#AVG函数\" class=\"headerlink\" title=\"AVG函数\"></a>AVG函数</h3><p> ◇ AVG函数用于获得非空值的平均值，非数字数据统计结果为0  </p>\n<h3 id=\"COUNT函数\"><a href=\"#COUNT函数\" class=\"headerlink\" title=\"COUNT函数\"></a>COUNT函数</h3><p> ◇ COUNT(*)用于获得包含空值的记录数，COUNT(列名)用于获得包 含非空值的记录数。<br> ◇ 查询10和20部门中，底薪超过2000元并且工龄超过15年的员工人数？  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"built_in\">COUNT</span>(<span class=\"operator\">*</span>) <span class=\"keyword\">FROM</span> t_emp</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> deptno <span class=\"keyword\">IN</span>(<span class=\"number\">10</span>,<span class=\"number\">20</span>) <span class=\"keyword\">AND</span> sal<span class=\"operator\">&gt;=</span><span class=\"number\">2000</span></span><br><span class=\"line\"><span class=\"keyword\">AND</span> DATEDIFF(NOW(),hiredate)<span class=\"operator\">/</span><span class=\"number\">365</span><span class=\"operator\">&gt;=</span><span class=\"number\">15</span>; <span class=\"operator\">/</span><span class=\"operator\">/</span>DATEDIFF指相差的天数</span><br></pre></td></tr></table></figure>\n<p> ◇ 查询1985年以后入职的员工，底薪超过公司平均底薪的员工数量？  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"built_in\">COUNT</span>(<span class=\"operator\">*</span>) <span class=\"keyword\">FROM</span> t_emp</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> hiredate<span class=\"operator\">&gt;=</span>&quot;1985-01-01&quot;</span><br><span class=\"line\"><span class=\"keyword\">AND</span> sal<span class=\"operator\">&gt;</span><span class=\"built_in\">AVG</span>(sal);<span class=\"operator\">/</span><span class=\"operator\">/</span><span class=\"keyword\">WHERE</span> 子句不能有聚合函数，这里是错误的？</span><br></pre></td></tr></table></figure>\n<h2 id=\"数据操作语言：分组查询\"><a href=\"#数据操作语言：分组查询\" class=\"headerlink\" title=\"数据操作语言：分组查询\"></a>数据操作语言：分组查询</h2><h3 id=\"为什么要分组？\"><a href=\"#为什么要分组？\" class=\"headerlink\" title=\"为什么要分组？\"></a>为什么要分组？</h3><p> ◇ 默认情况下汇总函数是对全表范围内的数据做统计<br> ◇ GROUP BY子句的作用是通过一定的规则将一个数据集划分成若干 个小的区域，然后针对每个小区域分别进行数据汇总处理  </p>\n<h3 id=\"逐级分组\"><a href=\"#逐级分组\" class=\"headerlink\" title=\"逐级分组\"></a>逐级分组</h3><p> ◇ 数据库支持多列分组条件，执行的时候逐级分组。<br> ◇ 查询每个部门里，每种职位的人员数量和平均底薪  </p>\n<h3 id=\"对SELECT子句的要求\"><a href=\"#对SELECT子句的要求\" class=\"headerlink\" title=\"对SELECT子句的要求\"></a>对SELECT子句的要求</h3><p> ◇ 查询语句中如果含有GROUP BY子句，那么SELECT子句中的内容就 必须要遵守规定：SELECT子句中可以包括聚合函数，或者GROUP BY子句的分组列，其余内容均不可以出现在SELECT子句中<br>如下sql语句就是错误的：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> deptno,<span class=\"built_in\">COUNT</span>(<span class=\"operator\">*</span>),<span class=\"built_in\">AVG</span>(sal),sal <span class=\"operator\">/</span><span class=\"operator\">/</span>sal字段并不是<span class=\"keyword\">GROUP</span> <span class=\"keyword\">BY</span>子句的分组列</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> t_emp <span class=\"keyword\">GROUP</span> <span class=\"keyword\">BY</span> deptno;</span><br></pre></td></tr></table></figure>\n<h3 id=\"对分组结果集再次做汇总计算\"><a href=\"#对分组结果集再次做汇总计算\" class=\"headerlink\" title=\"对分组结果集再次做汇总计算\"></a>对分组结果集再次做汇总计算</h3><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> deptno,<span class=\"built_in\">COUNT</span>(<span class=\"operator\">*</span>),<span class=\"built_in\">AVG</span>(sal),<span class=\"built_in\">MAX</span>(sal),<span class=\"built_in\">MIN</span>(sal)</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> t_emp <span class=\"keyword\">GROUP</span> <span class=\"keyword\">BY</span> deptno <span class=\"keyword\">WITH</span> <span class=\"keyword\">ROLLUP</span>;</span><br></pre></td></tr></table></figure>\n<h3 id=\"GROUP-CONCAT函数\"><a href=\"#GROUP-CONCAT函数\" class=\"headerlink\" title=\"GROUP_CONCAT函数\"></a>GROUP_CONCAT函数</h3><p> ◇ GROUP_CONCAT函数可以把分组查询中的某个字段拼接成一个字符串<br> ◇ 查询每个部门内底薪超过2000元的人数和员工姓名    </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> deptno,GROUP_CONCAT(ename),<span class=\"built_in\">COUNT</span>(<span class=\"operator\">*</span>)</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> t_emp <span class=\"keyword\">WHERE</span> sal<span class=\"operator\">&gt;=</span><span class=\"number\">2000</span></span><br><span class=\"line\"><span class=\"keyword\">GROUP</span> <span class=\"keyword\">BY</span> deptno;</span><br></pre></td></tr></table></figure>\n<h3 id=\"各种子句的执行顺序\"><a href=\"#各种子句的执行顺序\" class=\"headerlink\" title=\"各种子句的执行顺序\"></a>各种子句的执行顺序</h3><p> ◇ 查询语句中，GROUP BY子句应该第几个执行？<br>FROM -&gt; WHERE -&gt; GROUP BY -&gt; SELECT -&gt; ORDER BY -&gt; LIMIT  </p>\n<h2 id=\"数据操作语言：HAVING子句\"><a href=\"#数据操作语言：HAVING子句\" class=\"headerlink\" title=\"数据操作语言：HAVING子句\"></a>数据操作语言：HAVING子句</h2><h3 id=\"分组查询遇到的困难？\"><a href=\"#分组查询遇到的困难？\" class=\"headerlink\" title=\"分组查询遇到的困难？\"></a>分组查询遇到的困难？</h3><p> ◇ 查询部门平均底薪超过2000元的部门编号<br> ◇ 因为WHERE子句先于GROUP BY执行，一旦WHERE子句中出现了 汇总函数，数据库根本不知道按照什么范围计算汇总值  </p>\n<h3 id=\"HAVING子句的用途\"><a href=\"#HAVING子句的用途\" class=\"headerlink\" title=\"HAVING子句的用途\"></a>HAVING子句的用途</h3><p> ◇ 可以将聚集函数写在HAVING子句中<br> ◇ 查询每个部门中，1982年以后入职的员工超过2个人的部门编号  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> deptno <span class=\"keyword\">FROM</span> t_emp</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> hiredate<span class=\"operator\">&gt;=</span>&quot;1982-01-01&quot;</span><br><span class=\"line\"><span class=\"keyword\">GROUP</span> <span class=\"keyword\">BY</span> deptno <span class=\"keyword\">HAVING</span> <span class=\"built_in\">COUNT</span>(<span class=\"operator\">*</span>)<span class=\"operator\">&gt;=</span><span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span> deptno <span class=\"keyword\">ASC</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"HAVING子句的特殊用法\"><a href=\"#HAVING子句的特殊用法\" class=\"headerlink\" title=\"HAVING子句的特殊用法\"></a>HAVING子句的特殊用法</h3><p> ◇ 按照数字1分组，MySQL会依据SELECT子句中的列进行分组， HAVING子句也可以正常使用  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> deptno,<span class=\"built_in\">COUNT</span>(<span class=\"operator\">*</span>), <span class=\"keyword\">FROM</span> t_emp</span><br><span class=\"line\"><span class=\"keyword\">GROUP</span> <span class=\"keyword\">BY</span> <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> deptno,<span class=\"built_in\">COUNT</span>(<span class=\"operator\">*</span>), <span class=\"keyword\">FROM</span> t_emp</span><br><span class=\"line\"><span class=\"keyword\">GROUP</span> <span class=\"keyword\">BY</span> <span class=\"number\">1</span> <span class=\"keyword\">HAVING</span> deptno <span class=\"keyword\">IN</span> (<span class=\"number\">10</span>,<span class=\"number\">20</span>);</span><br></pre></td></tr></table></figure>\n<h2 id=\"数据操作语言：表连接查询\"><a href=\"#数据操作语言：表连接查询\" class=\"headerlink\" title=\"数据操作语言：表连接查询\"></a>数据操作语言：表连接查询</h2><h3 id=\"从多张表中提取数据\"><a href=\"#从多张表中提取数据\" class=\"headerlink\" title=\"从多张表中提取数据\"></a>从多张表中提取数据</h3><p> ◇ 从多张表中提取数据，必须指定关联的条件。如果不定义关联条件 就会出现无条件连接，两张表的数据会交叉连接，产生笛卡尔积。<br><img src=\"/p/1648/1626527536343-fe29719d-f14e-4f1f-b2dd-0b875407529f.png\" class=\"lazyload\" data-srcset=\"/p/1648/1626527536343-fe29719d-f14e-4f1f-b2dd-0b875407529f.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br> ◇ 规定了连接条件的表连接语句，就不会出现笛卡尔积<br><img src=\"/p/1648/1626527554966-ef6bd0c6-0869-473a-807a-aaf8bb2b0479.png\" class=\"lazyload\" data-srcset=\"/p/1648/1626527554966-ef6bd0c6-0869-473a-807a-aaf8bb2b0479.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"表连接的分类\"><a href=\"#表连接的分类\" class=\"headerlink\" title=\"表连接的分类\"></a>表连接的分类</h3><p> ◇ 表连接分为两种：内连接和外连接<br> ◇ 内连接是结果集中只保留符合连接条件的记录<br> ◇ 外连接是不管符不符合连接条件，记录都要保留在结果集中  </p>\n<h3 id=\"内连接的简介\"><a href=\"#内连接的简介\" class=\"headerlink\" title=\"内连接的简介\"></a>内连接的简介</h3><p> ◇ 内连接是最常见的一种表连接，用于查询多张关系表符合连接条件 的记录。INNER关键字可省略<br><img src=\"/p/1648/1626527706776-ea571078-3649-4f98-8763-458cf7d9bea1.png\" class=\"lazyload\" data-srcset=\"/p/1648/1626527706776-ea571078-3649-4f98-8763-458cf7d9bea1.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"内连接的多种语法形式\"><a href=\"#内连接的多种语法形式\" class=\"headerlink\" title=\"内连接的多种语法形式\"></a>内连接的多种语法形式</h3><figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> …… <span class=\"keyword\">FROM</span> 表<span class=\"number\">1</span> <span class=\"keyword\">JOIN</span> 表<span class=\"number\">2</span> <span class=\"keyword\">ON</span> 连接条件 ;</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> …… <span class=\"keyword\">FROM</span> 表<span class=\"number\">1</span> <span class=\"keyword\">JOIN</span> 表<span class=\"number\">2</span> <span class=\"keyword\">WHERE</span> 连接条件 ;</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> …… <span class=\"keyword\">FROM</span> 表<span class=\"number\">1</span> , 表<span class=\"number\">2</span> <span class=\"keyword\">WHERE</span> 连接条件 ;<span class=\"operator\">/</span><span class=\"operator\">/</span>常用</span><br></pre></td></tr></table></figure>\n<h3 id=\"内连接练习\"><a href=\"#内连接练习\" class=\"headerlink\" title=\"内连接练习\"></a>内连接练习</h3><p> ◇ 查询每个员工的工号、姓名、部门名称、底薪、职位、工资等级？ </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> e.empno,e.ename,d.deptno,e.sal,e.job,s.grade</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> t_emp e,t_dept d,t_salgrade s </span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> e.deptno<span class=\"operator\">=</span>d.deptno <span class=\"keyword\">AND</span> e.sal <span class=\"keyword\">BETWEEN</span> s.losal <span class=\"keyword\">AND</span> s.hisal;</span><br></pre></td></tr></table></figure>\n<p> ◇ 内连接的数据表不一定必须有同名字段，只要字段之间符合逻辑关系就可以<br> ◇ 相同的数据表也可以做表连接<br> ◇ 结果集也可以作为一张“表”来跟其他表连接  </p>\n<h3 id=\"为什么要使用外连接\"><a href=\"#为什么要使用外连接\" class=\"headerlink\" title=\"为什么要使用外连接\"></a>为什么要使用外连接</h3><p> ◇ 如果说陈浩是一名临时人员，没有固定的部门编制，那么我们想查询每名员工和他的部门名称，用内连接就会漏掉陈浩，所以要引入外连接的语法才能解决这个问题<br><img src=\"/p/1648/1626529078875-5839b367-ab6b-4302-adab-a26f1cb433cf.png\" class=\"lazyload\" data-srcset=\"/p/1648/1626529078875-5839b367-ab6b-4302-adab-a26f1cb433cf.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"外连接简介\"><a href=\"#外连接简介\" class=\"headerlink\" title=\"外连接简介\"></a>外连接简介</h3><p> ◇ 外连接与内连接的区别在于，除了符合条件的记录之外，结果集中 还会保留不符合条件的记录。<br><img src=\"/p/1648/1626579588053-e5d55de3-cb32-46d2-a9b3-aac5f56aee42.png\" class=\"lazyload\" data-srcset=\"/p/1648/1626579588053-e5d55de3-cb32-46d2-a9b3-aac5f56aee42.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"左连接和右连接\"><a href=\"#左连接和右连接\" class=\"headerlink\" title=\"左连接和右连接\"></a>左连接和右连接</h3><p> ◇ 左外连接就是保留左表所有的记录，与右表做连接。如果右表有符 合条件的记录就与左表连接。如果右表没有符合条件的记录，就用 NULL与左表连接。右外连接也是如此。  </p>\n<h3 id=\"外连接练习\"><a href=\"#外连接练习\" class=\"headerlink\" title=\"外连接练习\"></a>外连接练习</h3><p> ◇ 查询每个部门的名称和部门的人数？  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span>  d.dname,<span class=\"built_in\">COUNT</span>(e.deptno)<span class=\"operator\">/</span><span class=\"operator\">/</span>忽略右表(t_emp)的<span class=\"keyword\">NULL</span>记录</span><br><span class=\"line\"><span class=\"keyword\">FROM</span>  t_dept d <span class=\"keyword\">LEFT</span> <span class=\"keyword\">JOIN</span> t_emp e <span class=\"operator\">/</span><span class=\"operator\">/</span>保留左表(t_dept)的所有记录</span><br><span class=\"line\"><span class=\"keyword\">ON</span> d.deptno<span class=\"operator\">=</span>e.deptno</span><br><span class=\"line\"><span class=\"keyword\">GROUP</span> <span class=\"keyword\">BY</span> d.deptno;</span><br></pre></td></tr></table></figure>\n<p>◇结果：<br><img src=\"/p/1648/1626621372904-af26d4c8-739c-4c3f-9e1c-cae69f7cc554.png\" class=\"lazyload\" data-srcset=\"/p/1648/1626621372904-af26d4c8-739c-4c3f-9e1c-cae69f7cc554.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br> ◇ 查询每个部门的名称和部门的人数？如果没有部门的员工，部门名称用NULL代替。  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">(<span class=\"keyword\">SELECT</span>  d.dname,<span class=\"built_in\">COUNT</span>(e.deptno)</span><br><span class=\"line\"><span class=\"keyword\">FROM</span>  t_dept d <span class=\"keyword\">LEFT</span> <span class=\"keyword\">JOIN</span> t_emp e </span><br><span class=\"line\"><span class=\"keyword\">ON</span> d.deptno<span class=\"operator\">=</span>e.deptno</span><br><span class=\"line\"><span class=\"keyword\">GROUP</span> <span class=\"keyword\">BY</span> d.deptno )  </span><br><span class=\"line\">    <span class=\"keyword\">UNION</span> <span class=\"operator\">/</span><span class=\"operator\">/</span>使用<span class=\"keyword\">UNION</span>关键字进行左外连接和右外连接的合并</span><br><span class=\"line\">(<span class=\"keyword\">SELECT</span>  d.dname,<span class=\"built_in\">COUNT</span>(<span class=\"operator\">*</span>) <span class=\"operator\">/</span><span class=\"operator\">/</span>保留所有有效记录</span><br><span class=\"line\"><span class=\"keyword\">FROM</span>  t_dept d <span class=\"keyword\">RIGHT</span> <span class=\"keyword\">JOIN</span> t_emp e </span><br><span class=\"line\"><span class=\"keyword\">ON</span> d.deptno<span class=\"operator\">=</span>e.deptno</span><br><span class=\"line\"><span class=\"keyword\">GROUP</span> <span class=\"keyword\">BY</span> d.deptno )</span><br></pre></td></tr></table></figure>\n<p>◇结果：<br><img src=\"/p/1648/1626621411537-c2ca9e43-f9fc-43e4-8616-a7eff4e887a1.png\" class=\"lazyload\" data-srcset=\"/p/1648/1626621411537-c2ca9e43-f9fc-43e4-8616-a7eff4e887a1.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br> ◇ 查询每名员工的编号、姓名、部门、月薪、工资等级、工龄、上司 编号、上司姓名、上司部门？  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> e1.empno <span class=\"keyword\">AS</span> <span class=\"string\">&#x27;编号&#x27;</span>,e1.ename <span class=\"keyword\">AS</span> <span class=\"string\">&#x27;姓名&#x27;</span>,d1.dname <span class=\"keyword\">AS</span> <span class=\"string\">&#x27;部门&#x27;</span>,</span><br><span class=\"line\">e1.sal<span class=\"operator\">+</span>IFNULL(e1.comm,<span class=\"number\">0</span>) <span class=\"keyword\">AS</span> <span class=\"string\">&#x27;薪水&#x27;</span>,t.grade <span class=\"keyword\">AS</span> <span class=\"string\">&#x27;薪资等级&#x27;</span>,</span><br><span class=\"line\"><span class=\"built_in\">FLOOR</span>(DATEDIFF(NOW(),e1.hiredate)<span class=\"operator\">/</span><span class=\"number\">365</span>) <span class=\"keyword\">AS</span> <span class=\"string\">&#x27;工龄&#x27;</span>,</span><br><span class=\"line\">e1.mgr <span class=\"keyword\">AS</span> <span class=\"string\">&#x27;上司编号&#x27;</span>,e2.ename <span class=\"keyword\">AS</span> <span class=\"string\">&#x27;上司姓名&#x27;</span>,d2.dname <span class=\"keyword\">AS</span> <span class=\"string\">&#x27;上司部门&#x27;</span> </span><br><span class=\"line\"><span class=\"keyword\">FROM</span> t_emp e1 <span class=\"keyword\">LEFT</span> <span class=\"keyword\">JOIN</span> t_dept d1 <span class=\"keyword\">ON</span> e1.deptno<span class=\"operator\">=</span>d1.deptno</span><br><span class=\"line\"><span class=\"keyword\">LEFT</span> <span class=\"keyword\">JOIN</span> t_emp e2 <span class=\"keyword\">ON</span> e1.mgr<span class=\"operator\">=</span>e2.empno</span><br><span class=\"line\"><span class=\"keyword\">LEFT</span> <span class=\"keyword\">JOIN</span> t_salgrade t <span class=\"keyword\">ON</span> e1.sal <span class=\"keyword\">BETWEEN</span> t.losal <span class=\"keyword\">AND</span> t.hisal</span><br><span class=\"line\"><span class=\"keyword\">LEFT</span> <span class=\"keyword\">JOIN</span> t_dept d2 <span class=\"keyword\">ON</span> e2.deptno<span class=\"operator\">=</span>d2.deptno;</span><br></pre></td></tr></table></figure>\n<p>◇结果：<br><img src=\"/p/1648/1626664826083-f96e349d-cc41-40fc-8a9f-0b996022332a.png\" class=\"lazyload\" data-srcset=\"/p/1648/1626664826083-f96e349d-cc41-40fc-8a9f-0b996022332a.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<p> ◇ UNION关键字可以将多个查询语句的结果集进行合并 ,结果集字段名称、个数需要相同</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">( 查询语句 ) <span class=\"keyword\">UNION</span> ( 查询语句 ) <span class=\"keyword\">UNION</span> ( 查询语句 ) ……</span><br></pre></td></tr></table></figure>\n<h3 id=\"外连接的注意事项\"><a href=\"#外连接的注意事项\" class=\"headerlink\" title=\"外连接的注意事项\"></a>外连接的注意事项</h3><p> ◇ 内连接只保留符合条件的记录，所以查询条件写在ON子句和 WHERE子句中的效果是相同的。但是外连接里，条件写在WHERE 子句里，不合符条件的记录是会被过滤掉的,而不是保留下来。<br>①<br>使用ON子句</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> e.ename,d,dname,d.deptno</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> t_emp e</span><br><span class=\"line\"><span class=\"keyword\">LEFT</span> <span class=\"keyword\">JOIN</span> t_dept d <span class=\"keyword\">ON</span> e.deptno <span class=\"operator\">=</span> d.deptno</span><br><span class=\"line\"><span class=\"keyword\">AND</span> e.deptno<span class=\"operator\">=</span><span class=\"number\">10</span>;</span><br></pre></td></tr></table></figure>\n<p>结果：<br><img src=\"/p/1648/1626665352162-b0b6a378-88e3-4711-9b18-ee194cf32151.png\" class=\"lazyload\" data-srcset=\"/p/1648/1626665352162-b0b6a378-88e3-4711-9b18-ee194cf32151.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<p>发现所有记录都被保留，但不符合条件的记录为空<br>②使用WHERE子句</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> e.ename,d,dname,d.deptno</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> t_emp e</span><br><span class=\"line\"><span class=\"keyword\">LEFT</span> <span class=\"keyword\">JOIN</span> t_dept d <span class=\"keyword\">ON</span> e.deptno <span class=\"operator\">=</span> d.deptno</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> e.deptno<span class=\"operator\">=</span><span class=\"number\">10</span>;</span><br></pre></td></tr></table></figure>\n<p>结果：<br><img src=\"/p/1648/1626665474286-a40128b4-d895-4759-86f7-d68289ac14ba.png\" class=\"lazyload\" data-srcset=\"/p/1648/1626665474286-a40128b4-d895-4759-86f7-d68289ac14ba.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h2 id=\"数据操作语言：子查询\"><a href=\"#数据操作语言：子查询\" class=\"headerlink\" title=\"数据操作语言：子查询\"></a>数据操作语言：子查询</h2><h3 id=\"子查询简介\"><a href=\"#子查询简介\" class=\"headerlink\" title=\"子查询简介\"></a>子查询简介</h3><p> ◇ 子查询是一种查询中嵌套查询的语句<br> ◇ 查询底薪超过公司平均底薪的员工的信息  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> empno,ename,sal</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> t_emp</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> sal<span class=\"operator\">&gt;=</span>(<span class=\"keyword\">SELECT</span> <span class=\"built_in\">AVG</span>(sal) <span class=\"keyword\">FROM</span> t_emp);</span><br></pre></td></tr></table></figure>\n<h3 id=\"子查询的分类\"><a href=\"#子查询的分类\" class=\"headerlink\" title=\"子查询的分类\"></a>子查询的分类</h3><p> ◇ 子查询可以写在三个地方：WHERE子句、FROM子句、SELECT子 句，但是只有FROM子句子查询是最可取的   </p>\n<h3 id=\"WHERE子查询\"><a href=\"#WHERE子查询\" class=\"headerlink\" title=\"WHERE子查询\"></a>WHERE子查询</h3><p> ◇ 这种子查询最简单，最容易理解，但是却是效率很低的子查询<br> ◇ 查询底薪超过公司平均底薪的员工的信息<br><img src=\"/p/1648/1626670116652-f8ce1b67-2d79-462d-902f-12c22d33e139.png\" class=\"lazyload\" data-srcset=\"/p/1648/1626670116652-f8ce1b67-2d79-462d-902f-12c22d33e139.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"用表连接替代WHERE子查询\"><a href=\"#用表连接替代WHERE子查询\" class=\"headerlink\" title=\"用表连接替代WHERE子查询\"></a>用表连接替代WHERE子查询</h3><p> ◇ 表连接的优点是子查询只执行一次，查询效率特别高  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> e2.empno,e2.ename</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> t_emp e1 <span class=\"keyword\">JOIN</span> t_emp e2</span><br><span class=\"line\"><span class=\"keyword\">ON</span> e1.deptno <span class=\"operator\">=</span> e2.deptno</span><br><span class=\"line\"><span class=\"keyword\">AND</span> e2.ename<span class=\"operator\">!=</span>&quot;FORD&quot;</span><br><span class=\"line\"><span class=\"keyword\">AND</span> e1.ename<span class=\"operator\">=</span>&quot;FORD&quot;;</span><br></pre></td></tr></table></figure>\n<h3 id=\"FROM子查询\"><a href=\"#FROM子查询\" class=\"headerlink\" title=\"FROM子查询\"></a>FROM子查询</h3><p> ◇ 这种子查询只会执行一次，所以查询效率很高，把子查询写在FROM子句中<br> ◇ 查询底薪超过公司平均底薪的员工的信息 </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> e.empno,e.ename,e.sal,t.avg</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> t_emp e <span class=\"keyword\">JOIN</span> </span><br><span class=\"line\">(<span class=\"keyword\">SELECT</span> deptno,<span class=\"built_in\">AVG</span>(sal) <span class=\"keyword\">as</span> avg</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> t_emp <span class=\"keyword\">GROUP</span> <span class=\"keyword\">BY</span> deptno) t</span><br><span class=\"line\"><span class=\"keyword\">ON</span> e.deptno<span class=\"operator\">=</span>t.deptno <span class=\"keyword\">AND</span> e.sal<span class=\"operator\">&gt;=</span>t.avg;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"SELECT子查询\"><a href=\"#SELECT子查询\" class=\"headerlink\" title=\"SELECT子查询\"></a>SELECT子查询</h3><p> ◇ 这种子查询每输出一条记录的时候都要执行一次，查询效率很低  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> e.empno,e.ename,(<span class=\"keyword\">SELECT</span> dname <span class=\"keyword\">FROM</span> t_dept <span class=\"keyword\">WHERE</span> deptno<span class=\"operator\">=</span>e.deptno)</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> t_emp e;</span><br></pre></td></tr></table></figure>\n<h3 id=\"相关子查询\"><a href=\"#相关子查询\" class=\"headerlink\" title=\"相关子查询\"></a>相关子查询</h3><p>◇ 查询语句执行的时候要多次的依赖于子查询的结果，这类子查询被 称作相关子查询<br>◇ WHERE子查询和SELECT子查询都属于相关子查询<br>◇ 因为相关子查询要反复多次执行，所以应该避免使用  </p>\n<h3 id=\"单行子查询和多行子查询\"><a href=\"#单行子查询和多行子查询\" class=\"headerlink\" title=\"单行子查询和多行子查询\"></a>单行子查询和多行子查询</h3><p>◇ 单行子查询的结果集只有一条记录，多行子查询结果集有多行记录<br>◇ 多行子查询只能出现在WHERE子句和FROM子句中<br>◇ 子查询一般先写出子查询语句<br>◇ 如何用子查询查找FORD和MARTIN两个人的同事？  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> </span><br><span class=\"line\"><span class=\"keyword\">FROM</span> t_emp</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> </span><br><span class=\"line\">deptno <span class=\"keyword\">IN</span> <span class=\"operator\">/</span><span class=\"operator\">/</span>这里子查询结果集为多行记录，所以不能用&quot;=&quot;,而用&quot;IN&quot;表示等于其中一条记录即可</span><br><span class=\"line\">(<span class=\"keyword\">SELECT</span> deptno <span class=\"keyword\">FROM</span> t_emp <span class=\"keyword\">WHERE</span> ename <span class=\"keyword\">IN</span>(&quot;FORD&quot;,&quot;MARTIN&quot;))</span><br><span class=\"line\"><span class=\"keyword\">AND</span> ename <span class=\"keyword\">NOT</span> <span class=\"keyword\">IN</span>(&quot;FORD&quot;,&quot;MARTIN&quot;);</span><br></pre></td></tr></table></figure>\n<h3 id=\"WHERE子句中的多行子查询\"><a href=\"#WHERE子句中的多行子查询\" class=\"headerlink\" title=\"WHERE子句中的多行子查询\"></a>WHERE子句中的多行子查询</h3><p>◇ WHERE子句中，可以使用IN、ALL、ANY、EXISTS关键字来处理多行表达式结果集的条件判断<br>◇ 查询比FORD和MARTIN底薪都高的员工信息？  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> ename</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> t_emp</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> sal<span class=\"operator\">&gt;=</span><span class=\"keyword\">ALL</span></span><br><span class=\"line\">(<span class=\"keyword\">SELECT</span> sal <span class=\"keyword\">FROM</span> t_emp <span class=\"keyword\">WHERE</span> ename <span class=\"keyword\">IN</span>(&quot;FORD&quot;,&quot;MARTIN&quot;))</span><br><span class=\"line\"><span class=\"keyword\">AND</span> ename <span class=\"keyword\">NOT</span> <span class=\"keyword\">IN</span>(&quot;FORD&quot;,&quot;MARTIN&quot;);</span><br></pre></td></tr></table></figure>\n<h3 id=\"EXISTS关键字\"><a href=\"#EXISTS关键字\" class=\"headerlink\" title=\"EXISTS关键字\"></a>EXISTS关键字</h3><p> ◇ EXISTS关键字是把原来在子查询之外的条件判断，写到了子查询的里面。  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> …… <span class=\"keyword\">FROM</span> 表名 <span class=\"keyword\">WHERE</span> [<span class=\"keyword\">NOT</span>] <span class=\"keyword\">EXISTS</span> ( 子查询 ) ;</span><br></pre></td></tr></table></figure>\n<p> ◇ 查询工资等级3和4级的员工信息？  </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> empno,ename,sal</span><br><span class=\"line\"><span class=\"keyword\">FROM</span> t_emp</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> <span class=\"keyword\">EXISTS</span>(</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> grade <span class=\"keyword\">FROM</span> t_salgrade</span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> sal <span class=\"keyword\">BETWEEN</span> losal <span class=\"keyword\">AND</span> hisal</span><br><span class=\"line\"><span class=\"keyword\">AND</span> grade <span class=\"keyword\">IN</span>(<span class=\"number\">3</span>,<span class=\"number\">4</span>)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n","categories":["Java数据库","MySQL基础"],"tags":["数据库"]},{"title":"数据库简介","url":"/p/f849.html","content":"<h2 id=\"学习目标\"><a href=\"#学习目标\" class=\"headerlink\" title=\"学习目标\"></a>学习目标</h2><p><strong>了解关系型数据库的重要性</strong><br>  -为什么会出现关系型数据库？有哪些常见的关系型数据库？<br><strong>掌握MySQL的安装和配置</strong><br>  -怎么安装MySQL数据库？怎么配置MySQL的字符集、端口号、IP 地址绑定、数据目录等等？<br><strong>实践用户创建、分配权限和密码找回</strong></p>\n<ul>\n<li>如何创建root之外的帐户并分配权限？忘记数据库密码，应该如何 找回？  <h2 id=\"课程内容\"><a href=\"#课程内容\" class=\"headerlink\" title=\"课程内容\"></a>课程内容</h2><img src=\"/p/f849/1625745885993-bc3f8091-5671-49b0-b883-2deeb93953d8.png\" class=\"lazyload\" data-srcset=\"/p/f849/1625745885993-bc3f8091-5671-49b0-b883-2deeb93953d8.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><h2 id=\"操作系统中数据存放的载体\"><a href=\"#操作系统中数据存放的载体\" class=\"headerlink\" title=\"操作系统中数据存放的载体\"></a>操作系统中数据存放的载体</h2>◇ Windows、Linux和MacOS都是基于文件的操作系统<br>◇ 文件能保存数据，为什么不用文件来管理数据？<h2 id=\"什么是-关系型-数据库系统？\"><a href=\"#什么是-关系型-数据库系统？\" class=\"headerlink\" title=\"什么是(关系型)数据库系统？\"></a>什么是(关系型)数据库系统？</h2>◇ 数据库系统（DBMS）是指一个能为用户提供信息服务 的系统。它实现了有组织地、动态地储存大量相关数据 的功能，提供了数据处理和信息资源共享的便利手段。<br>◇ 关系型数据库系统（RDBMS）是指使用了关系模型的数 据库系统<br>◇ 关系模型中，数据是分类存放的，数据之间可以有联系<br><img src=\"/p/f849/1625747084668-a2ccf897-723b-4ed3-b2ff-7306028578de.png\" class=\"lazyload\" data-srcset=\"/p/f849/1625747084668-a2ccf897-723b-4ed3-b2ff-7306028578de.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></li>\n</ul>\n<h2 id=\"关系型数据库的应用\"><a href=\"#关系型数据库的应用\" class=\"headerlink\" title=\"关系型数据库的应用\"></a>关系型数据库的应用</h2><p>◇ 关系型数据库被应用在非常多的领域<br><img src=\"/p/f849/1625746899055-c7f7b681-d7e6-404e-adf4-955b8c3fbb72.png\" class=\"lazyload\" data-srcset=\"/p/f849/1625746899055-c7f7b681-d7e6-404e-adf4-955b8c3fbb72.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br> 关系型数据库可以有效组织和管理大量复杂的数据，所 以关系型数据库才是最重要的数据库产品<br>◇数据库的大规模应用<br><img src=\"/p/f849/1625746981059-77d2bbc5-76f7-433c-b1f3-1579d1cb15a1.png\" class=\"lazyload\" data-srcset=\"/p/f849/1625746981059-77d2bbc5-76f7-433c-b1f3-1579d1cb15a1.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>◇主流关系型数据库<br><img src=\"/p/f849/1625747003200-98e2e0e6-1830-4277-8891-7d4db47274b3.png\" class=\"lazyload\" data-srcset=\"/p/f849/1625747003200-98e2e0e6-1830-4277-8891-7d4db47274b3.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h2 id=\"什么是NoSQL数据库系统？\"><a href=\"#什么是NoSQL数据库系统？\" class=\"headerlink\" title=\"什么是NoSQL数据库系统？\"></a>什么是NoSQL数据库系统？</h2><p>◇ NoSQL数据库指的是数据分类存放，但是数据之间没有关联关系的数据库系统<br><img src=\"/p/f849/1625747164092-f6498682-6d07-4ab0-9c56-c7977aa8d09c.png\" class=\"lazyload\" data-srcset=\"/p/f849/1625747164092-f6498682-6d07-4ab0-9c56-c7977aa8d09c.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>◇ 主流NoSQL数据库<br><img src=\"/p/f849/1625747213311-ffaffb43-e795-4115-95a5-89ee1ef45a6f.png\" class=\"lazyload\" data-srcset=\"/p/f849/1625747213311-ffaffb43-e795-4115-95a5-89ee1ef45a6f.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h2 id=\"用户管理\"><a href=\"#用户管理\" class=\"headerlink\" title=\"用户管理\"></a>用户管理</h2><p>◇MySQL客户端  Navicat</p>\n<h3 id=\"重设root密码\"><a href=\"#重设root密码\" class=\"headerlink\" title=\"重设root密码\"></a>重设root密码</h3><p>◇ 密码忘记后<br>◇ 创建一个TXT文件，定义修改密码的SQL语句  </p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"code\"><pre><span class=\"line\">ALTER USER <span class=\"string\">&#x27;root&#x27;</span>@<span class=\"string\">&#x27;localhost&#x27;</span> IDENTIFIED BY</span><br><span class=\"line\"><span class=\"string\">&#x27;123456&#x27;</span> ;</span><br></pre></td></tr></table></figure>\n<p>◇以管理员身份打开PowerShell窗口<br><img src=\"/p/f849/1625755297789-549f2cdd-2307-4e23-b0cf-b6306fc853d3.png\" class=\"lazyload\" data-srcset=\"/p/f849/1625755297789-549f2cdd-2307-4e23-b0cf-b6306fc853d3.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br><img src=\"/p/f849/1625755485452-38a0d75a-c473-4e30-ba8b-2a4ab32121e1.png\" class=\"lazyload\" data-srcset=\"/p/f849/1625755485452-38a0d75a-c473-4e30-ba8b-2a4ab32121e1.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>◇ 修改my.ini文件，删除之前添加的参数<br>C:\\ProgramData\\MySQL\\MySQL Server 8.0，先打开隐藏文件；<br>◇ 重启MySQL服务，用新密码登陆root帐户</p>\n<h2 id=\"MySQL配置文件\"><a href=\"#MySQL配置文件\" class=\"headerlink\" title=\"MySQL配置文件\"></a>MySQL配置文件</h2><p>◇ 在my.ini文件中，我们可以设置各种MySQL的配置，例 如字符集、端口号、目录地址等等<br><img src=\"/p/f849/1625755710987-887e0744-ef37-4276-9da1-1150300ab70b.png\" class=\"lazyload\" data-srcset=\"/p/f849/1625755710987-887e0744-ef37-4276-9da1-1150300ab70b.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"code\"><pre><span class=\"line\">[<span class=\"meta\">client</span>]</span><br><span class=\"line\">port=<span class=\"number\">3306</span>   </span><br><span class=\"line\">[<span class=\"meta\">mysql</span>]</span><br><span class=\"line\">no-beep    <span class=\"meta\">#关闭蜂鸣器</span></span><br><span class=\"line\">[<span class=\"meta\">mysqld</span>]</span><br><span class=\"line\">port=<span class=\"number\">3306</span>  <span class=\"meta\">#端口号</span></span><br><span class=\"line\">datadir=C:/ProgramData/MySQL/MySQL Server <span class=\"number\">8.0</span>\\Data  <span class=\"meta\">#数据目录</span></span><br><span class=\"line\">default_authentication_plugin=mysql_native_password <span class=\"meta\">#密码认证插件</span></span><br><span class=\"line\"><span class=\"literal\">default</span>-storage-engine=INNODB  <span class=\"meta\">#默认存储引擎</span></span><br><span class=\"line\">sql-mode=<span class=\"string\">&quot;STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION&quot;</span>  <span class=\"meta\">#开启严格模式</span></span><br><span class=\"line\">log-output=FILE  <span class=\"meta\">#用文件记录日志</span></span><br><span class=\"line\">general-log=<span class=\"number\">0</span>  <span class=\"meta\">#关闭日志输出</span></span><br><span class=\"line\">general_log_file=<span class=\"string\">&quot;LAPTOP-3NL7HPNI.log&quot;</span>  <span class=\"meta\">#日志文件名称</span></span><br><span class=\"line\">slow-query-log=<span class=\"number\">1</span>  <span class=\"meta\">#开启慢查询日志</span></span><br><span class=\"line\">slow_query_log_file=<span class=\"string\">&quot;LAPTOP-3NL7HPNI-slow.log&quot;</span> <span class=\"meta\">#慢查询日志文件名称</span></span><br><span class=\"line\">long_query_time=<span class=\"number\">10</span>  <span class=\"meta\">#大于多少秒的执行SQL被记录在慢查询</span></span><br><span class=\"line\">log-error=<span class=\"string\">&quot;LAPTOP-3NL7HPNI.err&quot;</span> <span class=\"meta\">#错误日志名称</span></span><br><span class=\"line\">log-bin=<span class=\"string\">&quot;LAPTOP-3NL7HPNI-bin&quot;</span></span><br><span class=\"line\">server-id=<span class=\"number\">1</span> <span class=\"meta\">#数据库ID，集群时用到</span></span><br><span class=\"line\">report_port=<span class=\"number\">3306</span></span><br><span class=\"line\">lower_case_table_names=<span class=\"number\">1</span> <span class=\"meta\">#把表名转换成小写</span></span><br><span class=\"line\">secure-file-priv=<span class=\"string\">&quot;C:/ProgramData/MySQL/MySQL Server 8.0/Uploads&quot;</span> <span class=\"meta\">#导入导出数据的目录地址</span></span><br><span class=\"line\">max_connections=<span class=\"number\">151</span> <span class=\"meta\">#最大连接数</span></span><br><span class=\"line\">table_open_cache=<span class=\"number\">2000</span></span><br><span class=\"line\">tmp_table_size=<span class=\"number\">21</span>M</span><br><span class=\"line\">thread_cache_size=<span class=\"number\">10</span> <span class=\"meta\">#线程数量</span></span><br><span class=\"line\">.......</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n","categories":["Java数据库","MySQL基础"],"tags":["数据库"]},{"title":"测试文章","url":"/p/1023.html","content":"<h2 id=\"测试标题\"><a href=\"#测试标题\" class=\"headerlink\" title=\"测试标题\"></a>测试标题</h2><p>这是一个测试页面,以下内容为余华的《活着》<img src=\"https://img1.baidu.com/it/u=4151257971,460772575&fm=26&fmt=auto\" class=\"lazyload\" data-srcset=\"https://img1.baidu.com/it/u=4151257971,460772575&fm=26&fmt=auto\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"art\"></p>\n<hr>\n<p> &emsp;&emsp; 我比现在年轻十岁的时候，获得了一个游手好闲的职业，去乡间收集民间歌谣。那一年的整个夏天，我如同一只乱飞的麻雀，游荡在知了和阳光充斥的村舍田野。<br> &emsp;&emsp; 我喜欢喝农民那种带有苦味的茶水，他们的茶桶就放在田埂的树下，我毫无顾忌地拿起漆满茶垢的茶碗舀水喝，还把自己的水壶灌满，与田里干活的男人说上几句废话，在姑娘因我而起的窃窃私笑里扬长而去。我曾经和一位守着瓜田的老人聊了整整一个下午，这是我有生以来瓜吃得最多的一次，当我站起来告辞时，突然发现自己像个孕妇一样步履艰难了。然后我与一位当上了祖母的女人坐在门槛上，她编着草鞋为我唱了一支《十月怀胎》。我最喜欢的是傍晚来到时，坐在农民的屋前，看着他们将提上的井水泼.在地上，压住蒸腾的尘土，夕阳的光芒在树梢上照射下来，拿一把他们递过来的扇子，尝尝他们和盐一样咸的咸菜，看看几个年轻女人，和男人们说着话。<br> &emsp;&emsp; 我头戴宽边草帽，脚上穿着拖鞋，一条毛巾挂在身后的皮带上，让它像尾巴似的拍打着我的屁股。我整日张大嘴巴打着呵欠，散漫地走在田间小道上，我的拖鞋吧哒吧哒，把那些小道弄得尘土飞扬，仿佛是车轮滚滚而过时的情景。<br> &emsp;&emsp; 我到处游荡，已经弄不清楚哪些村庄我曾经去过，哪些我没有去过。我走近一个村子时，常会听到孩子的喊叫：     </p>\n<p> &emsp;&emsp; “那个老打呵欠的人又来啦。”</p>\n<p><code>print &quot;hello world&quot;</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">for(int i=0;i=100;i++)&#123;</span><br><span class=\"line\">     cout&lt;&lt;&quot;这是第&quot;&lt;&lt;i+1&lt;&lt;&quot;次&quot;&lt;&lt;循环&lt;&lt;endl;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n","categories":["分类测试"],"tags":["测试标签"]},{"title":"过滤器","url":"/p/cb9.html","content":"<h2 id=\"基础\"><a href=\"#基础\" class=\"headerlink\" title=\"基础\"></a>基础</h2><h3 id=\"初识过滤器\"><a href=\"#初识过滤器\" class=\"headerlink\" title=\"初识过滤器\"></a>初识过滤器</h3><p>◇过滤器(Filter)是J2EE servlet模块下的组件<br>◇Filter的作用是对URL进行统一的拦截处理<br>◇Filter通常用于应用程序层面进行全局处理<br>◇过滤链，正向传递请求，最终有ServletJSP处理，然后逆向响应；<br><img src=\"/p/cb9/1622365495819-77ff8c25-9ff8-4525-bd73-6ca7088c5bba.png\" class=\"lazyload\" data-srcset=\"/p/cb9/1622365495819-77ff8c25-9ff8-4525-bd73-6ca7088c5bba.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"开发过滤三要素\"><a href=\"#开发过滤三要素\" class=\"headerlink\" title=\"开发过滤三要素\"></a>开发过滤三要素</h3><p>◇任何过滤器都要实现javax.servlet.Filter接口<br>◇在Filter接口的doFilter()方法中编写过滤器的功能代码<br>◇在web.xml中对过滤器进行配置，说明拦截URL的范围</p>\n<h3 id=\"开发第一个过滤器\"><a href=\"#开发第一个过滤器\" class=\"headerlink\" title=\"开发第一个过滤器\"></a>开发第一个过滤器</h3><p>代码演示：<br>1.任何过滤器都要实现javax.servlet.Filter接口；在Filter接口的doFilter()方法中编写过滤器的功能代码</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyFirstFilter</span> <span class=\"keyword\">implements</span> <span class=\"title\">Filter</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">destroy</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// TODO Auto-generated method stub</span></span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">doFilter</span><span class=\"params\">(ServletRequest request, ServletResponse response, FilterChain chain)</span></span></span><br><span class=\"line\"><span class=\"function\">\t\t\t<span class=\"keyword\">throws</span> IOException, ServletException </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// TODO Auto-generated method stub</span></span><br><span class=\"line\">\t\tSystem.out.println(<span class=\"string\">&quot;过滤器已生效&quot;</span>);</span><br><span class=\"line\">\t\tchain.doFilter(request, response);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">init</span><span class=\"params\">(FilterConfig filterConfig)</span> <span class=\"keyword\">throws</span> ServletException </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// TODO Auto-generated method stub</span></span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>2.在web.xml中对过滤器进行配置，说明拦截URL的范围</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!-- filter标签用于说明哪个类是过滤器，并在启动时自动加载 --&gt;</span><br><span class=\"line\">&lt;filter&gt;</span><br><span class=\"line\">     &lt;filter-name&gt;MyFirstFilter&lt;/filter-name&gt;</span><br><span class=\"line\">     &lt;filter-<span class=\"class\"><span class=\"keyword\">class</span>&gt;<span class=\"title\">com</span>.<span class=\"title\">lcg</span>.<span class=\"title\">filter</span>.<span class=\"title\">MyFirstFilter</span>&lt;/<span class=\"title\">filter</span>-<span class=\"title\">class</span>&gt;</span></span><br><span class=\"line\"><span class=\"class\">&lt;/<span class=\"title\">filter</span>&gt;</span></span><br><span class=\"line\"><span class=\"class\">&lt;!-- <span class=\"title\">filter</span>-<span class=\"title\">mapping</span>标签用于说明过滤器对<span class=\"title\">URL</span>应用的范围，要点有二：</span></span><br><span class=\"line\"><span class=\"class\">1.<span class=\"title\">filter</span>-<span class=\"title\">name</span> 过滤器名称与<span class=\"title\">filter</span>.<span class=\"title\">filter</span>-<span class=\"title\">name</span>保持一致</span></span><br><span class=\"line\"><span class=\"class\">2.<span class=\"title\">url</span>-<span class=\"title\">pattern</span> 说明过滤作用范围，/*代表对所有<span class=\"title\">URL</span>进行过滤 --&gt;</span></span><br><span class=\"line\"><span class=\"class\">&lt;<span class=\"title\">filter</span>-<span class=\"title\">mapping</span>&gt;</span></span><br><span class=\"line\"><span class=\"class\">     &lt;<span class=\"title\">filter</span>-<span class=\"title\">name</span>&gt;<span class=\"title\">MyFirstFilter</span>&lt;/<span class=\"title\">filter</span>-<span class=\"title\">name</span>&gt;</span></span><br><span class=\"line\"><span class=\"class\">     &lt;<span class=\"title\">url</span>-<span class=\"title\">pattern</span>&gt;/*&lt;/<span class=\"title\">url</span>-<span class=\"title\">pattern</span>&gt;</span></span><br><span class=\"line\"><span class=\"class\">&lt;/<span class=\"title\">filter</span>-<span class=\"title\">mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"过滤器生命周期\"><a href=\"#过滤器生命周期\" class=\"headerlink\" title=\"过滤器生命周期\"></a>过滤器生命周期</h3><p><img src=\"/p/cb9/image-20220221195446215.png\" class=\"lazyload\" data-srcset=\"/p/cb9/image-20220221195446215.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image-20220221195446215\"></p>\n<p>◇代码演示</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyFirstFilter</span> <span class=\"keyword\">implements</span> <span class=\"title\">Filter</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">destroy</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// TODO Auto-generated method stub</span></span><br><span class=\"line\">\t\tSystem.out.println(<span class=\"string\">&quot;过滤器已销毁&quot;</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">doFilter</span><span class=\"params\">(ServletRequest request, ServletResponse response, FilterChain chain)</span></span></span><br><span class=\"line\"><span class=\"function\">\t\t\t<span class=\"keyword\">throws</span> IOException, ServletException </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// TODO Auto-generated method stub</span></span><br><span class=\"line\">\t\tSystem.out.println(<span class=\"string\">&quot;过滤器已生效&quot;</span>);</span><br><span class=\"line\">\t\tchain.doFilter(request, response);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">init</span><span class=\"params\">(FilterConfig filterConfig)</span> <span class=\"keyword\">throws</span> ServletException </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// TODO Auto-generated method stub</span></span><br><span class=\"line\">\t\tSystem.out.println(<span class=\"string\">&quot;过滤器初始化&quot;</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>◇运行结果:启动Tomcat后，过滤器自动初始化；  在浏览器进行访问时，如果访问的地址符合过滤策略，则过滤器会生效； 当关闭Tomcat后，过滤器自动销毁；</p>\n<h3 id=\"过滤器特性\"><a href=\"#过滤器特性\" class=\"headerlink\" title=\"过滤器特性\"></a>过滤器特性</h3><p>◇过滤器对象在Web应用启动时被创建且全局唯一<br>◇唯一的过滤器对象在并发环境中采用”多线程”提供服务</p>\n<h3 id=\"过滤器的配置形式\"><a href=\"#过滤器的配置形式\" class=\"headerlink\" title=\"过滤器的配置形式\"></a>过滤器的配置形式</h3><p>◇在xml中配置</p>\n<h3 id=\"过滤器的注解形式\"><a href=\"#过滤器的注解形式\" class=\"headerlink\" title=\"过滤器的注解形式\"></a>过滤器的注解形式</h3><p>◇在class中注解</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@WebFilter(filterName=&quot;MyAnnoationFilter&quot;,urlPatterns=&quot;/*&quot;)</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"配置与注解如何选择\"><a href=\"#配置与注解如何选择\" class=\"headerlink\" title=\"配置与注解如何选择\"></a>配置与注解如何选择</h3><p>◇配置形式维护性更好，适合应用全局过滤<br>◇注解形式开发体验更好，适用于小型项目敏捷开发<br>◇尽量避免混合使用</p>\n<h2 id=\"过滤器开发\"><a href=\"#过滤器开发\" class=\"headerlink\" title=\"过滤器开发\"></a>过滤器开发</h2><h3 id=\"开发字符集过滤器\"><a href=\"#开发字符集过滤器\" class=\"headerlink\" title=\"开发字符集过滤器\"></a>开发字符集过滤器</h3><p>◇web中文乱码的解决<br><img src=\"/p/cb9/1622451277809-0d31cfaf-bef4-4d67-be2b-07533529f06e.png\" class=\"lazyload\" data-srcset=\"/p/cb9/1622451277809-0d31cfaf-bef4-4d67-be2b-07533529f06e.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>◇缺点：每一个servlet都要单独设置，无法统一设置；<br>◇使用字符集过滤器解决：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">doFilter</span><span class=\"params\">(ServletRequest request, ServletResponse response, FilterChain chain)</span></span></span><br><span class=\"line\"><span class=\"function\">\t\t\t<span class=\"keyword\">throws</span> IOException, ServletException </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// TODO Auto-generated method stub</span></span><br><span class=\"line\">\t\t<span class=\"comment\">//必须强制转换为HttpServletResponse，与Servlet底层机制有关</span></span><br><span class=\"line\">\t\tHttpServletRequest req = (HttpServletRequest)request;</span><br><span class=\"line\">\t\treq.setCharacterEncoding(<span class=\"string\">&quot;UTF-8&quot;</span>);</span><br><span class=\"line\">\t\tHttpServletResponse res = (HttpServletResponse)response;</span><br><span class=\"line\">\t\tres.setContentType(<span class=\"string\">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class=\"line\">\t\tchain.doFilter(request, response);</span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"ServletRequest接口\"><a href=\"#ServletRequest接口\" class=\"headerlink\" title=\"ServletRequest接口\"></a>ServletRequest接口</h3><p><img src=\"/p/cb9/1622452191050-6eab257d-a994-4b90-a897-4a518f700785.png\" class=\"lazyload\" data-srcset=\"/p/cb9/1622452191050-6eab257d-a994-4b90-a897-4a518f700785.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"过滤器参数化\"><a href=\"#过滤器参数化\" class=\"headerlink\" title=\"过滤器参数化\"></a>过滤器参数化</h3><p>◇过滤器为了增强灵活性，允许配置信息放在web.xml<br>◇在web.xml中配置<init-param>设置过滤器参数<br>◇优化字符集过滤器<br> 代码演示：<br> –xml配置</init-param></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">filter</span>&gt;</span></span><br><span class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">filter-name</span>&gt;</span>CharacterEncodingFilter<span class=\"tag\">&lt;/<span class=\"name\">filter-name</span>&gt;</span></span><br><span class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">filter-class</span>&gt;</span>com.lcg.filter.CharacterEncodingFilter<span class=\"tag\">&lt;/<span class=\"name\">filter-class</span>&gt;</span></span><br><span class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">init-param</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">param-name</span>&gt;</span>encoding<span class=\"tag\">&lt;/<span class=\"name\">param-name</span>&gt;</span> <span class=\"comment\">&lt;!--参数名--&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">param-value</span>&gt;</span>UTF-8<span class=\"tag\">&lt;/<span class=\"name\">param-value</span>&gt;</span>  <span class=\"comment\">&lt;!--参数值--&gt;</span></span><br><span class=\"line\">     <span class=\"tag\">&lt;/<span class=\"name\">init-param</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">filter</span>&gt;</span> </span><br></pre></td></tr></table></figure>\n<p>–过滤器使用</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">  <span class=\"keyword\">private</span> String encoding;<span class=\"comment\">//类中的全局私有变量</span></span><br><span class=\"line\">\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">init</span><span class=\"params\">(FilterConfig filterConfig)</span> <span class=\"keyword\">throws</span> ServletException </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// TODO Auto-generated method stub</span></span><br><span class=\"line\">\t\tencoding = filterConfig.getInitParameter(encoding);<span class=\"comment\">//获取前面设置的参数</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">doFilter</span><span class=\"params\">(ServletRequest request, ServletResponse response, FilterChain chain)</span></span></span><br><span class=\"line\"><span class=\"function\">\t\t\t<span class=\"keyword\">throws</span> IOException, ServletException </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// TODO Auto-generated method stub</span></span><br><span class=\"line\">\t\t<span class=\"comment\">//必须强制转换为HttpServletResponse，与Servlet底层机制有关</span></span><br><span class=\"line\">\t\tHttpServletRequest req = (HttpServletRequest)request;</span><br><span class=\"line\">\t\treq.setCharacterEncoding(<span class=\"string\">&quot;encoding&quot;</span>);</span><br><span class=\"line\">\t\tHttpServletResponse res = (HttpServletResponse)response;</span><br><span class=\"line\">\t\tres.setContentType(<span class=\"string\">&quot;text/html;charset=&quot;</span>+ encoding);</span><br><span class=\"line\">\t\tchain.doFilter(request, response);</span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure>\n<p>–注解形式配置</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@WebFilter(filterName=&quot;CharacterEncodingFilter&quot;,urlPatterns=&quot;/*&quot;,</span></span><br><span class=\"line\"><span class=\"meta\">initParams= &#123;</span></span><br><span class=\"line\"><span class=\"meta\">\t\t@WebInitParam(name=&quot;encoding&quot;,value=&quot;UTF-8&quot;),</span></span><br><span class=\"line\"><span class=\"meta\">\t\t@WebInitParam(name=&quot;p1&quot;,value=&quot;v1&quot;),</span></span><br><span class=\"line\"><span class=\"meta\">\t\t@WebInitParam(name=&quot;p2&quot;,value=&quot;v2&quot;)</span></span><br><span class=\"line\"><span class=\"meta\">&#125;)</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"url-pattern设置过滤范围\"><a href=\"#url-pattern设置过滤范围\" class=\"headerlink\" title=\"url-pattern设置过滤范围\"></a>url-pattern设置过滤范围</h3><p><strong>url-pattern常用写法</strong><br>◇/index.jsp - 执行资源精准匹配<br>◇/servlet/* - 以前缀进行模糊匹配<br>◇*.jsp - 以后缀进行模糊匹配<br><strong>/映射的问题</strong><br>◇/值映射Web应用根路径，且只对Servlet生效<br>◇默认首页index.jsp会让/失效<br>◇/与/<em>含义不同，前者指向根路径，后者代表所有<br>◇设置默认首页index.jsp，会隐式的跳转到默认根路径：”/“，则会使配置的过滤器失效。<br>◇设置多个过滤页面，就编写多个<filter-mapping>标签<br>◇注解形式<br>@WebFilter(filterName=””,urlPattrens={“/“, “/servlet/</filter-mapping></em>“, “*.jsp”})</p>\n<h3 id=\"过滤链开发注意事项\"><a href=\"#过滤链开发注意事项\" class=\"headerlink\" title=\"过滤链开发注意事项\"></a>过滤链开发注意事项</h3><p>◇每一个过滤器应具有单独职能<br>◇过滤器的执行顺序以<filter-mapping>的书写前后顺序为准<br>◇调用chain.doFilter()将请求向后传递<br>◇会逆向返回，把输出语句放在chain.doFilter()语句后面，会发现过滤器倒序输出。如代码：</filter-mapping></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">chain.doFilter(request, response);</span><br><span class=\"line\">System.out.println(<span class=\"string\">&quot;I&#x27;m Filter A&quot;</span>);</span><br></pre></td></tr></table></figure>\n<p>因为此时先执行chain.doFilter()方法，就会先将请求向后传递，而不先执行打印方法；直到不再向后传递请求后(即到了C)，才执行打印方法，进行逆向的返回；因此会看到打印是C-B-A的逆序；<br>◇使用注解形式的执行顺序，按照类名的名称执行；</p>\n<h3 id=\"项目中过滤器的应用场景\"><a href=\"#项目中过滤器的应用场景\" class=\"headerlink\" title=\"项目中过滤器的应用场景\"></a>项目中过滤器的应用场景</h3><p>◇多端设备自动匹配<br> –代码演示</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.imooc.filter;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.Filter;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.FilterChain;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.FilterConfig;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.ServletResponse;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DeviceAdapterFilter</span> <span class=\"keyword\">implements</span> <span class=\"title\">Filter</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">init</span><span class=\"params\">(FilterConfig filterConfig)</span> <span class=\"keyword\">throws</span> ServletException </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// TODO Auto-generated method stub</span></span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">doFilter</span><span class=\"params\">(ServletRequest request, ServletResponse response, FilterChain chain)</span></span></span><br><span class=\"line\"><span class=\"function\">\t\t\t<span class=\"keyword\">throws</span> IOException, ServletException </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// TODO Auto-generated method stub</span></span><br><span class=\"line\">\t\tHttpServletRequest req = (HttpServletRequest)request;</span><br><span class=\"line\">\t\tHttpServletResponse res = (HttpServletResponse)response;</span><br><span class=\"line\">\t\t<span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">\t\t /index.html</span></span><br><span class=\"line\"><span class=\"comment\">\t\t PC: /desktop/index.html</span></span><br><span class=\"line\"><span class=\"comment\">\t\t MOBILE: /mobile/index.html</span></span><br><span class=\"line\"><span class=\"comment\">\t\t /test.html</span></span><br><span class=\"line\"><span class=\"comment\">\t\t PC: /desktop/test.html</span></span><br><span class=\"line\"><span class=\"comment\">\t\t MOBILE: /mobile/test.html</span></span><br><span class=\"line\"><span class=\"comment\">\t\t */</span></span><br><span class=\"line\">\t\tString uri = req.getRequestURI();</span><br><span class=\"line\">\t\tSystem.out.println(<span class=\"string\">&quot;URI:&quot;</span> + uri);</span><br><span class=\"line\">        <span class=\"comment\">//startWith判断是否以&quot;&quot;开头</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(uri.startsWith(<span class=\"string\">&quot;/desktop&quot;</span>) || uri.startsWith(<span class=\"string\">&quot;/mobile&quot;</span>)) &#123;</span><br><span class=\"line\">            <span class=\"comment\">//如果输入的是正确的手机端和电脑端的uri,则不需处理,直接向后请求</span></span><br><span class=\"line\">\t\t\tchain.doFilter(request, response);</span><br><span class=\"line\">\t\t&#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">//否则,根据设备访问特定的uri</span></span><br><span class=\"line\">\t\t\tString userAgent = req.getHeader(<span class=\"string\">&quot;user-agent&quot;</span>).toLowerCase();</span><br><span class=\"line\">\t\t\tString targetURI=<span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span>(userAgent.indexOf(<span class=\"string\">&quot;android&quot;</span>)!=-<span class=\"number\">1</span> || userAgent.indexOf(<span class=\"string\">&quot;iphone&quot;</span>) != -<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">\t\t\t\ttargetURI = <span class=\"string\">&quot;/mobile&quot;</span> + uri;</span><br><span class=\"line\">\t\t\t\tSystem.out.println(<span class=\"string\">&quot;移动端设备正在访问,重新跳转URI:&quot;</span> + targetURI);</span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">//sendRedirect()方法将页面重定向到指定的URL地址上</span></span><br><span class=\"line\">                res.sendRedirect(targetURI);</span><br><span class=\"line\">\t\t\t&#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t\t\ttargetURI = <span class=\"string\">&quot;/desktop&quot;</span> + uri;</span><br><span class=\"line\">\t\t\t\tSystem.out.println(<span class=\"string\">&quot;PC端设备正在访问,重新跳转URI:&quot;</span> + targetURI);</span><br><span class=\"line\">\t\t\t\tres.sendRedirect(targetURI);</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">destroy</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// TODO Auto-generated method stub</span></span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n","categories":["JavaWeb"],"tags":["Filter"]},{"title":"监听器","url":"/p/83aa.html","content":"<h2 id=\"监听器-Listener\"><a href=\"#监听器-Listener\" class=\"headerlink\" title=\"监听器 - Listener\"></a>监听器 - Listener</h2><p>◇监听器是J2EE Servlet模块下的组件<br>◇Listener的作用是对Web应用对象的行为进行监控<br>◇通过Listener监听自动触发指定的功能代码</p>\n<h2 id=\"三种监听对象\"><a href=\"#三种监听对象\" class=\"headerlink\" title=\"三种监听对象\"></a>三种监听对象</h2><p>◇ServletContext - 对全局ServletContext及其属性进行监听<br>◇HttpSession - 对用户会话及其属性操作进行监听<br>◇ServletRequest - 对请求及属性操作进行监听</p>\n<h2 id=\"过滤器与监听器的区别\"><a href=\"#过滤器与监听器的区别\" class=\"headerlink\" title=\"过滤器与监听器的区别\"></a>过滤器与监听器的区别</h2><p>◇过滤器的职责是对URL进行过滤拦截，是主动的执行<br>◇监听器的职责是对Web对象进行监听，是被动触发</p>\n<h2 id=\"开发监听器三要素\"><a href=\"#开发监听器三要素\" class=\"headerlink\" title=\"开发监听器三要素\"></a>开发监听器三要素</h2><p>◇实现XxxListener接口，不同接口对应不同监听对象<br>◇实现每个接口中独有的方法，实现触发监听的后续操作<br>◇在web.xml中配置<listener>是使听器生效<br>代码演示</listener></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@WebListener</span><span class=\"comment\">//使用注解配置</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FirstListener</span> <span class=\"keyword\">implements</span> <span class=\"title\">ServletContextListener</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">contextDestroyed</span><span class=\"params\">(ServletContextEvent sce)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// TODO Auto-generated method stub</span></span><br><span class=\"line\">\t\tSystem.out.println(<span class=\"string\">&quot;已销毁&quot;</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">contextInitialized</span><span class=\"params\">(ServletContextEvent sce)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// TODO Auto-generated method stub</span></span><br><span class=\"line\">\t\tSystem.out.println(<span class=\"string\">&quot;已初始化&quot;</span>);</span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure>\n<p> –使用xml配置</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">listener</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">listener-class</span>&gt;</span>com.lcg.listener.FirstListener<span class=\"tag\">&lt;/<span class=\"name\">listener-class</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">listener</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"六种常用监听接口\"><a href=\"#六种常用监听接口\" class=\"headerlink\" title=\"六种常用监听接口\"></a>六种常用监听接口</h2><h3 id=\"内置对象监听接口\"><a href=\"#内置对象监听接口\" class=\"headerlink\" title=\"内置对象监听接口\"></a>内置对象监听接口</h3><p>◇ServletContextListener - 监听ServletContext对象创建、销毁等操作<br>◇HttpSessionListener  - 监听HttpSession对象创建、销毁等操作<br>◇ServletRequestListener - 监听 HttpServletRequest对象创建、销毁等操作</p>\n<h3 id=\"属性监听接口\"><a href=\"#属性监听接口\" class=\"headerlink\" title=\"属性监听接口\"></a>属性监听接口</h3><p>◇ServletContextAttributeListener - 监听全局属性操作<br>◇HttpSessionAttributeListener -监听用户会话属性操作<br>◇ServletRequestAttributeListener -监听请求属性操作</p>\n<h2 id=\"监听器的应用场景\"><a href=\"#监听器的应用场景\" class=\"headerlink\" title=\"监听器的应用场景\"></a>监听器的应用场景</h2><h3 id=\"请求流量分析\"><a href=\"#请求流量分析\" class=\"headerlink\" title=\"请求流量分析\"></a>请求流量分析</h3><p>代码演示：<br>  –监听器</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*导包部分省略*/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RequestTotalListener</span> <span class=\"keyword\">implements</span> <span class=\"title\">ServletContextListener</span>,<span class=\"title\">ServletRequestListener</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">requestDestroyed</span><span class=\"params\">(ServletRequestEvent sre)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// TODO Auto-generated method stub</span></span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">requestInitialized</span><span class=\"params\">(ServletRequestEvent sre)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// TODO Auto-generated method stub</span></span><br><span class=\"line\">\t\t<span class=\"comment\">/*排除/rt这个url的访问统计*/</span></span><br><span class=\"line\">\t\tHttpServletRequest request = (HttpServletRequest)sre.getServletRequest();</span><br><span class=\"line\">\t\tString url = request.getRequestURL().toString();</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(url.endsWith(<span class=\"string\">&quot;/rt&quot;</span>)==<span class=\"keyword\">true</span>) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"comment\">/*请求初始化，每来一个新的请求，监听器都会执行此方法。则应当在此方法中记录变化的值</span></span><br><span class=\"line\"><span class=\"comment\">\t\t * 存储结构：TimeList: 10:02  10:03 ...  访问时间</span></span><br><span class=\"line\"><span class=\"comment\">\t\t *          ValueList: 5       7    ...  访问次数</span></span><br><span class=\"line\"><span class=\"comment\">\t\t * */</span></span><br><span class=\"line\">\t\t<span class=\"comment\">//先获取全局属性，再记录 </span></span><br><span class=\"line\">\tList&lt;String&gt; timeList =\t(List)sre.getServletContext().getAttribute(<span class=\"string\">&quot;timeList&quot;</span>);</span><br><span class=\"line\">\tList&lt;Integer&gt; valueList = (List)sre.getServletContext().getAttribute(<span class=\"string\">&quot;valueList&quot;</span>);</span><br><span class=\"line\">\tDate date = <span class=\"keyword\">new</span> Date();</span><br><span class=\"line\">\tSimpleDateFormat sdf = <span class=\"keyword\">new</span> SimpleDateFormat(<span class=\"string\">&quot;HH:mm&quot;</span>);</span><br><span class=\"line\">\tString time = sdf.format(date);</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(timeList.indexOf(time)==-<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">\t\ttimeList.add(time);<span class=\"comment\">//如果时间不存在，则追加</span></span><br><span class=\"line\">\t\tvalueList.add(<span class=\"number\">1</span>);</span><br><span class=\"line\">\t\tsre.getServletContext().setAttribute(<span class=\"string\">&quot;timeList&quot;</span>, timeList);</span><br><span class=\"line\">\t\tsre.getServletContext().setAttribute(<span class=\"string\">&quot;valueList&quot;</span>, valueList);</span><br><span class=\"line\">\t&#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">int</span> index = timeList.indexOf(time);<span class=\"comment\">//若存在，则返回时间的索引值</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">int</span> value = valueList.get(index);<span class=\"comment\">//根据时间的索引获取value值</span></span><br><span class=\"line\">\t\tvalueList.set(index, value+<span class=\"number\">1</span>);</span><br><span class=\"line\">\t\tsre.getServletContext().setAttribute(<span class=\"string\">&quot;valueList&quot;</span>, valueList);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">contextDestroyed</span><span class=\"params\">(ServletContextEvent sce)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// TODO Auto-generated method stub</span></span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">contextInitialized</span><span class=\"params\">(ServletContextEvent sce)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// TODO Auto-generated method stub</span></span><br><span class=\"line\">\t\t<span class=\"comment\">//全局初始化时间和值两个属性，一个保存时间，一个保存数值</span></span><br><span class=\"line\">\t\tList timeList = <span class=\"keyword\">new</span> ArrayList();</span><br><span class=\"line\">\t\tList valueList = <span class=\"keyword\">new</span> ArrayList();</span><br><span class=\"line\">\t\t<span class=\"comment\">//两个属性的值会随着请求变化</span></span><br><span class=\"line\">\t\tsce.getServletContext().setAttribute(<span class=\"string\">&quot;timeList&quot;</span>, timeList);</span><br><span class=\"line\">\t\tsce.getServletContext().setAttribute(<span class=\"string\">&quot;valueList&quot;</span>, valueList);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>–Servlet</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*导包部分省略*/</span></span><br><span class=\"line\"><span class=\"meta\">@WebServlet(&quot;/rt&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RequestTotalServlet</span> <span class=\"keyword\">extends</span> <span class=\"title\">HttpServlet</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">long</span> serialVersionUID = <span class=\"number\">1L</span>;</span><br><span class=\"line\">       </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@see</span> HttpServlet#HttpServlet()</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">RequestTotalServlet</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>();</span><br><span class=\"line\">        <span class=\"comment\">// TODO Auto-generated constructor stub</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@see</span> HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class=\"line\"><span class=\"comment\">\t */</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doGet</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">\t\tServletContext context = request.getServletContext();</span><br><span class=\"line\">\t\tList&lt;String&gt; timeList = (List)context.getAttribute(<span class=\"string\">&quot;timeList&quot;</span>);</span><br><span class=\"line\">\t\tList&lt;Integer&gt; valueList = (List)context.getAttribute(<span class=\"string\">&quot;valueList&quot;</span>);</span><br><span class=\"line\">\t\tresponse.setContentType(<span class=\"string\">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class=\"line\">\t<span class=\"comment\">/*\tresponse.getWriter().println(timeList.toString());</span></span><br><span class=\"line\"><span class=\"comment\">\t\tresponse.getWriter().println(&quot;&lt;br&gt;&quot;);</span></span><br><span class=\"line\"><span class=\"comment\">\t\tresponse.getWriter().println(valueList.toString());*/</span></span><br><span class=\"line\">\t\t<span class=\"comment\">//将原来的数据封装成JSON</span></span><br><span class=\"line\">\t\tMap result = <span class=\"keyword\">new</span> HashMap();</span><br><span class=\"line\">\t\tresult.put(<span class=\"string\">&quot;timeList&quot;</span>, timeList);</span><br><span class=\"line\">\t\tresult.put(<span class=\"string\">&quot;valueList&quot;</span>, valueList);</span><br><span class=\"line\">\t\tString json = JSON.toJSONString(result);</span><br><span class=\"line\">\t\tresponse.getWriter().println(json);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t * <span class=\"doctag\">@see</span> HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class=\"line\"><span class=\"comment\">\t */</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doPost</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// TODO Auto-generated method stub</span></span><br><span class=\"line\">\t\tdoGet(request, response);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>  –统计页面<br>◇<a href=\"https://echarts.apache.org/zh/index.html\">EChart数据可视化插件</a></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">&lt;meta charset=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span><br><span class=\"line\">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class=\"line\">&lt;script type=<span class=\"string\">&quot;text/javascript&quot;</span> src=<span class=\"string\">&quot;js/echarts.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;script type=<span class=\"string\">&quot;text/javascript&quot;</span> src=<span class=\"string\">&quot;js/jquery-3.6.0.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;!-- 为ECharts准备一个具备大小（宽高）的Dom --&gt;</span><br><span class=\"line\">    &lt;div id=<span class=\"string\">&quot;main&quot;</span> style=<span class=\"string\">&quot;width: 600px;height:400px;&quot;</span>&gt;&lt;/div&gt;</span><br><span class=\"line\">    &lt;script type=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><br><span class=\"line\">    <span class=\"function\">function <span class=\"title\">showChart</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">      <span class=\"comment\">//ajax获取./rt的数据，成功后将json数据的数组代替原来的数组</span></span><br><span class=\"line\">    $.ajax(&#123;</span><br><span class=\"line\">    \t   url:<span class=\"string\">&quot;./rt&quot;</span>,</span><br><span class=\"line\">    \t   type:<span class=\"string\">&quot;get&quot;</span>,</span><br><span class=\"line\">    \t   dataType:<span class=\"string\">&quot;json&quot;</span>,</span><br><span class=\"line\">    \t   success: function(json)&#123;</span><br><span class=\"line\">    \t\t console.log(json.timeList);</span><br><span class=\"line\">    \t\t console.log(json.valueList);</span><br><span class=\"line\">    \t\t<span class=\"comment\">// 基于准备好的dom，初始化echarts实例</span></span><br><span class=\"line\">    \t\t\t<span class=\"keyword\">var</span> myChart = echarts.init(document.getElementById(<span class=\"string\">&#x27;main&#x27;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">    \t\t\t<span class=\"comment\">// 指定图表的配置项和数据</span></span><br><span class=\"line\">    \t\t\t<span class=\"keyword\">var</span> option = &#123;</span><br><span class=\"line\">    \t\t\t\ttitle : &#123;   <span class=\"comment\">//标题</span></span><br><span class=\"line\">    \t\t\t\t\ttext : <span class=\"string\">&#x27;请求流量分析&#x27;</span>  <span class=\"comment\">// 标题文本</span></span><br><span class=\"line\">    \t\t\t\t&#125;,</span><br><span class=\"line\">    \t\t\t\ttooltip : &#123;&#125;,</span><br><span class=\"line\">    \t\t\t\tlegend : &#123;</span><br><span class=\"line\">    \t\t\t\t\tdata : [ <span class=\"string\">&#x27;访问量&#x27;</span> ]</span><br><span class=\"line\">    \t\t\t\t&#125;,</span><br><span class=\"line\">    \t\t\t\txAxis : &#123;  <span class=\"comment\">//x轴坐标数据</span></span><br><span class=\"line\">    \t\t\t\t\tdata : json.timeList <span class=\"comment\">//json.timeList类型正好是数组</span></span><br><span class=\"line\">    \t\t\t\t&#125;,</span><br><span class=\"line\">    \t\t\t\tyAxis : &#123;&#125;,</span><br><span class=\"line\">    \t\t\t\tseries : [ &#123;</span><br><span class=\"line\">    \t\t\t\t\tname : <span class=\"string\">&#x27;访问量&#x27;</span>,</span><br><span class=\"line\">    \t\t\t\t\ttype : <span class=\"string\">&#x27;line&#x27;</span>,<span class=\"comment\">//图表形式,bar代表柱状图,line表示折线图</span></span><br><span class=\"line\">    \t\t\t\t\tdata : json.valueList</span><br><span class=\"line\">    \t\t\t\t&#125; ]</span><br><span class=\"line\">    \t\t\t&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    \t\t\t<span class=\"comment\">// 使用刚指定的配置项和数据显示图表。</span></span><br><span class=\"line\">    \t\t\tmyChart.setOption(option);</span><br><span class=\"line\">    \t   &#125;</span><br><span class=\"line\">       </span><br><span class=\"line\">       &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\t\twindow.setInterval(<span class=\"string\">&quot;showChart()&quot;</span>,<span class=\"number\">1000</span>);<span class=\"comment\">//每一秒执行showChart()函数</span></span><br><span class=\"line\">\t&lt;/script&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<h3 id=\"静态数据预处理\"><a href=\"#静态数据预处理\" class=\"headerlink\" title=\"静态数据预处理\"></a>静态数据预处理</h3><p> ◇创建类来定义结构<br> ◇创建监听器初始化和设置属性<br> ◇利用jst-l来获取属性，展示在页面<br>​</p>\n","categories":["JavaWeb"],"tags":["Listener"]},{"title":"递归逆置链表","url":"/p/bac2.html","content":"<h4 id=\"实验内容\"><a href=\"#实验内容\" class=\"headerlink\" title=\"实验内容\"></a>实验内容</h4><p>  对于一个不带头结点的单链表，设计递归算法逆置所有结点。</p>\n<h4 id=\"实验原理\"><a href=\"#实验原理\" class=\"headerlink\" title=\"实验原理\"></a>实验原理</h4><p>  <strong>1.递归介绍</strong></p>\n<p>​        程序调用自身的编程技巧称为递归；一个过程或函数在其定义或说明中有直接或间接调用自身的一种方法，它通常把一个大型复杂的问题层层转化为一个与原问题相似的规模较小的问题来求解，递归策略只需少量的程序就可描述出解题过程所需要的多次重复计算，大大地减少了程序的代码量。递归的能力在于用有限的语句来定义对象的无限集合。递归必须具备两个条件，一个是<wavy>调用自己</wavy>，一个是有<wavy>终止条件</wavy>。这两个条件必须同时具备，且一个都不能少。并且终止条件必须是在递归最开始的地方如下面的代码一样:</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">recursion</span><span class=\"params\">(参数<span class=\"number\">0</span>)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (终止条件) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    recursion(参数<span class=\"number\">1</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>2.逆置方法</strong></p>\n<p>​        对于单链表的递归逆置虽然只有几行代码，但刚开始接触可能会有点绕，所以我尽可能详细的把思路理出来；</p>\n<p>​        对于有n个结点的链表的逆置，利用递归的思想可以先将前n-1个结点逆置；当链表为空或者链表只有一个结点的时候终止递归；每一次调用逆置函数R()完成后返回链表已经逆置完成的部分的第一个结点(设为newNode)；因为在当前结点(设为p)前面的结点都已经完成了逆置，所以当前结点指向的下一个结点(p-&gt;next)，成为了已经逆置完成的部分的最后一个结点；如果要进行逆置的话，当前结点应该要变成最后一个结点；所以将p-&gt;next的下一个结点设置为当前结点，即指向p：<strong>p-&gt;next</strong>-&gt;next=<strong>p</strong>;  p变为最后一个结点后，其下一个结点为空，即p-&gt;next=NULL;这样就完成了以当前结点为第一个结点的链表部分的逆置，返回当前的第一个结点，继续进行逆置，直到所有递归函数调用完毕；</p>\n<p>​        我们来看一个例子，比如要对链表a-&gt;b-&gt;c-&gt;d进行逆置；调用逆置函数R(a),R(a)中会递归调用R(a-&gt;next)即R(b),而R(b)中又会调用R(b-&gt;next)即R(c);这样依次下来：（递归完成部分加粗显示，按照调用完成的顺序）</p>\n<p>①R(d),对d进行逆置，由于d-&gt;next为空，所以直接返回d;此时有newNode=d, a-&gt;b-&gt;c-&gt;<strong>d-&gt;NULL</strong>;</p>\n<p>②R(c),对c-&gt;d进行逆置,当前结点为c，要进行逆置，c应该为最后一个结点，则有：c-&gt;next(d)-&gt;next=c;c-&gt;next=NULL; 此时有newNode=d,<strong>d-&gt;c-&gt;NULL</strong>; a-&gt;b-&gt;c-&gt;NULL;注意这里没有任何结点指向d了，因为已经将c-&gt;next设置为空；</p>\n<p>③R(b),对b-&gt;c-&gt;d进行逆置，由于c-&gt;d部分已经逆置成<strong>d-&gt;c-&gt;NULL</strong>了，所以只需要将b设置为最后一个结点即可；b-&gt;next(c)-&gt;next=b; b-&gt;next=NULL;返回d；此时有newNode=d,<strong>d-&gt;c-&gt;b-&gt;NULL</strong>; a-&gt;b-&gt;NULL;</p>\n<p>④R(a),对a-&gt;b-&gt;c-&gt;d进行逆置,由于b-&gt;c-&gt;d部分已经逆置成<strong>d-&gt;c-&gt;b-&gt;NULL</strong>，所以像③一样，a-&gt;next(b)-&gt;next=a, a-&gt;next=NULL;至此，所有的递归函数都已经调用完毕；得到了newNode=d，<strong>d-&gt;c-&gt;b-&gt;a-&gt;NULL</strong>完成了所有节点的逆置；</p>\n<h4 id=\"代码演示\"><a href=\"#代码演示\" class=\"headerlink\" title=\"代码演示\"></a>代码演示</h4><div class=\"tabs\" id=\"tab-id\"><ul class=\"nav-tabs\"><li class=\"tab active\"><a class=\"#tab-id-1\">完整代码</a></li><li class=\"tab\"><a class=\"#tab-id-2\">运行结果</a></li></ul><div class=\"tab-content\"><div class=\"tab-pane active\" id=\"tab-id-1\"><figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span><span class=\"meta-string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">Node</span> &#123;</span></span><br><span class=\"line\">\t<span class=\"keyword\">int</span> data;</span><br><span class=\"line\">\t<span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">Node</span>* <span class=\"title\">next</span>;</span></span><br><span class=\"line\">&#125; LinkNode;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">LinkNode* <span class=\"title\">CreateList</span><span class=\"params\">(<span class=\"keyword\">int</span> a[],<span class=\"keyword\">int</span> n)</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (n &lt; <span class=\"number\">0</span>)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"literal\">NULL</span>;</span><br><span class=\"line\">\tLinkNode* head = <span class=\"keyword\">new</span> <span class=\"built_in\">LinkNode</span>();</span><br><span class=\"line\">\tLinkNode* p = <span class=\"keyword\">new</span> <span class=\"built_in\">LinkNode</span>();</span><br><span class=\"line\">\tp = head;</span><br><span class=\"line\">\thead-&gt;data = a[<span class=\"number\">0</span>];</span><br><span class=\"line\">\t<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (i = <span class=\"number\">1</span>; i &lt; n; i++) &#123;</span><br><span class=\"line\">\t\tLinkNode* node = <span class=\"keyword\">new</span> <span class=\"built_in\">LinkNode</span>();</span><br><span class=\"line\">\t\tnode-&gt;data = a[i];</span><br><span class=\"line\">\t\tp-&gt;next = node;</span><br><span class=\"line\">\t\tp = node;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tp-&gt;next = <span class=\"literal\">NULL</span>;  <span class=\"comment\">// 尾结点next域置为空</span></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> head;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">DispList</span><span class=\"params\">(LinkNode* ln)</span> </span>&#123;</span><br><span class=\"line\">\tcout &lt;&lt; <span class=\"string\">&quot; &quot;</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (ln != <span class=\"literal\">NULL</span>) &#123;</span><br><span class=\"line\">\t\tcout &lt;&lt; ln-&gt;data;</span><br><span class=\"line\">\t\t<span class=\"built_in\">DispList</span>(ln-&gt;next);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\">LinkNode* <span class=\"title\">Release</span><span class=\"params\">(LinkNode* ln)</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (ln == <span class=\"literal\">NULL</span> || ln-&gt;next == <span class=\"literal\">NULL</span>)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> ln;</span><br><span class=\"line\">\t<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\tLinkNode* newNode = <span class=\"built_in\">Release</span>(ln-&gt;next);</span><br><span class=\"line\">\t\tln-&gt;next-&gt;next = ln;<span class=\"comment\">//将当前结点接在逆置完成部分的最后结点后面,使其成为最后结点</span></span><br><span class=\"line\">\t\tln-&gt;next = <span class=\"literal\">NULL</span>;<span class=\"comment\">//逆置后，最后一个结点的下一个结点为空</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> newNode;<span class=\"comment\">//返回逆置完成部分的第一个结点      </span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">int</span> a[] = &#123;<span class=\"number\">0</span>,<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>,<span class=\"number\">5</span>,<span class=\"number\">6</span>,<span class=\"number\">7</span>,<span class=\"number\">8</span>,<span class=\"number\">9</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> n = <span class=\"built_in\"><span class=\"keyword\">sizeof</span></span>(a) / <span class=\"built_in\"><span class=\"keyword\">sizeof</span></span>(a[<span class=\"number\">0</span>]);</span><br><span class=\"line\">\tLinkNode* L, *N;</span><br><span class=\"line\">\tL = <span class=\"built_in\">CreateList</span>(a,n);</span><br><span class=\"line\">\tcout &lt;&lt; <span class=\"string\">&quot;初始链表:&quot;</span> &lt;&lt; endl;</span><br><span class=\"line\">\t<span class=\"built_in\">DispList</span>(L);</span><br><span class=\"line\">\tcout &lt;&lt; endl;</span><br><span class=\"line\">\tcout &lt;&lt; <span class=\"string\">&quot;逆置链表:&quot;</span> &lt;&lt; endl;</span><br><span class=\"line\">\tN = <span class=\"built_in\">Release</span>(L);</span><br><span class=\"line\">\t<span class=\"built_in\">DispList</span>(N);</span><br><span class=\"line\">\tcout &lt;&lt; endl;</span><br><span class=\"line\">\t<span class=\"keyword\">delete</span> L;</span><br><span class=\"line\">\t<span class=\"keyword\">delete</span> N;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></div><div class=\"tab-pane\" id=\"tab-id-2\"><p><img src=\"https://s2.loli.net/2021/12/09/bSlnhdWxo7vPZ6G.png\" class=\"lazyload\" data-srcset=\"https://s2.loli.net/2021/12/09/bSlnhdWxo7vPZ6G.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\"></p></div></div></div>\n\n","categories":["数据结构"],"tags":["递归"]},{"title":"项目介绍及基础实现","url":"/p/2f49.html","content":"<h2 id=\"课程介绍\"><a href=\"#课程介绍\" class=\"headerlink\" title=\"课程介绍\"></a>课程介绍</h2><p>◇需求说明与环境准备<br>◇开发基于RABC的访问控制模块<br>◇开发多级请假审批流程  </p>\n<h2 id=\"办公自动化OA系统\"><a href=\"#办公自动化OA系统\" class=\"headerlink\" title=\"办公自动化OA系统\"></a>办公自动化OA系统</h2><p>◇办公自动化系统(Office Automation)是替代传统办公的解决方案<br>◇OA系统是利用软件技术构建的单位内部办公平台,用于辅助办公<br>◇利用OA系统可将办公数据数字化,可极大提高办公流程执行效率  </p>\n<h2 id=\"需求介绍\"><a href=\"#需求介绍\" class=\"headerlink\" title=\"需求介绍\"></a>需求介绍</h2><p>◇慕课办公OA系统要求采用多用户B/S架构设计开发<br>◇HR为每一位员工分配系统账户,员工用此账户登录系统<br>◇公司采用分级定岗,从1-8依次提升,不同岗位薪资水平不同<br>◇6级(含)以下员工为业务岗,对应人员执行公司业务事宜<br>◇7-8级为管理岗,其中7级为部门经理,8级为总经理<br>◇业务岗与管理岗员工可用系统功能不同,要求允许灵活配置<br> 需求介绍-请假流程<br>◇公司所有员工都可以使用”请假申请”功能申请休假<br>◇请假时间少于72小时,部门经理审批后直接通过<br>◇请假时间大于72小时,部门经理审批后还需总经理进行审批<br>◇部门经理只允许批准本部门员工申请<br>◇部门经理请假需直接由总经理审批<br>◇总经理提起请假申请,系统自动批准通过<br><img src=\"/p/2f49/1629078647393-4553179d-4d5e-4bdb-a5e7-5754c0f49278.png\" class=\"lazyload\" data-srcset=\"/p/2f49/1629078647393-4553179d-4d5e-4bdb-a5e7-5754c0f49278.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h2 id=\"搭建基础架构\"><a href=\"#搭建基础架构\" class=\"headerlink\" title=\"搭建基础架构\"></a>搭建基础架构</h2><h3 id=\"框架-amp-组件\"><a href=\"#框架-amp-组件\" class=\"headerlink\" title=\"框架&amp;组件\"></a>框架&amp;组件</h3><p>◇MySQL 8                 ◇Mybatis 3.5<br>◇Alibaba Druid         ◇Servlet 3.1<br>◇Freemarker 2.3       ◇LayUI 2.5  </p>\n<h3 id=\"搭建数据库\"><a href=\"#搭建数据库\" class=\"headerlink\" title=\"搭建数据库\"></a>搭建数据库</h3><p>◇新建数据库lcg-oa，字符集选择utf8m4，排序规则默认</p>\n<h3 id=\"创建Maven工程\"><a href=\"#创建Maven工程\" class=\"headerlink\" title=\"创建Maven工程\"></a>创建Maven工程</h3><p>◇新建maven项目oa，JDK选择1.8<br>◇进行工程设置以便将项目发布到服务器上：File-&gt;Project Structure-&gt;Modules-&gt;+-&gt;Web-&gt;Path:改为oa\\src\\main\\webapp\\WEB-INF\\web.xml;version:3.1; Web Resource Directory:选中webapp目录-&gt;Create Artifact-&gt;OK<br>◇配置Tomcat:在工具栏上点击Add Configuration-&gt;+-&gt;Tomcat Server-&gt;Local(用本地的Tomcat来运行)-&gt;勾选After lanuch自动打开浏览器-&gt;HTTP port :80-&gt;Deployment(运行部署配置)-&gt;+-&gt;Artifact-&gt;Application context(应用上下文):/  -&gt;Apply-&gt;OK-&gt;下方为弹出Web面板</p>\n<h3 id=\"配置文件\"><a href=\"#配置文件\" class=\"headerlink\" title=\"配置文件\"></a>配置文件</h3><p>◇pom.xml配置</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\">//使用阿里云镜像仓库提高下载速度</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">repositories</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>aliyun<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>aliyun<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>https://maven.aliyun.com/repository/public<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">repositories</span>&gt;</span></span><br><span class=\"line\">//项目依赖</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.mybatis<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mybatis<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.5.3<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>mysql<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mysql-connector-java<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>8.0.19<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.alibaba<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span>  //阿里巴巴连接池</span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>druid<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.1.14<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>junit<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span>      //单元测试</span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>junit<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>4.12<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>ch.qos.logback<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span> //集成日志</span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>logback-classic<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.2.3<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>◇mybatis核心配置文件：在resource目录下创建mybatis-config.xml</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">configuration</span></span></span><br><span class=\"line\"><span class=\"meta\">        <span class=\"meta-keyword\">PUBLIC</span> <span class=\"meta-string\">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">        <span class=\"meta-string\">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">settings</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--开启驼峰命名转换 form_id -&gt; formId--&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">setting</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;mapUnderscoreToCamelCase&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;true&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">settings</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">environments</span> <span class=\"attr\">default</span>=<span class=\"string\">&quot;dev&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--开发环境配置--&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">environment</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;dev&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!--事务管理器采用JDBC方式--&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">transactionManager</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;JDBC&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">transactionManager</span>&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!--利用Mybatis自带连接池管理连接</span></span><br><span class=\"line\"><span class=\"comment\">            &lt;dataSource type=&quot;POOLED&quot;&gt;--&gt;</span></span><br><span class=\"line\">            <span class=\"comment\">&lt;!--MyBatis与Druid的整合--&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">dataSource</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;com.lcg.oa.datasource.DruidDataSourceFactory&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"comment\">&lt;!--JDBC连接属性--&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;driverClassName&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;url&quot;</span> //连接字符串<span class=\"attr\">lcg-oa</span>是数据库名</span></span><br><span class=\"line\"><span class=\"tag\">                     <span class=\"attr\">value</span>=<span class=\"string\">&quot;jdbc:mysql://localhost:3306/lcg-oa ? useSSL=false<span class=\"symbol\">&amp;amp;</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"tag\">                     useUnicode=true<span class=\"symbol\">&amp;amp;</span>characterEncoding=UTF-8<span class=\"symbol\">&amp;amp;</span></span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"tag\">                     serverTimezone=Asia/Shanghai<span class=\"symbol\">&amp;amp;</span>allowPublicKeyRetrieval=true&quot;</span>/&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;username&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;root&quot;</span>/&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;password&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;www.LCG.com&quot;</span>/&gt;</span></span><br><span class=\"line\">                <span class=\"comment\">&lt;!--连接池初始连接数--&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;initialSize&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;10&quot;</span>/&gt;</span></span><br><span class=\"line\">                <span class=\"comment\">&lt;!--连接池最大连接数--&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;maxActive&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;20&quot;</span>/&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">dataSource</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">environment</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">environments</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">mappers</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">mapper</span> <span class=\"attr\">resource</span>=<span class=\"string\">&quot;mappers/test.xml&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">mappers</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p> ◇java目录下创建com.lcg.oa.utils.MybatisUtils工具类用于对Mybatis进行加载，SessionFactory对象的创建等初始化工作</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> org.apache.ibatis.io.Resources;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.Reader;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.function.Function;</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MybatisUtils</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//利用static(静态)属于类不属于对象,且全局唯一</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> SqlSessionFactory sqlSessionFactory = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    <span class=\"comment\">//利用静态块在初始化类时实例化sqlSessionFactory</span></span><br><span class=\"line\">    <span class=\"keyword\">static</span>&#123;</span><br><span class=\"line\">        Reader reader = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">try</span>&#123;</span><br><span class=\"line\">            reader = Resources.getResourceAsReader(<span class=\"string\">&quot;mybatis-config.xml&quot;</span>);</span><br><span class=\"line\">            sqlSessionFactory = <span class=\"keyword\">new</span> SqlSessionFactoryBuilder().build(reader);</span><br><span class=\"line\">        &#125;<span class=\"keyword\">catch</span>(IOException e)&#123;</span><br><span class=\"line\">            <span class=\"comment\">//初始化错误时,通过抛出异常ExceptionInInitializerError通知调用者</span></span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> ExceptionInInitializerError(e);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 执行SELECT查询SQL</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> func 要执行查询语句的代码块</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> 查询结果</span></span><br><span class=\"line\"><span class=\"comment\">     *具体的查询交给Function实现，在进行查询之前对sqlSession进行了打开和自动关闭</span></span><br><span class=\"line\"><span class=\"comment\">     *Function&lt;T,R&gt;函数式接口，对应一个输入且需要返回数据的功能代码</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Object <span class=\"title\">executeQuery</span><span class=\"params\">(Function&lt;SqlSession,Object&gt; func)</span></span>&#123;</span><br><span class=\"line\">        SqlSession sqlSession = sqlSessionFactory.openSession();</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">//apply方法用于返回函数执行的结果</span></span><br><span class=\"line\">            Object obj = func.apply(sqlSession);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> obj;</span><br><span class=\"line\">        &#125;<span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">            sqlSession.close();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 执行INSERT/UPDATE/DELETE写操作SQL</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> func 要执行的写操作代码块</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> 写操作后返回的结果</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Object <span class=\"title\">executeUpdate</span><span class=\"params\">(Function&lt;SqlSession,Object&gt; func)</span></span>&#123;</span><br><span class=\"line\">        SqlSession sqlSession = sqlSessionFactory.openSession(<span class=\"keyword\">false</span>);</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            Object obj = func.apply(sqlSession);</span><br><span class=\"line\">            sqlSession.commit();</span><br><span class=\"line\">            <span class=\"keyword\">return</span> obj;</span><br><span class=\"line\">        &#125;<span class=\"keyword\">catch</span> (RuntimeException e)&#123;</span><br><span class=\"line\">            sqlSession.rollback();</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> e;</span><br><span class=\"line\">        &#125;<span class=\"keyword\">finally</span>&#123;</span><br><span class=\"line\">            sqlSession.close();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>◇解决<img src=\"/p/2f49/1629083017280-f122b9d6-77bf-4a8c-90de-abdfa7304826.png\" class=\"lazyload\" data-srcset=\"/p/2f49/1629083017280-f122b9d6-77bf-4a8c-90de-abdfa7304826.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\">问题；函数式接口需要jdk1.8版本以上，但maven中统一按照1.5版本进行编译，因此需要在pom.xml配置文件中进行相关设置；在build块中，用于描述当前程序构建的各种细节；在build块中对maven的编译插件进行设置</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">                <span class=\"comment\">&lt;!--利用Maven编译插件将编译级别提高至1.8,解决lambda表达式错误--&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.maven.plugins<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">                <span class=\"comment\">&lt;!--maven-compiler-plugin是Maven自带的编译插件--&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>maven-compiler-plugin<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.3<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"comment\">&lt;!--检查源码采用1.8规则,默认为1.5--&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">source</span>&gt;</span>1.8<span class=\"tag\">&lt;/<span class=\"name\">source</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"comment\">&lt;!--按1.8规则生成字节码--&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">target</span>&gt;</span>1.8<span class=\"tag\">&lt;/<span class=\"name\">target</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">build</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>◇mybatis执行sql的时候要有对应的mapper.xml文件，并且在核心配置文件(mybatis-config.xml)中进行配置；在resource目录下创建mappers目录用于存放此类文件，在其中创建一个test.xml文件进行测试</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">mapper</span> <span class=\"meta-keyword\">PUBLIC</span> <span class=\"meta-string\">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> </span></span><br><span class=\"line\"><span class=\"meta\"><span class=\"meta-string\">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mapper</span> <span class=\"attr\">namespace</span>=<span class=\"string\">&quot;test&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sample&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;String&quot;</span>&gt;</span></span><br><span class=\"line\">        select &#x27;success&#x27;  //不从任何表中获取数据，只是返回success字符串</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mapper</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">//核心配置文件配置</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">mappers</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">mapper</span> <span class=\"attr\">resource</span>=<span class=\"string\">&quot;mappers/test.xml&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">mappers</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">//测试类进行测试，引用lambada表达式</span><br><span class=\"line\">public class MybatisUtilsTestor &#123;</span><br><span class=\"line\">    @Test</span><br><span class=\"line\">    public void testcase1()&#123;</span><br><span class=\"line\">        String result = (String)MybatisUtils.executeQuery(sqlSession-&gt;&#123;</span><br><span class=\"line\">            String out = (String)sqlSession.selectOne(&quot;test.sample&quot;);</span><br><span class=\"line\">            return out;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        System.out.println(result);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    @Test</span><br><span class=\"line\">    public void testcase2()&#123;</span><br><span class=\"line\">        String result = (String) MybatisUtils.executeQuery(</span><br><span class=\"line\">                sqlSession -&gt; sqlSession.selectOne(&quot;test.sample&quot;));</span><br><span class=\"line\">        System.out.println(result);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"连接池设置\"><a href=\"#连接池设置\" class=\"headerlink\" title=\"连接池设置\"></a>连接池设置</h3><p>◇oa目录下创建子包datasource，在其下创建类DruidDataSourceFactory(数据源工厂类)<br>◇执行顺序：首先通过构造方法创建空的数据源对象，然后调用setProperties方法读取xml文件<br>并对刚才实例化的数据源进行属性设置；如果在获取数据源的时候必须要进行额外操作，则应重写<br>getDataSource方法</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> com.alibaba.druid.pool.DruidDataSource;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.ibatis.datasource.unpooled.UnpooledDataSourceFactory;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.sql.DataSource;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.sql.SQLException;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DruidDataSourceFactory</span> <span class=\"keyword\">extends</span> <span class=\"title\">UnpooledDataSourceFactory</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">DruidDataSourceFactory</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.dataSource = <span class=\"keyword\">new</span> DruidDataSource();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * DataSource是javax.sql包提供的接口，用来说明所有的数据源都要实现这个接口</span></span><br><span class=\"line\"><span class=\"comment\">     * DruidDataSource当然也实现了这个接口；这样，当需要更换数据库连接池时，只需要</span></span><br><span class=\"line\"><span class=\"comment\">     * 实例化不同的DataSource实现类即可</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span><span class=\"comment\">//进行重写代码：code-&gt;override 是否进行重写视连接池的类型而定</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> DataSource <span class=\"title\">getDataSource</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            ((DruidDataSource)<span class=\"keyword\">this</span>.dataSource).init();<span class=\"comment\">//初始化Druid数据源</span></span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (SQLException e) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> RuntimeException(e);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.dataSource;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"整合Freemarker\"><a href=\"#整合Freemarker\" class=\"headerlink\" title=\"整合Freemarker\"></a>整合Freemarker</h3><p>◇pom.xml增加依赖</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!--Freemarker依赖--&gt;</span><br><span class=\"line\">       &lt;dependency&gt;</span><br><span class=\"line\">           &lt;groupId&gt;org.freemarker&lt;/groupId&gt;</span><br><span class=\"line\">           &lt;artifactId&gt;freemarker&lt;/artifactId&gt;</span><br><span class=\"line\">           &lt;version&gt;<span class=\"number\">2.3</span><span class=\"number\">.29</span>&lt;/version&gt;</span><br><span class=\"line\">       &lt;/dependency&gt;</span><br><span class=\"line\">       &lt;!--servlet-api--&gt;</span><br><span class=\"line\">       &lt;dependency&gt;</span><br><span class=\"line\">           &lt;groupId&gt;javax.servlet&lt;/groupId&gt;</span><br><span class=\"line\">           &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;</span><br><span class=\"line\">           &lt;version&gt;<span class=\"number\">3.1</span><span class=\"number\">.0</span>&lt;/version&gt;</span><br><span class=\"line\">           &lt;!--依赖只参与编译测试,不进行发布--&gt;</span><br><span class=\"line\">           &lt;scope&gt;provided&lt;/scope&gt;</span><br><span class=\"line\">       &lt;/dependency&gt;</span><br></pre></td></tr></table></figure>\n<p>◇web.xml进行配置servlet</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;servlet&gt;</span><br><span class=\"line\">       &lt;!--FreemakrerServlet用于读取解析ftl文件--&gt;</span><br><span class=\"line\">       &lt;servlet-name&gt;freemakrer&lt;/servlet-name&gt;</span><br><span class=\"line\">       &lt;servlet-<span class=\"class\"><span class=\"keyword\">class</span>&gt;<span class=\"title\">freemarker</span>.<span class=\"title\">ext</span>.<span class=\"title\">servlet</span>.<span class=\"title\">FreemarkerServlet</span>&lt;/<span class=\"title\">servlet</span>-<span class=\"title\">class</span>&gt;</span></span><br><span class=\"line\"><span class=\"class\">       &lt;!-- 定义模板的存储路径 --&gt;</span></span><br><span class=\"line\"><span class=\"class\">       &lt;<span class=\"title\">init</span>-<span class=\"title\">param</span>&gt;</span></span><br><span class=\"line\"><span class=\"class\">           &lt;<span class=\"title\">param</span>-<span class=\"title\">name</span>&gt;<span class=\"title\">TemplatePath</span>&lt;/<span class=\"title\">param</span>-<span class=\"title\">name</span>&gt;</span></span><br><span class=\"line\"><span class=\"class\">           &lt;<span class=\"title\">param</span>-<span class=\"title\">value</span>&gt;/<span class=\"title\">WEB</span>-<span class=\"title\">INF</span>/<span class=\"title\">ftl</span>&lt;/<span class=\"title\">param</span>-<span class=\"title\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"class\">       &lt;/<span class=\"title\">init</span>-<span class=\"title\">param</span>&gt;</span></span><br><span class=\"line\"><span class=\"class\">       &lt;<span class=\"title\">init</span>-<span class=\"title\">param</span>&gt;</span></span><br><span class=\"line\"><span class=\"class\">           &lt;!--<span class=\"title\">default_encoding</span>用于设置读取<span class=\"title\">ftl</span>文件时采用的字符集,进而避免中文乱码的产生--&gt;</span></span><br><span class=\"line\"><span class=\"class\">           &lt;<span class=\"title\">param</span>-<span class=\"title\">name</span>&gt;<span class=\"title\">default_encoding</span>&lt;/<span class=\"title\">param</span>-<span class=\"title\">name</span>&gt;</span></span><br><span class=\"line\"><span class=\"class\">           &lt;<span class=\"title\">param</span>-<span class=\"title\">value</span>&gt;<span class=\"title\">UTF</span>-8&lt;/<span class=\"title\">param</span>-<span class=\"title\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"class\">       &lt;/<span class=\"title\">init</span>-<span class=\"title\">param</span>&gt;</span></span><br><span class=\"line\"><span class=\"class\">   &lt;/<span class=\"title\">servlet</span>&gt;</span></span><br><span class=\"line\"><span class=\"class\">   &lt;<span class=\"title\">servlet</span>-<span class=\"title\">mapping</span>&gt;</span></span><br><span class=\"line\"><span class=\"class\">       &lt;<span class=\"title\">servlet</span>-<span class=\"title\">name</span>&gt;<span class=\"title\">freemakrer</span>&lt;/<span class=\"title\">servlet</span>-<span class=\"title\">name</span>&gt;</span></span><br><span class=\"line\"><span class=\"class\">       &lt;<span class=\"title\">url</span>-<span class=\"title\">pattern</span>&gt;*.<span class=\"title\">ftl</span>&lt;/<span class=\"title\">url</span>-<span class=\"title\">pattern</span>&gt;</span></span><br><span class=\"line\"><span class=\"class\">   &lt;/<span class=\"title\">servlet</span>-<span class=\"title\">mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>◇在WEB-INF目录下创建ftl目录，然后将test.html移入并改为test.ftl (freemarker脚本)</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html lang=<span class=\"string\">&quot;en&quot;</span>&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">    &lt;meta charset=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span><br><span class=\"line\">    &lt;title&gt;LCG&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\"> &lt;h1&gt;$&#123;result&#125;&lt;/h1&gt;<span class=\"comment\">//数据库查询结果</span></span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<p>◇在com.lcg.oa.test下创建一个TestServlet</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@WebServlet(name = &quot;TestServlet&quot;,urlPatterns = &quot;/test&quot;)</span><span class=\"comment\">//映射地址</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestServlet</span> <span class=\"keyword\">extends</span> <span class=\"title\">HttpServlet</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doPost</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doGet</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">        String result = (String)MybatisUtils.executeQuery(sqlSession-&gt;sqlSession.selectOne(<span class=\"string\">&quot;test.sample&quot;</span>));</span><br><span class=\"line\">        request.setAttribute(<span class=\"string\">&quot;result&quot;</span>,request);</span><br><span class=\"line\">        <span class=\"comment\">//请求转发</span></span><br><span class=\"line\">        request.getRequestDispatcher(<span class=\"string\">&quot;test.ftl&quot;</span>).forward(request,response);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>◇在运行测试前还需进行相关设置：File-&gt;Project Structure-&gt;Artifacts-&gt;将右侧Maven资源全选右键-&gt;Put into-&gt;OK<br>◇配置日志文件logback.xml</p>\n<h2 id=\"开发基于RBAC的权限控制模块\"><a href=\"#开发基于RBAC的权限控制模块\" class=\"headerlink\" title=\"开发基于RBAC的权限控制模块\"></a>开发基于RBAC的权限控制模块</h2><h3 id=\"RBAC-基于角色的访问控制\"><a href=\"#RBAC-基于角色的访问控制\" class=\"headerlink\" title=\"RBAC-基于角色的访问控制\"></a>RBAC-基于角色的访问控制</h3><p>◇Role-Based Access Control<br>◇基于角色权限控制(RBAC)是面向企业安全策略的访问控制方式<br>◇RBAC核心思想是将控制访问的资源(功能或者特定资料等)与角色(Role)进行绑定<br>◇系统的用户(User)与角色(Role)再进行绑定,用户便拥有对应权限  </p>\n<h3 id=\"RBAC底层设计\"><a href=\"#RBAC底层设计\" class=\"headerlink\" title=\"RBAC底层设计\"></a>RBAC底层设计</h3><p><img src=\"/p/2f49/1629192797971-cd125468-ee9d-4f8a-a083-a800853972cb.png\" class=\"lazyload\" data-srcset=\"/p/2f49/1629192797971-cd125468-ee9d-4f8a-a083-a800853972cb.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"创建数据库表\"><a href=\"#创建数据库表\" class=\"headerlink\" title=\"创建数据库表\"></a>创建数据库表</h3><p>◇角色表，表名：模块名_具体表名 sys_role<br><img src=\"/p/2f49/1629203711258-089bc764-c434-4933-acbe-d85d034be818.png\" class=\"lazyload\" data-srcset=\"/p/2f49/1629203711258-089bc764-c434-4933-acbe-d85d034be818.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><img src=\"/p/2f49/1629204606757-07b14e75-04d6-47ef-8ea2-a966cdc645cc.png\" class=\"lazyload\" data-srcset=\"/p/2f49/1629204606757-07b14e75-04d6-47ef-8ea2-a966cdc645cc.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>◇资源表sys_node<br><img src=\"/p/2f49/1629204453547-3d5d55a3-5ac9-4bfa-a015-119d1bf80b41.png\" class=\"lazyload\" data-srcset=\"/p/2f49/1629204453547-3d5d55a3-5ac9-4bfa-a015-119d1bf80b41.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><img src=\"/p/2f49/1629205041804-b52055e5-70f2-462f-8286-9e16273e3edc.png\" class=\"lazyload\" data-srcset=\"/p/2f49/1629205041804-b52055e5-70f2-462f-8286-9e16273e3edc.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>◇关联表sys_role_node<br><img src=\"/p/2f49/1629205018455-8a722cb7-2f30-42a2-bc24-6e48d8ef7913.png\" class=\"lazyload\" data-srcset=\"/p/2f49/1629205018455-8a722cb7-2f30-42a2-bc24-6e48d8ef7913.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><img src=\"/p/2f49/1629205194942-4ead9aee-f85c-4198-a365-48da65f5757c.png\" class=\"lazyload\" data-srcset=\"/p/2f49/1629205194942-4ead9aee-f85c-4198-a365-48da65f5757c.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<p>◇其他表的创建(此处省略)</p>\n<h2 id=\"基于LayUI开发登录页\"><a href=\"#基于LayUI开发登录页\" class=\"headerlink\" title=\"基于LayUI开发登录页\"></a>基于LayUI开发登录页</h2><h3 id=\"LayUI前端框架\"><a href=\"#LayUI前端框架\" class=\"headerlink\" title=\"LayUI前端框架\"></a>LayUI前端框架</h3><p>◇<a href=\"https://www.layui.com/\">官方网站</a><br>◇在webapp目录下创建resources文件夹(用来存放web应用所有相关的引用资源) 将layui文件夹粘贴到其下</p>\n<h3 id=\"开发登录页面\"><a href=\"#开发登录页面\" class=\"headerlink\" title=\"开发登录页面\"></a>开发登录页面</h3><p>◇在webapp目录下新建login.html<br>◇进行项目热部署：Tomcat-&gt;Edit Configurations-&gt;On ‘Update’ action:改为Update classes and resources-&gt;ok<br>然后按shift+F9就能进行热部署了</p>\n<h3 id=\"开发后台与数据库交互\"><a href=\"#开发后台与数据库交互\" class=\"headerlink\" title=\"开发后台与数据库交互\"></a>开发后台与数据库交互</h3><p>◇创建实体类User<br>◇创建sql语句的xml文件user.xml</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">mapper</span> <span class=\"meta-keyword\">PUBLIC</span> <span class=\"meta-string\">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class=\"meta-string\">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mapper</span> <span class=\"attr\">namespace</span>=<span class=\"string\">&quot;usermapper&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;selectByUsername&quot;</span> <span class=\"attr\">parameterType</span>=<span class=\"string\">&quot;String&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;com.lcg.oa.entity.User&quot;</span>&gt;</span></span><br><span class=\"line\">        select * from sys_user where username = #&#123;value&#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>◇每次增加mapper后必须到mybatis-config中进行配置</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mapper</span> <span class=\"attr\">resource</span>=<span class=\"string\">&quot;mappers/user.xml&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>\n<p>◇创建dao完成与user表的交互</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UserDao</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 按用户名查询用户表</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> username 用户名</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> User对象包含对应的用户信息,null则代表对象不存在</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> User <span class=\"title\">selectByUsername</span><span class=\"params\">(String username)</span></span>&#123;</span><br><span class=\"line\">        User user = (User)MybatisUtils.executeQuery(sqlSession -&gt; sqlSession.selectOne(<span class=\"string\">&quot;usermapper.selectByUsername&quot;</span> , username));</span><br><span class=\"line\">        <span class=\"keyword\">return</span> user;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>◇创建Service</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UserService</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> UserDao userDao =<span class=\"keyword\">new</span> UserDao();<span class=\"comment\">//记得实例化，否则出现空指针异常</span></span><br><span class=\"line\">        <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 根据前台输入进行登录校验</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> username 前台输入的用户名</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> password 前台输入的密码</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> 校验通过后,包含对应用户数据的User实体类</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@throws</span> BussinessException L001-用户名不存在,L002-密码错误</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> User <span class=\"title\">checkLogin</span><span class=\"params\">(String username,String password)</span></span>&#123;</span><br><span class=\"line\">        User user = userDao.selectByUsername(username);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (user == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"comment\">//抛出用户不存在异常</span></span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> BussinessException(<span class=\"string\">&quot;L001&quot;</span>, <span class=\"string\">&quot;用户名不存在&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!password.equals(user.getPassword())) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> BussinessException(<span class=\"string\">&quot;L002&quot;</span>, <span class=\"string\">&quot;密码错误&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> user;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>◇自定义异常</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 业务逻辑异常，继承自运行时异常</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BussinessException</span> <span class=\"keyword\">extends</span> <span class=\"title\">RuntimeException</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String code;<span class=\"comment\">//异常编码，异常的以为标识</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String message;<span class=\"comment\">//异常的具体文本消息</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">BussinessException</span><span class=\"params\">(String code, String msg)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(code + <span class=\"string\">&quot;:&quot;</span> + msg);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.code=code;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.message=msg;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getCode</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> code;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setCode</span><span class=\"params\">(String code)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.code = code;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getMessage</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> message;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setMessage</span><span class=\"params\">(String message)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.message = message;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>◇箭头指向需要测试的类名，Ctrl+Shift+T 生成测试用例类，将需要测试的方法进行勾选<br>◇空指针异常：在出错代码处做一个断点，可以找出具体哪个对象为空，有时候出现空指针可能是对象没有实例化，在创建时new 类名()即可;</p>\n<h3 id=\"与前台联通\"><a href=\"#与前台联通\" class=\"headerlink\" title=\"与前台联通\"></a>与前台联通</h3><p>◇创建控制器controller</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@WebServlet(name = &quot;LoginServlet&quot;, urlPatterns = &quot;/check_login&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LoginServlet</span> <span class=\"keyword\">extends</span> <span class=\"title\">HttpServlet</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//日志文件 LoginServlet.class即LoginServlet类的类对象;(对象有实例对象和类对象两种)</span></span><br><span class=\"line\">    Logger logger = LoggerFactory.getLogger(LoginServlet.class);</span><br><span class=\"line\">    <span class=\"keyword\">private</span> UserService userService = <span class=\"keyword\">new</span> UserService();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doPost</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> </span></span><br><span class=\"line\"><span class=\"function\">        <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">        request.setCharacterEncoding(<span class=\"string\">&quot;utf-8&quot;</span>);</span><br><span class=\"line\">        response.setContentType(<span class=\"string\">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">//接收用户输入</span></span><br><span class=\"line\">        String username = request.getParameter(<span class=\"string\">&quot;username&quot;</span>);</span><br><span class=\"line\">        String password = request.getParameter(<span class=\"string\">&quot;password&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">//保存输出的内容</span></span><br><span class=\"line\">        Map&lt;String, Object&gt; result = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">//调用业务逻辑</span></span><br><span class=\"line\">            User user = userService.checkLogin(username, password);</span><br><span class=\"line\">            <span class=\"comment\">//返回项</span></span><br><span class=\"line\">            result.put(<span class=\"string\">&quot;code&quot;</span>, <span class=\"string\">&quot;0&quot;</span>);</span><br><span class=\"line\">            result.put(<span class=\"string\">&quot;message&quot;</span>, <span class=\"string\">&quot;success&quot;</span>);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (BussinessException e) &#123;</span><br><span class=\"line\">            logger.error(e.getMessage(), e);</span><br><span class=\"line\">            result.put(<span class=\"string\">&quot;code&quot;</span>, e.getCode());</span><br><span class=\"line\">            result.put(<span class=\"string\">&quot;message&quot;</span>, e.getMessage());</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">            logger.error(e.getMessage(), e);</span><br><span class=\"line\">            <span class=\"comment\">//由于系统自带异常没有code，用e.getClass().getSimpleName()得到的类名来充当</span></span><br><span class=\"line\">            result.put(<span class=\"string\">&quot;code&quot;</span>, e.getClass().getSimpleName());</span><br><span class=\"line\">            result.put(<span class=\"string\">&quot;message&quot;</span>, e.getMessage());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//返回对应结果</span></span><br><span class=\"line\">        String json = JSON.toJSONString(result);</span><br><span class=\"line\">        response.getWriter().println(json);<span class=\"comment\">//向客户端返回</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doGet</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> </span></span><br><span class=\"line\"><span class=\"function\">        <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>◇pom.xml加载fastjson依赖，并加入发布的项目中</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;dependency&gt;</span><br><span class=\"line\">    &lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br><span class=\"line\">    &lt;artifactId&gt;fastjson&lt;/artifactId&gt;</span><br><span class=\"line\">    &lt;version&gt;<span class=\"number\">1.2</span><span class=\"number\">.62</span>&lt;/version&gt;</span><br><span class=\"line\">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>\n<p>◇修改login.html文件增加提交数据功能<br><img src=\"/p/2f49/1629385897890-60923e74-375b-4921-b681-576d7d53d36c.png\" class=\"lazyload\" data-srcset=\"/p/2f49/1629385897890-60923e74-375b-4921-b681-576d7d53d36c.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;oa-container&quot;</span>&gt;</span><br><span class=\"line\">    &lt;h1 style=<span class=\"string\">&quot;text-align: center;margin-bottom: 20px&quot;</span>&gt;交通控股办公OA系统&lt;/h1&gt;</span><br><span class=\"line\">    &lt;form <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;layui-form&quot;</span>&gt;</span><br><span class=\"line\">        &lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;layui-form-item&quot;</span>&gt;</span><br><span class=\"line\">            &lt;input type=<span class=\"string\">&quot;text&quot;</span> id=<span class=\"string\">&quot;username&quot;</span> lay-verify=<span class=\"string\">&quot;required&quot;</span> name=<span class=\"string\">&quot;username&quot;</span> placeholder=<span class=\"string\">&quot;请输入用户名&quot;</span> autocomplete=<span class=\"string\">&quot;off&quot;</span> <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;layui-input&quot;</span> &gt;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">        &lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;layui-form-item&quot;</span>&gt;</span><br><span class=\"line\">            &lt;input type=<span class=\"string\">&quot;password&quot;</span> id=<span class=\"string\">&quot;password&quot;</span> lay-verify=<span class=\"string\">&quot;required&quot;</span> name=<span class=\"string\">&quot;password&quot;</span> placeholder=<span class=\"string\">&quot;请输入密码&quot;</span> autocomplete=<span class=\"string\">&quot;off&quot;</span> <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;layui-input&quot;</span> &gt;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">        &lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;layui-form-item&quot;</span>&gt;</span><br><span class=\"line\">            &lt;!--lay-filter即layui专属的id，autocomple表示是否显示历史输入--&gt;</span><br><span class=\"line\">            &lt;button <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;layui-btn layui-btn-fluid&quot;</span> lay-submit lay-filter=<span class=\"string\">&quot;login&quot;</span>&gt;登录&lt;/button&gt;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">    &lt;/form&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">&lt;script src=<span class=\"string\">&quot;/resources/layui/layui.all.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    <span class=\"comment\">// 表单提交事件</span></span><br><span class=\"line\">    <span class=\"comment\">/*on代表捕捉事件，里面参数为submit即提交事件，login表示绑定哪个提交按钮才会触发这段代码*/</span></span><br><span class=\"line\">    layui.form.on(<span class=\"string\">&quot;submit(login)&quot;</span> , function(formdata)&#123;<span class=\"comment\">//data参数包含了当前表单的数据</span></span><br><span class=\"line\">        console.log(formdata);</span><br><span class=\"line\">        <span class=\"comment\">//发送ajax请求进行登录校验</span></span><br><span class=\"line\">        layui.$.ajax(&#123;</span><br><span class=\"line\">            url : <span class=\"string\">&quot;/check_login&quot;</span>,</span><br><span class=\"line\">            data : formdata.field, <span class=\"comment\">//提交表单数据</span></span><br><span class=\"line\">            type : <span class=\"string\">&quot;post&quot;</span>,</span><br><span class=\"line\">            dataType : <span class=\"string\">&quot;json&quot;</span> ,</span><br><span class=\"line\">            success : function(json)&#123;</span><br><span class=\"line\">                console.log(json);</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(json.code == <span class=\"string\">&quot;0&quot;</span>)&#123; <span class=\"comment\">//登录校验成功</span></span><br><span class=\"line\">                    layui.layer.msg(<span class=\"string\">&quot;登录成功&quot;</span>);</span><br><span class=\"line\">                &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                    layui.layer.msg(json.message);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;<span class=\"comment\">//submit提交事件返回true则表单提交,false则阻止表单提交</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\">    </span><br></pre></td></tr></table></figure>\n<h3 id=\"开发功能首页\"><a href=\"#开发功能首页\" class=\"headerlink\" title=\"开发功能首页\"></a>开发功能首页</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html lang=<span class=\"string\">&quot;en&quot;</span>&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">    &lt;meta charset=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span><br><span class=\"line\">    &lt;title&gt;交通控股OA系统&lt;/title&gt;</span><br><span class=\"line\">    &lt;meta name=<span class=\"string\">&quot;viewport&quot;</span> content=<span class=\"string\">&quot;width=device-width, initial-scale=1, maximum-scale=1&quot;</span>&gt;</span><br><span class=\"line\">    &lt;link rel=<span class=\"string\">&quot;stylesheet&quot;</span> href=<span class=\"string\">&quot;/resources/layui/css/layui.css&quot;</span>&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;body <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;layui-layout-body&quot;</span>&gt;</span><br><span class=\"line\">&lt;!-- Layui后台布局CSS --&gt;</span><br><span class=\"line\">&lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;layui-layout layui-layout-admin&quot;</span>&gt;</span><br><span class=\"line\">    &lt;!--头部导航栏--&gt;</span><br><span class=\"line\">    &lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;layui-header&quot;</span>&gt;</span><br><span class=\"line\">        &lt;!--系统标题--&gt;</span><br><span class=\"line\">        &lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;layui-logo&quot;</span> style=<span class=\"string\">&quot;font-size:18px&quot;</span>&gt;交通控股OA系统&lt;/div&gt;</span><br><span class=\"line\">        &lt;!--右侧当前用户信息--&gt;</span><br><span class=\"line\">        &lt;ul <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;layui-nav layui-layout-right&quot;</span>&gt;</span><br><span class=\"line\">            &lt;li <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;layui-nav-item&quot;</span>&gt;</span><br><span class=\"line\">                &lt;a href=<span class=\"string\">&quot;javascript:void(0)&quot;</span>&gt;</span><br><span class=\"line\">                    &lt;!--图标--&gt;</span><br><span class=\"line\">                    &lt;span <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;layui-icon layui-icon-user&quot;</span> style=<span class=\"string\">&quot;font-size: 20px&quot;</span>&gt;</span><br><span class=\"line\">                    &lt;/span&gt;</span><br><span class=\"line\">                    &lt;!--用户信息--&gt;</span><br><span class=\"line\">                    姓名[部门-职务]</span><br><span class=\"line\">                &lt;/a&gt;</span><br><span class=\"line\">            &lt;/li&gt;</span><br><span class=\"line\">            &lt;!--注销按钮--&gt;</span><br><span class=\"line\">            &lt;li <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;layui-nav-item&quot;</span>&gt;&lt;a href=<span class=\"string\">&quot;#&quot;</span>&gt;注销&lt;/a&gt;&lt;/li&gt;</span><br><span class=\"line\">        &lt;/ul&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">    &lt;!--左侧菜单栏--&gt;</span><br><span class=\"line\">    &lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;layui-side layui-bg-black&quot;</span>&gt;</span><br><span class=\"line\">        &lt;!--可滚动菜单--&gt;</span><br><span class=\"line\">        &lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;layui-side-scroll&quot;</span>&gt;</span><br><span class=\"line\">            &lt;!--可折叠导航栏--&gt;</span><br><span class=\"line\">            &lt;ul <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;layui-nav layui-nav-tree&quot;</span>&gt;</span><br><span class=\"line\">                &lt;!--父节点--&gt;</span><br><span class=\"line\">                &lt;li <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;layui-nav-item layui-nav-itemed&quot;</span>&gt;</span><br><span class=\"line\">                    &lt;a href=<span class=\"string\">&quot;javascript:void(0)&quot;</span>&gt;模块<span class=\"number\">1</span>&lt;/a&gt;</span><br><span class=\"line\">                    &lt;dl <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;layui-nav-child module&quot;</span> data-node-id=<span class=\"string\">&quot;1&quot;</span>&gt;&lt;/dl&gt;</span><br><span class=\"line\">                &lt;/li&gt;</span><br><span class=\"line\">                &lt;!--子节点--&gt;</span><br><span class=\"line\">                &lt;dd <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;function&quot;</span> data-parent-id=<span class=\"string\">&quot;1&quot;</span>&gt;</span><br><span class=\"line\">                    &lt;a href=<span class=\"string\">&quot;javascript:void(0)&quot;</span> target=<span class=\"string\">&quot;ifmMain&quot;</span>&gt;功能<span class=\"number\">1</span>&lt;/a&gt;</span><br><span class=\"line\">                &lt;/dd&gt;</span><br><span class=\"line\">                &lt;dd <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;function&quot;</span> data-parent-id=<span class=\"string\">&quot;1&quot;</span>&gt;</span><br><span class=\"line\">                    &lt;a href=<span class=\"string\">&quot;javascript:void(0)&quot;</span> target=<span class=\"string\">&quot;ifmMain&quot;</span>&gt;功能<span class=\"number\">2</span>&lt;/a&gt;</span><br><span class=\"line\">                &lt;/dd&gt;</span><br><span class=\"line\">                &lt;dd <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;function&quot;</span> data-parent-id=<span class=\"string\">&quot;1&quot;</span>&gt;</span><br><span class=\"line\">                    &lt;a href=<span class=\"string\">&quot;javascript:void(0)&quot;</span> target=<span class=\"string\">&quot;ifmMain&quot;</span>&gt;功能<span class=\"number\">3</span>&lt;/a&gt;</span><br><span class=\"line\">                &lt;/dd&gt;</span><br><span class=\"line\">                &lt;li <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;layui-nav-item layui-nav-itemed&quot;</span>&gt;</span><br><span class=\"line\">                    &lt;a href=<span class=\"string\">&quot;javascript:void(0)&quot;</span>&gt;模块<span class=\"number\">2</span>&lt;/a&gt;</span><br><span class=\"line\">                    &lt;dl <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;layui-nav-child module&quot;</span> data-node-id=<span class=\"string\">&quot;2&quot;</span>&gt;&lt;/dl&gt;</span><br><span class=\"line\">                &lt;/li&gt;</span><br><span class=\"line\">                &lt;dd <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;function&quot;</span> data-parent-id=<span class=\"string\">&quot;2&quot;</span>&gt;</span><br><span class=\"line\">                    &lt;a href=<span class=\"string\">&quot;javascript:void(0)&quot;</span> target=<span class=\"string\">&quot;ifmMain&quot;</span>&gt;功能<span class=\"number\">3</span>&lt;/a&gt;</span><br><span class=\"line\">                &lt;/dd&gt;</span><br><span class=\"line\">                &lt;dd <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;function&quot;</span> data-parent-id=<span class=\"string\">&quot;2&quot;</span>&gt;</span><br><span class=\"line\">                    &lt;a href=<span class=\"string\">&quot;javascript:void(0)&quot;</span> target=<span class=\"string\">&quot;ifmMain&quot;</span>&gt;功能<span class=\"number\">4</span>&lt;/a&gt;</span><br><span class=\"line\">                &lt;/dd&gt;</span><br><span class=\"line\">                &lt;dd <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;function&quot;</span> data-parent-id=<span class=\"string\">&quot;2&quot;</span>&gt;</span><br><span class=\"line\">                    &lt;a href=<span class=\"string\">&quot;javascript:void(0)&quot;</span> target=<span class=\"string\">&quot;ifmMain&quot;</span>&gt;功能<span class=\"number\">5</span>&lt;/a&gt;</span><br><span class=\"line\">                &lt;/dd&gt;</span><br><span class=\"line\">            &lt;/ul&gt;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">    &lt;!--主体部分采用iframe嵌入其他页面--&gt;</span><br><span class=\"line\">    &lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;layui-body&quot;</span> style=<span class=\"string\">&quot;overflow-y: hidden&quot;</span>&gt;</span><br><span class=\"line\">        &lt;iframe name=<span class=\"string\">&quot;ifmMain&quot;</span> style=<span class=\"string\">&quot;border: 0px;width: 100%;height: 100%&quot;</span>&gt;&lt;/iframe&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">    &lt;!--版权信息--&gt;</span><br><span class=\"line\">    &lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;layui-footer&quot;</span>&gt;</span><br><span class=\"line\">        Copyright © gamest. All Rights Reserved.</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">&lt;!--LayUI JS文件--&gt;</span><br><span class=\"line\">&lt;script src=<span class=\"string\">&quot;/resources/layui/layui.all.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    <span class=\"comment\">//将所有功能根据parent_id移动到指定模块下</span></span><br><span class=\"line\">    layui.$(<span class=\"string\">&quot;.function&quot;</span>).each(function () &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> func = layui.$(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">        <span class=\"keyword\">var</span> parentId = func.data(<span class=\"string\">&quot;parent-id&quot;</span>);</span><br><span class=\"line\">        layui.$(<span class=\"string\">&quot;dl[data-node-id=&quot;</span> + parentId + <span class=\"string\">&quot;]&quot;</span>).append(func);</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"comment\">//刷新折叠菜单</span></span><br><span class=\"line\">    layui.element.render(<span class=\"string\">&#x27;nav&#x27;</span>);</span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n","categories":["Java数据库","OA系统项目"],"tags":["MyBaits"]},{"title":"项目完整实现","url":"/p/d371.html","content":"<h2 id=\"动态显示功能菜单\"><a href=\"#动态显示功能菜单\" class=\"headerlink\" title=\"动态显示功能菜单\"></a>动态显示功能菜单</h2><h3 id=\"第一部分：实现底层\"><a href=\"#第一部分：实现底层\" class=\"headerlink\" title=\"第一部分：实现底层\"></a>第一部分：实现底层</h3><p>◇sql语句</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 如何获取编号为 1的用户拥有哪些功能？</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">DISTINCT</span> n.<span class=\"operator\">*</span> </span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">\tsys_role_user ru,</span><br><span class=\"line\">\tsys_role_node rn,</span><br><span class=\"line\">\tsys_node n </span><br><span class=\"line\"><span class=\"keyword\">WHERE</span></span><br><span class=\"line\">\tru.role_id <span class=\"operator\">=</span> rn.role_id </span><br><span class=\"line\">\t<span class=\"keyword\">AND</span> rn.node_id <span class=\"operator\">=</span> n.node_id </span><br><span class=\"line\">\t<span class=\"keyword\">AND</span> user_id <span class=\"operator\">=</span> <span class=\"number\">1</span> </span><br><span class=\"line\"><span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span></span><br><span class=\"line\">\tn.node_code</span><br></pre></td></tr></table></figure>\n<p>◇创建与数据库对应的Node节点类</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">public class Node &#123;</span><br><span class=\"line\">    private Long nodeId;</span><br><span class=\"line\">    private <span class=\"type\">Integer</span> nodeType;</span><br><span class=\"line\">    private String nodeName;</span><br><span class=\"line\">    private String url;</span><br><span class=\"line\">    private <span class=\"type\">Integer</span> nodeCode;</span><br><span class=\"line\">    private Long parentId;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<p>◇创建rbac.xml</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"operator\">&lt;</span>mapper namespace<span class=\"operator\">=</span>&quot;rbacmapper&quot;<span class=\"operator\">&gt;</span></span><br><span class=\"line\">    <span class=\"operator\">&lt;</span><span class=\"operator\">!</span><span class=\"comment\">--获取用户编号对应的功能列表--&gt;</span></span><br><span class=\"line\">    <span class=\"operator\">&lt;</span><span class=\"keyword\">select</span> id<span class=\"operator\">=</span>&quot;selectNodeByUserId&quot; parameterType<span class=\"operator\">=</span>&quot;Long&quot; resultType<span class=\"operator\">=</span>&quot;com.lcg.oa.entity.Node&quot;<span class=\"operator\">&gt;</span></span><br><span class=\"line\">        <span class=\"keyword\">select</span> <span class=\"keyword\">distinct</span> n.<span class=\"operator\">*</span></span><br><span class=\"line\">        <span class=\"keyword\">from</span></span><br><span class=\"line\">        sys_role_user ru , sys_role_node rn , sys_node n</span><br><span class=\"line\">        <span class=\"keyword\">where</span></span><br><span class=\"line\">        ru.role_id <span class=\"operator\">=</span> rn.role_id <span class=\"keyword\">and</span> user_id <span class=\"operator\">=</span> #&#123;<span class=\"keyword\">value</span>&#125; <span class=\"keyword\">and</span> rn.node_id <span class=\"operator\">=</span> n.node_id</span><br><span class=\"line\">        <span class=\"keyword\">order</span> <span class=\"keyword\">by</span> n.node_code</span><br><span class=\"line\">    <span class=\"operator\">&lt;</span><span class=\"operator\">/</span><span class=\"keyword\">select</span><span class=\"operator\">&gt;</span></span><br><span class=\"line\"><span class=\"operator\">&lt;</span><span class=\"operator\">/</span>mapper<span class=\"operator\">&gt;</span></span><br></pre></td></tr></table></figure>\n<p>◇创建dao对sql语句进行调用</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">public class RbacDao &#123;</span><br><span class=\"line\">    public List<span class=\"operator\">&lt;</span>Node<span class=\"operator\">&gt;</span> selectNodeByUserId(Long userId) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (List)MybatisUtils.executeQuery(</span><br><span class=\"line\">                sqlSession <span class=\"operator\">-</span><span class=\"operator\">&gt;</span> sqlSession.selectList(</span><br><span class=\"line\">                        &quot;rbacmapper.selectNodeByUserId&quot;, userId));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>◇在UserService中进行dao的调用</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">private RbacDao rbacDao <span class=\"operator\">=</span> <span class=\"keyword\">new</span> RbacDao();</span><br><span class=\"line\">public List<span class=\"operator\">&lt;</span>Node<span class=\"operator\">&gt;</span> selectNodeByUserId(Long userId) &#123;</span><br><span class=\"line\">        List<span class=\"operator\">&lt;</span>Node<span class=\"operator\">&gt;</span> nodeList <span class=\"operator\">=</span> rbacDao.selectNodeByUserId(userId);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> nodeList;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<p>◇进行测试</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">@Test</span></span><br><span class=\"line\">   public void selectNodeByUserId()&#123;</span><br><span class=\"line\">       List<span class=\"operator\">&lt;</span>Node<span class=\"operator\">&gt;</span> nodeList <span class=\"operator\">=</span> userService.selectNodeByUserId(<span class=\"number\">2</span>l);<span class=\"operator\">/</span><span class=\"operator\">/</span>l表示长整型</span><br><span class=\"line\">       System.out.println(nodeList);</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"第二部分：实现跳转\"><a href=\"#第二部分：实现跳转\" class=\"headerlink\" title=\"第二部分：实现跳转\"></a>第二部分：实现跳转</h3><p>◇更改LonginServlet增加返回项</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\">result.put(&quot;redirect_url&quot;, &quot;/index&quot;);</span><br></pre></td></tr></table></figure>\n<p>◇更改login.html用于接收新加的返回项</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"operator\">/</span><span class=\"operator\">/</span>跳转url</span><br><span class=\"line\">window.location.href<span class=\"operator\">=</span>json.redirect_url;</span><br></pre></td></tr></table></figure>\n<p>◇创建IndexServlet,并将index.html改为index.ftl</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">@WebServlet</span>(name <span class=\"operator\">=</span> &quot;IndexServlet&quot;, urlPatterns <span class=\"operator\">=</span> &quot;/index&quot;)</span><br><span class=\"line\">public class IndexServlet extends HttpServlet &#123;</span><br><span class=\"line\">    private UserService userService <span class=\"operator\">=</span> <span class=\"keyword\">new</span> UserService();</span><br><span class=\"line\">    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class=\"line\">        HttpSession session <span class=\"operator\">=</span> request.getSession();</span><br><span class=\"line\">        <span class=\"keyword\">User</span> <span class=\"keyword\">user</span> <span class=\"operator\">=</span> (<span class=\"keyword\">User</span>)session.getAttribute(&quot;login_user&quot;);</span><br><span class=\"line\">        List<span class=\"operator\">&lt;</span>Node<span class=\"operator\">&gt;</span> nodeList <span class=\"operator\">=</span> userService.selectNodeByUserId(user.getUserId());</span><br><span class=\"line\">        request.setAttribute(&quot;node_list&quot;,nodeList);</span><br><span class=\"line\">        request.getRequestDispatcher(&quot;/index.ftl&quot;).forward(request,response);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>◇如何把在登录页面login的用户登录信息保存，并用于后面的功能区分？方法是使用范围更广的session对象<br>即在LonginServlet中进行如下更改：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"operator\">/</span><span class=\"operator\">/</span>调用业务逻辑</span><br><span class=\"line\"><span class=\"keyword\">User</span> <span class=\"keyword\">user</span> <span class=\"operator\">=</span> userService.checkLogin(username, password);</span><br><span class=\"line\">HttpSession session <span class=\"operator\">=</span> request.getSession();</span><br><span class=\"line\"><span class=\"operator\">/</span><span class=\"operator\">/</span>向session存入登录用户信息,属性名:login_user</span><br><span class=\"line\">session.setAttribute(&quot;login_user&quot; , <span class=\"keyword\">user</span>);</span><br></pre></td></tr></table></figure>\n<p>◇修改index.ftl实现动态显示功能</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--可折叠导航栏--&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">ul</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-nav layui-nav-tree&quot;</span>&gt;</span></span><br><span class=\"line\">               &lt;#list node_list as node&gt;</span><br><span class=\"line\">                   &lt;#if node.nodeType == 1&gt;</span><br><span class=\"line\">                       <span class=\"comment\">&lt;!--父节点 模块 自定义属性：data-node-id--&gt;</span></span><br><span class=\"line\">                       <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-nav-item layui-nav-itemed&quot;</span>&gt;</span></span><br><span class=\"line\">                           <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;javascript:void(0)&quot;</span>&gt;</span>$&#123;node.nodeName&#125;<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">                           <span class=\"tag\">&lt;<span class=\"name\">dl</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-nav-child module&quot;</span> <span class=\"attr\">data-node-id</span>=<span class=\"string\">&quot;$&#123;node.nodeId&#125;&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">dl</span>&gt;</span></span><br><span class=\"line\">                       <span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">                   &lt;/#if&gt;</span><br><span class=\"line\">                   &lt;#if node.nodeType == 2&gt;</span><br><span class=\"line\">                       <span class=\"comment\">&lt;!--子节点 功能 自定义属性：data-parent-id--&gt;</span></span><br><span class=\"line\">                       <span class=\"tag\">&lt;<span class=\"name\">dd</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;function&quot;</span> <span class=\"attr\">data-parent-id</span>=<span class=\"string\">&quot;$&#123;node.parentId&#125;&quot;</span>&gt;</span></span><br><span class=\"line\">                           <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;javascript:void(0)&quot;</span> <span class=\"attr\">target</span>=<span class=\"string\">&quot;ifmMain&quot;</span>&gt;</span>$&#123;node.nodeName&#125;<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">                       <span class=\"tag\">&lt;/<span class=\"name\">dd</span>&gt;</span></span><br><span class=\"line\">                   &lt;/#if&gt;</span><br><span class=\"line\">               &lt;/#list&gt;</span><br><span class=\"line\">           <span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"Xml配置下实现Mapper接口\"><a href=\"#Xml配置下实现Mapper接口\" class=\"headerlink\" title=\"Xml配置下实现Mapper接口\"></a>Xml配置下实现Mapper接口</h2><p>◇创建员工实体类</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\">public class Employee &#123;</span><br><span class=\"line\">    private Long employeeId;</span><br><span class=\"line\">    private String name;</span><br><span class=\"line\">    private Long departmentId;</span><br><span class=\"line\">    private String title;</span><br><span class=\"line\">    private Integer level;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>◇创建dao接口</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">EmployeeDao</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Employee <span class=\"title\">selectById</span><span class=\"params\">(Long employeeId)</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>◇创建mapper与接口对应</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\">    <span class=\"comment\">&lt;!--namespace与包名要一致--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mapper</span> <span class=\"attr\">namespace</span>=<span class=\"string\">&quot;com.lcg.oa.dao.EmployeeDao&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--id与方法名对应 parameterType与方法参数类型一致</span></span><br><span class=\"line\"><span class=\"comment\">     resultType与方法返回类型一致--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;selectById&quot;</span> <span class=\"attr\">parameterType</span>=<span class=\"string\">&quot;Long&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;com.lcg.oa.entity.Employee&quot;</span>&gt;</span></span><br><span class=\"line\">        select * from adm_employee where employee_id = #&#123;value&#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>◇创建员工service (<a href=\"https://blog.csdn.net/lbllol365\">getMapper的原理</a>)</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">EmployeeService</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 按编号查找员工</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> employeeId 员工编号</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> 员工对象，不存在时返回null</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Employee <span class=\"title\">selectById</span><span class=\"params\">(Long employeeId)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (Employee) MybatisUtils.executeQuery(sqlSession-&gt;&#123;</span><br><span class=\"line\">            <span class=\"comment\">//匹配相关的Mapper,sql语句原理可网上搜getMapper</span></span><br><span class=\"line\">            <span class=\"comment\">//这里传入一个类对象后,就会得到一个可用的Dao接口</span></span><br><span class=\"line\">            EmployeeDao employeeDao = sqlSession.getMapper(EmployeeDao.class);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> employeeDao.selectById(employeeId);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>◇修改indexservlet</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@WebServlet(name = &quot;IndexServlet&quot;, urlPatterns = &quot;/index&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">IndexServlet</span> <span class=\"keyword\">extends</span> <span class=\"title\">HttpServlet</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> UserService userService = <span class=\"keyword\">new</span> UserService();</span><br><span class=\"line\">    <span class=\"keyword\">private</span> EmployeeService employeeService = <span class=\"keyword\">new</span> EmployeeService();</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doPost</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doGet</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">        HttpSession session = request.getSession();</span><br><span class=\"line\">        <span class=\"comment\">//得到当前登录用户对象</span></span><br><span class=\"line\">        User user = (User)session.getAttribute(<span class=\"string\">&quot;login_user&quot;</span>);</span><br><span class=\"line\">        Employee employee = employeeService.selectById(user.getEmployeeId());</span><br><span class=\"line\">        <span class=\"comment\">//获取登录用户可用功能模块列表</span></span><br><span class=\"line\">        List&lt;Node&gt; nodeList = userService.selectNodeByUserId(user.getUserId());</span><br><span class=\"line\">        <span class=\"comment\">//放入请求属性</span></span><br><span class=\"line\">        request.setAttribute(<span class=\"string\">&quot;node_list&quot;</span>,nodeList);</span><br><span class=\"line\">        <span class=\"comment\">//放入session，范围更大,生命周期更长</span></span><br><span class=\"line\">        session.setAttribute(<span class=\"string\">&quot;current_employee&quot;</span>,employee);</span><br><span class=\"line\">        <span class=\"comment\">//请求发至ftl进行展现</span></span><br><span class=\"line\">        request.getRequestDispatcher(<span class=\"string\">&quot;/index.ftl&quot;</span>).forward(request,response);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>◇修改首页</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--用户信息--&gt;</span></span><br><span class=\"line\">$&#123;current_employee.name&#125;[部门-$&#123;current_employee.title&#125;]</span><br></pre></td></tr></table></figure>\n<p>◇要想获取到部门，由于涉及到另外一张表，则按上面流程开发即可</p>\n<h2 id=\"基于MD5算法对密码进行加密\"><a href=\"#基于MD5算法对密码进行加密\" class=\"headerlink\" title=\"基于MD5算法对密码进行加密\"></a>基于MD5算法对密码进行加密</h2><h3 id=\"MD5摘要算法\"><a href=\"#MD5摘要算法\" class=\"headerlink\" title=\"MD5摘要算法\"></a>MD5摘要算法</h3><p>◇MD5信息摘要算法广泛使用的密码散列函数<br>◇MD5可以产生出一个128位的散列值用于唯一标识源数据<br>◇项目中通常使用MD5作为敏感数据的加密算法</p>\n<h3 id=\"MD5特点\"><a href=\"#MD5特点\" class=\"headerlink\" title=\"MD5特点\"></a>MD5特点</h3><p>◇压缩性,MD5生成的摘要长度固定<br>◇抗修改,源数据哪怕有一个字节变化,MD5也会有巨大差异<br>◇不可逆,无法通过MD5反向推算源数据  </p>\n<h3 id=\"Apache-Commons-Codec\"><a href=\"#Apache-Commons-Codec\" class=\"headerlink\" title=\"Apache Commons Codec\"></a>Apache Commons Codec</h3><p>◇Commons-Codec是Apache提供的编码/解码组件<br>◇通过Commons-Codec可轻易生成源数据的MD5摘要<br>◇MD5摘要方法: String md5 = DigestUtils.md5Hex(源数据)<br>◇增加依赖并放入发布的工程中</p>\n<h3 id=\"使用方法\"><a href=\"#使用方法\" class=\"headerlink\" title=\"使用方法\"></a>使用方法</h3><p>◇增加依赖并放入发布的工程中</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>commons-codec<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>commons-codec<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.14<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>◇新增工具类</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\">public class MD5Utils &#123;</span><br><span class=\"line\">    public static String md5Digest(String source) &#123;</span><br><span class=\"line\">        return DigestUtils.md5Hex(source);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>◇进行测试</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\">@Test</span><br><span class=\"line\">public void md5Digest() &#123;</span><br><span class=\"line\">    System.out.println(MD5Utils.md5Digest(&quot;test&quot;));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"敏感数据”加盐”混淆\"><a href=\"#敏感数据”加盐”混淆\" class=\"headerlink\" title=\"敏感数据”加盐”混淆\"></a>敏感数据”加盐”混淆</h3><p>◇防止MD5被通过穷举法解密<br>◇加盐方法</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\">/**</span><br><span class=\"line\"> * 对源数据加盐混淆后生成MD5摘要</span><br><span class=\"line\"> * @param source 源数据</span><br><span class=\"line\"> * @param salt 盐值</span><br><span class=\"line\"> * @return MD5摘要</span><br><span class=\"line\"> */</span><br><span class=\"line\">public static String md5Digest(String source, Integer salt) &#123;</span><br><span class=\"line\">    char[] ca = source.toCharArray();//字符数组</span><br><span class=\"line\">    for (int i = 0; i &lt; ca.length; i++) &#123;</span><br><span class=\"line\">        ca[i] = (char)(ca[i] + salt);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    String target = new String(ca);</span><br><span class=\"line\">    String md5 = DigestUtils.md5Hex(target);</span><br><span class=\"line\">    return md5;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>◇修改数据库sys_user表，添加salt字段,并将密码替换为加密后的MD5<br>◇修改UserServlet</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\">//对前台输入的密码加盐混淆后生成MD5，与保存在数据库中的MD5密码进行比对</span><br><span class=\"line\">        String md5 = MD5Utils.md5Digest(password, user.getSalt());</span><br><span class=\"line\">        if (!md5.equals(user.getPassword())) &#123;</span><br><span class=\"line\">            throw new BussinessException(&quot;L002&quot;, &quot;密码错误&quot;);</span><br><span class=\"line\">        &#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"实现注销功能\"><a href=\"#实现注销功能\" class=\"headerlink\" title=\"实现注销功能\"></a>实现注销功能</h2><p>◇即将保存在session中的用户登录信息清空<br>◇创建servlet</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\">@WebServlet(name = &quot;LogoutServlet&quot;,urlPatterns = &quot;/logout&quot;)</span><br><span class=\"line\">public class LogoutServlet extends HttpServlet &#123;</span><br><span class=\"line\">    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class=\"line\">        request.getSession().invalidate();//将当前会话清空</span><br><span class=\"line\">        response.sendRedirect(&quot;/login.html&quot;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>◇修改index.ftl的注销按钮</p>\n<figure class=\"highlight html\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--注销按钮--&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;layui-nav-item&quot;</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;/logout&quot;</span>&gt;</span>注销<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"开发多级审批流程\"><a href=\"#开发多级审批流程\" class=\"headerlink\" title=\"开发多级审批流程\"></a>开发多级审批流程</h2><h3 id=\"请假流程\"><a href=\"#请假流程\" class=\"headerlink\" title=\"请假流程\"></a>请假流程</h3><p><img src=\"/p/d371/1629534603151-e5acea37-c1d7-4d81-a00c-44dc5aed535d.png\" class=\"lazyload\" data-srcset=\"/p/d371/1629534603151-e5acea37-c1d7-4d81-a00c-44dc5aed535d.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"工作流程表设计\"><a href=\"#工作流程表设计\" class=\"headerlink\" title=\"工作流程表设计\"></a>工作流程表设计</h3><p><img src=\"/p/d371/1629534801614-f5435e56-73a6-4b7b-96d5-cf14aa718c9a.png\" class=\"lazyload\" data-srcset=\"/p/d371/1629534801614-f5435e56-73a6-4b7b-96d5-cf14aa718c9a.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h3 id=\"设计约束\"><a href=\"#设计约束\" class=\"headerlink\" title=\"设计约束\"></a>设计约束</h3><p>◇每一个请假单对应一个审批流程<br>◇请假单创建后,按业务规则生成部门经理、总经理审批任务<br>◇审批任务的经办人只能审批自己辖区内的请假申请<br>◇所有审批任务”通过”,代表请假已经批准<br>◇任意审批任务”驳回”操作,其余审批任务取消,请假申请被驳回<br>◇请假流程中任意节点产生的操作都要生成对应的系统通知  </p>\n<h3 id=\"新建数据库表\"><a href=\"#新建数据库表\" class=\"headerlink\" title=\"新建数据库表\"></a>新建数据库表</h3><p>◇请假单表<br><img src=\"/p/d371/1629535785248-df741014-3be2-491a-a49e-5cae76b65c01.png\" class=\"lazyload\" data-srcset=\"/p/d371/1629535785248-df741014-3be2-491a-a49e-5cae76b65c01.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>◇处理流程表<br><img src=\"/p/d371/1629536465016-6c9047ef-981f-45f7-9667-771b7d355182.png\" class=\"lazyload\" data-srcset=\"/p/d371/1629536465016-6c9047ef-981f-45f7-9667-771b7d355182.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>◇通知表<br><img src=\"/p/d371/1629549863768-811195fc-df94-4f7d-93a1-b1321685b5cb.png\" class=\"lazyload\" data-srcset=\"/p/d371/1629549863768-811195fc-df94-4f7d-93a1-b1321685b5cb.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"></p>\n<h2 id=\"实现Dao与数据交互\"><a href=\"#实现Dao与数据交互\" class=\"headerlink\" title=\"实现Dao与数据交互\"></a>实现Dao与数据交互</h2><h3 id=\"创建表的实体类\"><a href=\"#创建表的实体类\" class=\"headerlink\" title=\"创建表的实体类\"></a>创建表的实体类</h3><p>◇LeaveForm.class<br>◇ProcessFlow.class<br>◇Notice.class</p>\n<h3 id=\"创建Dao接口\"><a href=\"#创建Dao接口\" class=\"headerlink\" title=\"创建Dao接口\"></a>创建Dao接口</h3><p>◇LeaveFormDao</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">LeaveFormDao</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">insert</span><span class=\"params\">(LeaveForm form)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> List&lt;Map&gt; <span class=\"title\">selectByParams</span><span class=\"params\">(<span class=\"meta\">@Param(&quot;pf_state&quot;)</span> String pfState, <span class=\"meta\">@Param(&quot;pf_operator_id&quot;)</span> Long operatorId)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> LeaveForm <span class=\"title\">selectById</span><span class=\"params\">(Long formId)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">update</span><span class=\"params\">(LeaveForm form)</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>◇ProcessFlowDao</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">ProcessFlowDao</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">insert</span><span class=\"params\">(ProcessFlow processFlow)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">update</span><span class=\"params\">(ProcessFlow processFlow)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> List&lt;ProcessFlow&gt; <span class=\"title\">selectByFormId</span><span class=\"params\">(Long formId)</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>◇NoticeDao</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">NoticeDao</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">insert</span><span class=\"params\">(Notice notice)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> List&lt;Notice&gt; <span class=\"title\">selectByReceiverId</span><span class=\"params\">(Long receiverId)</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"创建对应的mapper\"><a href=\"#创建对应的mapper\" class=\"headerlink\" title=\"创建对应的mapper\"></a>创建对应的mapper</h3><p>◇leave_form.xml</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mapper</span> <span class=\"attr\">namespace</span>=<span class=\"string\">&quot;com.lcg.oa.dao.LeaveFormDao&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!--useGeneratedKeys是否使用自增主键；keyProperty实体中的主键；keyColumn数据库表中的主键--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">insert</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;insert&quot;</span> <span class=\"attr\">parameterType</span>=<span class=\"string\">&quot;com.lcg.oa.entity.LeaveForm&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">useGeneratedKeys</span>=<span class=\"string\">&quot;true&quot;</span> <span class=\"attr\">keyProperty</span>=<span class=\"string\">&quot;formId&quot;</span> <span class=\"attr\">keyColumn</span>=<span class=\"string\">&quot;from_id&quot;</span>&gt;</span></span><br><span class=\"line\">        INSERT INTO adm_leave_form( employee_id, form_type, start_time, end_time, reason, create_time, state)</span><br><span class=\"line\">        VALUES ( #&#123;employeeId&#125;, #&#123;formType&#125;, #&#123;startTime&#125;, #&#123;endTime&#125;, #&#123;reason&#125;, #&#123;createTime&#125;, #&#123;state&#125;)</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">insert</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>◇process_flow.xml</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mapper</span> <span class=\"attr\">namespace</span>=<span class=\"string\">&quot;com.lcg.oa.dao.ProcessFlowDao&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">insert</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;insert&quot;</span> <span class=\"attr\">parameterType</span>=<span class=\"string\">&quot;com.lcg.oa.entity.ProcessFlow&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">useGeneratedKeys</span>=<span class=\"string\">&quot;true&quot;</span> <span class=\"attr\">keyColumn</span>=<span class=\"string\">&quot;process_id&quot;</span> <span class=\"attr\">keyProperty</span>=<span class=\"string\">&quot;processId&quot;</span>&gt;</span></span><br><span class=\"line\">      INSERT INTO adm_process_flow(form_id, operator_id, action, result, reason, create_time , audit_time , order_no , state,is_last)</span><br><span class=\"line\">      VALUES (#&#123;formId&#125;, #&#123;operatorId&#125;, #&#123;action&#125;, #&#123;result&#125;, #&#123;reason&#125;, #&#123;createTime&#125; , #&#123;auditTime&#125; , #&#123;orderNo&#125; , #&#123;state&#125; , #&#123;isLast&#125;);</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">insert</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">update</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;update&quot;</span> <span class=\"attr\">parameterType</span>=<span class=\"string\">&quot;com.lcg.oa.entity.ProcessFlow&quot;</span>&gt;</span></span><br><span class=\"line\">      UPDATE adm_process_flow SET form_id = #&#123;formId&#125;, operator_id = #&#123;operatorId&#125;, action = #&#123;action&#125;, result = #&#123;result&#125;, reason = #&#123;reason&#125;, create_time = #&#123;createTime&#125;, audit_time = #&#123;auditTime&#125;, order_no = #&#123;orderNo&#125;, state = #&#123;state&#125;, is_last = #&#123;isLast&#125;</span><br><span class=\"line\">      WHERE process_id = #&#123;processId&#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">update</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;selectByFormId&quot;</span> <span class=\"attr\">parameterType</span>=<span class=\"string\">&quot;Long&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;com.lcg.oa.entity.ProcessFlow&quot;</span>&gt;</span></span><br><span class=\"line\">        select * from adm_process_flow where form_id = #&#123;value&#125; order by order_no</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>◇notice.xml</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mapper</span> <span class=\"attr\">namespace</span>=<span class=\"string\">&quot;com.lcg.oa.dao.NoticeDao&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">insert</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;insert&quot;</span> <span class=\"attr\">parameterType</span>=<span class=\"string\">&quot;com.lcg.oa.entity.Notice&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">useGeneratedKeys</span>=<span class=\"string\">&quot;true&quot;</span> <span class=\"attr\">keyProperty</span>=<span class=\"string\">&quot;noticeId&quot;</span> <span class=\"attr\">keyColumn</span>=<span class=\"string\">&quot;notice_id&quot;</span>&gt;</span></span><br><span class=\"line\">        INSERT INTO sys_notice( receiver_id, content, create_time) VALUES (#&#123;receiverId&#125;, #&#123;content&#125;, #&#123;createTime&#125;)</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">insert</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;selectByReceiverId&quot;</span> <span class=\"attr\">parameterType</span>=<span class=\"string\">&quot;Long&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;com.lcg.oa.entity.Notice&quot;</span>&gt;</span></span><br><span class=\"line\">        select * from sys_notice where receiver_id = #&#123;value&#125; order by create_time desc limit 0,100</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"开发请假申请功能\"><a href=\"#开发请假申请功能\" class=\"headerlink\" title=\"开发请假申请功能\"></a>开发请假申请功能</h2><h3 id=\"前期准备\"><a href=\"#前期准备\" class=\"headerlink\" title=\"前期准备\"></a>前期准备</h3><p>◇EmployeeDao增加代码</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">    * 根据传入员工对象获取上级主管对象</span></span><br><span class=\"line\"><span class=\"comment\">    * <span class=\"doctag\">@param</span> employee 员工对象</span></span><br><span class=\"line\"><span class=\"comment\">    * <span class=\"doctag\">@return</span> 上级主管对象</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> Employee <span class=\"title\">selectLeader</span><span class=\"params\">(<span class=\"meta\">@Param(&quot;emp&quot;)</span> Employee employee)</span></span>;</span><br></pre></td></tr></table></figure>\n<p>◇在employee.xml中增加对应的sql语句</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;select id=<span class=\"string\">&quot;selectLeader&quot;</span> parameterType=<span class=\"string\">&quot;com.lcg.oa.entity.Employee&quot;</span> resultType=<span class=\"string\">&quot;com.lcg.oa.entity.Employee&quot;</span>&gt;</span><br><span class=\"line\">        select * from adm_employee</span><br><span class=\"line\">        where </span><br><span class=\"line\">        &lt;<span class=\"keyword\">if</span> test=<span class=\"string\">&quot;emp.level&amp;lt;7&quot;</span>&gt; &lt;!--<span class=\"string\">&#x27;&lt;&#x27;</span>的转义--&gt;</span><br><span class=\"line\">            level = <span class=\"number\">7</span> and department_id = #&#123;emp.departmentId&#125;</span><br><span class=\"line\">        &lt;/<span class=\"keyword\">if</span>&gt;</span><br><span class=\"line\">        &lt;<span class=\"keyword\">if</span> test=<span class=\"string\">&quot;emp.level == 7&quot;</span>&gt; </span><br><span class=\"line\">            level = <span class=\"number\">8</span></span><br><span class=\"line\">        &lt;/<span class=\"keyword\">if</span>&gt;</span><br><span class=\"line\">        &lt;<span class=\"keyword\">if</span> test=<span class=\"string\">&quot;emp.level == 8&quot;</span>&gt;</span><br><span class=\"line\">            employee_id = #&#123;emp.employeeId&#125;</span><br><span class=\"line\">        &lt;/<span class=\"keyword\">if</span>&gt;</span><br><span class=\"line\">    &lt;/select&gt;</span><br></pre></td></tr></table></figure>\n<p>◇新增业务常量，用来保存指定时间之类的数据</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BussinessConstants</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> MANAGER_AUDIT_HOURS=<span class=\"number\">36</span>;<span class=\"comment\">//总经理请假审批时间阈值</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"创建service\"><a href=\"#创建service\" class=\"headerlink\" title=\"创建service\"></a>创建service</h3><p>◇请假单流程服务LeaveFormService</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LeaveFormService</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 创建请假单</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> form 前端输入的请假单数据</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> 持久化后的请假单对象</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> LeaveForm <span class=\"title\">createLeaveForm</span><span class=\"params\">(LeaveForm form)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//1.持久化form表单数据,8级以下员工表单状态为processing,8级(总经理)状态为approved</span></span><br><span class=\"line\">        <span class=\"comment\">//2.增加第一条流程数据,说明表单已提交,状态为complete</span></span><br><span class=\"line\">        <span class=\"comment\">//3.分情况创建其余流程数据</span></span><br><span class=\"line\">        <span class=\"comment\">//3.1 7级以下员工,生成部门经理审批任务,请假时间大于72小时,还需生成总经理审批任务</span></span><br><span class=\"line\">        <span class=\"comment\">//3.2 7级员工,生成总经理审批任务</span></span><br><span class=\"line\">        <span class=\"comment\">//3.3 8级员工,生成总经理审批任务,系统自动通过</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"创建控制器\"><a href=\"#创建控制器\" class=\"headerlink\" title=\"创建控制器\"></a>创建控制器</h3><p>◇LeaveFormServlet</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@WebServlet(name = &quot;LeaveFormServlet&quot;,urlPatterns = &quot;/leave/*&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LeaveFormServlet</span> <span class=\"keyword\">extends</span> <span class=\"title\">HttpServlet</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> LeaveFormService leaveFormService = <span class=\"keyword\">new</span> LeaveFormService();</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Logger logger = LoggerFactory.getLogger(LeaveFormServlet.class);</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doPost</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">        </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doGet</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.doPost(request,response);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 创建请假单</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> request</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> response</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@throws</span> ServletException</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@throws</span> IOException</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">create</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//1. 接收各项请假单数据</span></span><br><span class=\"line\">        ...</span><br><span class=\"line\">            <span class=\"comment\">//2. 调用业务逻辑方法</span></span><br><span class=\"line\">            ...</span><br><span class=\"line\">        <span class=\"comment\">//3. 组织响应数据</span></span><br><span class=\"line\">            ...</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"实现请假申请功能\"><a href=\"#实现请假申请功能\" class=\"headerlink\" title=\"实现请假申请功能\"></a>实现请假申请功能</h2><p> ◇表单html文件部分代码 </p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">var</span> layDate = layui.laydate; <span class=\"comment\">//Layui日期选择框JS对象</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> layForm = layui.form; <span class=\"comment\">//layui表单对象</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> $ = layui.$; <span class=\"comment\">//jQuery对象</span></span><br><span class=\"line\">        <span class=\"comment\">//日期时间范围</span></span><br><span class=\"line\">        layDate.render(&#123;</span><br><span class=\"line\">            elem: <span class=\"string\">&#x27;#daterange&#x27;</span> <span class=\"comment\">//表示将id为daterange的文本框渲染成日期选择框</span></span><br><span class=\"line\">            ,type: <span class=\"string\">&#x27;datetime&#x27;</span>  <span class=\"comment\">//日期+时间</span></span><br><span class=\"line\">            ,range: <span class=\"keyword\">true</span></span><br><span class=\"line\">            ,format: <span class=\"string\">&#x27;yyyy年M月d日H时&#x27;</span></span><br><span class=\"line\">            ,done: function(value, start, end)&#123;<span class=\"comment\">//自动触发事件</span></span><br><span class=\"line\">                <span class=\"comment\">//选择日期后出发的时间,设置startTime与endTime隐藏域,按照服务器要求的格式</span></span><br><span class=\"line\">                <span class=\"keyword\">var</span> startTime = start.year + <span class=\"string\">&quot;-&quot;</span> + start.month + <span class=\"string\">&quot;-&quot;</span> + start.date + <span class=\"string\">&quot;-&quot;</span> + start.hours;</span><br><span class=\"line\">                <span class=\"keyword\">var</span> endTime = end.year + <span class=\"string\">&quot;-&quot;</span> + end.month + <span class=\"string\">&quot;-&quot;</span> + end.date + <span class=\"string\">&quot;-&quot;</span> + end.hours;</span><br><span class=\"line\">                console.info(<span class=\"string\">&quot;请假开始时间&quot;</span>,startTime);</span><br><span class=\"line\">                $(<span class=\"string\">&quot;#startTime&quot;</span>).val(startTime);</span><br><span class=\"line\">                console.info(<span class=\"string\">&quot;请假结束时间&quot;</span>,endTime);</span><br><span class=\"line\">                $(<span class=\"string\">&quot;#endTime&quot;</span>).val(endTime);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//表单提交时间,data.field由Layui提供可以获取表单所有数据，并封装成键值对</span></span><br><span class=\"line\">        layForm.on(<span class=\"string\">&#x27;submit(sub)&#x27;</span>, function(data)&#123;</span><br><span class=\"line\">            console.info(<span class=\"string\">&quot;向服务器提交的表单数据&quot;</span>,data.field);</span><br><span class=\"line\">            $.post(<span class=\"string\">&quot;/leave/create&quot;</span>,data.field,function (json) &#123;</span><br><span class=\"line\">                console.info(json);</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(json.code == <span class=\"string\">&quot;0&quot;</span>)&#123;</span><br><span class=\"line\">                    <span class=\"comment\">/*SweetAlert2确定对话框*/</span></span><br><span class=\"line\">                    swal(&#123;</span><br><span class=\"line\">                        type: <span class=\"string\">&#x27;success&#x27;</span>,</span><br><span class=\"line\">                        html: <span class=\"string\">&quot;&lt;h2&gt;请假单已提交,等待上级审批&lt;/h2&gt;&quot;</span>,</span><br><span class=\"line\">                        confirmButtonText: <span class=\"string\">&quot;确定&quot;</span></span><br><span class=\"line\">                    &#125;).then(function (result) &#123;<span class=\"comment\">//点击确定后的触发事件</span></span><br><span class=\"line\">                        window.location.href=<span class=\"string\">&quot;/forward/notice&quot;</span>;<span class=\"comment\">//跳转到指定路径</span></span><br><span class=\"line\">                    &#125;);</span><br><span class=\"line\">                &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                    swal(&#123;</span><br><span class=\"line\">                        type: <span class=\"string\">&#x27;warning&#x27;</span>,</span><br><span class=\"line\">                        html: <span class=\"string\">&quot;&lt;h2&gt;&quot;</span> + json.message + <span class=\"string\">&quot;&lt;/h2&gt;&quot;</span>,</span><br><span class=\"line\">                        confirmButtonText: <span class=\"string\">&quot;确定&quot;</span></span><br><span class=\"line\">                    &#125;);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;,<span class=\"string\">&quot;json&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n<p>◇<a href=\"https://sweetalert.js.org/\">sweetalert官网</a>,用来美化对话框<br>◇新增控制器ForwardServlet，通用的页面跳转的servlet，可以支持跳转多个页面</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@WebServlet(name = &quot;ForwardServlet&quot;,urlPatterns = &quot;/forward/*&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ForwardServlet</span> <span class=\"keyword\">extends</span> <span class=\"title\">HttpServlet</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doGet</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">        String uri = request.getRequestURI();</span><br><span class=\"line\">        <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">         * /forward/form</span></span><br><span class=\"line\"><span class=\"comment\">         * /forward/a/b/c/form</span></span><br><span class=\"line\"><span class=\"comment\">         */</span></span><br><span class=\"line\">        String subUri = uri.substring(<span class=\"number\">1</span>);<span class=\"comment\">// forward/form; forward/a/b/c/form</span></span><br><span class=\"line\">        String page = subUri.substring(subUri.indexOf(<span class=\"string\">&quot;/&quot;</span>));<span class=\"comment\">// /form; /a/b/c/form</span></span><br><span class=\"line\">        request.getRequestDispatcher(page+<span class=\"string\">&quot;.ftl&quot;</span>).forward(request,response);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>◇将数据库node表的url填上<br><img src=\"/p/d371/1629643640665-e8f0db6d-9480-4d4c-ac94-20b31826033a.png\" class=\"lazyload\" data-srcset=\"/p/d371/1629643640665-e8f0db6d-9480-4d4c-ac94-20b31826033a.png\" srcset=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=\" alt=\"image.png\"><br>◇修改index.ftl,将href改为${node.url}</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;a href=<span class=\"string\">&quot;$&#123;node.url&#125;&quot;</span> target=<span class=\"string\">&quot;ifmMain&quot;</span>&gt;$&#123;node.nodeName&#125;&lt;/a&gt;</span><br></pre></td></tr></table></figure>\n<h2 id=\"请假审批功能\"><a href=\"#请假审批功能\" class=\"headerlink\" title=\"请假审批功能\"></a>请假审批功能</h2><h3 id=\"新增sql语句\"><a href=\"#新增sql语句\" class=\"headerlink\" title=\"新增sql语句\"></a>新增sql语句</h3><p>◇在leave_form.xml中新增查询，多个参数（工作流程任务状态；经办人）查询请假单，由于查询的字段来自不同的表，所以返回类型也是map而非某个实体类</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;selectByParams&quot;</span> <span class=\"attr\">parameterType</span>=<span class=\"string\">&quot;java.util.Map&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;java.util.Map&quot;</span>&gt;</span></span><br><span class=\"line\">    select f.* ,e.name , d.*</span><br><span class=\"line\">    from</span><br><span class=\"line\">      adm_leave_form f,adm_process_flow pf , adm_employee e , adm_department d</span><br><span class=\"line\">    where</span><br><span class=\"line\">      f.form_id = pf.form_id</span><br><span class=\"line\">      and f.employee_id = e.employee_id</span><br><span class=\"line\">      and e.department_id = d.department_id</span><br><span class=\"line\">      and pf.state = #&#123;pf_state&#125; and pf.operator_id = #&#123;pf_operator_id&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>◇在Dao中增加相应的接口对应</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//多个参数采用注解形式说明其在xml中的参数类型,名称须一致</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> List&lt;Map&gt; <span class=\"title\">selectByParams</span><span class=\"params\">(<span class=\"meta\">@Param(&quot;pf_state&quot;)</span> String pfState, </span></span></span><br><span class=\"line\"><span class=\"params\"><span class=\"function\">                                <span class=\"meta\">@Param(&quot;pf_operator_id&quot;)</span> Long operatorId)</span></span>;</span><br></pre></td></tr></table></figure>\n<h3 id=\"修改Service\"><a href=\"#修改Service\" class=\"headerlink\" title=\"修改Service\"></a>修改Service</h3><p>◇在LeaveFormService中新增方法用来获取请假单</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">    * 获取指定任务状态及指定经办人对应的请假单列表</span></span><br><span class=\"line\"><span class=\"comment\">    * <span class=\"doctag\">@param</span> pfState ProcessFlow任务状态</span></span><br><span class=\"line\"><span class=\"comment\">    * <span class=\"doctag\">@param</span> operatorId 经办人编号</span></span><br><span class=\"line\"><span class=\"comment\">    * <span class=\"doctag\">@return</span> 请假单及相关数据列表</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> List&lt;Map&gt; <span class=\"title\">getLeaveFormList</span><span class=\"params\">(String pfState, Long operatorId)</span> </span>&#123;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> (List&lt;Map&gt;) MybatisUtils.executeQuery(sqlSession-&gt;&#123;</span><br><span class=\"line\">           LeaveFormDao dao = sqlSession.getMapper(LeaveFormDao.class);</span><br><span class=\"line\">           List&lt;Map&gt; formList = dao.selectByParams(pfState, operatorId);</span><br><span class=\"line\">           <span class=\"keyword\">return</span> formList;</span><br><span class=\"line\">       &#125;);</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<p>◇在Servlet中对service进行调用</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (methodName.equals(<span class=\"string\">&quot;create&quot;</span>)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.create(request,response);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (methodName.equals(<span class=\"string\">&quot;list&quot;</span>)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.getLeaveFormList(request, response);</span><br><span class=\"line\">        &#125; </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 查询需要审核的请假单列表</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> request</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> response</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@throws</span> ServletException</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@throws</span> IOException</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">getLeaveFormList</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">        User user = (User) request.getSession().getAttribute(<span class=\"string\">&quot;login_user&quot;</span>);</span><br><span class=\"line\">        List&lt;Map&gt; formList = leaveFormService.getLeaveFormList(<span class=\"string\">&quot;process&quot;</span>, user.getEmployeeId());</span><br><span class=\"line\">        Map result = <span class=\"keyword\">new</span> HashMap();</span><br><span class=\"line\">        <span class=\"comment\">//4个属性满足layUI数据表格的要求</span></span><br><span class=\"line\">        result.put(<span class=\"string\">&quot;code&quot;</span>, <span class=\"string\">&quot;0&quot;</span>);<span class=\"comment\">//表示服务器端处理成功</span></span><br><span class=\"line\">        result.put(<span class=\"string\">&quot;msg&quot;</span>, <span class=\"string\">&quot;&quot;</span>);<span class=\"comment\">//服务器返回的具体文本消息</span></span><br><span class=\"line\">        result.put(<span class=\"string\">&quot;count&quot;</span>, formList.size());<span class=\"comment\">//所有数据的总数</span></span><br><span class=\"line\">        result.put(<span class=\"string\">&quot;data&quot;</span>, formList);<span class=\"comment\">//显示的对象列表</span></span><br><span class=\"line\">        String json = JSON.toJSONString(result);</span><br><span class=\"line\">        response.getWriter().println(json);</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"新增ftl文件用来审批\"><a href=\"#新增ftl文件用来审批\" class=\"headerlink\" title=\"新增ftl文件用来审批\"></a>新增ftl文件用来审批</h3><p>◇部分代码</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> $ = layui.$;</span><br><span class=\"line\">    <span class=\"comment\">//将毫秒数转换为&quot;yyyy-MM-dd HH时&quot;字符串格式</span></span><br><span class=\"line\">    <span class=\"function\">function <span class=\"title\">formatDate</span><span class=\"params\">(time)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> newDate = <span class=\"keyword\">new</span> Date(time);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> newDate.getFullYear() + <span class=\"string\">&quot;-&quot;</span> +</span><br><span class=\"line\">            (newDate.getMonth() + <span class=\"number\">1</span>) + <span class=\"string\">&quot;-&quot;</span> + newDate.getDate()</span><br><span class=\"line\">            + <span class=\"string\">&quot; &quot;</span> + newDate.getHours() + <span class=\"string\">&quot;时&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// 将table渲染为数据表格</span></span><br><span class=\"line\">    layui.table.render(&#123;</span><br><span class=\"line\">        elem : <span class=\"string\">&quot;#grdFormList&quot;</span> , <span class=\"comment\">//选择器</span></span><br><span class=\"line\">        id : <span class=\"string\">&quot;grdFormList&quot;</span> , <span class=\"comment\">//id</span></span><br><span class=\"line\">        url : <span class=\"string\">&quot;/leave/list&quot;</span> , <span class=\"comment\">//ajax请求url</span></span><br><span class=\"line\">        page : <span class=\"keyword\">false</span> , <span class=\"comment\">//是否分页 true-是 false-否</span></span><br><span class=\"line\">        cols :[[ <span class=\"comment\">//列描述</span></span><br><span class=\"line\">            &#123;title : <span class=\"string\">&quot;&quot;</span> , width:<span class=\"number\">70</span> , style : <span class=\"string\">&quot;height:60px&quot;</span> , type:<span class=\"string\">&quot;numbers&quot;</span>&#125;, <span class=\"comment\">// numbers代表序号列</span></span><br><span class=\"line\">            &#123;field : <span class=\"string\">&quot;create_time&quot;</span> , title : <span class=\"string\">&quot;申请时间&quot;</span> , width : <span class=\"number\">150</span> , templet: function (d) &#123;</span><br><span class=\"line\">                <span class=\"comment\">//templet代表对数据进行加工后再显示</span></span><br><span class=\"line\">                <span class=\"keyword\">return</span> formatDate(d.create_time)</span><br><span class=\"line\">            &#125;&#125;,</span><br><span class=\"line\">            &#123;field : <span class=\"string\">&quot;form_type&quot;</span> , title : <span class=\"string\">&quot;类型&quot;</span> , width : <span class=\"number\">100</span> , templet: function(d)&#123;</span><br><span class=\"line\">                <span class=\"keyword\">switch</span> (d.form_type) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">case</span> <span class=\"number\">1</span>:</span><br><span class=\"line\">                        <span class=\"keyword\">return</span> <span class=\"string\">&quot;事假&quot;</span>;</span><br><span class=\"line\">                    <span class=\"keyword\">case</span> <span class=\"number\">2</span>:</span><br><span class=\"line\">                        <span class=\"keyword\">return</span> <span class=\"string\">&quot;病假&quot;</span>;</span><br><span class=\"line\">                    <span class=\"keyword\">case</span> <span class=\"number\">3</span>:</span><br><span class=\"line\">                        <span class=\"keyword\">return</span> <span class=\"string\">&quot;工伤假&quot;</span>;</span><br><span class=\"line\">                    <span class=\"keyword\">case</span> <span class=\"number\">4</span>:</span><br><span class=\"line\">                        <span class=\"keyword\">return</span> <span class=\"string\">&quot;婚假&quot;</span>;</span><br><span class=\"line\">                    <span class=\"keyword\">case</span> <span class=\"number\">5</span>:</span><br><span class=\"line\">                        <span class=\"keyword\">return</span> <span class=\"string\">&quot;产假&quot;</span>;</span><br><span class=\"line\">                    <span class=\"keyword\">case</span> <span class=\"number\">6</span>:</span><br><span class=\"line\">                        <span class=\"keyword\">return</span> <span class=\"string\">&quot;丧假&quot;</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;&#125;,</span><br><span class=\"line\">            &#123;field : <span class=\"string\">&quot;department_name&quot;</span> , title : <span class=\"string\">&quot;部门&quot;</span> , width : <span class=\"number\">100</span>&#125;,</span><br><span class=\"line\">            &#123;field : <span class=\"string\">&quot;name&quot;</span> , title : <span class=\"string\">&quot;员工&quot;</span> , width : <span class=\"number\">100</span>&#125;,</span><br><span class=\"line\">            &#123;field : <span class=\"string\">&quot;start_time&quot;</span> , title : <span class=\"string\">&quot;起始时间&quot;</span> , width : <span class=\"number\">150</span>, templet: function (d) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> formatDate(d.start_time)</span><br><span class=\"line\">                &#125;&#125;,</span><br><span class=\"line\">            &#123;field : <span class=\"string\">&quot;end_time&quot;</span> , title : <span class=\"string\">&quot;结束时间&quot;</span> , width : <span class=\"number\">150</span> , templet: function (d) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> formatDate(d.end_time)</span><br><span class=\"line\">                &#125;&#125;,</span><br><span class=\"line\">            &#123;field : <span class=\"string\">&quot;reason&quot;</span> , title : <span class=\"string\">&quot;请假原因&quot;</span> , width : <span class=\"number\">350</span> &#125;,</span><br><span class=\"line\">            &#123;title : <span class=\"string\">&quot;&quot;</span> , width:<span class=\"number\">150</span> ,type:<span class=\"string\">&quot;space&quot;</span> , templet : function(d)&#123;</span><br><span class=\"line\">                <span class=\"keyword\">var</span> strRec = JSON.stringify(d);</span><br><span class=\"line\">                console.info(<span class=\"string\">&quot;请假单数据&quot;</span>, strRec);</span><br><span class=\"line\">                <span class=\"comment\">//将请假单数据存放至data-laf属性中</span></span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"string\">&quot;&lt;button class=&#x27;layui-btn layui-btn-danger layui-btn-sm btn-audit&#x27; data-laf=&quot;</span> + strRec + <span class=\"string\">&quot; &gt;审批&lt;/button&gt;&quot;</span>;</span><br><span class=\"line\">            &#125;&#125;</span><br><span class=\"line\">        ]]</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 绑定每一行的审批按钮</span></span><br><span class=\"line\">    $(document).on(<span class=\"string\">&quot;click&quot;</span> , <span class=\"string\">&quot;.btn-audit&quot;</span> , function()&#123;</span><br><span class=\"line\">        <span class=\"comment\">//初始化表单</span></span><br><span class=\"line\">        $(<span class=\"string\">&quot;#divDialog form&quot;</span>)[<span class=\"number\">0</span>].reset();</span><br><span class=\"line\">        $(<span class=\"string\">&quot;#divDialog form form-item-value&quot;</span>).text(<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">//获取当前点击按钮的请假单数据,回填至显示项</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> laf = $(<span class=\"keyword\">this</span>).data(<span class=\"string\">&quot;laf&quot;</span>);</span><br><span class=\"line\">        $(<span class=\"string\">&quot;#dname&quot;</span>).text(laf.department_name);</span><br><span class=\"line\">        $(<span class=\"string\">&quot;#name&quot;</span>).text(laf.name);</span><br><span class=\"line\">        $(<span class=\"string\">&quot;#startTime&quot;</span>).text(formatDate(laf.start_time));</span><br><span class=\"line\">        $(<span class=\"string\">&quot;#endTime&quot;</span>).text(formatDate(laf.end_time));</span><br><span class=\"line\">        $(<span class=\"string\">&quot;#reason&quot;</span>).text(laf.reason);</span><br><span class=\"line\">        $(<span class=\"string\">&quot;#formId&quot;</span>).val(laf.form_id);</span><br><span class=\"line\">        <span class=\"comment\">//弹出layui对话框</span></span><br><span class=\"line\">        layui.layer.open(&#123;</span><br><span class=\"line\">            type : <span class=\"string\">&quot;1&quot;</span> , <span class=\"comment\">//页面层</span></span><br><span class=\"line\">            title : <span class=\"string\">&quot;请假审批&quot;</span> , <span class=\"comment\">//标题</span></span><br><span class=\"line\">            content : $(<span class=\"string\">&quot;#divDialog&quot;</span>) , <span class=\"comment\">//指定对话框容器对象</span></span><br><span class=\"line\">            area : [<span class=\"string\">&quot;500px&quot;</span> , <span class=\"string\">&quot;400px&quot;</span>] , <span class=\"comment\">//尺寸</span></span><br><span class=\"line\">            end : function()&#123; <span class=\"comment\">//销毁后触发事件</span></span><br><span class=\"line\">                $(<span class=\"string\">&quot;#divDialog&quot;</span>).hide();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 提交审批数据</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    layui.form.on(<span class=\"string\">&quot;submit(audit)&quot;</span> , function(data)&#123;</span><br><span class=\"line\">        $.ajax(&#123;</span><br><span class=\"line\">            url : <span class=\"string\">&quot;/leave/audit&quot;</span>, <span class=\"comment\">//审核URL</span></span><br><span class=\"line\">            data : data.field ,</span><br><span class=\"line\">            type : <span class=\"string\">&quot;post&quot;</span> ,</span><br><span class=\"line\">            success: function (json) &#123;</span><br><span class=\"line\">                <span class=\"comment\">//关闭所有layui对话框</span></span><br><span class=\"line\">                layui.layer.closeAll();</span><br><span class=\"line\">                <span class=\"comment\">//显示处理结果</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span>(json.code == <span class=\"string\">&quot;ok&quot;</span>)&#123;</span><br><span class=\"line\">                    swal(&#123;</span><br><span class=\"line\">                        type: <span class=\"string\">&#x27;success&#x27;</span>,</span><br><span class=\"line\">                        html: <span class=\"string\">&quot;&lt;h2&gt;请假已审批完毕&lt;/h2&gt;&quot;</span>,</span><br><span class=\"line\">                        confirmButtonText: <span class=\"string\">&quot;确定&quot;</span></span><br><span class=\"line\">                    &#125;).then(function (result) &#123;</span><br><span class=\"line\">                        window.location.href=<span class=\"string\">&quot;/forward/notice&quot;</span>;</span><br><span class=\"line\">                    &#125;);</span><br><span class=\"line\">                &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                    swal(&#123;</span><br><span class=\"line\">                        type: <span class=\"string\">&#x27;warning&#x27;</span>,</span><br><span class=\"line\">                        html: <span class=\"string\">&quot;&lt;h2&gt;&quot;</span> + json.msg + <span class=\"string\">&quot;&lt;/h2&gt;&quot;</span>,</span><br><span class=\"line\">                        confirmButtonText: <span class=\"string\">&quot;确定&quot;</span></span><br><span class=\"line\">                    &#125;);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<p>◇出现错误：Page template not found<br>可能是ftl文件没有找到；解决方法：重启Tomcat或者将ftl文件删除后重新创建再重启Tomcat</p>\n<h2 id=\"实现审批业务逻辑\"><a href=\"#实现审批业务逻辑\" class=\"headerlink\" title=\"实现审批业务逻辑\"></a>实现审批业务逻辑</h2><h3 id=\"审批流程可能出现的三种情况\"><a href=\"#审批流程可能出现的三种情况\" class=\"headerlink\" title=\"审批流程可能出现的三种情况\"></a>审批流程可能出现的三种情况</h3><p>①需要总经理审批的，中间节点处理完成，并且部门经理审批通过，则后续节点reday-&gt;process<br>②中间节点有驳回，则后续所有节点变为cancel<br>③如果当前节点是最后一个，无论审批通过还是拒绝，执行完以后整个流程都会结束，所有节点状态都变为complete，同时表单状态变为处理结果</p>\n<h3 id=\"代码实现\"><a href=\"#代码实现\" class=\"headerlink\" title=\"代码实现\"></a>代码实现</h3><p>–在process_flow.xml中新增查询语句，通过FormId查询所有的处理表单数据，并且新增更新语句，用来更新任务状态</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">update</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;update&quot;</span> <span class=\"attr\">parameterType</span>=<span class=\"string\">&quot;com.lcg.oa.entity.ProcessFlow&quot;</span>&gt;</span></span><br><span class=\"line\">      UPDATE adm_process_flow SET form_id = #&#123;formId&#125;, operator_id = #&#123;operatorId&#125;, action = #&#123;action&#125;, result = #&#123;result&#125;, reason = #&#123;reason&#125;, create_time = #&#123;createTime&#125;, audit_time = #&#123;auditTime&#125;, order_no = #&#123;orderNo&#125;, state = #&#123;state&#125;, is_last = #&#123;isLast&#125;</span><br><span class=\"line\">      WHERE process_id = #&#123;processId&#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">update</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;selectByFormId&quot;</span> <span class=\"attr\">parameterType</span>=<span class=\"string\">&quot;Long&quot;</span> <span class=\"attr\">resultType</span>=<span class=\"string\">&quot;com.lcg.oa.entity.ProcessFlow&quot;</span>&gt;</span></span><br><span class=\"line\">        select * from adm_process_flow where form_id = #&#123;value&#125; order by order_no</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>–在接口中将刚才新增的两条查询语句的方法写上</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> LeaveForm <span class=\"title\">selectById</span><span class=\"params\">(Long formId)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">update</span><span class=\"params\">(LeaveForm form)</span></span>;</span><br></pre></td></tr></table></figure>\n<p>–在leave_form.xml在新增sql语句</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;select id=<span class=\"string\">&quot;selectById&quot;</span> parameterType=<span class=\"string\">&quot;Long&quot;</span> resultType=<span class=\"string\">&quot;com.imooc.oa.entity.LeaveForm&quot;</span>&gt;</span><br><span class=\"line\">        select * from adm_leave_form where form_id = #&#123;value&#125;</span><br><span class=\"line\">    &lt;/select&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;update id=<span class=\"string\">&quot;update&quot;</span> parameterType=<span class=\"string\">&quot;com.imooc.oa.entity.LeaveForm&quot;</span>&gt;</span><br><span class=\"line\">        UPDATE adm_leave_form SET employee_id = #&#123;employeeId&#125; , form_type = #&#123;formType&#125;, start_time = #&#123;startTime&#125;, end_time = #&#123;endTime&#125;, reason = #&#123;reason&#125;, state = #&#123;state&#125; ,create_time = #&#123;createTime&#125; WHERE form_id = #&#123;formId&#125;</span><br><span class=\"line\">    &lt;/update&gt;</span><br></pre></td></tr></table></figure>\n<p>–在LeaveForm中新增对应的方法</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> LeaveForm <span class=\"title\">selectById</span><span class=\"params\">(Long formId)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">update</span><span class=\"params\">(LeaveForm form)</span></span>;</span><br></pre></td></tr></table></figure>\n<p>–在LeaveFormService中新增方法，部分代码</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 审核请假单</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> formId 表单编号</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> operatorId 经办人(当前登录员工)</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> result 审批结果</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> reason 审批意见</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">audit</span><span class=\"params\">(Long formId , Long operatorId , String result , String reason)</span></span>&#123;</span><br><span class=\"line\">        MybatisUtils.executeUpdate(sqlSession-&gt;&#123;</span><br><span class=\"line\">            <span class=\"comment\">//1.无论同意/驳回，当前任务状态变更为complete</span></span><br><span class=\"line\">            <span class=\"comment\">//2.如果当前任务是最后一个节点，代表流程结束，更新请假单状态为对应的approve/refused</span></span><br><span class=\"line\">            <span class=\"comment\">//3.如果当前任务不是最后一个节点且审批通过，那下一个节点的状态：ready-&gt;process</span></span><br><span class=\"line\">            <span class=\"comment\">//4.如果当前任务不是最后一个节点且审批驳回，则后续所有任务状态变为cancel，请假单状态变为refused</span></span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"完整实现请假审批\"><a href=\"#完整实现请假审批\" class=\"headerlink\" title=\"完整实现请假审批\"></a>完整实现请假审批</h3><p>◇在LeaveFormServlet中新建方法用来处理审批操作</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 处理审批操作</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> request</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> response</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@throws</span> ServletException</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@throws</span> IOException</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">audit</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">        String formId = request.getParameter(<span class=\"string\">&quot;formId&quot;</span>);</span><br><span class=\"line\">        String result = request.getParameter(<span class=\"string\">&quot;result&quot;</span>);</span><br><span class=\"line\">        String reason = request.getParameter(<span class=\"string\">&quot;reason&quot;</span>);</span><br><span class=\"line\">        User user = (User)request.getSession().getAttribute(<span class=\"string\">&quot;login_user&quot;</span>);</span><br><span class=\"line\">        Map mpResult = <span class=\"keyword\">new</span> HashMap();</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            leaveFormService.audit(Long.parseLong(formId), user.getEmployeeId(), result, reason);</span><br><span class=\"line\">            mpResult.put(<span class=\"string\">&quot;code&quot;</span>, <span class=\"string\">&quot;0&quot;</span>);</span><br><span class=\"line\">            mpResult.put(<span class=\"string\">&quot;message&quot;</span>, <span class=\"string\">&quot;success&quot;</span>);</span><br><span class=\"line\">        &#125;<span class=\"keyword\">catch</span>(Exception e)&#123;</span><br><span class=\"line\">            logger.error(<span class=\"string\">&quot;请假单审核失败&quot;</span>,e);</span><br><span class=\"line\">            mpResult.put(<span class=\"string\">&quot;code&quot;</span>, e.getClass().getSimpleName());</span><br><span class=\"line\">            mpResult.put(<span class=\"string\">&quot;message&quot;</span>, e.getMessage());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        String json = JSON.toJSONString(mpResult);</span><br><span class=\"line\">        response.getWriter().println(json);</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<p>◇url绑定</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (methodName.equals(<span class=\"string\">&quot;audit&quot;</span>)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.audit(request, response);</span><br><span class=\"line\">        &#125;</span><br></pre></td></tr></table></figure>\n<p>◇修改audit.ftl，新增dataType；</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">url : <span class=\"string\">&quot;/leave/audit&quot;</span>, <span class=\"comment\">//审核URL</span></span><br><span class=\"line\">            data : data.field ,</span><br><span class=\"line\">            type : <span class=\"string\">&quot;post&quot;</span> ,</span><br><span class=\"line\">            dataType :<span class=\"string\">&quot;json&quot;</span>, <span class=\"comment\">//服务器返回类型为json字符串</span></span><br></pre></td></tr></table></figure>\n<p>◇将成功的判断条件由”ok”改为<strong>if</strong>(json.<strong>code <strong>== <strong>“0”</strong>){<em>//0，代表成功，与后台一致</em><br>◇将提示信息由</strong>html</strong>: **”</p><h2>“ **+ json.msg + <strong>“</strong></h2>“,改为 json.**message **<p></p>\n<h2 id=\"开发系统通知功能\"><a href=\"#开发系统通知功能\" class=\"headerlink\" title=\"开发系统通知功能\"></a>开发系统通知功能</h2><h3 id=\"创建系统消息\"><a href=\"#创建系统消息\" class=\"headerlink\" title=\"创建系统消息\"></a>创建系统消息</h3><p>◇消息的触发时机：①当员工提交请假申请时；②当请假流程中间节点发生变化时<br>◇部分代码<br>–请假申请时</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"> <span class=\"comment\">//String.format用于输出指定格式的字符串</span></span><br><span class=\"line\"> String noticeContent = String.format(<span class=\"string\">&quot;您的请假申请[%s-%s]已提交，请等待上机审批.&quot;</span></span><br><span class=\"line\">        ,sdf.format(form.getStartTime()), sdf.format(form.getEndTime()));</span><br><span class=\"line\">noticeDao.insert(<span class=\"keyword\">new</span> Notice(employee.getEmployeeId(),noticeContent));<span class=\"comment\">//存放数据库</span></span><br><span class=\"line\"><span class=\"comment\">//通知部门经理审批</span></span><br><span class=\"line\">noticeContent = String.format(<span class=\"string\">&quot;%s-%s提起请假申请[%s-%s],请尽快审批&quot;</span></span><br><span class=\"line\">        ,employee.getTitle(),employee.getName(),sdf.format(form.getStartTime())</span><br><span class=\"line\">         ,sdf.format(form.getEndTime()));</span><br><span class=\"line\"> noticeDao.insert(<span class=\"keyword\">new</span> Notice(dmanger.getEmployeeId(),noticeContent));</span><br></pre></td></tr></table></figure>\n<p>–审批直接完成时</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//2.如果当前任务是最后一个节点，代表流程结束，更新请假单状态为对应的approve/refused</span></span><br><span class=\"line\">LeaveFormDao leaveFormDao = sqlSession.getMapper(LeaveFormDao.class);</span><br><span class=\"line\">LeaveForm form = leaveFormDao.selectById(formId);</span><br><span class=\"line\">SimpleDateFormat sdf = <span class=\"keyword\">new</span> SimpleDateFormat(<span class=\"string\">&quot;yyyy-MM-dd-HH时&quot;</span>);</span><br><span class=\"line\">EmployeeDao employeeDao = sqlSession.getMapper(EmployeeDao.class);</span><br><span class=\"line\">Employee employee = employeeDao.selectById(form.getEmployeeId());<span class=\"comment\">//表单提交人信息</span></span><br><span class=\"line\">Employee operator = employeeDao.selectById(operatorId);<span class=\"comment\">//任务经办人信息</span></span><br><span class=\"line\">NoticeDao noticeDao = sqlSession.getMapper(NoticeDao.class);</span><br><span class=\"line\"><span class=\"keyword\">if</span> (process.getIsLast() == <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">    form.setState(result);<span class=\"comment\">//approve|refused</span></span><br><span class=\"line\">    leaveFormDao.update(form);</span><br><span class=\"line\">    String strResult = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (result.equals(<span class=\"string\">&quot;approve&quot;</span>)) &#123;</span><br><span class=\"line\">        strResult = <span class=\"string\">&quot;批准&quot;</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (result.equals(<span class=\"string\">&quot;refused&quot;</span>)) &#123;</span><br><span class=\"line\">        strResult = <span class=\"string\">&quot;驳回&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    String noticeContent = </span><br><span class=\"line\">        String.format(<span class=\"string\">&quot;您的请假申请[%s-%s]%s%s已%s,审批意见:%S,审批流程已结束&quot;</span></span><br><span class=\"line\">        ,sdf.format(form.getStartTime()), sdf.format(form.getEndTime())</span><br><span class=\"line\">        ,operator.getTitle(),operator.getName(),strResult,reason);<span class=\"comment\">//发给表单提交人的通知</span></span><br><span class=\"line\">    noticeDao.insert(<span class=\"keyword\">new</span> Notice(form.getEmployeeId(),noticeContent));</span><br><span class=\"line\">    <span class=\"comment\">//发给审批人的通知</span></span><br><span class=\"line\">    noticeContent = </span><br><span class=\"line\">        String.format(<span class=\"string\">&quot;%s-%s提起请假申请[%s-%s]您已%s,审批意见:%s,审批流程已结束&quot;</span> ,</span><br><span class=\"line\">         employee.getTitle() , employee.getName() , sdf.format( form.getStartTime()) </span><br><span class=\"line\">          , sdf.format(form.getEndTime()), strResult , reason);</span><br><span class=\"line\">    noticeDao.insert(<span class=\"keyword\">new</span> Notice(operator.getEmployeeId(),noticeContent));</span><br></pre></td></tr></table></figure>\n<p>–审批还需要总经理处理时</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//3.如果当前任务不是最后一个节点且审批通过</span></span><br><span class=\"line\"> <span class=\"keyword\">if</span> (result.equals(<span class=\"string\">&quot;approved&quot;</span>)) &#123;</span><br><span class=\"line\"><span class=\"comment\">//消息1: 通知表单提交人,部门经理已经审批通过,交由上级继续审批</span></span><br><span class=\"line\">String noticeContent1 = </span><br><span class=\"line\">    String.format(<span class=\"string\">&quot;您的请假申请[%s-%s]%s%s已批准,审批意见:%s ,请继续等待上级审批&quot;</span> ,</span><br><span class=\"line\">                  sdf.format(form.getStartTime()) , sdf.format(form.getEndTime()),</span><br><span class=\"line\">                  operator.getTitle() , operator.getName(),reason);</span><br><span class=\"line\">noticeDao.insert(<span class=\"keyword\">new</span> Notice(form.getEmployeeId(),noticeContent1));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//消息2: 通知总经理有新的审批任务</span></span><br><span class=\"line\">String noticeContent2 = </span><br><span class=\"line\">    String.format(<span class=\"string\">&quot;%s-%s提起请假申请[%s-%s],请尽快审批&quot;</span> ,</span><br><span class=\"line\">         employee.getTitle() , employee.getName() , sdf.format( form.getStartTime())</span><br><span class=\"line\">                  , sdf.format(form.getEndTime()));</span><br><span class=\"line\">noticeDao.insert(<span class=\"keyword\">new</span> Notice(readyProcess.getOperatorId(),noticeContent2));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//消息3: 通知部门经理(当前经办人),员工的申请单你已批准,交由上级继续审批</span></span><br><span class=\"line\">String noticeContent3 =</span><br><span class=\"line\">    String.format(<span class=\"string\">&quot;%s-%s提起请假申请[%s-%s]您已批准,审批意见:%s,申请转至上级领导继续审批&quot;</span> ,</span><br><span class=\"line\">         employee.getTitle() , employee.getName()</span><br><span class=\"line\">           , sdf.format( form.getStartTime()) , sdf.format(form.getEndTime()), reason);</span><br><span class=\"line\">noticeDao.insert(<span class=\"keyword\">new</span> Notice(operator.getEmployeeId(),noticeContent3));</span><br><span class=\"line\"> &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(result.equals(<span class=\"string\">&quot;refused&quot;</span>)) &#123;</span><br><span class=\"line\">     <span class=\"comment\">//4.如果当前任务不是最后一个节点且审批驳回</span></span><br><span class=\"line\">     <span class=\"keyword\">for</span>(ProcessFlow p:readyList)&#123;</span><br><span class=\"line\">         p.setState(<span class=\"string\">&quot;cancel&quot;</span>);</span><br><span class=\"line\">         processFlowDao.update(p);</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">     form.setState(<span class=\"string\">&quot;refused&quot;</span>);</span><br><span class=\"line\">     leaveFormDao.update(form);</span><br><span class=\"line\">     <span class=\"comment\">//消息1: 通知申请人表单已被驳回</span></span><br><span class=\"line\">     String noticeContent1 = </span><br><span class=\"line\">         String.format(<span class=\"string\">&quot;您的请假申请[%s-%s]%s%s已驳回,审批意见:%s,审批流程已结束&quot;</span> ,</span><br><span class=\"line\">                       sdf.format(form.getStartTime()) , sdf.format(form.getEndTime()),</span><br><span class=\"line\">                       operator.getTitle() , operator.getName(),reason);</span><br><span class=\"line\">     noticeDao.insert(<span class=\"keyword\">new</span> Notice(form.getEmployeeId(),noticeContent1));</span><br><span class=\"line\"></span><br><span class=\"line\">     <span class=\"comment\">//消息2: 通知经办人表单&quot;您已驳回&quot;</span></span><br><span class=\"line\">     String noticeContent2 = </span><br><span class=\"line\">         String.format(<span class=\"string\">&quot;%s-%s提起请假申请[%s-%s]您已驳回,审批意见:%s,审批流程已结束&quot;</span> ,</span><br><span class=\"line\">     employee.getTitle() , employee.getName() , sdf.format( form.getStartTime()) </span><br><span class=\"line\">                       , sdf.format(form.getEndTime()), reason);</span><br><span class=\"line\">     noticeDao.insert(<span class=\"keyword\">new</span> Notice(operator.getEmployeeId(),noticeContent2));</span><br><span class=\"line\">                &#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"显示系统消息\"><a href=\"#显示系统消息\" class=\"headerlink\" title=\"显示系统消息\"></a>显示系统消息</h3><p>◇在notice.xml中新增查询语句</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;select id=<span class=\"string\">&quot;selectByReceiverId&quot;</span> parameterType=<span class=\"string\">&quot;Long&quot;</span> resultType=<span class=\"string\">&quot;com.lcg.oa.entity.Notice&quot;</span>&gt;</span><br><span class=\"line\">        select * from sys_notice where receiver_id = #&#123;value&#125; order by create_time desc limit <span class=\"number\">0</span>,<span class=\"number\">100</span></span><br><span class=\"line\">    &lt;/select&gt;</span><br></pre></td></tr></table></figure>\n<p>◇在dao中进行定义</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> List&lt;Notice&gt; <span class=\"title\">selectByReceiverId</span><span class=\"params\">(Long receiverId)</span></span>;</span><br></pre></td></tr></table></figure>\n<p>◇新增NoticeService</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 消息服务</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">NoticeService</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 查询指定员工的系统消息</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> receiverId</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> 最近100条消息列表</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> List&lt;Notice&gt; <span class=\"title\">getNoticeList</span><span class=\"params\">(Long receiverId)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (List)MybatisUtils.executeQuery(sqlSession -&gt; &#123;</span><br><span class=\"line\">            NoticeDao noticeDao = sqlSession.getMapper(NoticeDao.class);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> noticeDao.selectByReceiverId(receiverId);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>◇创建NoticeServlet向客户端返回数据</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@WebServlet(name = &quot;NoticeServlet&quot; , urlPatterns = &quot;/notice/list&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">NoticeServlet</span> <span class=\"keyword\">extends</span> <span class=\"title\">HttpServlet</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> NoticeService noticeService = <span class=\"keyword\">new</span> NoticeService();</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doPost</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">doGet</span><span class=\"params\">(HttpServletRequest request, HttpServletResponse response)</span> <span class=\"keyword\">throws</span> ServletException, IOException </span>&#123;</span><br><span class=\"line\">        User user = (User)request.getSession().getAttribute(<span class=\"string\">&quot;login_user&quot;</span>);</span><br><span class=\"line\">        List&lt;Notice&gt; noticeList = noticeService.getNoticeList(user.getEmployeeId());</span><br><span class=\"line\">        Map result = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">        result.put(<span class=\"string\">&quot;code&quot;</span>, <span class=\"string\">&quot;0&quot;</span>);</span><br><span class=\"line\">        result.put(<span class=\"string\">&quot;msg&quot;</span>, <span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\">        result.put(<span class=\"string\">&quot;count&quot;</span>, noticeList.size());</span><br><span class=\"line\">        result.put(<span class=\"string\">&quot;data&quot;</span>, noticeList);</span><br><span class=\"line\">        String json = JSON.toJSONString(result);</span><br><span class=\"line\">        response.setContentType(<span class=\"string\">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class=\"line\">        response.getWriter().println(json);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>◇notice.ftl页面部分代码</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    layui.table.render(&#123;</span><br><span class=\"line\">        elem : <span class=\"string\">&quot;#grdNoticeList&quot;</span> ,</span><br><span class=\"line\">        id : <span class=\"string\">&quot;grdNoticeList&quot;</span> ,</span><br><span class=\"line\">        url : <span class=\"string\">&quot;/notice/list&quot;</span> ,<span class=\"comment\">//请求数据的地址</span></span><br><span class=\"line\">        page : <span class=\"keyword\">false</span> ,</span><br><span class=\"line\">        cols :[[</span><br><span class=\"line\">            &#123;field : <span class=\"string\">&quot;&quot;</span> , title : <span class=\"string\">&quot;序号&quot;</span> , width:<span class=\"string\">&quot;10%&quot;</span> , style : <span class=\"string\">&quot;height:60px&quot;</span> , type:<span class=\"string\">&quot;numbers&quot;</span>&#125;,</span><br><span class=\"line\">            &#123;field : <span class=\"string\">&quot;create_time&quot;</span> , title : <span class=\"string\">&quot;通知时间&quot;</span> , width : <span class=\"string\">&quot;20%&quot;</span> , templet: function (d) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">var</span> newDate = <span class=\"keyword\">new</span> Date(d.createTime);</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> newDate.getFullYear() + <span class=\"string\">&quot;-&quot;</span> +</span><br><span class=\"line\">                        (newDate.getMonth() + <span class=\"number\">1</span>) + <span class=\"string\">&quot;-&quot;</span> + newDate.getDate()</span><br><span class=\"line\">                        + <span class=\"string\">&quot; &quot;</span> + newDate.getHours() + <span class=\"string\">&quot;:&quot;</span> + newDate.getMinutes() + <span class=\"string\">&quot;:&quot;</span> + newDate.getSeconds();</span><br><span class=\"line\">                &#125;&#125;,</span><br><span class=\"line\">            &#123;field : <span class=\"string\">&quot;content&quot;</span> , title : <span class=\"string\">&quot;通知内容&quot;</span> , width : <span class=\"string\">&quot;60%&quot;</span>&#125;</span><br><span class=\"line\">        ]]</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<p>◇修改index.ftl使用户一登录就能看到通知消息，即将首页内置框架绑定到notice上</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;!--主体部分采用iframe嵌入其他页面--&gt;</span><br><span class=\"line\">   &lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">&quot;layui-body&quot;</span> style=<span class=\"string\">&quot;overflow-y: hidden&quot;</span>&gt;</span><br><span class=\"line\">       &lt;iframe name=<span class=\"string\">&quot;ifmMain&quot;</span> src=<span class=\"string\">&quot;/forward/notice&quot;</span> style=<span class=\"string\">&quot;...&quot;</span>&gt;&lt;/iframe&gt;</span><br><span class=\"line\">   &lt;/div&gt;</span><br></pre></td></tr></table></figure>\n\n\n\n\n","categories":["Java数据库","OA系统项目"],"tags":["MyBaits"]}]